---
uid: whitepapers/mvc4-release-notes
title: ASP.NET MVC 4 | Microsoft Docs
author: rick-anderson
description: 本文件說明 ASP.NET MVC 4 的版本。
ms.author: riande
ms.date: 09/09/2011
ms.assetid: f014524f-25c0-4094-b8e1-886d99536f00
msc.legacyurl: /whitepapers/mvc4-release-notes
msc.type: content
ms.openlocfilehash: b57480bd0274fbb76c600dfb0dd09037bdcbf1e7
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 05/06/2019
ms.locfileid: "65130515"
---
# <a name="aspnet-mvc-4"></a><span data-ttu-id="cf9fe-103">ASP.NET MVC 4</span><span class="sxs-lookup"><span data-stu-id="cf9fe-103">ASP.NET MVC 4</span></span>

> <span data-ttu-id="cf9fe-104">本文件說明 ASP.NET MVC 4 的版本。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-104">This document describes the release of ASP.NET MVC 4 .</span></span>

- [<span data-ttu-id="cf9fe-105">安裝注意事項</span><span class="sxs-lookup"><span data-stu-id="cf9fe-105">Installation Notes</span></span>](#_Toc303253802)
- [<span data-ttu-id="cf9fe-106">文件</span><span class="sxs-lookup"><span data-stu-id="cf9fe-106">Documentation</span></span>](#_Toc303253803)
- [<span data-ttu-id="cf9fe-107">支援</span><span class="sxs-lookup"><span data-stu-id="cf9fe-107">Support</span></span>](#_Toc303253804)
- [<span data-ttu-id="cf9fe-108">軟體需求</span><span class="sxs-lookup"><span data-stu-id="cf9fe-108">Software Requirements</span></span>](#_Toc303253805)
- [<span data-ttu-id="cf9fe-109">ASP.NET MVC 4 中的新功能</span><span class="sxs-lookup"><span data-stu-id="cf9fe-109">New Features in ASP.NET MVC 4</span></span>](#_Toc303253807)

    - [<span data-ttu-id="cf9fe-110">ASP.NET Web API</span><span class="sxs-lookup"><span data-stu-id="cf9fe-110">ASP.NET Web API</span></span>](#_Toc317096197)
    - [<span data-ttu-id="cf9fe-111">預設專案範本的增強功能</span><span class="sxs-lookup"><span data-stu-id="cf9fe-111">Enhancements to Default Project Templates</span></span>](#_Toc303253808)
    - [<span data-ttu-id="cf9fe-112">行動裝置專案範本</span><span class="sxs-lookup"><span data-stu-id="cf9fe-112">Mobile Project Template</span></span>](#_Toc303253809)
    - [<span data-ttu-id="cf9fe-113">顯示模式</span><span class="sxs-lookup"><span data-stu-id="cf9fe-113">Display Modes</span></span>](#_Toc303253810)
    - [<span data-ttu-id="cf9fe-114">jQuery Mobile，檢視切換器，以及瀏覽器覆寫</span><span class="sxs-lookup"><span data-stu-id="cf9fe-114">jQuery Mobile, the View Switcher, and Browser Overriding</span></span>](#_Toc303253811)
    - [<span data-ttu-id="cf9fe-115">非同步控制器的的工作支援</span><span class="sxs-lookup"><span data-stu-id="cf9fe-115">Task Support for Asynchronous Controllers</span></span>](#_Toc303253813)
    - [<span data-ttu-id="cf9fe-116">Azure SDK</span><span class="sxs-lookup"><span data-stu-id="cf9fe-116">Azure SDK</span></span>](#_Toc303253814)
    - [<span data-ttu-id="cf9fe-117">資料庫移轉</span><span class="sxs-lookup"><span data-stu-id="cf9fe-117">Database Migrations</span></span>](#_Toc303253818)
    - [<span data-ttu-id="cf9fe-118">空白專案範本</span><span class="sxs-lookup"><span data-stu-id="cf9fe-118">Empty Project Template</span></span>](#_Toc303253819)
    - [<span data-ttu-id="cf9fe-119">將控制器新增至任何專案資料夾</span><span class="sxs-lookup"><span data-stu-id="cf9fe-119">Add Controller to any project folder</span></span>](#_Toc303253820)
    - [<span data-ttu-id="cf9fe-120">統合和縮製</span><span class="sxs-lookup"><span data-stu-id="cf9fe-120">Bundling and Minification</span></span>](#_Toc303253821)
    - [<span data-ttu-id="cf9fe-121">啟用登入和來自 Facebook 與其他站台使用 OAuth 和 OpenID</span><span class="sxs-lookup"><span data-stu-id="cf9fe-121">Enabling Logins from Facebook and Other Sites Using OAuth and OpenID</span></span>](#_Toc303253822)
- [<span data-ttu-id="cf9fe-122">將 ASP.NET MVC 3 專案升級至 ASP.NET MVC 4</span><span class="sxs-lookup"><span data-stu-id="cf9fe-122">Upgrading an ASP.NET MVC 3 Project to ASP.NET MVC 4</span></span>](#_Toc303253806)
- [<span data-ttu-id="cf9fe-123">從 ASP.NET MVC 4 發行候選版本的變更</span><span class="sxs-lookup"><span data-stu-id="cf9fe-123">Changes from ASP.NET MVC 4 Release Candidate</span></span>](#_Toc303253817)
- [<span data-ttu-id="cf9fe-124">已知的問題和重大變更</span><span class="sxs-lookup"><span data-stu-id="cf9fe-124">Known Issues and Breaking Changes</span></span>](#_Toc303253815)

<a id="_Toc303253802"></a>
## <a name="installation-notes"></a><span data-ttu-id="cf9fe-125">安裝注意事項</span><span class="sxs-lookup"><span data-stu-id="cf9fe-125">Installation Notes</span></span>

<span data-ttu-id="cf9fe-126">您可以從安裝 ASP.NET MVC 4 for Visual Studio 2010 [ASP.NET MVC 4 首頁](../mvc/mvc4.md)使用 Web Platform Installer。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-126">ASP.NET MVC 4 for Visual Studio 2010 can be installed from the [ASP.NET MVC 4 home page](../mvc/mvc4.md) using the Web Platform Installer.</span></span>

<span data-ttu-id="cf9fe-127">我們建議您解除安裝任何先前安裝的預覽安裝 ASP.NET MVC 4 之前的 ASP.NET MVC 4。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-127">We recommend uninstalling any previously installed previews of ASP.NET MVC 4 prior to installing ASP.NET MVC 4.</span></span> <span data-ttu-id="cf9fe-128">您可以為 ASP.NET MVC 4 升級 ASP.NET MVC 4 beta 版及 Release Candidate，但不解除安裝。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-128">You can upgrade the ASP.NET MVC 4 Beta and Release Candidate to ASP.NET MVC 4 without uninstalling.</span></span>

<span data-ttu-id="cf9fe-129">此版本不相容於.NET Framework 4.5 的任何預覽版本。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-129">This release is not compatible with any preview releases of .NET Framework 4.5.</span></span> <span data-ttu-id="cf9fe-130">您分開必須升級任何已安裝的預覽版本的.NET Framework 4.5 安裝 ASP.NET MVC 4 之前的最後一個版本。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-130">You must separately upgrade the any installed preview releases of .NET Framework 4.5 to the final version prior to installing ASP.NET MVC 4.</span></span>

<span data-ttu-id="cf9fe-131">ASP.NET MVC 4 可以安裝和執行的並行使用 ASP.NET MVC 3。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-131">ASP.NET MVC 4 can be installed and run side-by-side with ASP.NET MVC 3.</span></span>

<a id="_Toc303253803"></a>
## <a name="documentation"></a><span data-ttu-id="cf9fe-132">文件</span><span class="sxs-lookup"><span data-stu-id="cf9fe-132">Documentation</span></span>

<span data-ttu-id="cf9fe-133">ASP.NET mvc 的文件位於 MSDN 網站，下列 URL:</span><span class="sxs-lookup"><span data-stu-id="cf9fe-133">Documentation for ASP.NET MVC is available on the MSDN website at the following URL:</span></span>

[https://go.microsoft.com/fwlink/?LinkID=243043](https://go.microsoft.com/fwlink/?LinkID=243043)

<span data-ttu-id="cf9fe-134">教學課程和 ASP.NET MVC 的其他資訊位於 ASP.NET 網站的 MVC 4 頁 ([https://www.asp.net/mvc/mvc4](../mvc/mvc4.md))。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-134">Tutorials and other information about ASP.NET MVC are available on the MVC 4 page of the ASP.NET website ([https://www.asp.net/mvc/mvc4](../mvc/mvc4.md)).</span></span>

<a id="_Toc303253804"></a>
## <a name="support"></a><span data-ttu-id="cf9fe-135">支援</span><span class="sxs-lookup"><span data-stu-id="cf9fe-135">Support</span></span>

<span data-ttu-id="cf9fe-136">完全支援 ASP.NET MVC 4。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-136">ASP.NET MVC 4 is fully supported.</span></span> <span data-ttu-id="cf9fe-137">如果您有使用此版本的相關問題您可以也將其張貼至 ASP.NET MVC 論壇 ([https://forums.asp.net/1146.aspx](https://forums.asp.net/1146.aspx))，其中的 ASP.NET 社群成員可經常提供非正式的支援。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-137">If you have questions about working with this release you can also post them to the ASP.NET MVC forum ([https://forums.asp.net/1146.aspx](https://forums.asp.net/1146.aspx)), where members of the ASP.NET community are frequently able to provide informal support.</span></span>

<a id="_Toc303253805"></a>
## <a name="software-requirements"></a><span data-ttu-id="cf9fe-138">軟體需求</span><span class="sxs-lookup"><span data-stu-id="cf9fe-138">Software Requirements</span></span>

<span data-ttu-id="cf9fe-139">Visual Studio 的 ASP.NET MVC 4 元件需要 PowerShell 2.0 和為 Service Pack 1 的 Visual Studio 2010 或 Visual Web Developer Express 2010 Service Pack 1。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-139">The ASP.NET MVC 4 components for Visual Studio require PowerShell 2.0 and either Visual Studio 2010 with Service Pack 1 or Visual Web Developer Express 2010 with Service Pack 1.</span></span>

<a id="_Toc303253807"></a>
## <a name="new-features-in-aspnet-mvc-4"></a><span data-ttu-id="cf9fe-140">ASP.NET MVC 4 中的新功能</span><span class="sxs-lookup"><span data-stu-id="cf9fe-140">New Features in ASP.NET MVC 4</span></span>

<span data-ttu-id="cf9fe-141">本節說明已引進的功能在 ASP.NET MVC 4 版本。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-141">This section describes features that have been introduced in the ASP.NET MVC 4 release.</span></span>

<a id="_Toc317096197"></a>
### <a name="aspnet-web-api"></a><span data-ttu-id="cf9fe-142">ASP.NET Web API</span><span class="sxs-lookup"><span data-stu-id="cf9fe-142">ASP.NET Web API</span></span>

<span data-ttu-id="cf9fe-143">ASP.NET MVC 4 包含 ASP.NET Web API、 將新的架構，用於建立可以連線到各種包括瀏覽器和行動裝置的用戶端的 HTTP 服務。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-143">ASP.NET MVC 4 includes ASP.NET Web API, a new framework for creating HTTP services that can reach a broad range of clients including browsers and mobile devices.</span></span> <span data-ttu-id="cf9fe-144">ASP.NET Web API 也是建置 RESTful 服務的理想平台。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-144">ASP.NET Web API is also an ideal platform for building RESTful services.</span></span>

<span data-ttu-id="cf9fe-145">ASP.NET Web API 包括下列功能的支援：</span><span class="sxs-lookup"><span data-stu-id="cf9fe-145">ASP.NET Web API includes support for the following features:</span></span>

- <span data-ttu-id="cf9fe-146">**現代 HTTP 程式設計模型：** 直接存取，和處理 HTTP 要求和回應中使用新的強型別 HTTP 物件模型對 Web Api。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-146">**Modern HTTP programming model:** Directly access and manipulate HTTP requests and responses in your Web APIs using a new, strongly typed HTTP object model.</span></span> <span data-ttu-id="cf9fe-147">相同程式設計模型和 HTTP 管線是用戶端透過新的對稱可用*HttpClient*型別。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-147">The same programming model and HTTP pipeline is symmetrically available on the client through the new *HttpClient* type.</span></span>
- <span data-ttu-id="cf9fe-148">**路由的完整支援：** ASP.NET Web API 支援一組完整的 ASP.NET 路由，包括路由參數和條件約束的路由功能。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-148">**Full support for routes:** ASP.NET Web API supports the full set of route capabilities of ASP.NET Routing, including route parameters and constraints.</span></span> <span data-ttu-id="cf9fe-149">此外，使用簡單的慣例來對應至 HTTP 方法的動作。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-149">Additionally, use simple conventions to map actions to HTTP methods.</span></span>
- <span data-ttu-id="cf9fe-150">**內容交涉：** 用戶端和伺服器可一起運作來判斷正確的格式從 web API 所傳回的資料。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-150">**Content negotiation:** The client and server can work together to determine the right format for data being returned from a web API.</span></span> <span data-ttu-id="cf9fe-151">ASP.NET Web API 提供預設的支援，如 XML、 JSON 和表單 URL 編碼格式，而且您可以新增您自己的格式器，來擴充這項支援，或甚至取代預設的內容交涉策略。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-151">ASP.NET Web API provides default support for XML, JSON, and Form URL-encoded formats and you can extend this support by adding your own formatters, or even replace the default content negotiation strategy.</span></span>
- <span data-ttu-id="cf9fe-152">**模型繫結和驗證：** 模型繫結器提供簡單的方式擷取 HTTP 要求的各種組件中的資料，並將這些訊息部分轉換成.NET 物件可由 Web API 動作。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-152">**Model binding and validation:** Model binders provide an easy way to extract data from various parts of an HTTP request and convert those message parts into .NET objects which can be used by the Web API actions.</span></span> <span data-ttu-id="cf9fe-153">根據資料註解的動作參數，也會執行驗證。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-153">Validation is also performed on action parameters based on data annotations.</span></span>
- <span data-ttu-id="cf9fe-154">**篩選器：** ASP.NET Web API 支援包括下列已知的篩選條件的篩選器 *[Authorize]* 屬性。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-154">**Filters:** ASP.NET Web API supports filters including well-known filters such as the *[Authorize]* attribute.</span></span> <span data-ttu-id="cf9fe-155">您可以撰寫，並插入您自己的篩選動作、 授權和例外狀況處理。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-155">You can author and plug in your own filters for actions, authorization and exception handling.</span></span>
- <span data-ttu-id="cf9fe-156">**查詢撰寫：** 使用 *[Queryable]* 上傳回的動作篩選條件屬性*IQueryable*啟用查詢您的 web API 透過 OData 查詢轉換的支援。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-156">**Query composition:** Use the *[Queryable]* filter attribute on an action that returns *IQueryable* to enable support for querying your web API via the OData query conventions.</span></span>
- <span data-ttu-id="cf9fe-157">**改善的可測試性：** 而不是靜態的內容物件中設定 HTTP 詳細資料之外，web API 動作使用的執行個體*HttpRequestMessage*並*HttpResponseMessage*。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-157">**Improved testability:** Rather than setting HTTP details in static context objects, web API actions work with instances of *HttpRequestMessage* and *HttpResponseMessage*.</span></span> <span data-ttu-id="cf9fe-158">建立單元測試專案，以及您的 Web API 專案，開始快速撰寫適用於您 Web API 的功能。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-158">Create a unit test project along with your Web API project to get started quickly writing unit tests for your Web API functionality.</span></span>
- <span data-ttu-id="cf9fe-159">**程式碼為基礎的組態：** ASP.NET Web API 完成只會透過程式碼，離開您的組態檔的初始狀態。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-159">**Code-based configuration:** ASP.NET Web API configuration is accomplished solely through code, leaving your config files clean.</span></span> <span data-ttu-id="cf9fe-160">您可以使用提供的服務定位器模式來設定擴充點。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-160">Use the provided service locator pattern to configure extensibility points.</span></span>
- <span data-ttu-id="cf9fe-161">**加強的控制反轉 (IoC) 容器的支援：** ASP.NET Web API 提供絕佳的支援，適用於透過改良的相依性解析程式抽象概念的 IoC 容器</span><span class="sxs-lookup"><span data-stu-id="cf9fe-161">**Improved support for Inversion of Control (IoC) containers:** ASP.NET Web API provides great support for IoC containers through an improved dependency resolver abstraction</span></span>
- <span data-ttu-id="cf9fe-162">**自我裝載：** Web Api 可以裝載於自己的程序，除了 IIS 之外，同時仍然使用路由的完整功能和其他功能的 Web API。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-162">**Self-host:** Web APIs can be hosted in your own process in addition to IIS while still using the full power of routes and other features of Web API.</span></span>
- <span data-ttu-id="cf9fe-163">**建立自訂的說明和測試頁面：** 您現在可以輕鬆地建置自訂的說明和測試您的 web Api 的頁面，使用新*IApiExplorer*服務，以取得您的 web Api 的完整執行階段描述。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-163">**Create custom help and test pages:** You now can easily build custom help and test pages for your web APIs by using the new *IApiExplorer* service to get a complete runtime description of your web APIs.</span></span>
- <span data-ttu-id="cf9fe-164">**監視和診斷：** ASP.NET Web API 現在提供輕量追蹤基礎結構，可讓您輕鬆地與現有的記錄解決方案，例如 System.Diagnostics、 ETW 和協力廠商記錄架構整合。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-164">**Monitoring and diagnostics:** ASP.NET Web API now provides light weight tracing infrastructure that makes it easy to integrate with existing logging solutions such as System.Diagnostics, ETW and third party logging frameworks.</span></span> <span data-ttu-id="cf9fe-165">您可以藉由提供啟用追蹤*ITraceWriter*實作，並將它新增至您的 web API 的組態。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-165">You can enable tracing by providing an *ITraceWriter* implementation and adding it to your web API configuration.</span></span>
- <span data-ttu-id="cf9fe-166">**連結產生：** 使用 ASP.NET Web API *UrlHelper*產生相同的應用程式的相關資源的連結。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-166">**Link generation:** Use the ASP.NET Web API *UrlHelper* to generate links to related resources in the same application.</span></span>
- <span data-ttu-id="cf9fe-167">**Web API 專案範本：** 選取新的 Web API 專案表單新增 MVC 4 專案精靈，快速地啟動並執行 ASP.NET Web api。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-167">**Web API project template:** Select the new Web API project form the New MVC 4 Project wizard to quickly get up and running with ASP.NET Web API.</span></span>
- <span data-ttu-id="cf9fe-168">**Scaffolding:** 使用**新增控制器**對話方塊，即可快速建立以 Entity Framework 為基礎的 web API 控制器的結構以基礎的模型類型。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-168">**Scaffolding:** Use the **Add Controller** dialog to quickly scaffold a web API controller based on an Entity Framework based model type.</span></span>

<span data-ttu-id="cf9fe-169">如需 ASP.NET Web API 的詳細資訊，請造訪[ https://www.asp.net/web-api ](../web-api/index.md)。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-169">For more details on ASP.NET Web API please visit [https://www.asp.net/web-api](../web-api/index.md).</span></span>

<a id="_Toc303253808"></a>
### <a name="enhancements-to-default-project-templates"></a><span data-ttu-id="cf9fe-170">預設專案範本的增強功能</span><span class="sxs-lookup"><span data-stu-id="cf9fe-170">Enhancements to Default Project Templates</span></span>

<span data-ttu-id="cf9fe-171">已更新用來建立新的 ASP.NET MVC 4 專案的範本來建立更現代化外觀的網站：</span><span class="sxs-lookup"><span data-stu-id="cf9fe-171">The template that is used to create new ASP.NET MVC 4 projects has been updated to create a more modern-looking website:</span></span>

![](mvc4-release-notes/_static/image1.png)

<span data-ttu-id="cf9fe-172">除了外觀的增強功能，已改進新的範本中的功能。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-172">In addition to cosmetic improvements, there's improved functionality in the new template.</span></span> <span data-ttu-id="cf9fe-173">範本會針對稱為適應性呈現看來，在桌面瀏覽器和行動瀏覽器，而不需要任何自訂的技術。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-173">The template employs a technique called adaptive rendering to look good in both desktop browsers and mobile browsers without any customization.</span></span>

![](mvc4-release-notes/_static/image2.png)

<span data-ttu-id="cf9fe-174">若要查看作用中的自適性轉譯，您可以使用行動裝置的模擬器，或試試調整大小變得更小的桌面瀏覽器 視窗。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-174">To see adaptive rendering in action, you can use a mobile emulator or just try resizing the desktop browser window to be smaller.</span></span> <span data-ttu-id="cf9fe-175">當瀏覽器視窗中取得夠小時，將變更頁面的配置。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-175">When the browser window gets small enough, the layout of the page will change.</span></span>

<a id="_Toc303253809"></a>
### <a name="mobile-project-template"></a><span data-ttu-id="cf9fe-176">行動裝置專案範本</span><span class="sxs-lookup"><span data-stu-id="cf9fe-176">Mobile Project Template</span></span>

<span data-ttu-id="cf9fe-177">如果您正在新的專案，並想要建立站台，專為行動和平板電腦瀏覽器，您可以使用新的行動應用程式專案範本。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-177">If you're starting a new project and want to create a site specifically for mobile and tablet browsers, you can use the new Mobile Application project template.</span></span> <span data-ttu-id="cf9fe-178">這是以基礎的 jQuery Mobile，開放原始碼程式庫建置觸控最佳化的 UI:</span><span class="sxs-lookup"><span data-stu-id="cf9fe-178">This is based on jQuery Mobile, an open-source library for building touch-optimized UI:</span></span>

![](mvc4-release-notes/_static/image3.png)

<span data-ttu-id="cf9fe-179">此範本包含與網際網路應用程式範本的應用程式結構相同 （而且控制器程式碼幾乎完全相同），但樣式呈現最佳效果，並能在觸控式行動裝置的行為使用 jQuery Mobile。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-179">This template contains the same application structure as the Internet Application template (and the controller code is virtually identical), but it's styled using jQuery Mobile to look good and behave well on touch-based mobile devices.</span></span> <span data-ttu-id="cf9fe-180">若要深入了解如何建構和設定行動裝置的 UI 的樣式，請參閱[jQuery 行動專案網站](http://jquerymobile.com/)。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-180">To learn more about how to structure and style mobile UI, see the [jQuery Mobile project website](http://jquerymobile.com/).</span></span>

<span data-ttu-id="cf9fe-181">如果您已經有的桌面導向的網站，您想要新增行動裝置最佳化的檢視，或如果您想要建立單一站台做桌面和行動瀏覽器的不同樣式化的檢視，您可以使用新的顯示模式功能。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-181">If you already have a desktop-oriented site that you want to add mobile-optimized views to, or if you want to create a single site that serves differently styled views to desktop and mobile browsers, you can use the new Display Modes feature.</span></span> <span data-ttu-id="cf9fe-182">（請參閱下一節。）</span><span class="sxs-lookup"><span data-stu-id="cf9fe-182">(See the next section.)</span></span>

<a id="_Toc303253810"></a>
### <a name="display-modes"></a><span data-ttu-id="cf9fe-183">顯示模式</span><span class="sxs-lookup"><span data-stu-id="cf9fe-183">Display Modes</span></span>

<span data-ttu-id="cf9fe-184">新的顯示模式功能可讓應用程式選取根據提出要求的瀏覽器的檢視。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-184">The new Display Modes feature lets an application select views depending on the browser that's making the request.</span></span> <span data-ttu-id="cf9fe-185">例如，如果桌面瀏覽器要求首頁上，應用程式可能使用 Views\Home\Index.cshtml 範本。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-185">For example, if a desktop browser requests the Home page, the application might use the Views\Home\Index.cshtml template.</span></span> <span data-ttu-id="cf9fe-186">如果在行動瀏覽器要求首頁上，應用程式可能會傳回 Views\Home\Index.mobile.cshtml 範本。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-186">If a mobile browser requests the Home page, the application might return the Views\Home\Index.mobile.cshtml template.</span></span>

<span data-ttu-id="cf9fe-187">版面配置和部分可以也覆寫特定瀏覽器類型。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-187">Layouts and partials can also be overridden for particular browser types.</span></span> <span data-ttu-id="cf9fe-188">例如:</span><span class="sxs-lookup"><span data-stu-id="cf9fe-188">For example:</span></span>

- <span data-ttu-id="cf9fe-189">如果您的 Views\Shared 資料夾同時包含\_Layout.cshtml 和\_Layout.mobile.cshtml 範本，根據預設，應用程式會使用\_Layout.mobile.cshtml與行動瀏覽器要求期間\_Layout.cshtml 期間其他要求。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-189">If your Views\Shared folder contains both the \_Layout.cshtml and \_Layout.mobile.cshtml templates, by default the application will use \_Layout.mobile.cshtml during requests from mobile browsers and \_Layout.cshtml during other requests.</span></span>
- <span data-ttu-id="cf9fe-190">如果資料夾同時包含\_MyPartial.cshtml 和\_MyPartial.mobile.cshtml，指示@Html.Partial(「\_MyPartial") 會轉譯\_MyPartial.mobile.cshtml 期間從行動裝置的要求瀏覽器和\_MyPartial.cshtml 期間其他要求。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-190">If a folder contains both \_MyPartial.cshtml and \_MyPartial.mobile.cshtml, the instruction @Html.Partial("\_MyPartial") will render \_MyPartial.mobile.cshtml during requests from mobile browsers, and \_MyPartial.cshtml during other requests.</span></span>

<span data-ttu-id="cf9fe-191">如果您想要建立更具體的檢視表、 版面配置或針對其他裝置的部分檢視，您可以註冊新*DefaultDisplayMode*指定的名稱： 要求符合特定條件時，要搜尋的執行個體。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-191">If you want to create more specific views, layouts, or partial views for other devices, you can register a new *DefaultDisplayMode* instance to specify which name to search for when a request satisfies particular conditions.</span></span> <span data-ttu-id="cf9fe-192">例如，您可以在其中新增下列程式碼*應用程式\_啟動*註冊"iPhone"字串做為適用於 Apple iPhone 瀏覽器提出要求時的顯示模式的 Global.asax 檔案中的方法：</span><span class="sxs-lookup"><span data-stu-id="cf9fe-192">For example, you could add the following code to the *Application\_Start* method in the Global.asax file to register the string "iPhone" as a display mode that applies when the Apple iPhone browser makes a request:</span></span>

[!code-csharp[Main](mvc4-release-notes/samples/sample1.cs)]

<span data-ttu-id="cf9fe-193">執行此程式碼，當 Apple iPhone 瀏覽器要求之後，您的應用程式將使用 Views\Shared\\_Layout.iPhone.cshtml 版面配置 （若有的話）。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-193">After this code runs, when an Apple iPhone browser makes a request, your application will use the Views\Shared\\_Layout.iPhone.cshtml layout (if it exists).</span></span> <span data-ttu-id="cf9fe-194">如需有關顯示模式的詳細資訊，請參閱[ASP.NET MVC 4 Mobile 功能](../mvc/overview/older-versions/aspnet-mvc-4-mobile-features.md)。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-194">For more information on Display Mode, see [ASP.NET MVC 4 Mobile Features](../mvc/overview/older-versions/aspnet-mvc-4-mobile-features.md).</span></span> <span data-ttu-id="cf9fe-195">應該安裝應用程式使用 DisplayModeProvider[固定 DisplayModes](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes) NuGet 套件。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-195">Applications using DisplayModeProvider should install the [Fixed DisplayModes](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes) NuGet package.</span></span> <span data-ttu-id="cf9fe-196">[ASP.NET Fall 2012 Update](https://go.microsoft.com/fwlink/?LinkID=271322)包含[固定 DisplayModes](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes)新的專案範本中的 NuGet 套件。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-196">The [ASP.NET Fall 2012 Update](https://go.microsoft.com/fwlink/?LinkID=271322) includes the [Fixed DisplayModes](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes) NuGet package in the new project templates.</span></span> <span data-ttu-id="cf9fe-197">請參閱[ASP.NET MVC 4 Mobile 快取 Bug Fixedd](https://blogs.msdn.com/b/rickandy/archive/2012/09/17/asp-net-mvc-4-mobile-caching-bug-fixed.aspx)如修正程式的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-197">See [ASP.NET MVC 4 Mobile Caching Bug Fixedd](https://blogs.msdn.com/b/rickandy/archive/2012/09/17/asp-net-mvc-4-mobile-caching-bug-fixed.aspx) for details on the fix.</span></span>

<a id="_Toc303253811"></a>
### <a name="jquery-mobile-and-mobile-features"></a><span data-ttu-id="cf9fe-198">jQuery Mobile 和 Mobile 功能</span><span class="sxs-lookup"><span data-stu-id="cf9fe-198">jQuery Mobile and Mobile Features</span></span>

<span data-ttu-id="cf9fe-199">如需建置 ASP.NET MVC 4 的行動應用程式使用 jQuery Mobile，請參閱本教學課程[ASP.NET MVC 4 Mobile 功能](../mvc/overview/older-versions/aspnet-mvc-4-mobile-features.md)。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-199">For information on building Mobile applications with ASP.NET MVC 4 using jQuery Mobile, see the tutorial [ASP.NET MVC 4 Mobile Features](../mvc/overview/older-versions/aspnet-mvc-4-mobile-features.md).</span></span>

<a id="_Toc303253813"></a>
### <a name="task-support-for-asynchronous-controllers"></a><span data-ttu-id="cf9fe-200">非同步控制器的的工作支援</span><span class="sxs-lookup"><span data-stu-id="cf9fe-200">Task Support for Asynchronous Controllers</span></span>

<span data-ttu-id="cf9fe-201">您現在可以撰寫非同步動作方法傳回的型別物件的單一方法*任務*或是*工作&lt;ActionResult&gt;* 。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-201">You can now write asynchronous action methods as single methods that return an object of type *Task* or *Task&lt;ActionResult&gt;*.</span></span>

 <span data-ttu-id="cf9fe-202">如需詳細資訊，請參閱[ASP.NET MVC 4 中使用非同步方法](../mvc/overview/performance/using-asynchronous-methods-in-aspnet-mvc-4.md)。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-202">For more information see [Using Asynchronous Methods in ASP.NET MVC 4](../mvc/overview/performance/using-asynchronous-methods-in-aspnet-mvc-4.md).</span></span>

<a id="_Toc303253814"></a>
### <a name="azure-sdk"></a><span data-ttu-id="cf9fe-203">Azure SDK</span><span class="sxs-lookup"><span data-stu-id="cf9fe-203">Azure SDK</span></span>

<span data-ttu-id="cf9fe-204">ASP.NET MVC 4 支援 Windows Azure SDK 1.6 版及較新的版本。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-204">ASP.NET MVC 4 supports the 1.6 and newer releases of the Windows Azure SDK.</span></span>

<a id="_Toc303253818"></a>
### <a name="database-migrations"></a><span data-ttu-id="cf9fe-205">資料庫移轉</span><span class="sxs-lookup"><span data-stu-id="cf9fe-205">Database Migrations</span></span>

<span data-ttu-id="cf9fe-206">ASP.NET MVC 4 專案現在會包含 Entity Framework 5。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-206">ASP.NET MVC 4 projects now include Entity Framework 5.</span></span> <span data-ttu-id="cf9fe-207">在 Entity Framework 5 的絕佳功能之一是資料庫移轉的支援。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-207">One of the great features in Entity Framework 5 is support for database migrations.</span></span> <span data-ttu-id="cf9fe-208">這項功能可讓您輕鬆地發展您的資料庫結構描述，使用程式碼為主的移轉，同時保留資料庫中的資料。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-208">This feature enables you to easily evolve your database schema using a code-focused migration while preserving the data in the database.</span></span> <span data-ttu-id="cf9fe-209">如需有關資料庫移轉的詳細資訊，請參閱[將新欄位新增至電影模型和資料表](../mvc/overview/older-versions/getting-started-with-aspnet-mvc4/adding-a-new-field-to-the-movie-model-and-table.md)中[ASP.NET MVC 4 的教學課程簡介](../mvc/overview/older-versions/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4.md)。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-209">For more information on database migrations, see [Adding a New Field to the Movie Model and Table](../mvc/overview/older-versions/getting-started-with-aspnet-mvc4/adding-a-new-field-to-the-movie-model-and-table.md) in the [Introduction to ASP.NET MVC 4 tutorial](../mvc/overview/older-versions/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4.md).</span></span>

<a id="_Toc303253819"></a>
### <a name="empty-project-template"></a><span data-ttu-id="cf9fe-210">空白專案範本</span><span class="sxs-lookup"><span data-stu-id="cf9fe-210">Empty Project Template</span></span>

<span data-ttu-id="cf9fe-211">空白的 MVC 專案範本現在是真正空的以便您可以從完全從頭開始。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-211">The MVC Empty project template is now truly empty so that you can start from a completely clean slate.</span></span> <span data-ttu-id="cf9fe-212">舊版的空白專案範本已重新命名為基本。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-212">The earlier version of the Empty project template has been renamed to Basic.</span></span>

<a id="_Toc303253820"></a>
### <a name="add-controller-to-any-project-folder"></a><span data-ttu-id="cf9fe-213">將控制器新增至任何專案資料夾</span><span class="sxs-lookup"><span data-stu-id="cf9fe-213">Add Controller to any project folder</span></span>

<span data-ttu-id="cf9fe-214">您現在可以以滑鼠右鍵按一下並選取**新增控制器**MVC 專案中的任何資料夾中。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-214">You can now right click and select **Add Controller** from any folder in your MVC project.</span></span> <span data-ttu-id="cf9fe-215">這可讓您更大的彈性來組織您的控制器，但您想要包括將您的 MVC 和 Web API 控制器放在個別的資料夾。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-215">This gives you more flexibility to organize your controllers however you want, including keeping your MVC and Web API controllers in separate folders.</span></span>

<a id="_Toc303253821"></a>
### <a name="bundling-and-minification"></a><span data-ttu-id="cf9fe-216">統合和縮製</span><span class="sxs-lookup"><span data-stu-id="cf9fe-216">Bundling and Minification</span></span>

<span data-ttu-id="cf9fe-217">統合和縮製的架構可讓您減少網頁需要藉由結合成單一的配套的檔案，指令碼和 CSS 的個別檔案進行的 HTTP 要求數目。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-217">The bundling and minification framework enables you to reduce the number of HTTP requests that a Web page needs to make by combining individual files into a single, bundled file for scripts and CSS.</span></span> <span data-ttu-id="cf9fe-218">它接著可以縮小搭售方案的內容，以減少這些要求的整體大小。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-218">It can then reduce the overall size of those requests by minifying the contents of the bundle.</span></span> <span data-ttu-id="cf9fe-219">縮小，可以包含活動，例如排除空白字元以縮短甚至摺疊其語意為基礎的 CSS 選取器的變數名稱。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-219">Minifying can include activities like eliminating whitespace to shortening variable names to even collapsing CSS selectors based on their semantics.</span></span> <span data-ttu-id="cf9fe-220">宣告和設定套件組合的程式碼並輕鬆地透過協助程式方法可以產生的檢視中的套件組合的單一連結或參考，偵錯時，多個連結的套件組合的個別內容。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-220">Bundles are declared and configured in code and are easily referenced in views via helper methods which can generate either a single link to the bundle or, when debugging, multiple links to the individual contents of the bundle.</span></span> <span data-ttu-id="cf9fe-221">如需詳細資訊，請參閱[統合和縮製](../mvc/overview/performance/bundling-and-minification.md)。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-221">For more information see [Bundling and Minification](../mvc/overview/performance/bundling-and-minification.md).</span></span>

<a id="_Toc303253822"></a>
### <a name="enabling-logins-from-facebook-and-other-sites-using-oauth-and-openid"></a><span data-ttu-id="cf9fe-222">啟用登入和來自 Facebook 與其他站台使用 OAuth 和 OpenID</span><span class="sxs-lookup"><span data-stu-id="cf9fe-222">Enabling Logins from Facebook and Other Sites Using OAuth and OpenID</span></span>

<span data-ttu-id="cf9fe-223">ASP.NET MVC 4 網際網路專案範本中的預設範本現在包含使用 DotNetOpenAuth 程式庫中的 OAuth 和 OpenID 登入的支援。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-223">The default templates in ASP.NET MVC 4 Internet Project template now includes support for OAuth and OpenID login using the DotNetOpenAuth library.</span></span> <span data-ttu-id="cf9fe-224">如需設定的 OAuth 或 OpenID 提供者的資訊，請參閱[OAuth/OpenID 支援 WebForms、 MVC 和網頁](https://blogs.msdn.com/b/webdev/archive/2012/08/15/oauth-openid-support-for-webforms-mvc-and-webpages.aspx)並[OAuth 和 OpenID 功能文件中 ASP.NET Web Pages](../web-pages/overview/releases/top-features-in-web-pages-2.md#oauthsetup)。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-224">For information on configuring an OAuth or OpenID provider, see [OAuth/OpenID Support for WebForms, MVC and WebPages](https://blogs.msdn.com/b/webdev/archive/2012/08/15/oauth-openid-support-for-webforms-mvc-and-webpages.aspx) and the [OAuth and OpenID feature documentation in ASP.NET Web Pages](../web-pages/overview/releases/top-features-in-web-pages-2.md#oauthsetup).</span></span>

<a id="_Toc303253806"></a>
## <a name="upgrading-an-aspnet-mvc-3-project-to-aspnet-mvc-4"></a><span data-ttu-id="cf9fe-225">將 ASP.NET MVC 3 專案升級至 ASP.NET MVC 4</span><span class="sxs-lookup"><span data-stu-id="cf9fe-225">Upgrading an ASP.NET MVC 3 Project to ASP.NET MVC 4</span></span>

<span data-ttu-id="cf9fe-226">ASP.NET MVC 4 可以與 ASP.NET MVC 3 並存安裝在同一部電腦，讓您彈性地選擇何時要升級至 ASP.NET MVC 4 的 ASP.NET MVC 3 應用程式。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-226">ASP.NET MVC 4 can be installed side by side with ASP.NET MVC 3 on the same computer, which gives you flexibility in choosing when to upgrade an ASP.NET MVC 3 application to ASP.NET MVC 4.</span></span>

<span data-ttu-id="cf9fe-227">升級的最簡單方式是建立新的 ASP.NET MVC 4 專案和複製所有檢視、 控制器、 程式碼及內容都檔案從現有的 MVC 3 專案至新的專案，然後若要更新組件參考來比對所有非 MVC 範本的新專案中您使用 cluded 2.0、visual。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-227">The simplest way to upgrade is to create a new ASP.NET MVC 4 project and copy all the views, controllers, code, and content files from the existing MVC 3 project to the new project and then to update the assembly references in the new project to match any non-MVC template included assembiles you are using.</span></span> <span data-ttu-id="cf9fe-228">如果您變更至 MVC 3 專案中的 Web.config 檔案的內容，您必須也那些變更合併至 MVC 4 專案中的 Web.config 檔案。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-228">If you have made changes to the Web.config file in the MVC 3 project, you must also merge those changes into the Web.config file in the MVC 4 project.</span></span>

<span data-ttu-id="cf9fe-229">若要手動升級現有的 ASP.NET MVC 3 應用程式第 4 版，執行下列作業：</span><span class="sxs-lookup"><span data-stu-id="cf9fe-229">To manually upgrade an existing ASP.NET MVC 3 application to version 4, do the following:</span></span>

1. <span data-ttu-id="cf9fe-230">在所有的 Web.config 檔案在專案中 （有一個專案，在 [Views] 資料夾中，一個在專案中的每個區域的 [Views] 資料夾的根目錄中），會取代下列文字的每個執行個體 (請注意：System.Web.WebPages，版本 = 1.0.0.0 找不到使用 Visual Studio 2012 建立的專案中):</span><span class="sxs-lookup"><span data-stu-id="cf9fe-230">In all Web.config files in the project (there is one in the root of the project, one in the Views folder, and one in the Views folder for each area in your project), replace every instance of the following text (note: System.Web.WebPages, Version=1.0.0.0 is not found in projects created with Visual Studio 2012):</span></span> 

    [!code-console[Main](mvc4-release-notes/samples/sample2.cmd)]

    <span data-ttu-id="cf9fe-231">使用下列相對應的文字：</span><span class="sxs-lookup"><span data-stu-id="cf9fe-231">with the following corresponding text:</span></span>

    [!code-console[Main](mvc4-release-notes/samples/sample3.cmd)]
2. <span data-ttu-id="cf9fe-232">在根 Web.config 檔案中，更新*webPages:Version*為"2.0.0.0"的項目並新增一個新*PreserveLoginUrl*具有值"true"的機碼：</span><span class="sxs-lookup"><span data-stu-id="cf9fe-232">In the root Web.config file, update the *webPages:Version* element to "2.0.0.0" and add a new *PreserveLoginUrl* key that has the value "true":</span></span> 

    [!code-xml[Main](mvc4-release-notes/samples/sample4.xml)]
3. <span data-ttu-id="cf9fe-233">在 方案總管 中，以滑鼠右鍵按一下參考，並選取 管理 NuGet 套件。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-233">In Solution Explorer, right-click on the References and select Manage NuGet Packages.</span></span> <span data-ttu-id="cf9fe-234">在左窗格中，選取**Online\NuGet 官方封裝來源**，然後更新下列：</span><span class="sxs-lookup"><span data-stu-id="cf9fe-234">In the left pane, select **Online\NuGet official package source**, then update the following:</span></span>

    - <span data-ttu-id="cf9fe-235">ASP.NET MVC 4</span><span class="sxs-lookup"><span data-stu-id="cf9fe-235">ASP.NET MVC 4</span></span>
    - <span data-ttu-id="cf9fe-236">（選擇性） jQuery、 jQuery 驗證和 jQuery UI</span><span class="sxs-lookup"><span data-stu-id="cf9fe-236">(Optional) jQuery, jQuery Validation and jQuery UI</span></span>
    - <span data-ttu-id="cf9fe-237">（選擇性）Entity Framework</span><span class="sxs-lookup"><span data-stu-id="cf9fe-237">(Optional) Entity Framework</span></span>
    - <span data-ttu-id="cf9fe-238">(Optonal)Modernizr</span><span class="sxs-lookup"><span data-stu-id="cf9fe-238">(Optonal) Modernizr</span></span>
4. <span data-ttu-id="cf9fe-239">在 方案總管 中，以滑鼠右鍵按一下專案名稱，然後選取 卸載專案</span><span class="sxs-lookup"><span data-stu-id="cf9fe-239">In Solution Explorer, right-click the project name and then select Unload Project.</span></span> <span data-ttu-id="cf9fe-240">然後再次以滑鼠右鍵按一下名稱，然後選取 編輯*ProjectName*.csproj。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-240">Then right-click the name again and select Edit *ProjectName*.csproj.</span></span>
5. <span data-ttu-id="cf9fe-241">找出*ProjectTypeGuids*項目，並取代 {E53F8FEA-EAE0-44A6-8774-FFD645390401} 與 {E3E379DF-F4C6-4180-9B81-6769533ABE47}。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-241">Locate the *ProjectTypeGuids* element and replace {E53F8FEA-EAE0-44A6-8774-FFD645390401} with {E3E379DF-F4C6-4180-9B81-6769533ABE47}.</span></span>
6. <span data-ttu-id="cf9fe-242">儲存變更，關閉您所編輯的專案 (.csproj) 檔案，以滑鼠右鍵按一下專案，，然後選取重新載入專案。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-242">Save the changes, close the project (.csproj) file you were editing, right-click the project, and then select Reload Project.</span></span>
7. <span data-ttu-id="cf9fe-243">如果專案參考會編譯使用舊版 ASP.NET MVC 的任何協力廠商程式庫，請開啟根 Web.config 檔案，並新增下列三個*bindingRedirect*下方的項目*設定*區段：</span><span class="sxs-lookup"><span data-stu-id="cf9fe-243">If the project references any third-party libraries that are compiled using previous versions of ASP.NET MVC, open the root Web.config file and add the following three *bindingRedirect* elements under the *configuration* section:</span></span> 

    [!code-xml[Main](mvc4-release-notes/samples/sample5.xml)]

<a id="_Toc303253817"></a>
## <a name="changes-from-aspnet-mvc-4-release-candidate"></a><span data-ttu-id="cf9fe-244">從 ASP.NET MVC 4 發行候選版本的變更</span><span class="sxs-lookup"><span data-stu-id="cf9fe-244">Changes from ASP.NET MVC 4 Release Candidate</span></span>

<span data-ttu-id="cf9fe-245">ASP.NET MVC 4 Release Candidate 版本資訊可以在這裡找到：</span><span class="sxs-lookup"><span data-stu-id="cf9fe-245">The release notes for ASP.NET MVC 4 Release Candidate can be found  here:</span></span>

<span data-ttu-id="cf9fe-246">以下摘要說明從 ASP.NET MVC 4 Release Candidate 在此版本中的重大變更：</span><span class="sxs-lookup"><span data-stu-id="cf9fe-246">The major changes from ASP.NET MVC 4 Release Candidate in this release are summarized below:</span></span>

- <span data-ttu-id="cf9fe-247">**每個控制站組態：** ASP.NET Web API 控制器可以屬性具有自訂屬性，以實作*IControllerConfiguration*設定他們自己的格式器、 動作選取器和參數繫結器。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-247">**Per controller configuration:** ASP.NET Web API controllers can be attributed with a custom attribute that implements *IControllerConfiguration* to setup their own formatters, action selector and parameter binders.</span></span> <span data-ttu-id="cf9fe-248">*HttpControllerConfigurationAttribute*已移除。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-248">The *HttpControllerConfigurationAttribute* has been removed.</span></span>
- <span data-ttu-id="cf9fe-249">**每個路由訊息處理常式：** 您現在可以指定在指定的路由的要求鏈結中的最後一個訊息處理常式。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-249">**Per route message handlers:** You can now specify the final message handler in the request chain for a given route.</span></span> <span data-ttu-id="cf9fe-250">這可讓支援使用路由來分派到他們自己的賽車沿著架構 (非*IHttpController*) 端點。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-250">This enables support for ride-along frameworks to use routing to dispatch to their own (non-*IHttpController*) endpoints.</span></span>
- <span data-ttu-id="cf9fe-251">**進度通知：** *ProgressMessageHandler* 產生要求實體正在上傳和下載的回應實體的進度通知。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-251">**Progress notifications:** The *ProgressMessageHandler* generates progress notification for both request entities being uploaded and response entities being downloaded.</span></span> <span data-ttu-id="cf9fe-252">使用這個處理常式就可以持續多久您要上傳的要求內文，或正在下載回應內文追蹤。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-252">Using this handler it is possible to keep track of how far you are uploading a request body or downloading a response body.</span></span>
- <span data-ttu-id="cf9fe-253">**推送內容：** *PushStreamContent* 類別可讓您的資料產生者，想要直接寫入要求或回應 （同步或非同步方式） 使用的資料流的案例。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-253">**Push content:** The *PushStreamContent* class enables scenarios where a data producer wants to write directly to the request or response(either synchronously or asynchronously) using a stream.</span></span> <span data-ttu-id="cf9fe-254">當*PushStreamContent*已準備好接受它會呼叫外面動作委派與輸出資料流的資料。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-254">When the *PushStreamContent* is ready to accept data it calls out to an action delegate with the output stream.</span></span> <span data-ttu-id="cf9fe-255">開發人員可以再寫入資料流的資料流寫入時只要必要和關閉已完成。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-255">The developer can then write to the stream for as long as necessary and close the stream when writing has completed.</span></span> <span data-ttu-id="cf9fe-256">*PushStreamContent*偵測到資料流的結尾，並完成基礎非同步*工作*寫出內容。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-256">The *PushStreamContent* detects the closing of the stream and completes the underlying asynchronous *Task* for writing out the content.</span></span>
- <span data-ttu-id="cf9fe-257">**建立錯誤回應：** 使用*HttpError*型別來以一致的方式表示錯誤的資訊從例如驗證錯誤和例外狀況而且仍然承認*IncludeErrorDetailPolicy*。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-257">**Creating error responses:** Use the *HttpError* type to consistently represent error information from such as validation errors and exceptions while still honoring the *IncludeErrorDetailPolicy*.</span></span> <span data-ttu-id="cf9fe-258">使用新*CreateErrorResponse*擴充方法，以輕鬆地建立具有錯誤回應*HttpError*做為內容。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-258">Use the new *CreateErrorResponse* extension methods to easily create error responses with *HttpError* as content.</span></span> <span data-ttu-id="cf9fe-259">*HttpError*內容是完整的內容交涉。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-259">The *HttpError* content is fully content negotiated.</span></span>
- <span data-ttu-id="cf9fe-260">**MediaRangeMapping 移除：** 預設器現在會處理媒體類型的範圍。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-260">**MediaRangeMapping removed:** Media type ranges are now handled by the default content negotiator.</span></span>
- <span data-ttu-id="cf9fe-261">**簡單的型別參數的預設參數繫結現在是 [FromUri]:** 在舊版 ASP.NET Web API 的簡單的型別參數的預設參數繫結會使用模型繫結。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-261">**Default parameter binding for simple type parameters is now [FromUri]:** In previous releases of ASP.NET Web API the default parameter binding for simple type parameters used model binding.</span></span> <span data-ttu-id="cf9fe-262">簡單的型別參數的預設參數繫結現 *[FromUri]* 。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-262">The default parameter binding for simple type parameters is now *[FromUri]*.</span></span>
- <span data-ttu-id="cf9fe-263">**動作選取接受必要的參數：** 若未提供來自 URI 的所有必要的參數，則 ASP.NET Web API 中的動作選取會現在只有選取的動作。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-263">**Action selection honors required parameters:** Action selection in ASP.NET Web API will now only select an action if all required parameters that come from the URI are provided.</span></span> <span data-ttu-id="cf9fe-264">參數可以指定為選擇性，藉由提供動作方法簽章中的引數的預設值。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-264">A parameter can be specified as optional by providing a default value for the argument in the action method signature.</span></span>
- <span data-ttu-id="cf9fe-265">**自訂 HTTP 參數繫結：** 使用  *ParameterBindingAttribute*來自訂特定動作參數的參數繫結，或使用*ParameterBindingRules*上*HttpConfiguration*自訂參數繫結更廣泛。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-265">**Customize HTTP parameter bindings:** Use the *ParameterBindingAttribute* to customize the parameter binding for a specific action parameter or use the *ParameterBindingRules* on the *HttpConfiguration* to customize parameter bindings more broadly.</span></span>
- <span data-ttu-id="cf9fe-266">**MediaTypeFormatter 改進：** 格式器現在可以存取完整*HttpContent*執行個體。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-266">**MediaTypeFormatter improvements:** Formatters now have access to the full *HttpContent* instance.</span></span>
- <span data-ttu-id="cf9fe-267">**緩衝原則選取的主機：** 實作與設定*IHostBufferPolicySelector*服務在 ASP.NET Web API，可讓主機判斷緩衝時要使用的原則。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-267">**Host buffering policy selection:** Implement and configure the *IHostBufferPolicySelector* service in ASP.NET Web API to enable hosts to determine the policy for when buffering is to be used.</span></span>
- <span data-ttu-id="cf9fe-268">**在 主機無從存取用戶端憑證：** 使用*GetClientCertificate*擴充方法來取得所提供的用戶端憑證從要求訊息。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-268">**Access client certificates in a host agnostic manner:** Use the *GetClientCertificate* extension method to get the supplied client certificate from the request message.</span></span>
- <span data-ttu-id="cf9fe-269">**內容交涉擴充性：** 藉由衍生自自訂內容交涉*DefaultContentNegotiator*並覆寫任何您想要的內容交涉的層面。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-269">**Content negotiation extensibility:** Customize content negotiation by deriving from the *DefaultContentNegotiator* and overriding any aspect of content negotiation that you would like.</span></span>
- <span data-ttu-id="cf9fe-270">**支援傳回 「 406 無法接受的回應：** 您現在可以傳回 406 無法接受的回應 ASP.NET Web API 中藉由建立找不到適合的格式器時*DefaultContentNegotiator*具有*excludeMatchOnTypeOnly*參數設定為 *，則為 true*。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-270">**Support for returning 406 Not Acceptable responses:** You can now return 406 Not Acceptable responses in ASP.NET Web API when a suitable formatter is not found by creating a *DefaultContentNegotiator* with the *excludeMatchOnTypeOnly* parameter set to *true*.</span></span>
- <span data-ttu-id="cf9fe-271">**讀取為 NameValueCollection 或 JToken 的表單資料：** 您可以讀取的 URI 查詢字串中或做為要求主體中的表單資料*NameValueCollection*使用*ParseQueryString*並*ReadAsFormDataAsync*延伸模組方法分別。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-271">**Read form data as NameValueCollection or JToken:** You can read form data in the URI query string or in the request body as a *NameValueCollection* using the *ParseQueryString* and *ReadAsFormDataAsync* extension methods respectively.</span></span> <span data-ttu-id="cf9fe-272">同樣地，您可以在其中讀取 URI 查詢字串中或做為要求主體中的表單資料*JToken*使用*TryReadQueryAsJson*並*ReadAsAsync*&lt;T&gt;擴充方法分別。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-272">Similarly, you can read form data in the URI query string or in the request body as a *JToken* using the *TryReadQueryAsJson* and *ReadAsAsync*&lt;T&gt; extension methods respectively.</span></span>
- <span data-ttu-id="cf9fe-273">**多部分的增強功能：** 現在便能夠撰寫*MultipartStreamProvider*可完全量身打造的 MIME 多組件資料它可以用來讀取，並以最佳方式，向使用者呈現結果的型別。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-273">**Multipart improvements:** It is now possible to write a *MultipartStreamProvider* that is completely tailored to the type of MIME multipart data that it can read and present the result in the optimal way to the user.</span></span> <span data-ttu-id="cf9fe-274">您也可以攔截的後續處理步驟上*MultipartStreamProvider* ，允許實作進行任何處理它想要在 MIME 多組件主體組件上的文章。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-274">You can also hook a post processing step on the *MultipartStreamProvider* that allows the implementation to do whatever post processing it wants on the MIME multipart body parts.</span></span> <span data-ttu-id="cf9fe-275">例如， *MultipartFormDataStreamProvider*實作讀取 HTML 表單資料組件，並將其加入*NameValueCollection*使其能夠輕鬆地在從呼叫者。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-275">For example, the *MultipartFormDataStreamProvider* implementation reads the HTML form data parts and adds them to a *NameValueCollection* so they are easy to get at from the caller.</span></span>
- <span data-ttu-id="cf9fe-276">**連結產生的增強功能：** *UrlHelper* 不再相依於 *HttpControllerContext*。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-276">**Link generation improvements:** The *UrlHelper* no longer depends on *HttpControllerContext*.</span></span> <span data-ttu-id="cf9fe-277">您現在可以存取*UrlHelper*從任何內容位置*HttpRequestMessage*可用。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-277">You can now access the *UrlHelper* from any context where the *HttpRequestMessage* is available.</span></span>
- <span data-ttu-id="cf9fe-278">**訊息處理常式執行順序變更：** 訊息處理常式現在會以反向順序設定而不是為了執行。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-278">**Message handler execution order change:** Message handlers are now executed in the order that they are configured instead of in reverse order.</span></span>
- <span data-ttu-id="cf9fe-279">**針對連接訊息處理常式的協助程式：** 新*HttpClientFactory* ，可以接通*Delegatinghandlerelementcollection* ，並建立*HttpClient*與準備好開始所需的管線。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-279">**Helper for wiring up message handlers:** The new *HttpClientFactory* that can wire up *DelegatingHandlers* and create an *HttpClient* with the desired pipeline ready to go.</span></span> <span data-ttu-id="cf9fe-280">它也提供連接使用替代的內部處理常式的功能 (預設值是*HttpClientHandler*)，以及使用時，請勿將連接*HttpMessageInvoker*或其他*DelegatingHandler*而非*HttpClient*做為 top 啟動程式。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-280">It also provides functionality for wiring up with alternative inner handlers (the default is *HttpClientHandler*) as well as do the wiring up when using *HttpMessageInvoker* or another *DelegatingHandler* instead of *HttpClient* as the top-invoker.</span></span>
- <span data-ttu-id="cf9fe-281">**ASP.NET Web 最佳化的 Cdn 支援：** ASP.NET Web 最佳化現在 CDN 替代的路徑，讓您指定的每一個套件組合，因此其他的 URL 指向該相同的資源，在內容傳遞網路提供支援。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-281">**Support for CDNs in ASP.NET Web Optimization:** ASP.NET Web Optimization now provides support for CDN alternate paths enabling you to specify for each bundle an additional URL which points to that same resource on a content delivery network.</span></span> <span data-ttu-id="cf9fe-282">支援 Cdn 可讓您以您指令碼和樣式套組地理上靠近前往 Web 應用程式的取用者。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-282">Supporting CDNs enables you to get your script and style bundles geographically closer to the end consumers of your Web applications.</span></span> <span data-ttu-id="cf9fe-283">無法使用 CDN 時，生產環境應用程式應該實作後援。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-283">Production apps should implement a fallback when the CDN is unavailable.</span></span> <span data-ttu-id="cf9fe-284">測試此後援。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-284">Test the fallback.</span></span>
- <span data-ttu-id="cf9fe-285">**ASP.NET Web API 路由和組態移至*WebApiConfig.Register*可以 resused 測試程式碼中的靜態方法。**</span><span class="sxs-lookup"><span data-stu-id="cf9fe-285">**ASP.NET Web API routes and configuration moved to *WebApiConfig.Register* static method that can be resused in test code.**</span></span> <span data-ttu-id="cf9fe-286">ASP.NET Web API 路由先前已加入*RouteConfig.RegisterRoutes*以及標準的 MVC 路由傳送。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-286">ASP.NET Web API routes previously were added in *RouteConfig.RegisterRoutes* along with the standard MVC routes.</span></span> <span data-ttu-id="cf9fe-287">設定與 ASP.NET Web API 路由的預設值現在在個別處理*WebApiConfig.Register*方法，以方便進行測試。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-287">The default ASP.NET Web API routes and configuration are now handled in a separate *WebApiConfig.Register* method to facilitate testing.</span></span>

<a id="_Toc303253815"></a>
## <a name="known-issues-and-breaking-changes"></a><span data-ttu-id="cf9fe-288">已知的問題和重大變更</span><span class="sxs-lookup"><span data-stu-id="cf9fe-288">Known Issues and Breaking Changes</span></span>

- <span data-ttu-id="cf9fe-289">**ASP.NET MVC 4 RC 和 RTM 版本不正確地傳回快取的桌面檢視時，應該會傳回行動檢視。**</span><span class="sxs-lookup"><span data-stu-id="cf9fe-289">**The RC and RTM version of ASP.NET MVC 4 incorrectly returned cached desktop views when mobile views should be returned.**</span></span>

    - <span data-ttu-id="cf9fe-290">請參閱[ASP.NET MVC 4 Mobile 快取 Bug 已修正](https://blogs.msdn.com/b/rickandy/archive/2012/09/17/asp-net-mvc-4-mobile-caching-bug-fixed.aspx)如修正程式的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-290">See [ASP.NET MVC 4 Mobile Caching Bug Fixed](https://blogs.msdn.com/b/rickandy/archive/2012/09/17/asp-net-mvc-4-mobile-caching-bug-fixed.aspx) for details on the fix.</span></span> <span data-ttu-id="cf9fe-291">可以從安裝 fix[固定 DisplayModes](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes) NuGet 套件。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-291">The fix can be installed from the [Fixed DisplayModes](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes) NuGet package.</span></span>
- <span data-ttu-id="cf9fe-292">**Razor 檢視引擎的重大變更**。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-292">**Breaking changes in the Razor View Engine**.</span></span> <span data-ttu-id="cf9fe-293">下列類型移除了*System.Web.Mvc.Razor*:</span><span class="sxs-lookup"><span data-stu-id="cf9fe-293">The following types were removed from *System.Web.Mvc.Razor*:</span></span> 

    - <span data-ttu-id="cf9fe-294">*ModelSpan*</span><span class="sxs-lookup"><span data-stu-id="cf9fe-294">*ModelSpan*</span></span>
    - <span data-ttu-id="cf9fe-295">*MvcVBRazorCodeGenerator*</span><span class="sxs-lookup"><span data-stu-id="cf9fe-295">*MvcVBRazorCodeGenerator*</span></span>
    - <span data-ttu-id="cf9fe-296">*MvcCSharpRazorCodeGenerator*</span><span class="sxs-lookup"><span data-stu-id="cf9fe-296">*MvcCSharpRazorCodeGenerator*</span></span>
    - <span data-ttu-id="cf9fe-297">*MvcVBRazorCodeParser*</span><span class="sxs-lookup"><span data-stu-id="cf9fe-297">*MvcVBRazorCodeParser*</span></span>

  <span data-ttu-id="cf9fe-298">也已移除下列方法：</span><span class="sxs-lookup"><span data-stu-id="cf9fe-298">The following methods were also removed:</span></span> 

    - <span data-ttu-id="cf9fe-299">*MvcCSharpRazorCodeParser.ParseInheritsStatement(System.Web.Razor.Parser.CodeBlockInfo)*</span><span class="sxs-lookup"><span data-stu-id="cf9fe-299">*MvcCSharpRazorCodeParser.ParseInheritsStatement(System.Web.Razor.Parser.CodeBlockInfo)*</span></span>
    - <span data-ttu-id="cf9fe-300">*MvcWebPageRazorHost.DecorateCodeGenerator(System.Web.Razor.Generator.RazorCodeGenerator)*</span><span class="sxs-lookup"><span data-stu-id="cf9fe-300">*MvcWebPageRazorHost.DecorateCodeGenerator(System.Web.Razor.Generator.RazorCodeGenerator)*</span></span>
    - <span data-ttu-id="cf9fe-301">*MvcVBRazorCodeParser.ParseInheritsStatement(System.Web.Razor.Parser.CodeBlockInfo)*</span><span class="sxs-lookup"><span data-stu-id="cf9fe-301">*MvcVBRazorCodeParser.ParseInheritsStatement(System.Web.Razor.Parser.CodeBlockInfo)*</span></span>
- <span data-ttu-id="cf9fe-302">**當 WebMatrix.WebData.dll 包含 ASP.NET MVC 4 應用程式的 /bin 目錄中時，它會高於表單驗證的 URL。**</span><span class="sxs-lookup"><span data-stu-id="cf9fe-302">**When WebMatrix.WebData.dll is included in the /bin directory of an ASP.NET MVC 4 apps, it takes over the URL for forms authentication.**</span></span> <span data-ttu-id="cf9fe-303">（例如，藉由使用 [新增可部署的相依性] 對話方塊時，請選取 「 ASP.NET 網頁使用 Razor 語法 」） 時，將 WebMatrix.WebData.dll 組件新增至您的應用程式將會覆寫/帳戶/登入來驗證登入重新導向而 /帳戶/登入如預期般預設 ASP.NET MVC 帳戶控制器。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-303">Adding the WebMatrix.WebData.dll assembly to your application (for example, by selecting "ASP.NET Web Pages with Razor Syntax" when using the Add Deployable Dependencies dialog) will override the authentication login redirect to /account/logon rather than /account/login as expected by the default ASP.NET MVC Account Controller.</span></span> <span data-ttu-id="cf9fe-304">若要避免這種行為，並使用指定的 URL 已經在 web.config 的 [驗證] 區段中，您可以加入稱為 PreserveLoginUrl appSetting，並將它設定為 true:</span><span class="sxs-lookup"><span data-stu-id="cf9fe-304">To prevent this behavior and use the URL specified already in the authentication section of web.config, you can add an appSetting called PreserveLoginUrl and set it to true:</span></span> 

    [!code-xml[Main](mvc4-release-notes/samples/sample6.xml)]
- <span data-ttu-id="cf9fe-305">**NuGet 套件管理員安裝嘗試安裝 ASP.NET MVC 4 的 Visual Studio 2010 和 Visual Web Developer 2010 的並存安裝時失敗。**</span><span class="sxs-lookup"><span data-stu-id="cf9fe-305">**The NuGet package manager fails to install when attempting to install ASP.NET MVC 4 for side by side installations of Visual Studio 2010 and Visual Web Developer 2010.**</span></span> <span data-ttu-id="cf9fe-306">若要執行 Visual Studio 2010 和 Visual Web Developer 2010 與 ASP.NET MVC 4 中，您必須安裝 ASP.NET MVC 4 之後已安裝這兩個版本的 Visual Studio。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-306">To run Visual Studio 2010 and Visual Web Developer 2010 side by side with ASP.NET MVC 4 you must install ASP.NET MVC 4 after both versions of Visual Studio have already been installed.</span></span>
- <span data-ttu-id="cf9fe-307">**如果已解除安裝必要條件，解除安裝 ASP.NET MVC 4 就會失敗。**</span><span class="sxs-lookup"><span data-stu-id="cf9fe-307">**Uninstalling ASP.NET MVC 4 fails if prerequisites have already been uninstalled.**</span></span> <span data-ttu-id="cf9fe-308">若要完全解除安裝 ASP.NET MVC 4you 必須解除安裝 ASP.NET MVC 4，然後再解除安裝 Visual Studio。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-308">To cleanly uninstall ASP.NET MVC 4you must uninstall ASP.NET MVC 4 prior to uninstalling Visual Studio.</span></span>
- <span data-ttu-id="cf9fe-309">**安裝 ASP.NET MVC 4 中斷 ASP.NET MVC 3 RTM 應用程式。**</span><span class="sxs-lookup"><span data-stu-id="cf9fe-309">**Installing ASP.NET MVC 4 breaks ASP.NET MVC 3 RTM applications.**</span></span> <span data-ttu-id="cf9fe-310">Rtm 所建立的 ASP.NET MVC 3 應用程式版本 (不能搭配[ASP.NET MVC 3 Tools Update](https://www.microsoft.com/download/details.aspx?id=1491)版本) 才能與 ASP.NET MVC 4 並存需要下列變更。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-310">ASP.NET MVC 3 applications that were created with the RTM release (not with the [ASP.NET MVC 3 Tools Update](https://www.microsoft.com/download/details.aspx?id=1491) release) require the following changes in order to work side-by-side with ASP.NET MVC 4.</span></span> <span data-ttu-id="cf9fe-311">建置專案，而不需要進行這些更新結果中的編譯錯誤。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-311">Building the project without making these updates results in compilation errors.</span></span> 

    <span data-ttu-id="cf9fe-312">**必要的更新**</span><span class="sxs-lookup"><span data-stu-id="cf9fe-312">**Required updates**</span></span>

  1. <span data-ttu-id="cf9fe-313">在根 Web.config 檔案中，加入新 *&lt;appSettings&gt;* 與索引鍵的項目*webPages:Version* ，而*1.0.0.0*。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-313">In the root Web.config file, add a new *&lt;appSettings&gt;* entry with the key *webPages:Version* and the value *1.0.0.0*.</span></span> 

      [!code-xml[Main](mvc4-release-notes/samples/sample7.xml)]
  2. <span data-ttu-id="cf9fe-314">在 方案總管 中，以滑鼠右鍵按一下專案名稱，然後選取 卸載專案</span><span class="sxs-lookup"><span data-stu-id="cf9fe-314">In Solution Explorer, right-click the project name and then select Unload Project.</span></span> <span data-ttu-id="cf9fe-315">然後再次以滑鼠右鍵按一下名稱，然後選取 編輯*ProjectName*.csproj。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-315">Then right-click the name again and select Edit *ProjectName*.csproj.</span></span>
  3. <span data-ttu-id="cf9fe-316">找出下列組件參考：</span><span class="sxs-lookup"><span data-stu-id="cf9fe-316">Locate the following assembly references:</span></span> 

      [!code-xml[Main](mvc4-release-notes/samples/sample8.xml)]

      <span data-ttu-id="cf9fe-317">您可以將它們取代為下列：</span><span class="sxs-lookup"><span data-stu-id="cf9fe-317">Replace them with the following:</span></span>

      [!code-xml[Main](mvc4-release-notes/samples/sample9.xml)]
  4. <span data-ttu-id="cf9fe-318">儲存變更，請關閉您所編輯，然後以滑鼠右鍵按一下專案並選取 重新載入專案 (.csproj) 檔案。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-318">Save the changes, close the project (.csproj) file you were editing, and then right-click the project and select Reload.</span></span>

- <span data-ttu-id="cf9fe-319">**從 4.5 變更目標 4.0 ASP.NET MVC 4 專案時，不會更新 EntityFramework 組件參考：** 如果您變更目標 4.0 ASP.NET MVC 4 專案之後以 4.5 EntityFramework 組件的參考將仍然指向 4.5 版本。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-319">**Changing an ASP.NET MVC 4 project to target 4.0 from 4.5 does not update the EntityFramework assembly reference:** If you change an ASP.NET MVC 4 project to target 4.0 after targetting 4.5 the reference to the EntityFramework assembly will still point to the 4.5 version.</span></span> <span data-ttu-id="cf9fe-320">若要修正此問題的解除安裝並重新安裝 EntityFramework NuGet 套件。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-320">To fix this issue uninstall and reinstall the EntityFramework NuGet package.</span></span>
- <span data-ttu-id="cf9fe-321">**403 禁止從 4.5 變更至目標 4.0 之後，Azure 上執行的 ASP.NET MVC 4 應用程式時：** 如果您以 4.5 之後，變更為 4.0 目標的 ASP.NET MVC 4 專案，然後再部署到 Azure 可能會看到 403 禁止錯誤，在執行階段。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-321">**403 Forbidden when running an ASP.NET MVC 4 application on Azure after changing to target 4.0 from 4.5:** If you change an ASP.NET MVC 4 project to target 4.0 after targetting 4.5 and then deploy to Azure you may see a 403 Forbidden error at runtime.</span></span> <span data-ttu-id="cf9fe-322">若要解決此問題，請將下列內容加入 web.config: `<modules runAllManagedModulesForAllRequests="true" />`</span><span class="sxs-lookup"><span data-stu-id="cf9fe-322">To workaround this issue add the following to your web.config: `<modules runAllManagedModulesForAllRequests="true" />`</span></span>
- <span data-ttu-id="cf9fe-323">**當您輸入時，損毀 visual Studio 2012 '\'字串常值中的 Razor 檔案中。**</span><span class="sxs-lookup"><span data-stu-id="cf9fe-323">**Visual Studio 2012 crashes when you type a '\' in a string literal in a Razor file.**</span></span> <span data-ttu-id="cf9fe-324">可解決此問題輸入右引號常值字串的第一次。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-324">To work around the issue enter the closing quote of the string literal first.</span></span>
- <span data-ttu-id="cf9fe-325"><strong>若要瀏覽&quot;帳戶/管理&quot;網際網路範本結果中的簡體中文、 土耳其文和繁體中文語言執行階段錯誤。</strong></span><span class="sxs-lookup"><span data-stu-id="cf9fe-325"><strong>Browsing to &quot;Account/Manage&quot; in the Internet template results in a runtime error for CHS, TRK and CHT languages.</strong></span></span> <span data-ttu-id="cf9fe-326">若要修正此問題會修改頁面，以區隔<em>@User.Identity.Name</em>將其做為唯一的內容內<em>&lt;強式&gt;</em>標記。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-326">To fix the issue modify the page to separate out <em>@User.Identity.Name</em> by puting it as the only content within the <em>&lt;strong&gt;</em> tag.</span></span>
- <span data-ttu-id="cf9fe-327">**Google 和 LinkedIn 的提供者不支援在 Azure Web Sites。**</span><span class="sxs-lookup"><span data-stu-id="cf9fe-327">**Google and LinkedIn providers are not supported within Azure Web Sites.**</span></span> <span data-ttu-id="cf9fe-328">部署至 Azure 網站時，請使用替代驗證提供者。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-328">Use alternative authentication providers when deploying to Azure Web Sites.</span></span>
- <span data-ttu-id="cf9fe-329">**使用 UriPathExtensionMapping 具有 IIS 8 Express/IIS 時，您會收到 404 找不到的錯誤，當您嘗試使用延伸模組。**</span><span class="sxs-lookup"><span data-stu-id="cf9fe-329">**When using UriPathExtensionMapping with IIS 8 Express/IIS, you would receive 404 Not Found errors when you try to use the extension.**</span></span> <span data-ttu-id="cf9fe-330">靜態檔案處理常式會干擾 web 使用的 Api 的要求*UriPathExtensionMappings*。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-330">The static file handler will interfere with requests to web APIs that use *UriPathExtensionMappings*.</span></span> <span data-ttu-id="cf9fe-331">設定*runAllManagedModulesForAllRequests = true*若要解決此問題的 web.config 中。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-331">Set *runAllManagedModulesForAllRequests=true* in web.config to work around the issue.</span></span>
- <span data-ttu-id="cf9fe-332">**不會再呼叫 Controller.Execute 方法。**</span><span class="sxs-lookup"><span data-stu-id="cf9fe-332">**Controller.Execute method is no longer called.**</span></span> <span data-ttu-id="cf9fe-333">所有的 MVC 控制器現在一律以非同步方式執行。</span><span class="sxs-lookup"><span data-stu-id="cf9fe-333">All MVC controllers are now always executed asynchronously.</span></span>
