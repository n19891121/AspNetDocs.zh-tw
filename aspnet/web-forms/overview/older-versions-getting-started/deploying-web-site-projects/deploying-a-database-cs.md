---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/deploying-a-database-cs
title: 部署資料庫（C#） |Microsoft Docs
author: rick-anderson
description: 部署 ASP.NET web 應用程式需要從開發環境取得必要的檔案和資源到生產環境。 針對 da 。
ms.author: riande
ms.date: 04/23/2009
ms.assetid: ff537a10-9f1f-43fe-9bcb-3dda161ba8f5
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/deploying-a-database-cs
msc.type: authoredcontent
ms.openlocfilehash: 83657be794e1ea31f6ad2f2b4adc274724d60cf2
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/28/2019
ms.locfileid: "74579916"
---
# <a name="deploying-a-database-c"></a><span data-ttu-id="74f1c-104">部署資料庫 (C#)</span><span class="sxs-lookup"><span data-stu-id="74f1c-104">Deploying a Database (C#)</span></span>

<span data-ttu-id="74f1c-105">由[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="74f1c-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="74f1c-106">[下載程式代碼](https://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_07_CS.zip)或[下載 PDF](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial07_DeployDB_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="74f1c-106">[Download Code](https://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_07_CS.zip) or [Download PDF](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial07_DeployDB_cs.pdf)</span></span>

> <span data-ttu-id="74f1c-107">部署 ASP.NET web 應用程式需要從開發環境取得必要的檔案和資源到生產環境。</span><span class="sxs-lookup"><span data-stu-id="74f1c-107">Deploying an ASP.NET web application entails getting the necessary files and resources from the development environment to the production environment.</span></span> <span data-ttu-id="74f1c-108">對於資料驅動的 web 應用程式，這包括資料庫架構和資料。</span><span class="sxs-lookup"><span data-stu-id="74f1c-108">For data-driven web applications this includes the database schema and data.</span></span> <span data-ttu-id="74f1c-109">本教學課程是一系列文章中的第一個，它會探索將資料庫從開發環境成功部署到生產所需的步驟。</span><span class="sxs-lookup"><span data-stu-id="74f1c-109">This tutorial is the first in a series that explores the steps needed to successfully deploy the database from the development environment to production.</span></span>

## <a name="introduction"></a><span data-ttu-id="74f1c-110">簡介</span><span class="sxs-lookup"><span data-stu-id="74f1c-110">Introduction</span></span>

<span data-ttu-id="74f1c-111">部署 ASP.NET web 應用程式需要從開發環境取得必要的檔案和資源到生產環境。</span><span class="sxs-lookup"><span data-stu-id="74f1c-111">Deploying an ASP.NET web application entails getting the necessary files and resources from the development environment to the production environment.</span></span> <span data-ttu-id="74f1c-112">在過去六個教學課程中，我們探討了如何部署簡單的書籍評論 web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="74f1c-112">Over the course of the past six tutorials we looked at deploying a simple Book Reviews web application.</span></span> <span data-ttu-id="74f1c-113">這個示範網站是由數個伺服器端資源（ASP.NET 網頁、設定檔、`Web.sitemap` 檔案等）以及用戶端資源（例如影像和 CSS 檔案）所組成。</span><span class="sxs-lookup"><span data-stu-id="74f1c-113">This demo site was comprised of a number of server-side resources - ASP.NET pages, configuration files, a `Web.sitemap` file, and so forth - along with client-side resources, like images and CSS files.</span></span> <span data-ttu-id="74f1c-114">但是資料驅動的 web 應用程式呢？</span><span class="sxs-lookup"><span data-stu-id="74f1c-114">But what about data-driven web applications?</span></span> <span data-ttu-id="74f1c-115">部署使用資料庫的 web 應用程式時，必須採取哪些額外的步驟？</span><span class="sxs-lookup"><span data-stu-id="74f1c-115">What extra steps must be taken to deploy a web application that uses a database?</span></span>

<span data-ttu-id="74f1c-116">在接下來的幾個教學課程中，我們將討論部署資料驅動 web 應用程式所需的步驟。</span><span class="sxs-lookup"><span data-stu-id="74f1c-116">Over the next several tutorials we will address the steps needed to deploy a data-driven web application.</span></span> <span data-ttu-id="74f1c-117">本教學課程一開始會先檢查如何從開發環境取得資料庫的架構和內容到生產環境，而後續的教學課程會探討所需的設定變更。</span><span class="sxs-lookup"><span data-stu-id="74f1c-117">This tutorial starts by examining how to get a database s schema and contents from the development environment to the production environment, while the subsequent tutorial looks at the needed configuration changes.</span></span> <span data-ttu-id="74f1c-118">之後，我們將探索部署使用應用程式服務（成員資格、角色、設定檔等）之資料庫的挑戰。</span><span class="sxs-lookup"><span data-stu-id="74f1c-118">Following that we'll explore challenges of deploying a database that uses the Application Services (Membership, Roles, Profile, and so on).</span></span>

## <a name="examining-the-updated-book-reviews-web-application"></a><span data-ttu-id="74f1c-119">檢查更新的書籍評論 Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="74f1c-119">Examining the Updated Book Reviews Web Application</span></span>

<span data-ttu-id="74f1c-120">為了示範如何部署資料驅動的 web 應用程式，我已將書籍審查 web 應用程式從簡單的靜態網站更新為數據驅動型網站。</span><span class="sxs-lookup"><span data-stu-id="74f1c-120">In order to demonstrate deploying a data-driven web application, I ve updated the Book Reviews web application from a simple, static website to a data-driven one.</span></span> <span data-ttu-id="74f1c-121">如先前所述，本教學課程中有兩個版本的應用程式下載：一個使用 Web 應用程式專案模型，另一個則使用網站專案模型。</span><span class="sxs-lookup"><span data-stu-id="74f1c-121">As before, there are two versions of the application in this tutorial s download: one that uses the Web Application Project model and one that uses the Web Site Project model.</span></span>

<span data-ttu-id="74f1c-122">更新的書籍評論 web 應用程式會使用[SQL Server 2008 Express Edition](https://www.microsoft.com/express/sql/default.aspx)資料庫，其儲存在網站 s `App_Data` 資料夾（`~/App_Data/Reviews.mdf`）中。</span><span class="sxs-lookup"><span data-stu-id="74f1c-122">The updated Book Reviews web application uses a [SQL Server 2008 Express Edition](https://www.microsoft.com/express/sql/default.aspx) database, which is stored in the site s `App_Data` folder (`~/App_Data/Reviews.mdf`).</span></span> <span data-ttu-id="74f1c-123">如果您的電腦上已安裝 SQL Server 2008，則示範應該會執行，而不會發生錯誤。</span><span class="sxs-lookup"><span data-stu-id="74f1c-123">If you have SQL Server 2008 installed on your computer then the demo should run without error.</span></span> <span data-ttu-id="74f1c-124">如果您有舊版的 SQL Server 您可以安裝免費的 SQL Server 2008 Express Edition，也可以使用本教學課程下載中提供的資料庫腳本，自行建立資料庫。</span><span class="sxs-lookup"><span data-stu-id="74f1c-124">If you have an older version of SQL Server you can either install the free SQL Server 2008 Express Edition or you can use the database scripts available in this tutorial s download to create the database yourself.</span></span>

<span data-ttu-id="74f1c-125">`Reviews.mdf` 資料庫包含四個數據表：</span><span class="sxs-lookup"><span data-stu-id="74f1c-125">The `Reviews.mdf` database contains four tables:</span></span>

- <span data-ttu-id="74f1c-126">`Genres`-包含每個內容類型的記錄，例如技術、小說和商務。</span><span class="sxs-lookup"><span data-stu-id="74f1c-126">`Genres` - includes a record for each genre, such as Technology, Fiction, and Business.</span></span>
- <span data-ttu-id="74f1c-127">`Books`-包含每項審查的記錄，其中包含 `Title`、`GenreId`、`ReviewDate`和 `Review`等資料行，還有其他欄位。</span><span class="sxs-lookup"><span data-stu-id="74f1c-127">`Books` - includes a record for each review, with columns like `Title`, `GenreId`, `ReviewDate`, and `Review`, among others.</span></span>
- <span data-ttu-id="74f1c-128">`Authors`-包含每位作者參與已審查書籍的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="74f1c-128">`Authors` - includes information about each author who has contributed to a reviewed book.</span></span>
- <span data-ttu-id="74f1c-129">`BooksAuthors`-多對多聯結資料表，指定作者撰寫了哪些書籍。</span><span class="sxs-lookup"><span data-stu-id="74f1c-129">`BooksAuthors` - a many-to-many join table that specifies what authors have written what books.</span></span>

<span data-ttu-id="74f1c-130">[圖 1] 顯示這四個數據表的 ER 圖表。</span><span class="sxs-lookup"><span data-stu-id="74f1c-130">Figure 1 shows an ER diagram of these four tables.</span></span>

<span data-ttu-id="74f1c-131">[![書審查 Web 應用程式的資料庫由四個數據表組成](deploying-a-database-cs/_static/image2.jpg)](deploying-a-database-cs/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="74f1c-131">[![The Book Reviews Web Application s Database is Comprised of Four Tables](deploying-a-database-cs/_static/image2.jpg)](deploying-a-database-cs/_static/image1.jpg)</span></span> 

<span data-ttu-id="74f1c-132">**圖 1**：本書審查 Web 應用程式的資料庫是由四個數據表組成（[按一下以觀看完整大小的影像](deploying-a-database-cs/_static/image3.jpg)）</span><span class="sxs-lookup"><span data-stu-id="74f1c-132">**Figure 1**: The Book Reviews Web Application s Database is Comprised of Four Tables ([Click to view full-size image](deploying-a-database-cs/_static/image3.jpg))</span></span>

<span data-ttu-id="74f1c-133">前一版的書籍評論網站針對每本書各有不同的 ASP.NET 網頁。</span><span class="sxs-lookup"><span data-stu-id="74f1c-133">The previous version of the Book Reviews website had a separate ASP.NET page for each book.</span></span> <span data-ttu-id="74f1c-134">例如，有一個名為 `~/Tech/TYASP35.aspx` 的頁面，其中包含了*在24小時內 ASP.NET 3.5*的審查。</span><span class="sxs-lookup"><span data-stu-id="74f1c-134">For example, there was a page named `~/Tech/TYASP35.aspx` that contained the review for *Teach Yourself ASP.NET 3.5 in 24 Hours*.</span></span> <span data-ttu-id="74f1c-135">這個新的資料驅動版本網站有儲存在資料庫中的評論，還有一個 ASP.NET 網頁 [複習 .aspx？ ID =*d*]，它會顯示指定之書籍的審查。</span><span class="sxs-lookup"><span data-stu-id="74f1c-135">This new data-driven version of the website has the reviews stored in the database and a single ASP.NET page, Review.aspx?ID=*bookId*, which displays the review for the specified book.</span></span> <span data-ttu-id="74f1c-136">同樣地，還有一個 [.aspx？ ID =*genreId* ] 頁面，其中列出指定之內容類型中已審核的書籍。</span><span class="sxs-lookup"><span data-stu-id="74f1c-136">Likewise, there is a Genre.aspx?ID=*genreId* page that lists the reviewed books in the specified genre.</span></span>

<span data-ttu-id="74f1c-137">[圖 2] 和 [圖 3] 顯示作用中的 `Genre.aspx` 和 `Review.aspx` 頁面。</span><span class="sxs-lookup"><span data-stu-id="74f1c-137">Figures 2 and 3 show the `Genre.aspx` and `Review.aspx` pages in action.</span></span> <span data-ttu-id="74f1c-138">請注意每個頁面的網址列中的 URL。</span><span class="sxs-lookup"><span data-stu-id="74f1c-138">Note the URL in the Address bar for each page.</span></span> <span data-ttu-id="74f1c-139">在 [圖 2] 中，it 的內容類型 .aspx？ ID = 85d164ba-1123-4c47-82a0-c8ec75de7e0e。</span><span class="sxs-lookup"><span data-stu-id="74f1c-139">In Figure 2 it s Genre.aspx?ID=85d164ba-1123-4c47-82a0-c8ec75de7e0e.</span></span> <span data-ttu-id="74f1c-140">由於85d164ba-1123-4c47-82a0-c8ec75de7e0e 是技術類型的 `GenreId` 值，因此頁面的標題會顯示「技術評論」，而項目符號清單會列舉網站上屬於此類型的評論。</span><span class="sxs-lookup"><span data-stu-id="74f1c-140">Because 85d164ba-1123-4c47-82a0-c8ec75de7e0e is the `GenreId` value for the Technology genre, the page s heading reads "Technology Reviews" and the bulleted list enumerates those reviews on the site that fall under this genre.</span></span>

<span data-ttu-id="74f1c-141">[![技術內容類型頁面](deploying-a-database-cs/_static/image5.jpg)](deploying-a-database-cs/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="74f1c-141">[![The Technology Genre Page](deploying-a-database-cs/_static/image5.jpg)](deploying-a-database-cs/_static/image4.jpg)</span></span> 

<span data-ttu-id="74f1c-142">**圖 2**：技術內容類型頁面（[按一下以觀看完整大小的影像](deploying-a-database-cs/_static/image6.jpg)）</span><span class="sxs-lookup"><span data-stu-id="74f1c-142">**Figure 2**: The Technology Genre Page ([Click to view full-size image](deploying-a-database-cs/_static/image6.jpg))</span></span>

<span data-ttu-id="74f1c-143">[![在24小時內讓自己 ASP.NET 3.5 的審查](deploying-a-database-cs/_static/image8.jpg)](deploying-a-database-cs/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="74f1c-143">[![The Review for Teach Yourself ASP.NET 3.5 in 24 Hours](deploying-a-database-cs/_static/image8.jpg)](deploying-a-database-cs/_static/image7.jpg)</span></span> 

<span data-ttu-id="74f1c-144">**圖 3**：讓*自己在24小時內 ASP.NET 3.5*的審查（[按一下以觀看完整大小的影像](deploying-a-database-cs/_static/image9.jpg)）</span><span class="sxs-lookup"><span data-stu-id="74f1c-144">**Figure 3**: The Review for *Teach Yourself ASP.NET 3.5 in 24 Hours* ([Click to view full-size image](deploying-a-database-cs/_static/image9.jpg))</span></span>

<span data-ttu-id="74f1c-145">本書審查 web 應用程式也包含管理區段，讓系統管理員可以在其中新增、編輯和刪除內容、評論和撰寫資訊。</span><span class="sxs-lookup"><span data-stu-id="74f1c-145">The Book Reviews web application also includes an administration section where administrators can add, edit, and delete genres, reviews, and author information.</span></span> <span data-ttu-id="74f1c-146">目前，任何訪客都可以存取 [管理] 區段。</span><span class="sxs-lookup"><span data-stu-id="74f1c-146">Currently, any visitor can access the administration section.</span></span> <span data-ttu-id="74f1c-147">在未來的教學課程中，我們將新增對使用者帳戶的支援，並僅允許授權的使用者進入系統管理頁面。</span><span class="sxs-lookup"><span data-stu-id="74f1c-147">In a future tutorial we'll add support for user accounts and only permit authorized users into the administration pages.</span></span>

<span data-ttu-id="74f1c-148">如果您下載書籍審查應用程式，請記住，其目的是要示範如何部署資料驅動應用程式。</span><span class="sxs-lookup"><span data-stu-id="74f1c-148">If you download the Book Reviews application please keep in mind that its purpose is to demonstrate deploying a data-driven application.</span></span> <span data-ttu-id="74f1c-149">它不會展現應用程式設計的最佳作法。</span><span class="sxs-lookup"><span data-stu-id="74f1c-149">It does not exhibit best practices as far as application design.</span></span> <span data-ttu-id="74f1c-150">例如，沒有個別的資料存取層（DAL）;ASP.NET 網頁會透過其程式碼後置類別中的 SqlDataSource 控制項或 ADO.NET 程式碼，直接與資料庫通訊。</span><span class="sxs-lookup"><span data-stu-id="74f1c-150">For example, there is no separate Data Access Layer (DAL); the ASP.NET pages communicate directly with the database through the SqlDataSource control or ADO.NET code in their code-behind classes.</span></span> <span data-ttu-id="74f1c-151">若要深入瞭解如何使用階層式架構來建立資料驅動應用程式，請參閱我的使用[*資料*教學](../../data-access/index.md)課程。</span><span class="sxs-lookup"><span data-stu-id="74f1c-151">For a more in-depth look at creating data-driven applications using a tiered architecture, refer to my [*Working with Data* tutorials](../../data-access/index.md).</span></span>

## <a name="databases-on-development-versus-production"></a><span data-ttu-id="74f1c-152">開發上的資料庫與生產環境</span><span class="sxs-lookup"><span data-stu-id="74f1c-152">Databases on Development Versus Production</span></span>

<span data-ttu-id="74f1c-153">當您在資料驅動的 web 應用程式上開始開發時，您必須指定資料庫連接字串，其中提供如何連接到資料庫的應用程式詳細資料。</span><span class="sxs-lookup"><span data-stu-id="74f1c-153">When you start development on a data-driven web application you must specify a database connection string, which provides the application details on how to connect to the database.</span></span> <span data-ttu-id="74f1c-154">此連接字串會指定資料庫伺服器、資料庫名稱和安全性資訊等其他專案。</span><span class="sxs-lookup"><span data-stu-id="74f1c-154">This connection string specifies, among other things, the database server, the database name, and security information.</span></span> <span data-ttu-id="74f1c-155">最常見的情況是，應用程式在開發期間所使用的資料庫，與生產環境中所使用的資料庫不同。</span><span class="sxs-lookup"><span data-stu-id="74f1c-155">Most often, the database used by the application during development is different than the database used when it s in production.</span></span> <span data-ttu-id="74f1c-156">在開發與生產環境中使用不同的資料庫有許多好處。</span><span class="sxs-lookup"><span data-stu-id="74f1c-156">There are many benefits of using different databases for development versus production.</span></span> <span data-ttu-id="74f1c-157">在開發中使用不同的資料庫，表示您不必擔心不小心修改或刪除即時資料。</span><span class="sxs-lookup"><span data-stu-id="74f1c-157">Having a different database in development means you don t have to worry about accidentally modifying or deleting live data.</span></span> <span data-ttu-id="74f1c-158">它也可讓您放入虛擬的測試資料，或對資料模型進行重大變更，而不需要擔心對生產環境中的應用程式所造成的影響。</span><span class="sxs-lookup"><span data-stu-id="74f1c-158">It also lets you put in dummy test data or make breaking changes to the data model without having to worry about the effects on the application in production.</span></span> <span data-ttu-id="74f1c-159">在開發和生產環境中擁有不同資料庫的缺點是，當應用程式部署資料庫時，也必須部署資料庫架構或資料的任何相關變更。</span><span class="sxs-lookup"><span data-stu-id="74f1c-159">The downside of having a different database in the development and production environments is that when the application is deployed the database and any pertinent changes to the database s schema or data must also be deployed.</span></span>

<span data-ttu-id="74f1c-160">在第一次部署之前，資料庫只有一個實例，而該實例位於開發環境中。</span><span class="sxs-lookup"><span data-stu-id="74f1c-160">Prior to the first deployment, there is only one instance of the database, and that instance is in the development environment.</span></span> <span data-ttu-id="74f1c-161">當第一次將應用程式部署至生產環境時，我們不能只複製必要的伺服器端和用戶端檔案，也不能將資料庫從開發環境複製到實際執行環境。</span><span class="sxs-lookup"><span data-stu-id="74f1c-161">When deploying the application to production for the first time we must not only copy up the necessary server-side and client-side files, but also copy the database from the development environment to the production environment.</span></span> <span data-ttu-id="74f1c-162">這就是我們現在在書籍審查 web 應用程式中的位置：資料庫位於開發環境中的 `App_Data` 資料夾，但尚未推送到生產環境。</span><span class="sxs-lookup"><span data-stu-id="74f1c-162">This is where we stand right now with the Book Reviews web application - the database resides in the `App_Data` folder in our development environment but has not yet been pushed up to the production environment.</span></span>

<span data-ttu-id="74f1c-163">一旦部署應用程式，就會有兩個資料庫複本。</span><span class="sxs-lookup"><span data-stu-id="74f1c-163">Once the application has been deployed there are two copies of the database.</span></span> <span data-ttu-id="74f1c-164">隨著應用程式成熟，可能會加入新功能、強制資料模型的變更（例如將新的資料行加入至現有的資料表、變更現有資料行、加入新的資料表等等）。</span><span class="sxs-lookup"><span data-stu-id="74f1c-164">As the application matures, new features may be added, necessitating a change to the data model (such as adding new columns to existing tables, making changes to existing columns, adding new tables, and so on).</span></span> <span data-ttu-id="74f1c-165">下次部署 web 應用程式時，在上一次部署之後，套用至開發環境中資料庫的變更，必須套用至生產資料庫。</span><span class="sxs-lookup"><span data-stu-id="74f1c-165">When the web application is next deployed, the changes applied to the database in the development environment since the last deployment must be applied to the production database.</span></span> <span data-ttu-id="74f1c-166">在後續的教學課程中，會討論管理此程式的一些策略。</span><span class="sxs-lookup"><span data-stu-id="74f1c-166">Some strategies for managing this process are discussed in a future tutorial.</span></span> <span data-ttu-id="74f1c-167">本教學課程著重于將整個資料庫從開發環境部署到生產環境。</span><span class="sxs-lookup"><span data-stu-id="74f1c-167">This tutorial focuses on deploying the entire database from the development environment to production.</span></span>

## <a name="deploying-the-database-to-the-production-environment"></a><span data-ttu-id="74f1c-168">將資料庫部署到生產環境</span><span class="sxs-lookup"><span data-stu-id="74f1c-168">Deploying the Database to the Production Environment</span></span>

<span data-ttu-id="74f1c-169">本教學課程的其餘部分將探討如何將資料庫從開發環境部署到生產環境。</span><span class="sxs-lookup"><span data-stu-id="74f1c-169">The remainder of this tutorial looks at how to deploy the database from the development environment to the production environment.</span></span> <span data-ttu-id="74f1c-170">如果您遵循此動作，則必須確定您的 web 主機提供者帳戶包含 Microsoft SQL Server 資料庫支援。</span><span class="sxs-lookup"><span data-stu-id="74f1c-170">If you are following along you need to make sure that your account with your web host provider includes Microsoft SQL Server database support.</span></span> <span data-ttu-id="74f1c-171">您也需要有一些資訊，也就是資料庫伺服器名稱、資料庫名稱，以及用來連接資料庫的使用者名稱和密碼。</span><span class="sxs-lookup"><span data-stu-id="74f1c-171">You'll also need to have some information at hand, namely the database server name, the database name, and the username and password used to connect to the database.</span></span>

<span data-ttu-id="74f1c-172">如本教學課程稍早所述，本書會回顧網站資料庫是儲存在 `App_Data` 資料夾中的 SQL Server 2008 Express Edition 資料庫。</span><span class="sxs-lookup"><span data-stu-id="74f1c-172">As noted earlier in this tutorial, the Book Reviews website s database is a SQL Server 2008 Express Edition database stored in the `App_Data` folder.</span></span> <span data-ttu-id="74f1c-173">這種情況的原因是，部署這類資料庫就像是將 `App_Data` 資料夾從開發環境複製到生產環境一樣簡單。</span><span class="sxs-lookup"><span data-stu-id="74f1c-173">It would stand to reason that deploying such a database would be as simple as copying the `App_Data` folder from the development environment to the production environment.</span></span> <span data-ttu-id="74f1c-174">不過，大部分的 web 主機提供者都不支援在 `App_Data` 資料夾中裝載資料庫，因為安全性的緣故。</span><span class="sxs-lookup"><span data-stu-id="74f1c-174">However, most web host providers do not support hosting databases in the `App_Data` folder because of security reasons.</span></span> <span data-ttu-id="74f1c-175">Web 主機會改在其環境中的 SQL Server 資料庫伺服器上提供帳戶。</span><span class="sxs-lookup"><span data-stu-id="74f1c-175">Instead, web hosts provide an account on a SQL Server database server within their environment.</span></span> <span data-ttu-id="74f1c-176">將資料庫從您的開發環境部署到生產環境，需要在您的 web 主機 s 資料庫伺服器上註冊資料庫。</span><span class="sxs-lookup"><span data-stu-id="74f1c-176">Deploying the database from your development environment to the production environment requires getting your database registered on your web host s database server.</span></span>

<span data-ttu-id="74f1c-177">那麼，您要如何將資料庫從開發環境移至生產環境？</span><span class="sxs-lookup"><span data-stu-id="74f1c-177">So how do you get your database from the development environment to the production environment?</span></span> <span data-ttu-id="74f1c-178">有幾種方式可以完成這項工作，視您的 web 主機所提供的服務而定。</span><span class="sxs-lookup"><span data-stu-id="74f1c-178">There are a couple ways to accomplish this depending on what services your web host offers.</span></span> <span data-ttu-id="74f1c-179">在某些主機（例如 DiscountASP.NET）中，您可以將資料庫的備份或實際的 `.mdf` 檔案 FTP 至您的網站，然後從 [控制台]，將備份檔案還原，或將 `.mdf` 檔案附加至 SQL Server 資料庫伺服器。</span><span class="sxs-lookup"><span data-stu-id="74f1c-179">With some hosts, such as DiscountASP.NET, you can FTP a backup of the database or the actual `.mdf` file to your website and then, from the Control Panel, restore the backup file or attach the `.mdf` file to the SQL Server database server.</span></span> <span data-ttu-id="74f1c-180">使用這類工具來部署資料庫，就像將 `App_Data` 資料夾複製到生產環境，然後透過 [控制台] 進行附加一樣簡單。</span><span class="sxs-lookup"><span data-stu-id="74f1c-180">With such tools deploying the database is as simple as copying the `App_Data` folder to the production environment and then attaching it via the Control Panel.</span></span> <span data-ttu-id="74f1c-181">這可能是第一次發行資料庫最簡單快速的方式。</span><span class="sxs-lookup"><span data-stu-id="74f1c-181">This is perhaps the easiest and quickest way to publish your database for the first time.</span></span>

<span data-ttu-id="74f1c-182">另一種方法是使用「資料庫發佈嚮導」。</span><span class="sxs-lookup"><span data-stu-id="74f1c-182">Another approach is to use the Database Publishing Wizard.</span></span> <span data-ttu-id="74f1c-183">[資料庫發佈嚮導] 是 Windows 桌面應用程式，會產生 SQL 命令來建立您的資料庫架構，也就是資料表、預存程式、視圖、使用者定義函數等等，並選擇性地將資料放在資料表中。</span><span class="sxs-lookup"><span data-stu-id="74f1c-183">The Database Publishing Wizard is a Windows desktop application that will generate the SQL commands to create your database s schema - the tables, stored procedures, views, user-defined functions, and so forth - and, optionally, the data in its tables.</span></span> <span data-ttu-id="74f1c-184">接著，您可以透過 SQL Server Management Studio 連接到 web 主機提供者的資料庫伺服器，然後執行此腳本，在生產環境上複製資料庫。</span><span class="sxs-lookup"><span data-stu-id="74f1c-184">You can then connect to your web host provider s database server through SQL Server Management Studio and then execute this script to duplicate the database on production.</span></span> <span data-ttu-id="74f1c-185">更棒的是，如果您的 web 主機提供者支援 Microsoft 的[資料庫發行服務](http://www.codeplex.com/sqlhost/Wiki/View.aspx?title=Database%20Publishing%20Services&amp;referringTitle=Home)，您可以讓資料庫發佈嚮導所產生的腳本代表您自動在資料庫伺服器上執行。</span><span class="sxs-lookup"><span data-stu-id="74f1c-185">Even better, if your web host provider supports Microsoft s [Database Publishing Services](http://www.codeplex.com/sqlhost/Wiki/View.aspx?title=Database%20Publishing%20Services&amp;referringTitle=Home) you can have the script generated by the Database Publishing Wizard automatically executed on the database server on your behalf.</span></span> <span data-ttu-id="74f1c-186">由於「資料庫發佈嚮導」產生的腳本會建立資料庫的架構和資料，因此不論您的 web 主機提供者是否提供附加已上傳 `.mdf` 檔案等功能，都能正常執行。</span><span class="sxs-lookup"><span data-stu-id="74f1c-186">Because the Database Publishing Wizard generates a script that creates the database s schema and data, it will work regardless of whether your web host provider offers features like attaching an uploaded `.mdf` file.</span></span>

### <a name="generating-the-sql-commands-to-create-the-database-schema-and-data-using-the-database-publishing-wizard"></a><span data-ttu-id="74f1c-187">使用資料庫發行嚮導產生 SQL 命令以建立資料庫架構和資料</span><span class="sxs-lookup"><span data-stu-id="74f1c-187">Generating the SQL Commands to Create the Database Schema and Data Using the Database Publishing Wizard</span></span>

<span data-ttu-id="74f1c-188">讓我們逐步解說如何使用 [資料庫發佈嚮導]，將書籍審核資料庫部署到生產環境。</span><span class="sxs-lookup"><span data-stu-id="74f1c-188">Let s walk through using the Database Publishing Wizard to deploy the Book Reviews database to production.</span></span> <span data-ttu-id="74f1c-189">如果您使用 Visual Studio 2008 或更高版本，則已安裝資料庫發行嚮導。</span><span class="sxs-lookup"><span data-stu-id="74f1c-189">If you are using Visual Studio 2008 or beyond, the Database Publishing Wizard is already installed.</span></span> <span data-ttu-id="74f1c-190">如果您使用 Visual Studio 2005，就必須先[下載並安裝](https://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en)嚮導。</span><span class="sxs-lookup"><span data-stu-id="74f1c-190">If you are using Visual Studio 2005 then you will need to first [download and install](https://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en) the wizard.</span></span>

<span data-ttu-id="74f1c-191">開啟 Visual Studio，然後流覽至 `Reviews.mdf` 資料庫。</span><span class="sxs-lookup"><span data-stu-id="74f1c-191">Open Visual Studio and navigate to the `Reviews.mdf` database.</span></span> <span data-ttu-id="74f1c-192">如果您使用的是 Visual Web Developer，請移至資料庫總管;如果您使用 Visual Studio，請使用伺服器總管。</span><span class="sxs-lookup"><span data-stu-id="74f1c-192">If you are using Visual Web Developer, go to the Database Explorer; if you are using Visual Studio, use the Server Explorer.</span></span> <span data-ttu-id="74f1c-193">[圖 4] 顯示 Visual Web Developer 資料庫總管中的 `Reviews.mdf` 資料庫。</span><span class="sxs-lookup"><span data-stu-id="74f1c-193">Figure 4 shows the `Reviews.mdf` database in the Database Explorer in Visual Web Developer.</span></span> <span data-ttu-id="74f1c-194">如 [圖 4] 所示，`Reviews.mdf` 資料庫是由四個數據表、三個預存程式和一個使用者定義函數所組成。</span><span class="sxs-lookup"><span data-stu-id="74f1c-194">As Figure 4 shows, the `Reviews.mdf` database is composed of four tables, three stored procedures, and a user-defined function.</span></span>

<span data-ttu-id="74f1c-195">[![在資料庫總管或伺服器總管中尋找資料庫](deploying-a-database-cs/_static/image11.jpg)](deploying-a-database-cs/_static/image10.jpg)</span><span class="sxs-lookup"><span data-stu-id="74f1c-195">[![Locate the Database in the Database Explorer or Server Explorer](deploying-a-database-cs/_static/image11.jpg)](deploying-a-database-cs/_static/image10.jpg)</span></span> 

<span data-ttu-id="74f1c-196">**圖 4**：在資料庫總管或伺服器總管中尋找資料庫（[按一下以查看完整大小的影像](deploying-a-database-cs/_static/image12.jpg)）</span><span class="sxs-lookup"><span data-stu-id="74f1c-196">**Figure 4**: Locate the Database in the Database Explorer or Server Explorer ([Click to view full-size image](deploying-a-database-cs/_static/image12.jpg))</span></span>

<span data-ttu-id="74f1c-197">以滑鼠右鍵按一下資料庫名稱，然後從內容功能表選擇 [發行至提供者] 選項。</span><span class="sxs-lookup"><span data-stu-id="74f1c-197">Right-click on the database name and choose the "Publish to provider" option from the context menu.</span></span> <span data-ttu-id="74f1c-198">這會啟動 [資料庫發佈嚮導] （請參閱 [圖 5]）。</span><span class="sxs-lookup"><span data-stu-id="74f1c-198">This launches the Database Publishing Wizard (see Figure 5).</span></span> <span data-ttu-id="74f1c-199">按 [下一步]，前進到啟動顯示畫面。</span><span class="sxs-lookup"><span data-stu-id="74f1c-199">Click Next to advance past the splash screen.</span></span>

<span data-ttu-id="74f1c-200">[![資料庫發佈嚮導啟動顯示畫面](deploying-a-database-cs/_static/image14.jpg)](deploying-a-database-cs/_static/image13.jpg)</span><span class="sxs-lookup"><span data-stu-id="74f1c-200">[![The Database Publishing Wizard Splash Screen](deploying-a-database-cs/_static/image14.jpg)](deploying-a-database-cs/_static/image13.jpg)</span></span> 

<span data-ttu-id="74f1c-201">**圖 5**：資料庫發佈嚮導啟動顯示畫面（[按一下以觀看完整大小的影像](deploying-a-database-cs/_static/image15.jpg)）</span><span class="sxs-lookup"><span data-stu-id="74f1c-201">**Figure 5**: The Database Publishing Wizard Splash Screen ([Click to view full-size image](deploying-a-database-cs/_static/image15.jpg))</span></span>

<span data-ttu-id="74f1c-202">Wizard 中的第二個畫面會列出資料庫發行嚮導可存取的資料庫，並讓您選擇是否要編寫所選資料庫中所有物件的腳本，或挑選要編寫腳本的物件。</span><span class="sxs-lookup"><span data-stu-id="74f1c-202">The second screen in the wizard lists the databases accessible to the Database Publishing Wizard and lets you choose whether to script all objects in the selected database or to pick which objects to script.</span></span> <span data-ttu-id="74f1c-203">選取適當的資料庫，並核取 [為選取的資料庫中的所有物件編寫腳本] 選項。</span><span class="sxs-lookup"><span data-stu-id="74f1c-203">Select the appropriate database and leave the "Script all objects in the selected database" option checked.</span></span>

> [!NOTE]
> <span data-ttu-id="74f1c-204">當您在 [圖 6] 所示的畫面中按一下 [下一步] 時，如果您看到錯誤：「此嚮導的資料庫*databaseName*中沒有任何物件」，請確定您資料庫檔案的路徑不太長。</span><span class="sxs-lookup"><span data-stu-id="74f1c-204">If you get the error "There are no objects in database *databaseName* of the types scriptable by this wizard" when clicking Next in the screen shown in Figure 6, make sure that the path to your database file is not overly long.</span></span> <span data-ttu-id="74f1c-205">發現，如果資料庫檔案的路徑太長，就會發生這個錯誤。</span><span class="sxs-lookup"><span data-stu-id="74f1c-205">It has been discovered that this error can arise if the path to the database file is too long.</span></span>

<span data-ttu-id="74f1c-206">[![資料庫發佈嚮導啟動顯示畫面](deploying-a-database-cs/_static/image17.jpg)](deploying-a-database-cs/_static/image16.jpg)</span><span class="sxs-lookup"><span data-stu-id="74f1c-206">[![The Database Publishing Wizard Splash Screen](deploying-a-database-cs/_static/image17.jpg)](deploying-a-database-cs/_static/image16.jpg)</span></span> 

<span data-ttu-id="74f1c-207">**圖 6**：資料庫發佈嚮導啟動顯示畫面（[按一下以觀看完整大小的影像](deploying-a-database-cs/_static/image18.jpg)）</span><span class="sxs-lookup"><span data-stu-id="74f1c-207">**Figure 6**: The Database Publishing Wizard Splash Screen ([Click to view full-size image](deploying-a-database-cs/_static/image18.jpg))</span></span>

<span data-ttu-id="74f1c-208">在下一個畫面中，您可以產生腳本檔案，或者，如果您的 web 主機支援它，請將資料庫直接發行到 web 主機提供者的資料庫伺服器。</span><span class="sxs-lookup"><span data-stu-id="74f1c-208">From the next screen you can generate a script file or, if your web host supports it, publish the database directly to your web host provider s database server.</span></span> <span data-ttu-id="74f1c-209">如 [圖 7] 所示，我將腳本寫入檔案 `C:\REVIEWS.MDF.sql`。</span><span class="sxs-lookup"><span data-stu-id="74f1c-209">As Figure 7 shows, I am having the script written to the file `C:\REVIEWS.MDF.sql`.</span></span>

<span data-ttu-id="74f1c-210">[![將資料庫編寫成檔案，或將它直接發行到 Web 主機提供者](deploying-a-database-cs/_static/image20.jpg)](deploying-a-database-cs/_static/image19.jpg)</span><span class="sxs-lookup"><span data-stu-id="74f1c-210">[![Script the Database to a File or Publish it Directly to Your Web Host Provider](deploying-a-database-cs/_static/image20.jpg)](deploying-a-database-cs/_static/image19.jpg)</span></span> 

<span data-ttu-id="74f1c-211">**圖 7**：將資料庫編寫成檔案，或將它直接發行至您的 Web 主機提供者（[按一下以觀看完整大小的影像](deploying-a-database-cs/_static/image21.jpg)）</span><span class="sxs-lookup"><span data-stu-id="74f1c-211">**Figure 7**: Script the Database to a File or Publish it Directly to Your Web Host Provider ([Click to view full-size image](deploying-a-database-cs/_static/image21.jpg))</span></span>

<span data-ttu-id="74f1c-212">後續畫面會提示您提供各種腳本選項。</span><span class="sxs-lookup"><span data-stu-id="74f1c-212">The subsequent screen prompts you for a variety of scripting options.</span></span> <span data-ttu-id="74f1c-213">您可以指定腳本是否應包含 drop 語句來移除這些現有的物件。</span><span class="sxs-lookup"><span data-stu-id="74f1c-213">You can specify whether the script should include drop statements to remove these existing objects.</span></span> <span data-ttu-id="74f1c-214">這會預設為 True，這在第一次部署資料庫時是正常的。</span><span class="sxs-lookup"><span data-stu-id="74f1c-214">This defaults to True, which is fine when deploying a database for the first time.</span></span> <span data-ttu-id="74f1c-215">您也可以指定目標資料庫是 SQL Server 2000、SQL Server 2005 或 SQL Server 2008。</span><span class="sxs-lookup"><span data-stu-id="74f1c-215">You can also specify whether the target database is SQL Server 2000, SQL Server 2005, or SQL Server 2008.</span></span> <span data-ttu-id="74f1c-216">最後，您可以指出是否要撰寫架構和資料的腳本、只編寫資料，或只撰寫架構。</span><span class="sxs-lookup"><span data-stu-id="74f1c-216">Finally, you can indicate whether to script the schema and data, just the data, or just the schema.</span></span> <span data-ttu-id="74f1c-217">架構是資料庫物件、資料表、預存程式、視圖等的集合。</span><span class="sxs-lookup"><span data-stu-id="74f1c-217">The schema is the collection of database objects, the tables, stored procedures, views, and so on.</span></span> <span data-ttu-id="74f1c-218">資料是位於資料表中的資訊。</span><span class="sxs-lookup"><span data-stu-id="74f1c-218">The data is the information residing in the tables.</span></span>

<span data-ttu-id="74f1c-219">如 [圖 8] 所示，我已設定 wizard 來卸載現有的資料庫物件、產生 SQL Server 2008 資料庫的腳本，以及發行架構和資料。</span><span class="sxs-lookup"><span data-stu-id="74f1c-219">As Figure 8 illustrates, I ve got the wizard configured to drop existing database objects, to generate script for a SQL Server 2008 database, and to publish both the schema and data.</span></span>

<span data-ttu-id="74f1c-220">[![指定發行選項](deploying-a-database-cs/_static/image23.jpg)](deploying-a-database-cs/_static/image22.jpg)</span><span class="sxs-lookup"><span data-stu-id="74f1c-220">[![Specify the Publishing Options](deploying-a-database-cs/_static/image23.jpg)](deploying-a-database-cs/_static/image22.jpg)</span></span> 

<span data-ttu-id="74f1c-221">**圖 8**：指定發行選項（[按一下以查看完整大小的影像](deploying-a-database-cs/_static/image24.jpg)）</span><span class="sxs-lookup"><span data-stu-id="74f1c-221">**Figure 8**: Specify the Publishing Options ([Click to view full-size image](deploying-a-database-cs/_static/image24.jpg))</span></span>

<span data-ttu-id="74f1c-222">最後兩個畫面會匯總即將採取的動作，然後顯示腳本的狀態。</span><span class="sxs-lookup"><span data-stu-id="74f1c-222">The final two screens summarize the actions that are about to be taken and then display the status of the scripting.</span></span> <span data-ttu-id="74f1c-223">執行 wizard 的最後結果是，我們有一個腳本檔案，其中包含在生產環境中建立資料庫，並使用與開發時相同的資料來填入所需的 SQL 命令。</span><span class="sxs-lookup"><span data-stu-id="74f1c-223">The net result of running the wizard is that we have a script file that contains the SQL commands needed to create the database on production and populate it with the same data as on development.</span></span>

### <a name="executing-the-sql-commands-on-the-production-environment-database"></a><span data-ttu-id="74f1c-224">在生產環境資料庫上執行 SQL 命令</span><span class="sxs-lookup"><span data-stu-id="74f1c-224">Executing the SQL Commands On the Production Environment Database</span></span>

<span data-ttu-id="74f1c-225">既然我們已經有包含 SQL 命令的腳本來建立資料庫及其資料，剩下的就是在生產資料庫上執行腳本。</span><span class="sxs-lookup"><span data-stu-id="74f1c-225">Now that we have the script that contains the SQL commands to create the database and its data all that remains is to execute the script on the production database.</span></span> <span data-ttu-id="74f1c-226">有些 web 主機提供者會在其 [控制台] 中提供一個文字方塊，您可以在其中輸入要在資料庫上執行的 SQL 命令。</span><span class="sxs-lookup"><span data-stu-id="74f1c-226">Some web host providers offer a textbox in their Control Panel where you can enter SQL commands to execute on your database.</span></span> <span data-ttu-id="74f1c-227">如果您有非常大的腳本檔案，這個選項可能無法使用（例如，`REVIEWS.MDF.sql` 腳本檔案大小超過 425 KB）。</span><span class="sxs-lookup"><span data-stu-id="74f1c-227">If you have a very large script file then this option might not work (the `REVIEWS.MDF.sql` script file is over 425 KB in size, for instance).</span></span>

<span data-ttu-id="74f1c-228">較好的方法是使用 SQL Server Management Studio （SSMS）直接連接到生產資料庫伺服器。</span><span class="sxs-lookup"><span data-stu-id="74f1c-228">A better approach is to connect directly to the production database server using SQL Server Management Studio (SSMS).</span></span> <span data-ttu-id="74f1c-229">如果您的電腦上已安裝非 Express 版本的 SQL Server，則您可能已經安裝 SSMS。</span><span class="sxs-lookup"><span data-stu-id="74f1c-229">If you have a non-Express Edition of SQL Server installed on your computer then you likely already have SSMS installed.</span></span> <span data-ttu-id="74f1c-230">否則，您可以[下載並安裝](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)免費的 SQL Server Management Studio Express Edition 複本。</span><span class="sxs-lookup"><span data-stu-id="74f1c-230">Otherwise, you can [download and install](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) a free copy of SQL Server Management Studio Express Edition.</span></span>

<span data-ttu-id="74f1c-231">啟動 SSMS，並使用 web 主機提供者所提供的資訊連接到您的 web 主機資料庫伺服器。</span><span class="sxs-lookup"><span data-stu-id="74f1c-231">Launch SSMS and connect to your web host s database server using the information provided by your web host provider.</span></span>

<span data-ttu-id="74f1c-232">[![連接到您的 Web 主機提供者資料庫伺服器](deploying-a-database-cs/_static/image26.jpg)](deploying-a-database-cs/_static/image25.jpg)</span><span class="sxs-lookup"><span data-stu-id="74f1c-232">[![Connect to Your Web Host Provider s Database Server](deploying-a-database-cs/_static/image26.jpg)](deploying-a-database-cs/_static/image25.jpg)</span></span> 

<span data-ttu-id="74f1c-233">**圖 9**：連接到您的 Web 主機服務提供者的資料庫伺服器（[按一下以查看完整大小的影像](deploying-a-database-cs/_static/image27.jpg)）</span><span class="sxs-lookup"><span data-stu-id="74f1c-233">**Figure 9**: Connect to Your Web Host Provider s Database Server ([Click to view full-size image](deploying-a-database-cs/_static/image27.jpg))</span></span>

<span data-ttu-id="74f1c-234">展開 [資料庫] 索引標籤，然後找出您的資料庫。</span><span class="sxs-lookup"><span data-stu-id="74f1c-234">Expand the Databases tab and locate your database.</span></span> <span data-ttu-id="74f1c-235">按一下工具列左上角的 [新增查詢] 按鈕，並貼上資料庫發行嚮導所建立之腳本檔案中的 SQL 命令，然後按一下 [執行] 按鈕，在生產環境資料庫伺服器上執行這些命令。</span><span class="sxs-lookup"><span data-stu-id="74f1c-235">Click the New Query button in the upper left corner of the Toolbar, paste in the SQL commands from the script file created by the Database Publishing Wizard, and click the Execute button to run these commands on the production database server.</span></span> <span data-ttu-id="74f1c-236">如果您的腳本檔案特別大，可能需要幾分鐘的時間來執行命令。</span><span class="sxs-lookup"><span data-stu-id="74f1c-236">If your script file is especially large it may take several minutes to execute the commands.</span></span>

<span data-ttu-id="74f1c-237">[![連接到您的 Web 主機提供者資料庫伺服器](deploying-a-database-cs/_static/image29.jpg)](deploying-a-database-cs/_static/image28.jpg)</span><span class="sxs-lookup"><span data-stu-id="74f1c-237">[![Connect to Your Web Host Provider s Database Server](deploying-a-database-cs/_static/image29.jpg)](deploying-a-database-cs/_static/image28.jpg)</span></span> 

<span data-ttu-id="74f1c-238">**圖 10**：連接到您的 Web 主機服務提供者的資料庫伺服器（[按一下以查看完整大小的影像](deploying-a-database-cs/_static/image30.jpg)）</span><span class="sxs-lookup"><span data-stu-id="74f1c-238">**Figure 10**: Connect to Your Web Host Provider s Database Server ([Click to view full-size image](deploying-a-database-cs/_static/image30.jpg))</span></span>

<span data-ttu-id="74f1c-239">這樣就大功告成了！</span><span class="sxs-lookup"><span data-stu-id="74f1c-239">That s all there is to it!</span></span> <span data-ttu-id="74f1c-240">此時，開發資料庫已複製到生產環境。</span><span class="sxs-lookup"><span data-stu-id="74f1c-240">At this point the development database has been duplicated to production.</span></span> <span data-ttu-id="74f1c-241">如果您在 SSMS 中重新整理資料庫，您應該會看到新的資料庫物件。</span><span class="sxs-lookup"><span data-stu-id="74f1c-241">If you Refresh the database in SSMS you should see the new database objects.</span></span> <span data-ttu-id="74f1c-242">[圖 11] 顯示生產資料庫的資料表、預存程式和使用者定義函數，這些函式會在開發資料庫上進行鏡像。</span><span class="sxs-lookup"><span data-stu-id="74f1c-242">Figure 11 shows the production database s tables, stored procedures, and user-defined functions, which mirror those on the development database.</span></span> <span data-ttu-id="74f1c-243">而且因為我們指示資料庫發佈嚮導發行資料，所以生產資料庫的資料表與執行 Wizard 時的開發資料庫資料表具有相同的資料。</span><span class="sxs-lookup"><span data-stu-id="74f1c-243">And because we instructed the Database Publishing Wizard to publish the data, the production database s tables have the same data as the development database s tables at the time the wizard was executed.</span></span> <span data-ttu-id="74f1c-244">[圖 12] 顯示生產資料庫上 `Books` 資料表中的資料。</span><span class="sxs-lookup"><span data-stu-id="74f1c-244">Figure 12 shows the data in the `Books` table on the production database.</span></span>

<span data-ttu-id="74f1c-245">[![資料庫物件在生產資料庫上已重複](deploying-a-database-cs/_static/image32.jpg)](deploying-a-database-cs/_static/image31.jpg)</span><span class="sxs-lookup"><span data-stu-id="74f1c-245">[![The Database Objects Have Been Duplicated on the Production Database](deploying-a-database-cs/_static/image32.jpg)](deploying-a-database-cs/_static/image31.jpg)</span></span> 

<span data-ttu-id="74f1c-246">**圖 11**：資料庫物件在生產資料庫上已重複（[按一下以查看完整大小的影像](deploying-a-database-cs/_static/image33.jpg)）</span><span class="sxs-lookup"><span data-stu-id="74f1c-246">**Figure 11**: The Database Objects Have Been Duplicated on the Production Database ([Click to view full-size image](deploying-a-database-cs/_static/image33.jpg))</span></span>

<span data-ttu-id="74f1c-247">[![生產資料庫包含與開發資料庫相同的資料](deploying-a-database-cs/_static/image35.jpg)](deploying-a-database-cs/_static/image34.jpg)</span><span class="sxs-lookup"><span data-stu-id="74f1c-247">[![The Production Database Contains the Same Data as on the Development Database](deploying-a-database-cs/_static/image35.jpg)](deploying-a-database-cs/_static/image34.jpg)</span></span> 

<span data-ttu-id="74f1c-248">**圖 12**：生產資料庫包含與開發資料庫相同的資料（[按一下以查看完整大小的影像](deploying-a-database-cs/_static/image36.jpg)）</span><span class="sxs-lookup"><span data-stu-id="74f1c-248">**Figure 12**: The Production Database Contains the Same Data as on the Development Database ([Click to view full-size image](deploying-a-database-cs/_static/image36.jpg))</span></span>

<span data-ttu-id="74f1c-249">此時，我們只會將開發資料庫部署到生產環境。</span><span class="sxs-lookup"><span data-stu-id="74f1c-249">At this point we have only deployed the development database to production.</span></span> <span data-ttu-id="74f1c-250">我們尚未探討如何部署 web 應用程式本身，或檢查應用程式在生產環境中使用生產資料庫所需的設定變更。</span><span class="sxs-lookup"><span data-stu-id="74f1c-250">We have not yet looked at deploying the web application itself or examined what configuration changes are needed to have the application on production use the production database.</span></span> <span data-ttu-id="74f1c-251">我們會在下一個教學課程中討論這些問題！</span><span class="sxs-lookup"><span data-stu-id="74f1c-251">We'll cover these issues in the next tutorial!</span></span>

## <a name="summary"></a><span data-ttu-id="74f1c-252">總結</span><span class="sxs-lookup"><span data-stu-id="74f1c-252">Summary</span></span>

<span data-ttu-id="74f1c-253">部署資料驅動 web 應用程式時，需要將在開發期間使用的資料庫複製到生產環境。</span><span class="sxs-lookup"><span data-stu-id="74f1c-253">Deploying a data-driven web application requires copying the database used during development to the production environment.</span></span> <span data-ttu-id="74f1c-254">許多 web 主機提供者都提供工具，以簡化部署資料庫的程式。</span><span class="sxs-lookup"><span data-stu-id="74f1c-254">Many web host providers offer tools to simplify the process of deploying a database.</span></span> <span data-ttu-id="74f1c-255">例如，您可以使用 DiscountASP.NET，將資料庫 FTP `.mdf` 檔案（或備份），然後從 [控制台] 將資料庫附加到資料庫伺服器。</span><span class="sxs-lookup"><span data-stu-id="74f1c-255">For example, with DiscountASP.NET you can FTP your database `.mdf` file (or a backup) and then attach the database to the database server from the Control Panel.</span></span> <span data-ttu-id="74f1c-256">無論您的 web 主機提供者所提供的功能為何，另一個可行的選項是 Microsoft 的資料庫發佈嚮導工具，它會產生 SQL 命令的腳本來建立開發資料庫的架構和資料。</span><span class="sxs-lookup"><span data-stu-id="74f1c-256">Another option that works regardless of what features your web host provider offers is Microsoft s Database Publishing Wizard tool, which generates a script of SQL commands to create the development database s schema and data.</span></span> <span data-ttu-id="74f1c-257">產生此腳本之後，您就可以在生產資料庫上執行它。</span><span class="sxs-lookup"><span data-stu-id="74f1c-257">Once this script has been generated you can execute it on the production database.</span></span>

<span data-ttu-id="74f1c-258">既然本書回顧了 web 應用程式的資料庫，就可以部署應用程式了。</span><span class="sxs-lookup"><span data-stu-id="74f1c-258">Now that the Book Reviews web application s database is on production we can deploy the application.</span></span> <span data-ttu-id="74f1c-259">不過，web 應用程式的設定資訊會指定資料庫的連接字串，而該連接字串會參考開發資料庫。</span><span class="sxs-lookup"><span data-stu-id="74f1c-259">However, the web application s configuration information specifies the connection string to the database, and that connection string references the development database.</span></span> <span data-ttu-id="74f1c-260">將網站部署到生產環境時，我們需要更新此連接字串資訊。</span><span class="sxs-lookup"><span data-stu-id="74f1c-260">We need to update this connection string information when deploying the site to production.</span></span> <span data-ttu-id="74f1c-261">下一個教學課程會探討這些設定差異，並逐步解說將資料驅動的書籍評論網站發佈到生產環境所需的步驟。</span><span class="sxs-lookup"><span data-stu-id="74f1c-261">The next tutorial looks at these configuration differences and walks through the steps needed to publish the data-driven Book Reviews site to production.</span></span>

<span data-ttu-id="74f1c-262">快樂的程式設計！</span><span class="sxs-lookup"><span data-stu-id="74f1c-262">Happy Programming!</span></span>

#### <a name="further-reading"></a><span data-ttu-id="74f1c-263">進一步閱讀</span><span class="sxs-lookup"><span data-stu-id="74f1c-263">Further Reading</span></span>

<span data-ttu-id="74f1c-264">如需本教學課程中所討論之主題的詳細資訊，請參閱下列資源：</span><span class="sxs-lookup"><span data-stu-id="74f1c-264">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="74f1c-265">下載 Microsoft SQL Server 資料庫發佈嚮導1。1</span><span class="sxs-lookup"><span data-stu-id="74f1c-265">Download the Microsoft SQL Server Database Publishing Wizard 1.1</span></span>](https://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en)
- [<span data-ttu-id="74f1c-266">下載 Microsoft SQL Server Management Studio Express Edition</span><span class="sxs-lookup"><span data-stu-id="74f1c-266">Download the Microsoft SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)

> [!div class="step-by-step"]
> <span data-ttu-id="74f1c-267">[上一頁](core-differences-between-iis-and-the-asp-net-development-server-cs.md)
> [下一頁](configuring-the-production-web-application-to-use-the-production-database-cs.md)</span><span class="sxs-lookup"><span data-stu-id="74f1c-267">[Previous](core-differences-between-iis-and-the-asp-net-development-server-cs.md)
[Next](configuring-the-production-web-application-to-use-the-production-database-cs.md)</span></span>
