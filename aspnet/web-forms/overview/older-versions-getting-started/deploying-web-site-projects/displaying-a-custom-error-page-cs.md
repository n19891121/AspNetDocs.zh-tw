---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/displaying-a-custom-error-page-cs
title: 顯示自訂錯誤頁面（C#） |Microsoft Docs
author: rick-anderson
description: 當 ASP.NET web 應用程式中發生執行階段錯誤時，使用者會看到什麼內容？ 答案取決於網站的 &lt;customErrors&gt; 設定 。
ms.author: riande
ms.date: 06/09/2009
ms.assetid: cb061642-faf3-41b2-9372-69e13444d458
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/displaying-a-custom-error-page-cs
msc.type: authoredcontent
ms.openlocfilehash: c1ff4c112b9a489b8fb9ef3443663cd71eda7965
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/28/2019
ms.locfileid: "74625494"
---
# <a name="displaying-a-custom-error-page-c"></a><span data-ttu-id="7e002-104">顯示自訂的錯誤頁面 (C#)</span><span class="sxs-lookup"><span data-stu-id="7e002-104">Displaying a Custom Error Page (C#)</span></span>

<span data-ttu-id="7e002-105">由[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="7e002-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="7e002-106">[下載程式代碼](https://download.microsoft.com/download/1/0/C/10CC829F-A808-4302-97D3-59989B8F9C01/ASPNET_Hosting_Tutorial_11_CS.zip)或[下載 PDF](https://download.microsoft.com/download/5/C/5/5C57DB8C-5DEA-4B3A-92CA-4405544D313B/aspnet_tutorial11_CustomErrors_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="7e002-106">[Download Code](https://download.microsoft.com/download/1/0/C/10CC829F-A808-4302-97D3-59989B8F9C01/ASPNET_Hosting_Tutorial_11_CS.zip) or [Download PDF](https://download.microsoft.com/download/5/C/5/5C57DB8C-5DEA-4B3A-92CA-4405544D313B/aspnet_tutorial11_CustomErrors_cs.pdf)</span></span>

> <span data-ttu-id="7e002-107">當 ASP.NET web 應用程式中發生執行階段錯誤時，使用者會看到什麼內容？</span><span class="sxs-lookup"><span data-stu-id="7e002-107">What does the user see when a runtime error occurs in an ASP.NET web application?</span></span> <span data-ttu-id="7e002-108">答案取決於網站的 &lt;customErrors&gt; 設定的方式。</span><span class="sxs-lookup"><span data-stu-id="7e002-108">The answer depends on how the website's &lt;customErrors&gt; configuration.</span></span> <span data-ttu-id="7e002-109">根據預設，使用者會在發生執行階段錯誤時，顯示一個不美觀的黃色螢幕讚揚。</span><span class="sxs-lookup"><span data-stu-id="7e002-109">By default, users are shown an unsightly yellow screen proclaiming that a runtime error has occurred.</span></span> <span data-ttu-id="7e002-110">本教學課程會示範如何自訂這些設定，以顯示符合內賞心悅目的自訂錯誤頁面，其中與您網站的外觀和風格相符。</span><span class="sxs-lookup"><span data-stu-id="7e002-110">This tutorial shows how to customize these settings to display an aesthetically-pleasing custom error page that matches your site's look and feel.</span></span>

## <a name="introduction"></a><span data-ttu-id="7e002-111">簡介</span><span class="sxs-lookup"><span data-stu-id="7e002-111">Introduction</span></span>

<span data-ttu-id="7e002-112">在完美的世界中，不會發生執行階段錯誤。</span><span class="sxs-lookup"><span data-stu-id="7e002-112">In a perfect world there would be no run-time errors.</span></span> <span data-ttu-id="7e002-113">程式設計人員會撰寫具有 nary 錯誤的程式碼，並提供健全的使用者輸入驗證，而外部資源（例如資料庫伺服器和電子郵件伺服器）永遠不會離線。</span><span class="sxs-lookup"><span data-stu-id="7e002-113">Programmers would write code with nary a bug and with robust user input validation, and external resources like database servers and email servers would never go offline.</span></span> <span data-ttu-id="7e002-114">當然，事實上，錯誤是不可避免的。</span><span class="sxs-lookup"><span data-stu-id="7e002-114">Of course, in reality errors are inevitable.</span></span> <span data-ttu-id="7e002-115">.NET Framework 中的類別會擲回例外狀況，以通知錯誤。</span><span class="sxs-lookup"><span data-stu-id="7e002-115">The classes in the .NET Framework signal an error by throwing an exception.</span></span> <span data-ttu-id="7e002-116">例如，呼叫 SqlConnection 物件的 Open 方法會建立連接字串所指定之資料庫的連接。</span><span class="sxs-lookup"><span data-stu-id="7e002-116">For example, calling a SqlConnection object's Open method establishes a connection to the database specified by a connection string.</span></span> <span data-ttu-id="7e002-117">不過，如果資料庫已關閉，或連接字串中的認證無效，則 Open 方法會擲回 `SqlException`。</span><span class="sxs-lookup"><span data-stu-id="7e002-117">However, if the database is down or if the credentials in the connection string are invalid then the Open method throws a `SqlException`.</span></span> <span data-ttu-id="7e002-118">您可以使用 `try/catch/finally` 區塊來處理例外狀況。</span><span class="sxs-lookup"><span data-stu-id="7e002-118">Exceptions can be handled by the use of `try/catch/finally` blocks.</span></span> <span data-ttu-id="7e002-119">如果 `try` 區塊內的程式碼擲回例外狀況，控制權就會傳送至適當的 catch 區塊，讓開發人員可以嘗試從錯誤中復原。</span><span class="sxs-lookup"><span data-stu-id="7e002-119">If code within a `try` block throws an exception, control is transferred to the appropriate catch block where the developer can attempt to recover from the error.</span></span> <span data-ttu-id="7e002-120">如果沒有相符的 catch 區塊，或擲回例外狀況的程式碼不在 try 區塊中，則例外狀況會在 `try/catch/finally` 區塊的搜尋中 percolates 呼叫堆疊。</span><span class="sxs-lookup"><span data-stu-id="7e002-120">If there is no matching catch block, or if the code that threw the exception is not in a try block, the exception percolates up the call stack in search of `try/catch/finally` blocks.</span></span>

<span data-ttu-id="7e002-121">如果例外狀況在不進行處理的情況下，一直反升至 ASP.NET 執行時間，則會引發[`HttpApplication` 類別](https://msdn.microsoft.com/library/system.web.httpapplication.aspx)的[`Error` 事件](https://msdn.microsoft.com/library/system.web.httpapplication.error.aspx)，並顯示已設定的*錯誤頁面*。</span><span class="sxs-lookup"><span data-stu-id="7e002-121">If the exception bubbles all the way up to the ASP.NET runtime without being handled, the [`HttpApplication` class](https://msdn.microsoft.com/library/system.web.httpapplication.aspx)'s [`Error` event](https://msdn.microsoft.com/library/system.web.httpapplication.error.aspx) is raised and the configured *error page* is displayed.</span></span> <span data-ttu-id="7e002-122">根據預設，ASP.NET 會顯示一個充滿深情稱為「死亡（YSOD）的[黃色螢幕](http://en.wikipedia.org/wiki/Yellow_Screen_of_Death#Yellow)」的錯誤頁面。</span><span class="sxs-lookup"><span data-stu-id="7e002-122">By default, ASP.NET displays an error page that is affectionately referred to as the [Yellow Screen of Death](http://en.wikipedia.org/wiki/Yellow_Screen_of_Death#Yellow) (YSOD).</span></span> <span data-ttu-id="7e002-123">YSOD 有兩個版本：一個會顯示例外狀況詳細資料、堆疊追蹤，以及其他對應用程式的開發人員很有説明的資訊（請參閱 [**圖 1**]）。另一個則是指出發生執行階段錯誤（請參閱 [**圖 2**]）。</span><span class="sxs-lookup"><span data-stu-id="7e002-123">There are two versions of the YSOD: one shows the exception details, a stack trace, and other information helpful to developers debugging the application (see **Figure 1**); the other simply states that there was a run-time error (see **Figure 2**).</span></span>

<span data-ttu-id="7e002-124">例外狀況詳細資料 YSOD 對於偵錯工具的開發人員很有説明，但向使用者顯示 YSOD 是 tacky 和不夠專業。</span><span class="sxs-lookup"><span data-stu-id="7e002-124">The exception details YSOD is quite helpful for developers debugging the application, but showing a YSOD to end users is tacky and unprofessional.</span></span> <span data-ttu-id="7e002-125">相反地，應該將終端使用者導向錯誤頁面，以更方便使用的 prose 來維護網站的外觀和感覺。</span><span class="sxs-lookup"><span data-stu-id="7e002-125">Instead, end users should be taken to an error page that maintains the site's look and feel with more user-friendly prose describing the situation.</span></span> <span data-ttu-id="7e002-126">好消息是，建立這類自訂的錯誤頁面相當簡單。</span><span class="sxs-lookup"><span data-stu-id="7e002-126">The good news is that creating such a custom error page is quite easy.</span></span> <span data-ttu-id="7e002-127">本教學課程一開始會探討 ASP。NET 的不同錯誤頁面。</span><span class="sxs-lookup"><span data-stu-id="7e002-127">This tutorial starts with a look at ASP.NET's different error pages.</span></span> <span data-ttu-id="7e002-128">接著，它會示範如何設定 web 應用程式，以在發生錯誤時向使用者顯示自訂錯誤頁面。</span><span class="sxs-lookup"><span data-stu-id="7e002-128">It then shows how to configure the web application to show users a custom error page in the face of an error.</span></span>

### <a name="examining-the-three-types-of-error-pages"></a><span data-ttu-id="7e002-129">檢查三種錯誤頁面類型</span><span class="sxs-lookup"><span data-stu-id="7e002-129">Examining the Three Types of Error Pages</span></span>

<span data-ttu-id="7e002-130">當 ASP.NET 應用程式中發生未處理的例外狀況時，會顯示三種錯誤頁面類型的其中一種：</span><span class="sxs-lookup"><span data-stu-id="7e002-130">When an unhandled exception arises in an ASP.NET application one of three types of error pages is displayed:</span></span>

- <span data-ttu-id="7e002-131">例外狀況詳細資料會顯示死亡錯誤頁面的黃色畫面，</span><span class="sxs-lookup"><span data-stu-id="7e002-131">The Exception Details Yellow Screen of Death error page,</span></span>
- <span data-ttu-id="7e002-132">執行階段錯誤黃色畫面的死亡錯誤頁面，或</span><span class="sxs-lookup"><span data-stu-id="7e002-132">The Runtime Error Yellow Screen of Death error page, or</span></span>
- <span data-ttu-id="7e002-133">自訂錯誤頁面</span><span class="sxs-lookup"><span data-stu-id="7e002-133">A custom error page</span></span>

<span data-ttu-id="7e002-134">開發人員最熟悉的錯誤頁面是例外狀況詳細資料 YSOD。</span><span class="sxs-lookup"><span data-stu-id="7e002-134">The error page developers are most familiar with is the Exception Details YSOD.</span></span> <span data-ttu-id="7e002-135">根據預設，會對流覽本機的使用者顯示此頁面，因此是在開發環境中測試網站時發生錯誤時所看到的頁面。</span><span class="sxs-lookup"><span data-stu-id="7e002-135">By default, this page is displayed to users who are visiting locally and therefore is the page that you see when an error occurs when testing the site in the development environment.</span></span> <span data-ttu-id="7e002-136">正如其名，例外狀況詳細資料 YSOD 提供例外狀況的詳細資料，也就是類型、訊息和堆疊追蹤。</span><span class="sxs-lookup"><span data-stu-id="7e002-136">As its name implies, the Exception Details YSOD provides details about the exception - the type, the message, and the stack trace.</span></span> <span data-ttu-id="7e002-137">此外，如果例外狀況是由您 ASP.NET 網頁的程式碼後置類別中的程式碼所引發，而且如果應用程式已設定為進行偵測，則 [例外狀況詳細資料] YSOD 也會顯示這行程式碼（和其底下的幾行程式碼）。</span><span class="sxs-lookup"><span data-stu-id="7e002-137">What's more, if the exception was raised by code in your ASP.NET page's code-behind class and if the application is configured for debugging then the Exception Details YSOD will also show this line of code (and a few lines of code above and below it).</span></span>

<span data-ttu-id="7e002-138">[**圖 1** ] 顯示 [例外狀況詳細資料 YSOD] 頁面。</span><span class="sxs-lookup"><span data-stu-id="7e002-138">**Figure 1** shows the Exception Details YSOD page.</span></span> <span data-ttu-id="7e002-139">請注意瀏覽器的 位址 視窗中的 URL： `http://localhost:62275/Genre.aspx?ID=foo`。</span><span class="sxs-lookup"><span data-stu-id="7e002-139">Note the URL in the browser's address window: `http://localhost:62275/Genre.aspx?ID=foo`.</span></span> <span data-ttu-id="7e002-140">回想一下，[`Genre.aspx`] 頁面會列出特定內容類型中的書籍評論。</span><span class="sxs-lookup"><span data-stu-id="7e002-140">Recall that the `Genre.aspx` page lists the book reviews in a particular genre.</span></span> <span data-ttu-id="7e002-141">它需要透過 querystring 傳遞 `GenreId` 值（`uniqueidentifier`）;例如，您可以 `Genre.aspx?ID=7683ab5d-4589-4f03-a139-1c26044d0146`查看小說評論的適當 URL。</span><span class="sxs-lookup"><span data-stu-id="7e002-141">It requires that `GenreId` value (a `uniqueidentifier`) be passed through the querystring; for example, the appropriate URL to view the fiction reviews is `Genre.aspx?ID=7683ab5d-4589-4f03-a139-1c26044d0146`.</span></span> <span data-ttu-id="7e002-142">如果透過 querystring （例如 "foo"）傳入非`uniqueidentifier` 值，則會擲回例外狀況（exception）。</span><span class="sxs-lookup"><span data-stu-id="7e002-142">If a non-`uniqueidentifier` value is passed in through the querystring (such as "foo") an exception is thrown.</span></span>

> [!NOTE]
> <span data-ttu-id="7e002-143">若要在可供下載的示範 web 應用程式中重現此錯誤，您可以直接造訪 `Genre.aspx?ID=foo`，或按一下 `Default.aspx`中的 [產生執行階段錯誤] 連結。</span><span class="sxs-lookup"><span data-stu-id="7e002-143">To reproduce this error in the demo web application available for download you can either visit `Genre.aspx?ID=foo` directly or click the "Generate a Runtime Error" link in `Default.aspx`.</span></span>

<span data-ttu-id="7e002-144">請注意 [**圖 1**] 中顯示的例外狀況資訊。</span><span class="sxs-lookup"><span data-stu-id="7e002-144">Note the exception information presented in **Figure 1**.</span></span> <span data-ttu-id="7e002-145">出現在頁面頂端的「從字元字串轉換為 uniqueidentifier 時轉換失敗」例外狀況訊息。</span><span class="sxs-lookup"><span data-stu-id="7e002-145">The exception message, "Conversion failed when converting from a character string to uniqueidentifier" is present at the top of the page.</span></span> <span data-ttu-id="7e002-146">也會列出例外狀況的類型，`System.Data.SqlClient.SqlException`。</span><span class="sxs-lookup"><span data-stu-id="7e002-146">The type of the exception, `System.Data.SqlClient.SqlException`, is listed, as well.</span></span> <span data-ttu-id="7e002-147">還有堆疊追蹤。</span><span class="sxs-lookup"><span data-stu-id="7e002-147">There's also the stack trace.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image2.png)](displaying-a-custom-error-page-cs/_static/image1.png)

<span data-ttu-id="7e002-148">**圖 1**：例外狀況詳細資料 YSOD 包含例外狀況的相關資訊</span><span class="sxs-lookup"><span data-stu-id="7e002-148">**Figure 1**: The Exception Details YSOD Includes Information About the Exception</span></span>  
 <span data-ttu-id="7e002-149">（[按一下以查看完整大小的影像](displaying-a-custom-error-page-cs/_static/image3.png)）</span><span class="sxs-lookup"><span data-stu-id="7e002-149">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image3.png))</span></span>

<span data-ttu-id="7e002-150">另一種類型的 YSOD 是執行時間錯誤 YSOD，如 [**圖 2**] 所示。</span><span class="sxs-lookup"><span data-stu-id="7e002-150">The other type of YSOD is the Runtime Error YSOD, and is shown in **Figure 2**.</span></span> <span data-ttu-id="7e002-151">[執行時間錯誤 YSOD] 會通知訪客發生執行階段錯誤，但不包含所擲回之例外狀況的任何相關資訊。</span><span class="sxs-lookup"><span data-stu-id="7e002-151">The Runtime Error YSOD informs the visitor that a run-time error has occurred, but it does not include any information about the exception that was thrown.</span></span> <span data-ttu-id="7e002-152">（不過，它會提供有關如何藉由修改 `Web.config` 檔案來查看錯誤詳細資料的指示，這是這類 YSOD 外觀不夠專業的一部分）。</span><span class="sxs-lookup"><span data-stu-id="7e002-152">(It does, however, provide instructions on how to make the error details viewable by modifying the `Web.config` file, which is part of what makes such a YSOD look unprofessional.)</span></span>

<span data-ttu-id="7e002-153">根據預設，在 [**圖 2**： `http://httpruntime.web703.discountasp.net/Genre.aspx?ID=foo`] 的瀏覽器網址列中，從遠端存取的使用者（透過 http://www.yoursite.com) ，會顯示 [執行時間錯誤] YSOD。</span><span class="sxs-lookup"><span data-stu-id="7e002-153">By default, the Runtime Error YSOD is shown to users visiting remotely (through http://www.yoursite.com), as evidenced by the URL in the browser's Address bar in **Figure 2**: `http://httpruntime.web703.discountasp.net/Genre.aspx?ID=foo`.</span></span> <span data-ttu-id="7e002-154">有兩個不同的 YSOD 畫面存在，是因為開發人員想要知道錯誤詳細資料，但這類資訊不應該顯示在即時網站上，因為它可能會顯示潛在的安全性弱點或其他機密資訊給造訪您的點.</span><span class="sxs-lookup"><span data-stu-id="7e002-154">The two different YSOD screens exist because developers are interested in knowing the error details, but such information should not be shown on a live site as it may reveal potential security vulnerabilities or other sensitive information to anyone who visits your site.</span></span>

> [!NOTE]
> <span data-ttu-id="7e002-155">如果您遵循並使用 DiscountASP.NET 做為您的 web 主機，您可能會注意到 [執行時間錯誤] YSOD 不會在造訪即時網站時顯示。</span><span class="sxs-lookup"><span data-stu-id="7e002-155">If you are following along and are using DiscountASP.NET as your web host, you may notice that the Runtime Error YSOD does not display when visiting the live site.</span></span> <span data-ttu-id="7e002-156">這是因為 DiscountASP.NET 預設會將其伺服器設定為顯示例外狀況詳細資料 YSOD。</span><span class="sxs-lookup"><span data-stu-id="7e002-156">This is because DiscountASP.NET has their servers configured to show the Exception Details YSOD by default.</span></span> <span data-ttu-id="7e002-157">好消息是，您可以藉由將 `<customErrors>` 區段新增至 `Web.config` 檔案，來覆寫此預設行為。</span><span class="sxs-lookup"><span data-stu-id="7e002-157">The good news is that you can override this default behavior by adding a `<customErrors>` section to your `Web.config` file.</span></span> <span data-ttu-id="7e002-158">[設定顯示的錯誤頁面] 區段會詳細檢查 `<customErrors>` 區段。</span><span class="sxs-lookup"><span data-stu-id="7e002-158">The "Configuring Which Error Page is Displayed" section examines the `<customErrors>` section in detail.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image5.png)](displaying-a-custom-error-page-cs/_static/image4.png)

<span data-ttu-id="7e002-159">**圖 2**：執行階段錯誤 YSOD 不包含任何錯誤詳細資料</span><span class="sxs-lookup"><span data-stu-id="7e002-159">**Figure 2**: The Runtime Error YSOD Does Not Include Any Error Details</span></span>  
 <span data-ttu-id="7e002-160">（[按一下以查看完整大小的影像](displaying-a-custom-error-page-cs/_static/image6.png)）</span><span class="sxs-lookup"><span data-stu-id="7e002-160">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image6.png))</span></span>

<span data-ttu-id="7e002-161">第三種錯誤頁面是 [自訂錯誤網頁]，這是您建立的網頁。</span><span class="sxs-lookup"><span data-stu-id="7e002-161">The third type of error page is the custom error page, which is a web page that you create.</span></span> <span data-ttu-id="7e002-162">自訂錯誤頁面的優點是您可以完全掌控向使用者顯示的資訊，以及網頁的外觀和風格;[自訂錯誤] 頁面可以使用與其他頁面相同的主版頁面和樣式。</span><span class="sxs-lookup"><span data-stu-id="7e002-162">The benefit of a custom error page is that you have complete control over the information that is displayed to the user along with the page's look and feel; the custom error page can use the same master page and styles as your other pages.</span></span> <span data-ttu-id="7e002-163">「使用自訂錯誤頁面」一節會逐步解說如何建立自訂錯誤頁面，並將它設定為在發生未處理的例外狀況時顯示。</span><span class="sxs-lookup"><span data-stu-id="7e002-163">The "Using a Custom Error Page" section walks through creating a custom error page and configuring it to display in the event of an unhandled exception.</span></span> <span data-ttu-id="7e002-164">[**圖 3** ] 提供此自訂錯誤頁面的搶先尖峰。</span><span class="sxs-lookup"><span data-stu-id="7e002-164">**Figure 3** offers a sneak peak of this custom error page.</span></span> <span data-ttu-id="7e002-165">如您所見，[錯誤] 頁面的外觀與風格比 [圖 1] 和 [2] 所示的黃色螢幕中的任何一種，都比較專業。</span><span class="sxs-lookup"><span data-stu-id="7e002-165">As you can see, the look and feel of the error page is much more professional-looking than either of the Yellow Screens of Death shown in Figures 1 and 2.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image8.png)](displaying-a-custom-error-page-cs/_static/image7.png)

<span data-ttu-id="7e002-166">**圖 3**：自訂錯誤網頁提供更量身打造的外觀和操作</span><span class="sxs-lookup"><span data-stu-id="7e002-166">**Figure 3**: A Custom Error Page Offers a More Tailored Look and Feel</span></span>  
 <span data-ttu-id="7e002-167">（[按一下以查看完整大小的影像](displaying-a-custom-error-page-cs/_static/image9.png)）</span><span class="sxs-lookup"><span data-stu-id="7e002-167">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image9.png))</span></span>

<span data-ttu-id="7e002-168">請花點時間檢查 [**圖 3**] 中的瀏覽器網址列。</span><span class="sxs-lookup"><span data-stu-id="7e002-168">Take a moment to inspect the browser's Address bar in **Figure 3**.</span></span> <span data-ttu-id="7e002-169">請注意，網址列會顯示自訂錯誤網頁的 URL （`/ErrorPages/Oops.aspx`）。</span><span class="sxs-lookup"><span data-stu-id="7e002-169">Note that the Address bar shows the URL of the custom error page (`/ErrorPages/Oops.aspx`).</span></span> <span data-ttu-id="7e002-170">在 [圖 1] 和 [2] 中，燈的黃色螢幕會顯示在錯誤來源的相同頁面中（`Genre.aspx`）。</span><span class="sxs-lookup"><span data-stu-id="7e002-170">In Figures 1 and 2 the Yellow Screens of Death are shown in the same page that the error originated from (`Genre.aspx`).</span></span> <span data-ttu-id="7e002-171">自訂錯誤頁面會透過 `aspxerrorpath` querystring 參數，傳遞錯誤發生所在之頁面的 URL。</span><span class="sxs-lookup"><span data-stu-id="7e002-171">The custom error page is passed the URL of the page where the error occurred via the `aspxerrorpath` querystring parameter.</span></span>

## <a name="configuring-which-error-page-is-displayed"></a><span data-ttu-id="7e002-172">設定顯示的錯誤頁面</span><span class="sxs-lookup"><span data-stu-id="7e002-172">Configuring Which Error Page is Displayed</span></span>

<span data-ttu-id="7e002-173">顯示三個可能錯誤頁面的哪一個是以兩個變數為基礎：</span><span class="sxs-lookup"><span data-stu-id="7e002-173">Which of the three possible error pages is displayed is based on two variables:</span></span>

- <span data-ttu-id="7e002-174">[`<customErrors>`] 區段中的設定資訊，以及</span><span class="sxs-lookup"><span data-stu-id="7e002-174">The configuration information in the `<customErrors>` section, and</span></span>
- <span data-ttu-id="7e002-175">使用者是否在本機或遠端存取網站。</span><span class="sxs-lookup"><span data-stu-id="7e002-175">Whether the user is visiting the site locally or remotely.</span></span>

<span data-ttu-id="7e002-176">`Web.config` 中的[`<customErrors>` 區段](https://msdn.microsoft.com/library/h0hfz6fc.aspx)有兩個屬性會影響顯示的錯誤頁面： `defaultRedirect` 和 `mode`。</span><span class="sxs-lookup"><span data-stu-id="7e002-176">The [`<customErrors>` section](https://msdn.microsoft.com/library/h0hfz6fc.aspx) in `Web.config` has two attributes that affect what error page is shown: `defaultRedirect` and `mode`.</span></span> <span data-ttu-id="7e002-177">`defaultRedirect` 屬性是選擇性的。</span><span class="sxs-lookup"><span data-stu-id="7e002-177">The `defaultRedirect` attribute is optional.</span></span> <span data-ttu-id="7e002-178">如果有提供，它會指定自訂錯誤網頁的 URL，並指出應該顯示自訂錯誤頁面，而不是執行階段錯誤 YSOD。</span><span class="sxs-lookup"><span data-stu-id="7e002-178">If provided, it specifies the URL of the custom error page and indicates that the custom error page should be shown instead of the Runtime Error YSOD.</span></span> <span data-ttu-id="7e002-179">需要 `mode` 屬性，並接受下列三個值的其中一個： `On`、`Off`或 `RemoteOnly`。</span><span class="sxs-lookup"><span data-stu-id="7e002-179">The `mode` attribute is required and accepts one of three values: `On`, `Off`, or `RemoteOnly`.</span></span> <span data-ttu-id="7e002-180">這些值具有下列行為：</span><span class="sxs-lookup"><span data-stu-id="7e002-180">These values have the following behavior:</span></span>

- <span data-ttu-id="7e002-181">`On`-指出自訂錯誤網頁或執行時間錯誤 YSOD 會顯示給所有訪客，不論它們是在本機或遠端。</span><span class="sxs-lookup"><span data-stu-id="7e002-181">`On` - indicates that the custom error page or the Runtime Error YSOD is shown to all visitors, regardless of whether they are local or remote.</span></span>
- <span data-ttu-id="7e002-182">`Off`-指定 [例外狀況詳細資料] YSOD 會顯示給所有訪客，不論它們是在本機或遠端。</span><span class="sxs-lookup"><span data-stu-id="7e002-182">`Off` - specifies that the Exception Details YSOD is displayed to all visitors, regardless of whether they are local or remote.</span></span>
- <span data-ttu-id="7e002-183">`RemoteOnly`-指出 [自訂錯誤] 頁面或 [執行階段錯誤] YSOD 會向遠端訪客顯示，而 [例外狀況詳細資料] YSOD 會向本機訪客顯示。</span><span class="sxs-lookup"><span data-stu-id="7e002-183">`RemoteOnly` - indicates that the custom error page or the Runtime Error YSOD is shown to remote visitors, while the Exception Details YSOD is shown to local visitors.</span></span>

<span data-ttu-id="7e002-184">除非您另外指定，否則 ASP.NET 的作用就如同您已將 mode 屬性設為 `RemoteOnly`，而且尚未指定 `defaultRedirect` 值。</span><span class="sxs-lookup"><span data-stu-id="7e002-184">Unless you specify otherwise, ASP.NET acts as if you had set the mode attribute to `RemoteOnly` and had not specified a `defaultRedirect` value.</span></span> <span data-ttu-id="7e002-185">換句話說，預設行為是，在 [執行時間錯誤] YSOD 向遠端訪客顯示時，[例外狀況詳細資料] YSOD 會顯示給本機訪客。</span><span class="sxs-lookup"><span data-stu-id="7e002-185">In other words, the default behavior is that the Exception Details YSOD is displayed to local visitors while the Runtime Error YSOD is shown to remote visitors.</span></span> <span data-ttu-id="7e002-186">您可以藉由將 `<customErrors>` 區段新增至 web 應用程式的 `Web.config file.` 來覆寫此預設行為</span><span class="sxs-lookup"><span data-stu-id="7e002-186">You can override this default behavior by adding a `<customErrors>` section to your web application's `Web.config file.`</span></span>

## <a name="using-a-custom-error-page"></a><span data-ttu-id="7e002-187">使用自訂錯誤頁面</span><span class="sxs-lookup"><span data-stu-id="7e002-187">Using a Custom Error Page</span></span>

<span data-ttu-id="7e002-188">每個 web 應用程式都應該有自訂錯誤頁面。</span><span class="sxs-lookup"><span data-stu-id="7e002-188">Every web application should have a custom error page.</span></span> <span data-ttu-id="7e002-189">它提供了「執行時間錯誤 YSOD 的更專業型式替代方案，它很容易建立，而且設定應用程式以使用自訂錯誤頁面只需要幾分鐘。</span><span class="sxs-lookup"><span data-stu-id="7e002-189">It provides a more professional-looking alternative to the Runtime Error YSOD, it is easy to create, and configuring the application to use the custom error page takes only a few moments.</span></span> <span data-ttu-id="7e002-190">第一個步驟是建立自訂錯誤網頁。</span><span class="sxs-lookup"><span data-stu-id="7e002-190">The first step is creating the custom error page.</span></span> <span data-ttu-id="7e002-191">我已將新資料夾新增至名為 `ErrorPages` 的書籍審核應用程式，並新增至名為 `Oops.aspx`的新 ASP.NET 網頁。</span><span class="sxs-lookup"><span data-stu-id="7e002-191">I've added a new folder to the Book Reviews application named `ErrorPages` and added to that a new ASP.NET page named `Oops.aspx`.</span></span> <span data-ttu-id="7e002-192">讓頁面使用與網站上其餘頁面相同的主版頁面，讓它自動繼承相同的外觀與風格。</span><span class="sxs-lookup"><span data-stu-id="7e002-192">Have the page use the same master page as the rest of the pages on your site so that it automatically inherits the same look and feel.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image11.png)](displaying-a-custom-error-page-cs/_static/image10.png)

<span data-ttu-id="7e002-193">**圖 4**：建立自訂錯誤頁面</span><span class="sxs-lookup"><span data-stu-id="7e002-193">**Figure 4**: Create a Custom Error Page</span></span>

<span data-ttu-id="7e002-194">接下來，請花幾分鐘的時間建立錯誤頁面的內容。</span><span class="sxs-lookup"><span data-stu-id="7e002-194">Next, spend a few minutes creating the content for the error page.</span></span> <span data-ttu-id="7e002-195">我建立了一個簡單的自訂錯誤頁面，其中包含一則訊息，指出發生未預期的錯誤和連結回到網站的首頁。</span><span class="sxs-lookup"><span data-stu-id="7e002-195">I've created a rather simple custom error page with a message indicating that there was an unexpected error and a link back to the site's homepage.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image13.png)](displaying-a-custom-error-page-cs/_static/image12.png)

<span data-ttu-id="7e002-196">**圖 5**：設計您的自訂錯誤頁面</span><span class="sxs-lookup"><span data-stu-id="7e002-196">**Figure 5**: Design Your Custom Error Page</span></span>  
 <span data-ttu-id="7e002-197">（[按一下以查看完整大小的影像](displaying-a-custom-error-page-cs/_static/image14.png)）</span><span class="sxs-lookup"><span data-stu-id="7e002-197">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image14.png))</span></span>

<span data-ttu-id="7e002-198">當錯誤頁面完成時，請將 web 應用程式設定為使用自訂錯誤頁面，代替執行時間錯誤 YSOD。</span><span class="sxs-lookup"><span data-stu-id="7e002-198">With the error page completed, configure the web application to use the custom error page in lieu of the Runtime Error YSOD.</span></span> <span data-ttu-id="7e002-199">這是藉由在 `<customErrors>` 區段的 `defaultRedirect` 屬性中指定錯誤頁面的 URL 來完成。</span><span class="sxs-lookup"><span data-stu-id="7e002-199">This is accomplished by specifying the URL of the error page in the `<customErrors>` section's `defaultRedirect` attribute.</span></span> <span data-ttu-id="7e002-200">將下列標記新增至您應用程式的 `Web.config` 檔案：</span><span class="sxs-lookup"><span data-stu-id="7e002-200">Add the following markup to your application's `Web.config` file:</span></span>

[!code-xml[Main](displaying-a-custom-error-page-cs/samples/sample1.xml)]

<span data-ttu-id="7e002-201">上述標記會將應用程式設定為向本機流覽的使用者顯示例外狀況詳細資料 YSOD，同時針對遠端流覽的使用者使用自訂錯誤頁面糟糕。</span><span class="sxs-lookup"><span data-stu-id="7e002-201">The above markup configures the application to show the Exception Details YSOD to users visiting locally, while using the custom error page Oops.aspx for those users visiting remotely.</span></span> <span data-ttu-id="7e002-202">若要查看其實際運作情形，請將您的網站部署到生產環境，然後流覽具有無效 querystring 值的即時網站上的內容類型 .aspx 頁面。</span><span class="sxs-lookup"><span data-stu-id="7e002-202">To see this in action, deploy your website to the production environment and then visit the Genre.aspx page on the live site with an invalid querystring value.</span></span> <span data-ttu-id="7e002-203">您應該會看到 [自訂錯誤] 頁面（請參閱 [**圖 3**]）。</span><span class="sxs-lookup"><span data-stu-id="7e002-203">You should see the custom error page (refer back to **Figure 3**).</span></span>

<span data-ttu-id="7e002-204">若要確認自訂錯誤頁面只會向遠端使用者顯示，請從開發環境流覽具有無效 querystring 的 [`Genre.aspx`] 頁面。</span><span class="sxs-lookup"><span data-stu-id="7e002-204">To verify that the custom error page is only shown to remote users, visit the `Genre.aspx` page with an invalid querystring from the development environment.</span></span> <span data-ttu-id="7e002-205">您仍然應該會看到 [例外狀況詳細資料] YSOD （請參閱 [**圖 1**]）。</span><span class="sxs-lookup"><span data-stu-id="7e002-205">You should still see the Exception Details YSOD (refer back to **Figure 1**).</span></span> <span data-ttu-id="7e002-206">[`RemoteOnly`] 設定可確保在生產環境上造訪網站的使用者，請參閱自訂錯誤頁面，而開發人員在本機工作時，會繼續查看例外狀況的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="7e002-206">The `RemoteOnly` setting ensures that users visiting the site on the production environment see the custom error page while developers working locally continue to see the details of the exception.</span></span>

## <a name="notifying-developers-and-logging-error-details"></a><span data-ttu-id="7e002-207">通知開發人員和記錄錯誤詳細資料</span><span class="sxs-lookup"><span data-stu-id="7e002-207">Notifying Developers and Logging Error Details</span></span>

<span data-ttu-id="7e002-208">開發環境中發生的錯誤是由開發人員在電腦上所造成。</span><span class="sxs-lookup"><span data-stu-id="7e002-208">Errors that occur in the development environment were caused by the developer sitting at her computer.</span></span> <span data-ttu-id="7e002-209">她在 [例外狀況詳細資料] YSOD 中顯示例外狀況的資訊，而她知道發生錯誤時所執行的步驟。</span><span class="sxs-lookup"><span data-stu-id="7e002-209">She is shown the exception's information in the Exception Details YSOD, and she knows what steps she was performing when the error occurred.</span></span> <span data-ttu-id="7e002-210">但在生產環境中發生錯誤時，開發人員並不知道發生錯誤，除非流覽網站的使用者需要時間報告錯誤。</span><span class="sxs-lookup"><span data-stu-id="7e002-210">But when an error occurs on production, the developer has no knowledge that an error occurred unless the end user visiting the site takes the time to report the error.</span></span> <span data-ttu-id="7e002-211">而且，即使使用者不知道例外狀況類型、訊息和堆疊追蹤，也會提醒開發小組發生錯誤，就難以診斷錯誤的原因，讓我們單獨加以修正。</span><span class="sxs-lookup"><span data-stu-id="7e002-211">And even if the user goes out of his way to alert the development team that an error occurred, without knowing the exception type, message, and stack trace it can be difficult to diagnose the cause of the error, let alone fix it.</span></span>

<span data-ttu-id="7e002-212">基於這些理由，將生產環境中的任何錯誤記錄到某個持續性存放區（例如資料庫），以及開發人員會收到此錯誤的警示，是很重要的。</span><span class="sxs-lookup"><span data-stu-id="7e002-212">For these reasons it is paramount that any error in the production environment is logged to some persistent store (such as a database) and that the developers are alerted of this error.</span></span> <span data-ttu-id="7e002-213">自訂錯誤頁面看起來就像是執行此記錄和通知的好位置。</span><span class="sxs-lookup"><span data-stu-id="7e002-213">The custom error page may seem like a good place to do this logging and notification.</span></span> <span data-ttu-id="7e002-214">可惜的是，自訂錯誤網頁沒有錯誤詳細資料的存取權，因此無法用來記錄此資訊。</span><span class="sxs-lookup"><span data-stu-id="7e002-214">Unfortunately, the custom error page does not have access to the error details and therefore cannot be used to log this information.</span></span> <span data-ttu-id="7e002-215">好消息是，有許多方法可以攔截錯誤詳細資料並加以記錄，接下來的三個教學課程會更詳細地探索這個主題。</span><span class="sxs-lookup"><span data-stu-id="7e002-215">The good news is that there are a number of ways to intercept the error details and to log them, and the next three tutorials explore this topic in more detail.</span></span>

## <a name="using-different-custom-error-pages-for-different-http-error-statuses"></a><span data-ttu-id="7e002-216">針對不同的 HTTP 錯誤狀態使用不同的自訂錯誤頁面</span><span class="sxs-lookup"><span data-stu-id="7e002-216">Using Different Custom Error Pages for Different HTTP Error Statuses</span></span>

<span data-ttu-id="7e002-217">當 ASP.NET 網頁擲回例外狀況，但未處理時，例外狀況會 percolates 到 ASP.NET 執行時間，這會顯示已設定的錯誤頁面。</span><span class="sxs-lookup"><span data-stu-id="7e002-217">When an exception is thrown by an ASP.NET page and is not handled, the exception percolates up to the ASP.NET runtime, which displays the configured error page.</span></span> <span data-ttu-id="7e002-218">如果要求進入 ASP.NET 引擎，但因為某些原因而無法處理，可能是因為找不到要求的檔案，或檔案已停用讀取權限，則 ASP.NET 引擎會引發 `HttpException`。</span><span class="sxs-lookup"><span data-stu-id="7e002-218">If a request comes into the ASP.NET engine but cannot be processed for some reason - perhaps the requested file is not found or Read permissions have been disabled for the file - then the ASP.NET engine raises an `HttpException`.</span></span> <span data-ttu-id="7e002-219">這個例外狀況（例如從 ASP.NET 網頁引發的例外狀況）會反升至執行時間，導致顯示適當的錯誤頁面。</span><span class="sxs-lookup"><span data-stu-id="7e002-219">This exception, like exceptions raised from ASP.NET pages, bubbles up to the runtime, causing the appropriate error page to be displayed.</span></span>

<span data-ttu-id="7e002-220">對於生產環境中的 web 應用程式，這表示如果使用者要求找不到的頁面，他們會看到自訂錯誤頁面。</span><span class="sxs-lookup"><span data-stu-id="7e002-220">What this means for the web application in production is that if a user requests a page that is not found then they will see the custom error page.</span></span> <span data-ttu-id="7e002-221">[**圖 6** ] 顯示這類範例。</span><span class="sxs-lookup"><span data-stu-id="7e002-221">**Figure 6** shows such an example.</span></span> <span data-ttu-id="7e002-222">由於要求是針對不存在的頁面（`NoSuchPage.aspx`），因此會擲回 `HttpException` 並顯示自訂錯誤頁面（請注意 `aspxerrorpath` querystring 參數中 `NoSuchPage.aspx` 的參考）。</span><span class="sxs-lookup"><span data-stu-id="7e002-222">Because the request is for a non-existent page (`NoSuchPage.aspx`), an `HttpException` is thrown and the custom error page is displayed (note the reference to `NoSuchPage.aspx` in the `aspxerrorpath` querystring parameter).</span></span>

[![](displaying-a-custom-error-page-cs/_static/image16.png)](displaying-a-custom-error-page-cs/_static/image15.png)

<span data-ttu-id="7e002-223">**圖 6**： ASP.NET 執行時間顯示已設定的錯誤網頁，以回應不正確要求（[按一下以查看完整大小的影像](displaying-a-custom-error-page-cs/_static/image17.png)）</span><span class="sxs-lookup"><span data-stu-id="7e002-223">**Figure 6**: The ASP.NET Runtime Displays the Configured Error Page In Response to an Invalid Request ([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image17.png))</span></span>

<span data-ttu-id="7e002-224">根據預設，所有類型的錯誤都會顯示相同的自訂錯誤頁面。</span><span class="sxs-lookup"><span data-stu-id="7e002-224">By default, all types of errors cause the same custom error page to be displayed.</span></span> <span data-ttu-id="7e002-225">不過，您可以使用 `<customErrors>` 區段內 `<error>` 個子項目，為特定的 HTTP 狀態碼指定不同的自訂錯誤頁面。</span><span class="sxs-lookup"><span data-stu-id="7e002-225">However, you can specify a different custom error page for a specific HTTP status code using `<error>` children elements within the `<customErrors>` section.</span></span> <span data-ttu-id="7e002-226">例如，若要在 [找不到頁面] 錯誤的事件中顯示不同的錯誤頁面，其 HTTP 狀態碼為404，請更新 `<customErrors>` 區段以包含下列標記：</span><span class="sxs-lookup"><span data-stu-id="7e002-226">For example, to have a different error page displayed in the event of a page not found error, which has an HTTP status code of 404, update the `<customErrors>` section to include the following markup:</span></span>

[!code-xml[Main](displaying-a-custom-error-page-cs/samples/sample2.xml)]

<span data-ttu-id="7e002-227">進行這項變更之後，每當使用者造訪遠端要求不存在的 ASP.NET 資源時，就會將他們重新導向至 `404.aspx` 的自訂錯誤頁面，而不是 `Oops.aspx`。</span><span class="sxs-lookup"><span data-stu-id="7e002-227">With this change in place, whenever a user visiting remotely requests an ASP.NET resource that does not exist, they will be redirected to the `404.aspx` custom error page instead of `Oops.aspx`.</span></span> <span data-ttu-id="7e002-228">如 [**圖 7** ] 所示，[`404.aspx`] 頁面可以包含比一般自訂錯誤頁面更具體的訊息。</span><span class="sxs-lookup"><span data-stu-id="7e002-228">As **Figure 7** illustrates, the `404.aspx` page can include a more specific message than the general custom error page.</span></span>

> [!NOTE]
> <span data-ttu-id="7e002-229">如需建立有效404錯誤網頁的指引[，另請參閱404錯誤網頁](http://www.smashingmagazine.com/2009/01/29/404-error-pages-one-more-time/)。</span><span class="sxs-lookup"><span data-stu-id="7e002-229">Check out [404 Error Pages, One More Time](http://www.smashingmagazine.com/2009/01/29/404-error-pages-one-more-time/) for guidance on creating effective 404 error pages.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image19.png)](displaying-a-custom-error-page-cs/_static/image18.png)

<span data-ttu-id="7e002-230">**圖 7**： [自訂404錯誤] 頁面會顯示比 `Oops.aspx` 更具目標的訊息</span><span class="sxs-lookup"><span data-stu-id="7e002-230">**Figure 7**: The Custom 404 Error Page Displays a More Targeted Message Than `Oops.aspx`</span></span>  
<span data-ttu-id="7e002-231">（[按一下以查看完整大小的影像](displaying-a-custom-error-page-cs/_static/image20.png)）</span><span class="sxs-lookup"><span data-stu-id="7e002-231">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image20.png))</span></span> 

<span data-ttu-id="7e002-232">由於您知道，只有在使用者對找不到的頁面提出要求時，才會到達 [`404.aspx`] 頁面，因此您可以增強此自訂錯誤頁面，以包含可協助使用者解決這種特定類型錯誤的功能。</span><span class="sxs-lookup"><span data-stu-id="7e002-232">Because you know that the `404.aspx` page is only reached when the user makes a request for a page that was not found, you can enhance this custom error page to include functionality to help the user address this specific type of error.</span></span> <span data-ttu-id="7e002-233">例如，您可以建立一個資料庫資料表，將已知的錯誤 Url 對應至正確的 Url，然後讓 `404.aspx` 的自訂錯誤頁面對該資料表執行查詢，並建議使用者可能嘗試連接的頁面。</span><span class="sxs-lookup"><span data-stu-id="7e002-233">For example, you could build a database table that maps known bad URLs to good URLs, and then have the `404.aspx` custom error page run a query against that table and suggest pages the user may be trying to reach.</span></span>

> [!NOTE]
> <span data-ttu-id="7e002-234">只有在對 ASP.NET 引擎所處理的資源提出要求時，才會顯示 [自訂錯誤] 頁面。</span><span class="sxs-lookup"><span data-stu-id="7e002-234">The custom error page is only displayed when a request is made to a resource handled by the ASP.NET engine.</span></span> <span data-ttu-id="7e002-235">如我們在[IIS 與 ASP.NET 程式開發伺服器教學課程之間的核心差異](core-differences-between-iis-and-the-asp-net-development-server-cs.md)中所討論，web 伺服器可能會自行處理特定要求。</span><span class="sxs-lookup"><span data-stu-id="7e002-235">As we discussed in the [Core Differences Between IIS and the ASP.NET Development Server](core-differences-between-iis-and-the-asp-net-development-server-cs.md) tutorial, the web server may handle certain requests itself.</span></span> <span data-ttu-id="7e002-236">根據預設，IIS 網頁伺服器會處理靜態內容（例如影像和 HTML 檔案）的要求，而不會叫用 ASP.NET 引擎。</span><span class="sxs-lookup"><span data-stu-id="7e002-236">By default, the IIS web server processes requests for static content like images and HTML files without invoking the ASP.NET engine.</span></span> <span data-ttu-id="7e002-237">因此，如果使用者要求不存在的影像檔案，就會收到 IIS 的預設404錯誤訊息，而不是 ASP。NET 已設定的錯誤頁面。</span><span class="sxs-lookup"><span data-stu-id="7e002-237">Consequently, if the user requests a non-existent image file they will get back IIS's default 404 error message rather than ASP.NET's configured error page.</span></span>

## <a name="summary"></a><span data-ttu-id="7e002-238">總結</span><span class="sxs-lookup"><span data-stu-id="7e002-238">Summary</span></span>

<span data-ttu-id="7e002-239">當 ASP.NET 應用程式中發生未處理的例外狀況時，使用者會顯示在下列三個錯誤頁面中：例外狀況詳細資料的黃色畫面為死亡;執行階段錯誤的黃色畫面為死亡;或自訂的錯誤頁面。</span><span class="sxs-lookup"><span data-stu-id="7e002-239">When an unhandled exception occurs in an ASP.NET application, the user is shown one of three error pages: the Exception Details Yellow Screen of Death; the Runtime Error Yellow Screen of Death; or a custom error page.</span></span> <span data-ttu-id="7e002-240">顯示的錯誤頁面取決於應用程式的 `<customErrors>` 設定，以及使用者是在本機或遠端存取。</span><span class="sxs-lookup"><span data-stu-id="7e002-240">Which error page is displayed depends on the application's `<customErrors>` configuration and whether the user is visiting locally or remotely.</span></span> <span data-ttu-id="7e002-241">預設行為是顯示 YSOD 至本機訪客的例外狀況詳細資料，並將執行階段錯誤 YSOD 至遠端訪客。</span><span class="sxs-lookup"><span data-stu-id="7e002-241">The default behavior is to show the Exception Details YSOD to local visitors and the Runtime Error YSOD to remote visitors.</span></span>

<span data-ttu-id="7e002-242">雖然執行時間錯誤 YSOD 會從流覽網站的使用者中隱藏潛在的機密錯誤資訊，但它會從您的網站外觀和風格中斷，讓您的應用程式看起來不正確。</span><span class="sxs-lookup"><span data-stu-id="7e002-242">While the Runtime Error YSOD hides potentially sensitive error information from the user visiting the site, it breaks from your site's look and feel and makes your application look buggy.</span></span> <span data-ttu-id="7e002-243">較好的方法是使用自訂錯誤網頁，這需要建立和設計自訂錯誤網頁，並在 `<customErrors>` 區段的 `defaultRedirect` 屬性中指定其 URL。</span><span class="sxs-lookup"><span data-stu-id="7e002-243">A better approach is to use a custom error page, which entails creating and designing the custom error page and specifying its URL in the `<customErrors>` section's `defaultRedirect` attribute.</span></span> <span data-ttu-id="7e002-244">您甚至可以在不同的 HTTP 錯誤狀態中有多個自訂錯誤頁面。</span><span class="sxs-lookup"><span data-stu-id="7e002-244">You can even have multiple custom error pages for different HTTP error statuses.</span></span>

<span data-ttu-id="7e002-245">[自訂錯誤] 頁面是針對生產環境中的網站提供完整錯誤處理策略的第一個步驟。</span><span class="sxs-lookup"><span data-stu-id="7e002-245">The custom error page is the first step in a comprehensive error handling strategy for a website in production.</span></span> <span data-ttu-id="7e002-246">發出錯誤的開發人員警示並記錄其詳細資料，也是很重要的步驟。</span><span class="sxs-lookup"><span data-stu-id="7e002-246">Alerting the developer of the error and logging its details are also important steps.</span></span> <span data-ttu-id="7e002-247">接下來的三個教學課程會探索錯誤通知和記錄的技術。</span><span class="sxs-lookup"><span data-stu-id="7e002-247">The next three tutorials explore techniques for error notification and logging.</span></span>

<span data-ttu-id="7e002-248">快樂的程式設計！</span><span class="sxs-lookup"><span data-stu-id="7e002-248">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="7e002-249">進一步閱讀</span><span class="sxs-lookup"><span data-stu-id="7e002-249">Further Reading</span></span>

<span data-ttu-id="7e002-250">如需本教學課程中所討論之主題的詳細資訊，請參閱下列資源：</span><span class="sxs-lookup"><span data-stu-id="7e002-250">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="7e002-251">錯誤頁面，一次</span><span class="sxs-lookup"><span data-stu-id="7e002-251">Error Pages, One More Time</span></span>](http://www.smashingmagazine.com/2009/01/29/404-error-pages-one-more-time/)
- [<span data-ttu-id="7e002-252">例外狀況的設計方針</span><span class="sxs-lookup"><span data-stu-id="7e002-252">Design Guidelines for Exceptions</span></span>](https://msdn.microsoft.com/library/ms229014.aspx)
- [<span data-ttu-id="7e002-253">使用者易記的錯誤頁面</span><span class="sxs-lookup"><span data-stu-id="7e002-253">User-Friendly Error Pages</span></span>](http://aspnet.4guysfromrolla.com/articles/090606-1.aspx)
- [<span data-ttu-id="7e002-254">處理和擲回例外狀況</span><span class="sxs-lookup"><span data-stu-id="7e002-254">Handling and Throwing Exceptions</span></span>](https://msdn.microsoft.com/library/5b2yeyab.aspx)
- [<span data-ttu-id="7e002-255">在 ASP.NET 中正確使用自訂錯誤頁面</span><span class="sxs-lookup"><span data-stu-id="7e002-255">Properly Using Custom Error Pages in ASP.NET</span></span>](http://professionalaspnet.com/archive/2007/09/30/Properly-Using-Custom-Error-Pages-in-ASP.NET.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="7e002-256">[上一頁](strategies-for-database-development-and-deployment-cs.md)
> [下一頁](processing-unhandled-exceptions-cs.md)</span><span class="sxs-lookup"><span data-stu-id="7e002-256">[Previous](strategies-for-database-development-and-deployment-cs.md)
[Next](processing-unhandled-exceptions-cs.md)</span></span>
