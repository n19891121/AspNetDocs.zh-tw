---
uid: web-forms/overview/data-access/masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs
title: 使用可選取的主要 GridView 搭配詳細資料 Detailview 之（C#）的主要/詳細資訊 |Microsoft Docs
author: rick-anderson
description: 本教學課程將會有一個 GridView，其資料列包含每個產品的名稱和價格，以及 [選取] 按鈕。 按一下 [particu] 的 [選取] 按鈕 。
ms.author: riande
ms.date: 03/31/2010
ms.assetid: 0f982827-f8f9-420d-b36b-57b23f5aa519
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs
msc.type: authoredcontent
ms.openlocfilehash: 04c427341f063729bd23b416a96f5acb20702792
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/06/2020
ms.locfileid: "78621062"
---
# <a name="masterdetail-using-a-selectable-master-gridview-with-a-details-detailview-c"></a><span data-ttu-id="aa931-104">使用具有詳細資料 DetailView 之可選取主要 GridView 的主要/詳細資料 (C#)</span><span class="sxs-lookup"><span data-stu-id="aa931-104">Master/Detail Using a Selectable Master GridView with a Details DetailView (C#)</span></span>

<span data-ttu-id="aa931-105">由[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="aa931-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="aa931-106">[下載範例應用程式](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_10_CS.exe)或[下載 PDF](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/datatutorial10cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="aa931-106">[Download Sample App](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_10_CS.exe) or [Download PDF](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/datatutorial10cs1.pdf)</span></span>

> <span data-ttu-id="aa931-107">本教學課程將會有一個 GridView，其資料列包含每個產品的名稱和價格，以及 [選取] 按鈕。</span><span class="sxs-lookup"><span data-stu-id="aa931-107">This tutorial will have a GridView whose rows include the name and price of each product along with a Select button.</span></span> <span data-ttu-id="aa931-108">按一下特定產品的 [選取] 按鈕，將會在相同頁面上的 DetailsView 控制項中顯示其完整詳細資料。</span><span class="sxs-lookup"><span data-stu-id="aa931-108">Clicking the Select button for a particular product will cause its full details to be displayed in a DetailsView control on the same page.</span></span>

## <a name="introduction"></a><span data-ttu-id="aa931-109">簡介</span><span class="sxs-lookup"><span data-stu-id="aa931-109">Introduction</span></span>

<span data-ttu-id="aa931-110">在[上一個教學](master-detail-filtering-across-two-pages-cs.md)課程中，我們已瞭解如何使用兩個網頁來建立主要/詳細資料包表：「主要」網頁，我們會在其中顯示供應商清單;和 [詳細資料] 網頁，列出所選供應商所提供的產品。</span><span class="sxs-lookup"><span data-stu-id="aa931-110">In the [previous tutorial](master-detail-filtering-across-two-pages-cs.md) we saw how to create a master/detail report using two web pages: a "master" web page, from which we displayed the list of suppliers; and a "details" web page that listed those products provided by the selected supplier.</span></span> <span data-ttu-id="aa931-111">這兩個頁面的報表格式可以壓縮成一頁。</span><span class="sxs-lookup"><span data-stu-id="aa931-111">This two page report format can be condensed into one page.</span></span> <span data-ttu-id="aa931-112">本教學課程將會有一個 GridView，其資料列包含每個產品的名稱和價格，以及 [選取] 按鈕。</span><span class="sxs-lookup"><span data-stu-id="aa931-112">This tutorial will have a GridView whose rows include the name and price of each product along with a Select button.</span></span> <span data-ttu-id="aa931-113">按一下特定產品的 [選取] 按鈕，將會在相同頁面上的 DetailsView 控制項中顯示其完整詳細資料。</span><span class="sxs-lookup"><span data-stu-id="aa931-113">Clicking the Select button for a particular product will cause its full details to be displayed in a DetailsView control on the same page.</span></span>

<span data-ttu-id="aa931-114">[![按一下 [選取] 按鈕會顯示產品的詳細資料](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image2.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="aa931-114">[![Clicking the Select Button Displays the Product's Details](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image2.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image1.png)</span></span>

<span data-ttu-id="aa931-115">**圖 1**：按一下 [選取] 按鈕會顯示產品的詳細資料（[按一下以查看完整大小的影像](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image3.png)）</span><span class="sxs-lookup"><span data-stu-id="aa931-115">**Figure 1**: Clicking the Select Button Displays the Product's Details ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image3.png))</span></span>

## <a name="step-1-creating-a-selectable-gridview"></a><span data-ttu-id="aa931-116">步驟1：建立可選取的 GridView</span><span class="sxs-lookup"><span data-stu-id="aa931-116">Step 1: Creating a Selectable GridView</span></span>

<span data-ttu-id="aa931-117">回想一下，在兩個分頁的主要/詳細資料包表中，每個主要記錄都包含一個超連結，按下時，就會將使用者傳送至詳細資料頁面，並在查詢字串中傳遞按一下過的資料列 `SupplierID` 值。</span><span class="sxs-lookup"><span data-stu-id="aa931-117">Recall that in the two-page master/detail report that each master record included a hyperlink that, when clicked, sent the user to the details page passing the clicked row's `SupplierID` value in the querystring.</span></span> <span data-ttu-id="aa931-118">這類超連結會使用 HyperLinkField 加入至每個 GridView 資料列。</span><span class="sxs-lookup"><span data-stu-id="aa931-118">Such a hyperlink was added to each GridView row using a HyperLinkField.</span></span> <span data-ttu-id="aa931-119">針對 [單一頁面主要/詳細資料] 報表，每個 GridView 資料列都需要一個按鈕，當按下時，就會顯示詳細資料。</span><span class="sxs-lookup"><span data-stu-id="aa931-119">For the single page master/details report, we will need a Button for each GridView row that, when clicked, shows the details.</span></span> <span data-ttu-id="aa931-120">GridView 控制項可以設定為每個導致回傳的資料列都包含 [選取] 按鈕，並將該資料列標示為 GridView 的[SelectedRow](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedrow.aspx)。</span><span class="sxs-lookup"><span data-stu-id="aa931-120">The GridView control can be configured to include a Select button for each row that causes a postback and marks that row as the GridView's [SelectedRow](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedrow.aspx).</span></span>

<span data-ttu-id="aa931-121">首先，將 GridView 控制項新增至 [`Filtering`] 資料夾中的 [`DetailsBySelecting.aspx`] 頁面，將其 `ID` 屬性設定為 [`ProductsGrid`]。</span><span class="sxs-lookup"><span data-stu-id="aa931-121">Start by adding a GridView control to the `DetailsBySelecting.aspx` page in the `Filtering` folder, setting its `ID` property to `ProductsGrid`.</span></span> <span data-ttu-id="aa931-122">接下來，新增名為 `AllProductsDataSource` 的新 ObjectDataSource，以叫用 `ProductsBLL` 類別的 `GetProducts()` 方法。</span><span class="sxs-lookup"><span data-stu-id="aa931-122">Next, add a new ObjectDataSource named `AllProductsDataSource` that invokes the `ProductsBLL` class's `GetProducts()` method.</span></span>

<span data-ttu-id="aa931-123">[![建立名為 AllProductsDataSource 的 ObjectDataSource](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image5.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="aa931-123">[![Create an ObjectDataSource Named AllProductsDataSource](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image5.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image4.png)</span></span>

<span data-ttu-id="aa931-124">**圖 2**：建立名為 `AllProductsDataSource` 的 ObjectDataSource （[按一下以查看完整大小的影像](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image6.png)）</span><span class="sxs-lookup"><span data-stu-id="aa931-124">**Figure 2**: Create an ObjectDataSource Named `AllProductsDataSource` ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image6.png))</span></span>

<span data-ttu-id="aa931-125">[![使用 ProductsBLL 類別](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image8.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="aa931-125">[![Use the ProductsBLL Class](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image8.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image7.png)</span></span>

<span data-ttu-id="aa931-126">**圖 3**：使用 `ProductsBLL` 類別（[按一下以觀看完整大小的影像](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image9.png)）</span><span class="sxs-lookup"><span data-stu-id="aa931-126">**Figure 3**: Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image9.png))</span></span>

<span data-ttu-id="aa931-127">[![設定 ObjectDataSource 以叫用 GetProducts （）方法](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image11.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="aa931-127">[![Configure the ObjectDataSource to Invoke the GetProducts() Method](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image11.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image10.png)</span></span>

<span data-ttu-id="aa931-128">**圖 4**：設定 ObjectDataSource 以叫用 `GetProducts()` 方法（[按一下以查看完整大小的影像](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image12.png)）</span><span class="sxs-lookup"><span data-stu-id="aa931-128">**Figure 4**: Configure the ObjectDataSource to Invoke the `GetProducts()` Method ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image12.png))</span></span>

<span data-ttu-id="aa931-129">編輯 GridView 的欄位移除所有 `ProductName`，但 `UnitPrice` BoundFields。</span><span class="sxs-lookup"><span data-stu-id="aa931-129">Edit the GridView's fields removing all but the `ProductName` and `UnitPrice` BoundFields.</span></span> <span data-ttu-id="aa931-130">此外，您也可以視需要隨意自訂這些 BoundFields，例如將 `UnitPrice` BoundField 格式化為貨幣，並變更 BoundFields 的 `HeaderText` 屬性。</span><span class="sxs-lookup"><span data-stu-id="aa931-130">Also, feel free to customize these BoundFields as needed, such as formatting the `UnitPrice` BoundField as a currency and changing the `HeaderText` properties of the BoundFields.</span></span> <span data-ttu-id="aa931-131">您可以從 GridView 的智慧標籤按一下 [編輯資料行] 連結，或手動設定宣告式語法，以圖形方式完成這些步驟。</span><span class="sxs-lookup"><span data-stu-id="aa931-131">These steps can be accomplished graphically, by clicking the Edit Columns link from the GridView's smart tag, or by manually configuring the declarative syntax.</span></span>

<span data-ttu-id="aa931-132">[![移除所有 [ProductName] 和 [單價] BoundFields](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image14.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="aa931-132">[![Remove All But the ProductName and UnitPrice BoundFields](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image14.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image13.png)</span></span>

<span data-ttu-id="aa931-133">**圖 5**：移除所有 `ProductName` 和 `UnitPrice` BoundFields （[按一下以觀看完整大小的影像](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image15.png)）</span><span class="sxs-lookup"><span data-stu-id="aa931-133">**Figure 5**: Remove All But the `ProductName` and `UnitPrice` BoundFields ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image15.png))</span></span>

<span data-ttu-id="aa931-134">GridView 的最終標記為：</span><span class="sxs-lookup"><span data-stu-id="aa931-134">The final markup for the GridView is:</span></span>

[!code-aspx[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample1.aspx)]

<span data-ttu-id="aa931-135">接下來，我們需要將 GridView 標示為可選取，這會在每個資料列中加入一個 [選取] 按鈕。</span><span class="sxs-lookup"><span data-stu-id="aa931-135">Next, we need to mark the GridView as selectable, which will add a Select button to each row.</span></span> <span data-ttu-id="aa931-136">若要完成這項操作，只要勾選 GridView 智慧標籤中的 [啟用選取範圍] 核取方塊即可。</span><span class="sxs-lookup"><span data-stu-id="aa931-136">To accomplish this, simply check the Enable Selection checkbox in the GridView's smart tag.</span></span>

<span data-ttu-id="aa931-137">[![讓 GridView 的資料列可供選取](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image17.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="aa931-137">[![Make the GridView's Rows Selectable](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image17.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image16.png)</span></span>

<span data-ttu-id="aa931-138">**圖 6**：讓 GridView 的資料列可供選取（[按一下以查看完整大小的影像](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image18.png)）</span><span class="sxs-lookup"><span data-stu-id="aa931-138">**Figure 6**: Make the GridView's Rows Selectable ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image18.png))</span></span>

<span data-ttu-id="aa931-139">勾選 [啟用選取範圍] 選項會將 CommandField 新增至 `ProductsGrid` GridView，並將其 `ShowSelectButton` 屬性設定為 True。</span><span class="sxs-lookup"><span data-stu-id="aa931-139">Checking the Enabling Selection option adds a CommandField to the `ProductsGrid` GridView with its `ShowSelectButton` property set to True.</span></span> <span data-ttu-id="aa931-140">這會導致 GridView 的每個資料列都有 [選取] 按鈕，如 [圖 6] 所示。</span><span class="sxs-lookup"><span data-stu-id="aa931-140">This results in a Select button for each row of the GridView, as Figure 6 illustrates.</span></span> <span data-ttu-id="aa931-141">根據預設，[選取] 按鈕會轉譯為 LinkButtons，但您可以使用按鈕或 ImageButtons，而不是透過 CommandField 的 `ButtonType` 屬性。</span><span class="sxs-lookup"><span data-stu-id="aa931-141">By default, the Select buttons are rendered as LinkButtons, but you can use Buttons or ImageButtons instead through the CommandField's `ButtonType` property.</span></span>

[!code-aspx[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample2.aspx)]

<span data-ttu-id="aa931-142">當 GridView 資料列的 [選取] 按鈕按一下 [回傳接踵而來] 時，會更新 GridView 的 `SelectedRow` 屬性。</span><span class="sxs-lookup"><span data-stu-id="aa931-142">When a GridView row's Select button is clicked a postback ensues and the GridView's `SelectedRow` property is updated.</span></span> <span data-ttu-id="aa931-143">除了 `SelectedRow` 屬性以外，GridView 還提供[SelectedIndex](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedindex%28VS.80%29.aspx)、 [SelectedValue](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedvalue%28VS.80%29.aspx)和[SelectedDataKey](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selecteddatakey%28VS.80%29.aspx)屬性。</span><span class="sxs-lookup"><span data-stu-id="aa931-143">In addition to the `SelectedRow` property, the GridView provides the [SelectedIndex](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedindex%28VS.80%29.aspx), [SelectedValue](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedvalue%28VS.80%29.aspx), and [SelectedDataKey](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selecteddatakey%28VS.80%29.aspx) properties.</span></span> <span data-ttu-id="aa931-144">`SelectedIndex` 屬性會傳回選取之資料列的索引，而 `SelectedValue` 和 `SelectedDataKey` 屬性會根據 GridView 的[DataKeyNames 屬性](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.datakeynames%28VS.80%29.aspx)傳回值。</span><span class="sxs-lookup"><span data-stu-id="aa931-144">The `SelectedIndex` property returns the index of the selected row, whereas the `SelectedValue` and `SelectedDataKey` properties return values based upon the GridView's [DataKeyNames property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.datakeynames%28VS.80%29.aspx).</span></span>

<span data-ttu-id="aa931-145">`DataKeyNames` 屬性是用來將一個或多個資料欄值與每個資料列產生關聯，而且通常用來以每個 GridView 資料列來唯一識別基礎資料中的資訊。</span><span class="sxs-lookup"><span data-stu-id="aa931-145">The `DataKeyNames` property is used to associate one or more data field values with each row and is commonly used to attribute uniquely identifying information from the underlying data with each GridView row.</span></span> <span data-ttu-id="aa931-146">`SelectedValue` 屬性會針對選取的資料列傳回第一個 `DataKeyNames` 資料欄位的值，其中，做為 `SelectedDataKey` 屬性會傳回選取的資料列 `DataKey` 物件，其中包含該資料列的指定資料索引鍵欄位的所有值。</span><span class="sxs-lookup"><span data-stu-id="aa931-146">The `SelectedValue` property returns the value of the first `DataKeyNames` data field for the selected row where as the `SelectedDataKey` property returns the selected row's `DataKey` object, which contains all of the values for the specified data key fields for that row.</span></span>

<span data-ttu-id="aa931-147">當您透過設計工具將資料來源系結至 GridView、DetailsView 或 FormView 時，`DataKeyNames` 屬性會自動設定為唯一識別的資料欄位。</span><span class="sxs-lookup"><span data-stu-id="aa931-147">The `DataKeyNames` property is automatically set to the uniquely-identifying data field(s) when you bind a data source to a GridView, DetailsView, or FormView through the Designer.</span></span> <span data-ttu-id="aa931-148">雖然已在先前的教學課程中自動為我們設定此屬性，但在未指定 `DataKeyNames` 屬性的情況下，這些範例仍有作用。</span><span class="sxs-lookup"><span data-stu-id="aa931-148">While this property has been set for us automatically in the preceding tutorials, the examples would have worked without the `DataKeyNames` property specified.</span></span> <span data-ttu-id="aa931-149">不過，針對本教學課程中可選取的 GridView，以及我們將在其中檢查插入、更新和刪除的後續教學課程，必須正確設定 `DataKeyNames` 屬性。</span><span class="sxs-lookup"><span data-stu-id="aa931-149">However, for the selectable GridView in this tutorial, as well as for future tutorials in which we'll be examining inserting, updating, and deleting, the `DataKeyNames` property must be set properly.</span></span> <span data-ttu-id="aa931-150">請花點時間確保 GridView 的 `DataKeyNames` 屬性已設為 `ProductID`。</span><span class="sxs-lookup"><span data-stu-id="aa931-150">Take a moment to ensure that your GridView's `DataKeyNames` property is set to `ProductID`.</span></span>

<span data-ttu-id="aa931-151">讓我們透過瀏覽器來觀看我們的進度。</span><span class="sxs-lookup"><span data-stu-id="aa931-151">Let's view our progress thus far through a browser.</span></span> <span data-ttu-id="aa931-152">請注意，GridView 會列出所有產品的名稱和價格，以及選取的 LinkButton。</span><span class="sxs-lookup"><span data-stu-id="aa931-152">Note that the GridView lists the name and price for all of the products along with a Select LinkButton.</span></span> <span data-ttu-id="aa931-153">按一下 [選取] 按鈕會導致回傳。</span><span class="sxs-lookup"><span data-stu-id="aa931-153">Clicking the Select button causes a postback.</span></span> <span data-ttu-id="aa931-154">在步驟2中，我們將瞭解如何藉由顯示所選產品的詳細資料，讓 DetailsView 回應此回傳。</span><span class="sxs-lookup"><span data-stu-id="aa931-154">In Step 2 we'll see how to have a DetailsView respond to this postback by displaying the details for the selected product.</span></span>

<span data-ttu-id="aa931-155">[![每個產品資料列都包含 Select LinkButton](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image20.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="aa931-155">[![Each Product Row Contains a Select LinkButton](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image20.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image19.png)</span></span>

<span data-ttu-id="aa931-156">**圖 7**：每個產品資料列都包含一個 Select LinkButton （[按一下以觀看完整大小的影像](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image21.png)）</span><span class="sxs-lookup"><span data-stu-id="aa931-156">**Figure 7**: Each Product Row Contains a Select LinkButton ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image21.png))</span></span>

### <a name="highlighting-the-selected-row"></a><span data-ttu-id="aa931-157">反白顯示選取的資料列</span><span class="sxs-lookup"><span data-stu-id="aa931-157">Highlighting the Selected Row</span></span>

<span data-ttu-id="aa931-158">`ProductsGrid` GridView 具有 `SelectedRowStyle` 屬性，可以用來為選取的資料列指定視覺化樣式。</span><span class="sxs-lookup"><span data-stu-id="aa931-158">The `ProductsGrid` GridView has a `SelectedRowStyle` property that can be used to dictate the visual style for the selected row.</span></span> <span data-ttu-id="aa931-159">使用得當，這可以更清楚地顯示 GridView 目前選取的資料列，以改善使用者的體驗。</span><span class="sxs-lookup"><span data-stu-id="aa931-159">Used properly, this can improve the user's experience by more clearly showing which row of the GridView is currently selected.</span></span> <span data-ttu-id="aa931-160">在本教學課程中，我們將選取的資料列以黃色背景反白顯示。</span><span class="sxs-lookup"><span data-stu-id="aa931-160">For this tutorial, let's have the selected row be highlighted with a yellow background.</span></span>

<span data-ttu-id="aa931-161">如同我們先前的教學課程，讓我們努力將定義為 CSS 類別的美觀相關設定保持在最前面。</span><span class="sxs-lookup"><span data-stu-id="aa931-161">As with our earlier tutorials, let's strive to keep the aesthetic-related settings defined as CSS classes.</span></span> <span data-ttu-id="aa931-162">因此，請在名為 `SelectedRowStyle`的 `Styles.css` 中建立新的 CSS 類別。</span><span class="sxs-lookup"><span data-stu-id="aa931-162">Therefore, create a new CSS class in `Styles.css` named `SelectedRowStyle`.</span></span>

[!code-css[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample3.css)]

<span data-ttu-id="aa931-163">若要將此 CSS 類別套用至教學課程系列中*所有*gridview 的 `SelectedRowStyle` 屬性，請編輯 `DataWebControls` 主題中的 `GridView.skin` 面板，以包含 `SelectedRowStyle` 設定，如下所示：</span><span class="sxs-lookup"><span data-stu-id="aa931-163">To apply this CSS class to the `SelectedRowStyle` property of *all* GridViews in our tutorial series, edit the `GridView.skin` Skin in the `DataWebControls` Theme to include the `SelectedRowStyle` settings as shown below:</span></span>

[!code-aspx[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample4.aspx)]

<span data-ttu-id="aa931-164">透過這種新增，選取的 GridView 資料列現在會以黃色背景色彩反白顯示。</span><span class="sxs-lookup"><span data-stu-id="aa931-164">With this addition, the selected GridView row is now highlighted with a yellow background color.</span></span>

<span data-ttu-id="aa931-165">[![使用 GridView 的 SelectedRowStyle 屬性自訂選取的資料列外觀](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image23.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="aa931-165">[![Customize the Selected Row's Appearance Using the GridView's SelectedRowStyle Property](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image23.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image22.png)</span></span>

<span data-ttu-id="aa931-166">**圖 8**：使用 GridView 的 `SelectedRowStyle` 屬性自訂選取的資料列外觀（[按一下以查看完整大小的影像](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image24.png)）</span><span class="sxs-lookup"><span data-stu-id="aa931-166">**Figure 8**: Customize the Selected Row's Appearance Using the GridView's `SelectedRowStyle` Property ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image24.png))</span></span>

## <a name="step-2-displaying-the-selected-products-details-in-a-detailsview"></a><span data-ttu-id="aa931-167">步驟2：在 DetailsView 中顯示所選產品的詳細資料</span><span class="sxs-lookup"><span data-stu-id="aa931-167">Step 2: Displaying the Selected Product's Details in a DetailsView</span></span>

<span data-ttu-id="aa931-168">`ProductsGrid` GridView 完成後，剩下的工作就是新增 DetailsView，以顯示所選特定產品的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="aa931-168">With the `ProductsGrid` GridView complete, all that remains is to add a DetailsView that displays information about the particular product selected.</span></span> <span data-ttu-id="aa931-169">在 GridView 上方新增 DetailsView 控制項，並建立名為 `ProductDetailsDataSource`的新 ObjectDataSource。</span><span class="sxs-lookup"><span data-stu-id="aa931-169">Add a DetailsView control above the GridView and create a new ObjectDataSource named `ProductDetailsDataSource`.</span></span> <span data-ttu-id="aa931-170">因為我們想要讓此 DetailsView 顯示所選產品的特定資訊，請將 `ProductDetailsDataSource` 設定為使用 `ProductsBLL` 類別的 `GetProductByProductID(productID)` 方法。</span><span class="sxs-lookup"><span data-stu-id="aa931-170">Since we want this DetailsView to display particular information about the selected product, configure the `ProductDetailsDataSource` to use the `ProductsBLL` class's `GetProductByProductID(productID)` method.</span></span>

<span data-ttu-id="aa931-171">[![叫用 ProductsBLL 類別的 GetProductByProductID （productID）方法](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image26.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="aa931-171">[![Invoke the ProductsBLL Class's GetProductByProductID(productID) Method](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image26.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image25.png)</span></span>

<span data-ttu-id="aa931-172">**圖 9**：叫用 `ProductsBLL` 類別的 `GetProductByProductID(productID)` 方法（[按一下以查看完整大小的影像](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image27.png)）</span><span class="sxs-lookup"><span data-stu-id="aa931-172">**Figure 9**: Invoke the `ProductsBLL` Class's `GetProductByProductID(productID)` Method ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image27.png))</span></span>

<span data-ttu-id="aa931-173">將 *`productID`* 參數的值從 GridView 控制項的 `SelectedValue` 屬性取得。</span><span class="sxs-lookup"><span data-stu-id="aa931-173">Have the *`productID`* parameter's value obtained from the GridView control's `SelectedValue` property.</span></span> <span data-ttu-id="aa931-174">如先前所述，GridView 的 `SelectedValue` 屬性會傳回所選資料列的第一個資料索引鍵值。</span><span class="sxs-lookup"><span data-stu-id="aa931-174">As we discussed earlier, the GridView's `SelectedValue` property returns the first data key value for the selected row.</span></span> <span data-ttu-id="aa931-175">因此，GridView 的 `DataKeyNames` 屬性必須設定為 `ProductID`，如此一來，`SelectedValue`就會傳回選取的資料列 `ProductID` 值。</span><span class="sxs-lookup"><span data-stu-id="aa931-175">Therefore, it's imperative that the GridView's `DataKeyNames` property is set to `ProductID`, so that the selected row's `ProductID` value is returned by `SelectedValue`.</span></span>

<span data-ttu-id="aa931-176">[![將 productID 參數設定為 GridView 的 SelectedValue 屬性](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image29.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="aa931-176">[![Set the productID Parameter to the GridView's SelectedValue Property](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image29.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image28.png)</span></span>

<span data-ttu-id="aa931-177">**圖 10**：將 *`productID`* 參數設定為 GridView 的 `SelectedValue` 屬性（[按一下以查看完整大小的影像](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image30.png)）</span><span class="sxs-lookup"><span data-stu-id="aa931-177">**Figure 10**: Set the *`productID`* Parameter to the GridView's `SelectedValue` Property ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image30.png))</span></span>

<span data-ttu-id="aa931-178">一旦 `productDetailsDataSource` ObjectDataSource 已正確設定並系結至 DetailsView，本教學課程就完成了！</span><span class="sxs-lookup"><span data-stu-id="aa931-178">Once the `productDetailsDataSource` ObjectDataSource has been configured correctly and bound to the DetailsView, this tutorial is complete!</span></span> <span data-ttu-id="aa931-179">當第一次流覽頁面時，未選取任何資料列，因此 GridView 的 `SelectedValue` 屬性會傳回 `null`。</span><span class="sxs-lookup"><span data-stu-id="aa931-179">When the page is first visited no row is selected, so the GridView's `SelectedValue` property returns `null`.</span></span> <span data-ttu-id="aa931-180">由於沒有 `NULL` `ProductID` 值的產品，`GetProductByProductID(productID)` 方法不會傳回任何記錄，這表示不會顯示 DetailsView （請參閱 [圖 11]）。</span><span class="sxs-lookup"><span data-stu-id="aa931-180">Since there are no products with a `NULL` `ProductID` value, no records are returned by the `GetProductByProductID(productID)` method, meaning that the DetailsView isn't displayed (see Figure 11).</span></span> <span data-ttu-id="aa931-181">按一下 GridView 資料列的 [選取] 按鈕時，會重新整理回傳接踵而來和 DetailsView。</span><span class="sxs-lookup"><span data-stu-id="aa931-181">Upon clicking a GridView row's Select button, a postback ensues and the DetailsView is refreshed.</span></span> <span data-ttu-id="aa931-182">此時，GridView 的 `SelectedValue` 屬性會傳回所選資料列的 `ProductID`，`GetProductByProductID(productID)` 方法會傳回 `ProductsDataTable`，其中包含該特定產品的相關資訊，而 DetailsView 會顯示這些詳細資料（請參閱 [圖 12]）。</span><span class="sxs-lookup"><span data-stu-id="aa931-182">This time the GridView's `SelectedValue` property returns the `ProductID` of the selected row, the `GetProductByProductID(productID)` method returns a `ProductsDataTable` with information about that particular product, and the DetailsView shows these details (see Figure 12).</span></span>

<span data-ttu-id="aa931-183">[![第一次造訪時，只會顯示 GridView](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image32.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="aa931-183">[![When First Visited, Only the GridView is Displayed](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image32.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image31.png)</span></span>

<span data-ttu-id="aa931-184">**圖 11**：第一次造訪時，只會顯示 GridView （[按一下以觀看完整大小的影像](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image33.png)）</span><span class="sxs-lookup"><span data-stu-id="aa931-184">**Figure 11**: When First Visited, Only the GridView is Displayed ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image33.png))</span></span>

<span data-ttu-id="aa931-185">[![選取資料列時，會顯示產品的詳細資料](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image35.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="aa931-185">[![Upon Selecting a Row, the Product's Details are Displayed](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image35.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image34.png)</span></span>

<span data-ttu-id="aa931-186">**圖 12**：選取資料列時，會顯示產品的詳細資訊（[按一下以觀看完整大小的影像](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image36.png)）</span><span class="sxs-lookup"><span data-stu-id="aa931-186">**Figure 12**: Upon Selecting a Row, the Product's Details are Displayed ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image36.png))</span></span>

## <a name="summary"></a><span data-ttu-id="aa931-187">總結</span><span class="sxs-lookup"><span data-stu-id="aa931-187">Summary</span></span>

<span data-ttu-id="aa931-188">在此和上述三個教學課程中，我們已看到一些用於顯示主要/詳細資料包表的技術。</span><span class="sxs-lookup"><span data-stu-id="aa931-188">In this and the preceding three tutorials we've seen a number of techniques for displaying master/detail reports.</span></span> <span data-ttu-id="aa931-189">在本教學課程中，我們使用可選取的 GridView 來存放主要記錄和 DetailsView，以在相同的頁面上顯示所選主要記錄的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="aa931-189">In this tutorial we examined using a selectable GridView to house the master records and a DetailsView to display details about the selected master record on the same page.</span></span> <span data-ttu-id="aa931-190">在先前的教學課程中，我們探討了如何使用 Dropdownlist 進行來顯示主版/詳細資料包表，以及在另一個網頁上顯示主要記錄和詳細資料記錄。</span><span class="sxs-lookup"><span data-stu-id="aa931-190">In the earlier tutorials we looked at how to display master/details reports using DropDownLists and displaying master records on one web page and detail records on another.</span></span>

<span data-ttu-id="aa931-191">本教學課程將結束我們的主要/詳細資料包告檢查。</span><span class="sxs-lookup"><span data-stu-id="aa931-191">This tutorial concludes our examination of master/detail reports.</span></span> <span data-ttu-id="aa931-192">從下一個教學課程開始，我們將開始探索使用 GridView、DetailsView 和 FormView 的自訂格式。</span><span class="sxs-lookup"><span data-stu-id="aa931-192">Starting with the next tutorial we'll begin our exploration of customized formatting with the GridView, DetailsView, and FormView.</span></span> <span data-ttu-id="aa931-193">我們將瞭解如何根據系結的資料自訂這些控制項的外觀、如何摘要 GridView 的頁尾中的資料，以及如何使用範本來取得更大程度的版面配置控制。</span><span class="sxs-lookup"><span data-stu-id="aa931-193">We'll see how to customize the appearance of these controls based on the data bound to them, how to summarize data in the GridView's footer, and how to use templates to obtain a greater degree of control over the layout.</span></span>

<span data-ttu-id="aa931-194">快樂的程式設計！</span><span class="sxs-lookup"><span data-stu-id="aa931-194">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="aa931-195">關於作者</span><span class="sxs-lookup"><span data-stu-id="aa931-195">About the Author</span></span>

<span data-ttu-id="aa931-196">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)，自1998起，有七個 ASP/ASP. NET 書籍和創辦人的[4GuysFromRolla.com](http://www.4guysfromrolla.com)。</span><span class="sxs-lookup"><span data-stu-id="aa931-196">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="aa931-197">Scott 以獨立的顧問、訓練員和作者的身分運作。</span><span class="sxs-lookup"><span data-stu-id="aa931-197">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="aa931-198">他的最新著作是[*在24小時內讓自己的 ASP.NET 2.0*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)。</span><span class="sxs-lookup"><span data-stu-id="aa931-198">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="aa931-199">他可以在mitchell@4GuysFromRolla.com觸達[。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="aa931-199">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="aa931-200">或者透過他的 blog，可以在[http://ScottOnWriting.NET](http://ScottOnWriting.NET)找到。</span><span class="sxs-lookup"><span data-stu-id="aa931-200">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="aa931-201">特別感謝</span><span class="sxs-lookup"><span data-stu-id="aa931-201">Special Thanks To</span></span>

<span data-ttu-id="aa931-202">本教學課程系列已由許多有用的審核者所審查。</span><span class="sxs-lookup"><span data-stu-id="aa931-202">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="aa931-203">本教學課程的領導審查者為 Hilton Giesenow。</span><span class="sxs-lookup"><span data-stu-id="aa931-203">Lead reviewer for this tutorial was Hilton Giesenow.</span></span> <span data-ttu-id="aa931-204">有興趣複習我即將發行的 MSDN 文章嗎？</span><span class="sxs-lookup"><span data-stu-id="aa931-204">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="aa931-205">若是如此，請在mitchell@4GuysFromRolla.com的那一行下拉式[。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="aa931-205">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="aa931-206">[上一頁](master-detail-filtering-across-two-pages-cs.md)
> [下一頁](master-detail-filtering-with-a-dropdownlist-vb.md)</span><span class="sxs-lookup"><span data-stu-id="aa931-206">[Previous](master-detail-filtering-across-two-pages-cs.md)
[Next](master-detail-filtering-with-a-dropdownlist-vb.md)</span></span>
