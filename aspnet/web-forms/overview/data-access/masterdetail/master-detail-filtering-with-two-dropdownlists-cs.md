---
uid: web-forms/overview/data-access/masterdetail/master-detail-filtering-with-two-dropdownlists-cs
title: 主版/詳細篩選使用兩個 dropdownlist 進行 (C#) |Microsoft Docs
author: rick-anderson
description: 本教學課程中展開主要/詳細資料關聯性，加入第三個圖層，使用兩個 DropDownList 控制項來選取所需的父代和祖系記錄...
ms.author: riande
ms.date: 03/31/2010
ms.assetid: ac4b0d77-4816-4ded-afd0-88dab667aedd
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-filtering-with-two-dropdownlists-cs
msc.type: authoredcontent
ms.openlocfilehash: 03d0cd7e835b5526af60a21679260f849714c37e
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/17/2019
ms.locfileid: "59421286"
---
# <a name="masterdetail-filtering-with-two-dropdownlists-c"></a><span data-ttu-id="b8ee9-103">使用兩個 DropDownList 進行主要/詳細資料篩選 (C#)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-103">Master/Detail Filtering With Two DropDownLists (C#)</span></span>

<span data-ttu-id="b8ee9-104">藉由[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="b8ee9-105">[下載範例應用程式](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_8_CS.exe)或[下載 PDF](master-detail-filtering-with-two-dropdownlists-cs/_static/datatutorial08cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-105">[Download Sample App](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_8_CS.exe) or [Download PDF](master-detail-filtering-with-two-dropdownlists-cs/_static/datatutorial08cs1.pdf)</span></span>

> <span data-ttu-id="b8ee9-106">本教學課程會展開加入第三個圖層，使用兩個 DropDownList 控制項來選取所需的父代和祖系資料錄的主版/詳細資料關聯性。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-106">This tutorial expands the master/detail relationship to add a third layer, using two DropDownList controls to select the desired parent and grandparent records.</span></span>


## <a name="introduction"></a><span data-ttu-id="b8ee9-107">簡介</span><span class="sxs-lookup"><span data-stu-id="b8ee9-107">Introduction</span></span>

<span data-ttu-id="b8ee9-108">在 [先前的教學課程](master-detail-filtering-with-a-dropdownlist-cs.md)我們檢查如何顯示簡單的主版/詳細資料報表中使用單一的 DropDownList 填入類別和 GridView，顯示屬於所選分類的產品。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-108">In the [previous tutorial](master-detail-filtering-with-a-dropdownlist-cs.md) we examined how to display a simple master/details report using a single DropDownList populated with the categories and a GridView showing those products that belong to the selected category.</span></span> <span data-ttu-id="b8ee9-109">此報表模式適用於顯示記錄有一對多關聯性，可以輕鬆地擴充，可針對包含多個的其中一個對多關聯性的案例。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-109">This report pattern works well when displaying records that have a one-to-many relationship and can easily be extended to work for scenarios that include multiple one-to-many relationships.</span></span> <span data-ttu-id="b8ee9-110">例如，訂單輸入系統都必須對應至客戶、 訂單及訂單行項目資料表。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-110">For example, an order entry system would have tables that correspond to customers, orders, and order line items.</span></span> <span data-ttu-id="b8ee9-111">指定的客戶可能會有多個與包含多個項目的每筆訂單的訂單。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-111">A given customer may have multiple orders with each order consisting of multiple items.</span></span> <span data-ttu-id="b8ee9-112">具有兩個 dropdownlist 進行和 GridView 的使用者，可以呈現這類資料。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-112">Such data can be presented to the user with two DropDownLists and a GridView.</span></span> <span data-ttu-id="b8ee9-113">第一個 DropDownList 會對第二個資料庫中的每個客戶的清單項目之一的內容所選取的客戶所下訂單。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-113">The first DropDownList would have a list item for each customer in the database with the second one's contents being the orders placed by the selected customer.</span></span> <span data-ttu-id="b8ee9-114">GridView 會列出從選取的訂單明細項目。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-114">A GridView would list the line items from the selected order.</span></span>

<span data-ttu-id="b8ee9-115">雖然 Northwind 資料庫包含標準客戶/順序/訂單詳細資料資訊在其`Customers`， `Orders`，和`Order Details`架構中未擷取的資料表，這些資料表。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-115">While the Northwind database include the canonical customer/order/order details information in its `Customers`, `Orders`, and `Order Details` tables, these tables aren't captured in our architecture.</span></span> <span data-ttu-id="b8ee9-116">然而，我們仍然可以說明如何使用兩個相依的 dropdownlist 進行。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-116">Nonetheless, we can still illustrate using two dependent DropDownLists.</span></span> <span data-ttu-id="b8ee9-117">第一個 DropDownList 會列出類別目錄以及第二個屬於所選分類的產品。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-117">The first DropDownList will list the categories and the second the products belonging to the selected category.</span></span> <span data-ttu-id="b8ee9-118">DetailsView 會列出所選產品的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-118">A DetailsView will then list the details of the selected product.</span></span>

## <a name="step-1-creating-and-populating-the-categories-dropdownlist"></a><span data-ttu-id="b8ee9-119">步驟 1：建立和填入類別 DropDownList</span><span class="sxs-lookup"><span data-stu-id="b8ee9-119">Step 1: Creating and Populating the Categories DropDownList</span></span>

<span data-ttu-id="b8ee9-120">我們第一個目標是要加入列出的類別目錄的 DropDownList。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-120">Our first goal is to add the DropDownList that lists the categories.</span></span> <span data-ttu-id="b8ee9-121">這些步驟在先前的教學課程中，已檢查詳細資料，但摘要說明如下，為求完整性。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-121">These steps were examined in detail in the preceding tutorial, but are summarized here for completeness.</span></span>

<span data-ttu-id="b8ee9-122">開啟`MasterDetailsDetails.aspx`頁面中`Filtering`資料夾中，將 DropDownList 新增至頁面上，設定其`ID`屬性設`Categories`，然後按一下 設定資料來源中的 連結它的智慧標籤。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-122">Open the `MasterDetailsDetails.aspx` page in the `Filtering` folder, add a DropDownList to the page, set its `ID` property to `Categories`, and then click the Configure Data Source link in its smart tag.</span></span> <span data-ttu-id="b8ee9-123">從資料來源組態精靈] 選擇 [加入新的資料來源。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-123">From the Data Source Configuration Wizard choose to add a new data source.</span></span>


<span data-ttu-id="b8ee9-124">[![加入新的資料來源的 DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image2.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-124">[![Add a New Data Source for the DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image2.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image1.png)</span></span>

<span data-ttu-id="b8ee9-125">**圖 1**:加入新的資料來源的 DropDownList ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-125">**Figure 1**: Add a New Data Source for the DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image3.png))</span></span>


<span data-ttu-id="b8ee9-126">新的資料來源，當然，應該 ObjectDataSource。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-126">The new data source should, naturally, be an ObjectDataSource.</span></span> <span data-ttu-id="b8ee9-127">命名新 ObjectDataSource `CategoriesDataSource` ，並讓它叫用`CategoriesBLL`物件的`GetCategories()`方法。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-127">Name this new ObjectDataSource `CategoriesDataSource` and have it invoke the `CategoriesBLL` object's `GetCategories()` method.</span></span>


<span data-ttu-id="b8ee9-128">[![選擇使用 CategoriesBLL 類別](master-detail-filtering-with-two-dropdownlists-cs/_static/image5.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-128">[![Choose to Use the CategoriesBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image5.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image4.png)</span></span>

<span data-ttu-id="b8ee9-129">**圖 2**:選擇要使用`CategoriesBLL`類別 ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-129">**Figure 2**: Choose to Use the `CategoriesBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image6.png))</span></span>


<span data-ttu-id="b8ee9-130">[![設定為使用 GetCategories() 方法的 ObjectDataSource](master-detail-filtering-with-two-dropdownlists-cs/_static/image8.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-130">[![Configure the ObjectDataSource to Use the GetCategories() Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image8.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image7.png)</span></span>

<span data-ttu-id="b8ee9-131">**圖 3**:設定要使用 ObjectDataSource`GetCategories()`方法 ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-131">**Figure 3**: Configure the ObjectDataSource to Use the `GetCategories()` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image9.png))</span></span>


<span data-ttu-id="b8ee9-132">在設定 ObjectDataSource 後我們仍然需要指定哪一個資料來源欄位應該會顯示在`Categories`DropDownList 和哪一個應設定為清單項目的值。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-132">After configuring the ObjectDataSource we still need to specify which data source field should be displayed in the `Categories` DropDownList and which one should be configured as the value for the list item.</span></span> <span data-ttu-id="b8ee9-133">設定`CategoryName`欄位做為顯示和`CategoryID`做為每個清單項目的值。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-133">Set the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>


<span data-ttu-id="b8ee9-134">[![做為值的類別名稱 欄位和使用 CategoryID 有 DropDownList 顯示](master-detail-filtering-with-two-dropdownlists-cs/_static/image11.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-134">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-two-dropdownlists-cs/_static/image11.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image10.png)</span></span>

<span data-ttu-id="b8ee9-135">**圖 4**:DropDownList 顯示`CategoryName`欄位，並使用`CategoryID`的值 ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-135">**Figure 4**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image12.png))</span></span>


<span data-ttu-id="b8ee9-136">現在我們有 DropDownList 控制項 (`Categories`)，並填入來自記錄`Categories`資料表。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-136">At this point we have a DropDownList control (`Categories`) that's populated with the records from the `Categories` table.</span></span> <span data-ttu-id="b8ee9-137">當使用者選擇新的類別從 DropDownList，我們會想要重新整理產品，我們將在步驟 2 中建立的 DropDownList 發生回傳。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-137">When the user chooses a new category from the DropDownList we'll want a postback to occur in order to refresh the product DropDownList that we're going to create in Step 2.</span></span> <span data-ttu-id="b8ee9-138">因此，請檢查啟用 AutoPostBack 選項`categories`DropDownList 的智慧標籤。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-138">Therefore, check the Enable AutoPostBack option from the `categories` DropDownList's smart tag.</span></span>


<span data-ttu-id="b8ee9-139">[![Povolit vlastnost AutoPostBack 的分類 DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image14.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-139">[![Enable AutoPostBack for the Categories DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image14.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image13.png)</span></span>

<span data-ttu-id="b8ee9-140">**圖 5**:Povolit vlastnost AutoPostBack，如`Categories`DropDownList ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-140">**Figure 5**: Enable AutoPostBack for the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image15.png))</span></span>


## <a name="step-2-displaying-the-selected-categorys-products-in-a-second-dropdownlist"></a><span data-ttu-id="b8ee9-141">步驟 2：第二個 DropDownList 以顯示所選的分類的產品</span><span class="sxs-lookup"><span data-stu-id="b8ee9-141">Step 2: Displaying the Selected Category's Products in a Second DropDownList</span></span>

<span data-ttu-id="b8ee9-142">使用`Categories`DropDownList 完成下, 一步是要顯示屬於所選分類的產品的 DropDownList。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-142">With the `Categories` DropDownList completed, our next step is to display a DropDownList of products belonging to the selected category.</span></span> <span data-ttu-id="b8ee9-143">若要這麼做，將另一個 DropDownList 新增至名為頁面`ProductsByCategory`。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-143">To accomplish this, add another DropDownList to the page named `ProductsByCategory`.</span></span> <span data-ttu-id="b8ee9-144">如同`Categories`下拉式清單中，建立的新 ObjectDataSource `ProductsByCategory` DropDownList 名為`ProductsByCategoryDataSource`。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-144">As with the `Categories` DropDownList, create a new ObjectDataSource for the `ProductsByCategory` DropDownList named `ProductsByCategoryDataSource`.</span></span>


<span data-ttu-id="b8ee9-145">[![加入新的資料來源的 ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image17.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-145">[![Add a New Data Source for the ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image17.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image16.png)</span></span>

<span data-ttu-id="b8ee9-146">**圖 6**:加入新的資料來源，如`ProductsByCategory`DropDownList ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-146">**Figure 6**: Add a New Data Source for the `ProductsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image18.png))</span></span>


<span data-ttu-id="b8ee9-147">[![建立名為 ProductsByCategoryDataSource 新 ObjectDataSource](master-detail-filtering-with-two-dropdownlists-cs/_static/image20.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-147">[![Create a New ObjectDataSource Named ProductsByCategoryDataSource](master-detail-filtering-with-two-dropdownlists-cs/_static/image20.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image19.png)</span></span>

<span data-ttu-id="b8ee9-148">**圖 7**:建立新的 ObjectDataSource 具名`ProductsByCategoryDataSource`([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-148">**Figure 7**: Create a New ObjectDataSource Named `ProductsByCategoryDataSource` ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image21.png))</span></span>


<span data-ttu-id="b8ee9-149">由於`ProductsByCategory`DropDownList 以顯示屬於所選取的類別目錄，只要這些產品的需求有叫用的 ObjectDataSource`GetProductsByCategoryID(categoryID)`方法從`ProductsBLL`物件。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-149">Since the `ProductsByCategory` DropDownList needs to display just those products belonging to the selected category, have the ObjectDataSource invoke the `GetProductsByCategoryID(categoryID)` method from the `ProductsBLL` object.</span></span>


<span data-ttu-id="b8ee9-150">[![選擇使用 ProductsBLL 類別](master-detail-filtering-with-two-dropdownlists-cs/_static/image23.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-150">[![Choose to Use the ProductsBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image23.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image22.png)</span></span>

<span data-ttu-id="b8ee9-151">**圖 8**:選擇要使用`ProductsBLL`類別 ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-151">**Figure 8**: Choose to Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image24.png))</span></span>


<span data-ttu-id="b8ee9-152">[![設定為使用 GetProductsByCategoryID(categoryID) 方法的 ObjectDataSource](master-detail-filtering-with-two-dropdownlists-cs/_static/image26.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-152">[![Configure the ObjectDataSource to Use the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image26.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image25.png)</span></span>

<span data-ttu-id="b8ee9-153">**圖 9**:設定要使用 ObjectDataSource`GetProductsByCategoryID(categoryID)`方法 ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-153">**Figure 9**: Configure the ObjectDataSource to Use the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image27.png))</span></span>


<span data-ttu-id="b8ee9-154">我們需要在精靈的最後一個步驟中指定的值*`categoryID`* 參數。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-154">In the final step of the wizard we need to specify the value of the *`categoryID`* parameter.</span></span> <span data-ttu-id="b8ee9-155">將此參數指派給選取的項目從`Categories`DropDownList。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-155">Assign this parameter to the selected item from the `Categories` DropDownList.</span></span>


<span data-ttu-id="b8ee9-156">[![從類別 DropDownList 提取 categoryID 參數值](master-detail-filtering-with-two-dropdownlists-cs/_static/image29.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-156">[![Pull the categoryID Parameter Value from the Categories DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image29.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image28.png)</span></span>

<span data-ttu-id="b8ee9-157">**圖 10**:提取*`categoryID`* 參數值，從`Categories`DropDownList ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-157">**Figure 10**: Pull the *`categoryID`* Parameter Value from the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image30.png))</span></span>


<span data-ttu-id="b8ee9-158">使用 ObjectDataSource 設定，全都是指定哪些資料來源欄位用於顯示和 DropDownList 項目的值。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-158">With the ObjectDataSource configured, all that remains is to specify what data source fields are used for the display and value of the DropDownList's items.</span></span> <span data-ttu-id="b8ee9-159">顯示`ProductName`欄位，並使用`ProductID`欄位的值。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-159">Display the `ProductName` field and use the `ProductID` field as the value.</span></span>


<span data-ttu-id="b8ee9-160">[![指定用於 DropDownList ListItems 文字和值屬性的資料來源欄位](master-detail-filtering-with-two-dropdownlists-cs/_static/image32.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-160">[![Specify the Data Source Fields Used for the DropDownList's ListItems' Text and Value Properties](master-detail-filtering-with-two-dropdownlists-cs/_static/image32.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image31.png)</span></span>

<span data-ttu-id="b8ee9-161">**圖 11**:指定資料來源欄位使用 DropDownList `ListItem` s'`Text`並`Value`屬性 ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-161">**Figure 11**: Specify the Data Source Fields Used for the DropDownList's `ListItem` s' `Text` and `Value` Properties ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image33.png))</span></span>


<span data-ttu-id="b8ee9-162">使用 ObjectDataSource 和`ProductsByCategory`DropDownList 設定我們的頁面會顯示兩個 dropdownlist 進行： 第二個會列出這些屬於所選分類的產品時，第一個會列出所有類別。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-162">With the ObjectDataSource and `ProductsByCategory` DropDownList configured our page will display two DropDownLists: the first will list all of the categories while the second will list those products belonging to the selected category.</span></span> <span data-ttu-id="b8ee9-163">當使用者從第一個 DropDownList 中選取新的類別時，會發生回傳，第二個 DropDownList 會重新繫結，顯示這些產品屬於新選取的類別目錄。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-163">When the user selects a new category from the first DropDownList, a postback will ensue and the second DropDownList will be rebound, showing those products that belong to the newly selected category.</span></span> <span data-ttu-id="b8ee9-164">圖 12 和 13 顯示`MasterDetailsDetails.aspx`中透過瀏覽器檢視時的動作。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-164">Figures 12 and 13 show `MasterDetailsDetails.aspx` in action when viewed through a browser.</span></span>


<span data-ttu-id="b8ee9-165">[![當第一次瀏覽的頁面，選取 「 飲料 」 分類](master-detail-filtering-with-two-dropdownlists-cs/_static/image35.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-165">[![When First Visiting the Page, the Beverages Category is Selected](master-detail-filtering-with-two-dropdownlists-cs/_static/image35.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image34.png)</span></span>

<span data-ttu-id="b8ee9-166">**圖 12**:當第一次瀏覽的頁面，選取 「 飲料 」 分類 ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-166">**Figure 12**: When First Visiting the Page, the Beverages Category is Selected ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image36.png))</span></span>


<span data-ttu-id="b8ee9-167">[![選擇不同的類別目錄會顯示新的類別目錄產品](master-detail-filtering-with-two-dropdownlists-cs/_static/image38.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-167">[![Choosing a Different Category Displays the New Category's Products](master-detail-filtering-with-two-dropdownlists-cs/_static/image38.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image37.png)</span></span>

<span data-ttu-id="b8ee9-168">**圖 13**:選擇不同的類別目錄會顯示新的類別目錄的產品 ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-168">**Figure 13**: Choosing a Different Category Displays the New Category's Products ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image39.png))</span></span>


<span data-ttu-id="b8ee9-169">目前`productsByCategory`下拉式清單中，變更時，並未*不*造成回傳。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-169">Currently the `productsByCategory` DropDownList, when changed, does *not* cause a postback.</span></span> <span data-ttu-id="b8ee9-170">不過，我們想要在我們新增了 DetailsView 來顯示選取之的產品的詳細資料 (步驟 3) 後，就會發生回傳。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-170">However, we will want a postback to occur once we add a DetailsView to display the selected product's details (Step 3).</span></span> <span data-ttu-id="b8ee9-171">因此，請檢查啟用 AutoPostBack 核取方塊`productsByCategory`DropDownList 的智慧標籤。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-171">Therefore, check the Enable AutoPostBack checkbox from the `productsByCategory` DropDownList's smart tag.</span></span>


<span data-ttu-id="b8ee9-172">[![啟用 productsByCategory DropDownList AutoPostBack 功能](master-detail-filtering-with-two-dropdownlists-cs/_static/image41.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-172">[![Enable the AutoPostBack Feature for the productsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image41.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image40.png)</span></span>

<span data-ttu-id="b8ee9-173">**圖 14**:啟用 AutoPostBack 功能，以便`productsByCategory`DropDownList ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-173">**Figure 14**: Enable the AutoPostBack Feature for the `productsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image42.png))</span></span>


## <a name="step-3-using-a-detailsview-to-display-details-for-the-selected-product"></a><span data-ttu-id="b8ee9-174">步驟 3：使用 DetailsView 來顯示所選產品的詳細資料</span><span class="sxs-lookup"><span data-stu-id="b8ee9-174">Step 3: Using a DetailsView to Display Details for the Selected Product</span></span>

<span data-ttu-id="b8ee9-175">最後一個步驟是在 DetailsView 中顯示所選產品的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-175">The final step is to display the details for the selected product in a DetailsView.</span></span> <span data-ttu-id="b8ee9-176">若要達成此目的，新增至網頁的 DetailsView，設定其`ID`屬性設`ProductDetails`，並為它建立新的 ObjectDataSource。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-176">To accomplish this, add a DetailsView to the page, set its `ID` property to `ProductDetails`, and create a new ObjectDataSource for it.</span></span> <span data-ttu-id="b8ee9-177">設定提取其資料從 ObjectDataSource`ProductsBLL`類別的`GetProductByProductID(productID)`使用所選的值的方法`ProductsByCategory`DropDownList 值*`productID`* 參數。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-177">Configure this ObjectDataSource to pull its data from the `ProductsBLL` class's `GetProductByProductID(productID)` method using the selected value of the `ProductsByCategory` DropDownList for the value of the *`productID`* parameter.</span></span>


<span data-ttu-id="b8ee9-178">[![選擇使用 ProductsBLL 類別](master-detail-filtering-with-two-dropdownlists-cs/_static/image44.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-178">[![Choose to Use the ProductsBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image44.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image43.png)</span></span>

<span data-ttu-id="b8ee9-179">**圖 15**:選擇要使用`ProductsBLL`類別 ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image45.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-179">**Figure 15**: Choose to Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image45.png))</span></span>


<span data-ttu-id="b8ee9-180">[![設定為使用 GetProductByProductID(productID) 方法的 ObjectDataSource](master-detail-filtering-with-two-dropdownlists-cs/_static/image47.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image46.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-180">[![Configure the ObjectDataSource to Use the GetProductByProductID(productID) Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image47.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image46.png)</span></span>

<span data-ttu-id="b8ee9-181">**圖 16**:設定要使用 ObjectDataSource`GetProductByProductID(productID)`方法 ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image48.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-181">**Figure 16**: Configure the ObjectDataSource to Use the `GetProductByProductID(productID)` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image48.png))</span></span>


<span data-ttu-id="b8ee9-182">[![從 ProductsByCategory DropDownList 提取 productID 參數值](master-detail-filtering-with-two-dropdownlists-cs/_static/image50.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-182">[![Pull the productID Parameter Value from the ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image50.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image49.png)</span></span>

<span data-ttu-id="b8ee9-183">**圖 17**:提取*`productID`* 參數值，從`ProductsByCategory`DropDownList ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image51.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-183">**Figure 17**: Pull the *`productID`* Parameter Value from the `ProductsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image51.png))</span></span>


<span data-ttu-id="b8ee9-184">您可以選擇在 DetailsView 中顯示任何可用的欄位。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-184">You can choose to display any of the available fields in the DetailsView.</span></span> <span data-ttu-id="b8ee9-185">我選擇移除`ProductID`， `SupplierID`，和`CategoryID`欄位和重新排列及格式化其餘的欄位。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-185">I've opted to remove the `ProductID`, `SupplierID`, and `CategoryID` fields and reordered and formatted the remaining fields.</span></span> <span data-ttu-id="b8ee9-186">此外，我清除 DetailsView`Height`和`Width`屬性，可讓 DetailsView 展開至最佳顯示效果所需的寬度，其資料，而不需要它限制為指定的大小。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-186">In addition, I cleared out the DetailsView's `Height` and `Width` properties, allowing the DetailsView to expand to the width needed to best display its data rather than having it constrained to a specified size.</span></span> <span data-ttu-id="b8ee9-187">以下顯示完整的標記：</span><span class="sxs-lookup"><span data-stu-id="b8ee9-187">The full markup appears below:</span></span>


[!code-aspx[Main](master-detail-filtering-with-two-dropdownlists-cs/samples/sample1.aspx)]

<span data-ttu-id="b8ee9-188">花點時間試用`MasterDetailsDetails.aspx`瀏覽器中的頁面。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-188">Take a moment to try out the `MasterDetailsDetails.aspx` page in a browser.</span></span> <span data-ttu-id="b8ee9-189">乍看之下似乎，一切都運作所需，但還有一個微妙的問題。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-189">At first glance it may appear that everything is working as desired, but there's a subtle problem.</span></span> <span data-ttu-id="b8ee9-190">當您選擇新的類別`ProductsByCategory`DropDownList 會更新為包含選取之類別目錄，這些產品，但`ProductDetails`DetailsView 持續顯示先前的產品資訊。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-190">When you choose a new category the `ProductsByCategory` DropDownList is updated to include those products for the selected category, but the `ProductDetails` DetailsView continued to show the previous product information.</span></span> <span data-ttu-id="b8ee9-191">選擇所選分類的不同產品時，會更新 DetailsView。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-191">The DetailsView is updated when choosing a different product for the selected category.</span></span> <span data-ttu-id="b8ee9-192">此外，如果夠徹底測試，您會發現，如果您持續選擇新的類別目錄 (例如選擇飲料`Categories`下拉式清單中，則 「 調味品 」，然後 Confections) 每個其他的類別選項會導致`ProductDetails`DetailsView 重新整理。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-192">Furthermore, if you test thoroughly enough, you'll find that if you continually choose new categories (such as choosing Beverages from the `Categories` DropDownList, then Condiments, then Confections) every other category selection causes the `ProductDetails` DetailsView to be refreshed.</span></span>

<span data-ttu-id="b8ee9-193">為了將實體化此問題，讓我們看看一個特定的範例。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-193">To help concretize this problem, let's look at a specific example.</span></span> <span data-ttu-id="b8ee9-194">當您第一次造訪網頁時所選取的飲料類別和相關的產品中所載入`ProductsByCategory`DropDownList。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-194">When you first visit the page the Beverages category is selected and the related products are loaded in the `ProductsByCategory` DropDownList.</span></span> <span data-ttu-id="b8ee9-195">Chai 是所選的產品，而且其詳細資料會顯示在`ProductDetails`DetailsView，如 圖 18 所示。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-195">Chai is the selected product and its details are displayed in the `ProductDetails` DetailsView, as shown in Figure 18.</span></span>


<span data-ttu-id="b8ee9-196">[![在 DetailsView 中會顯示選取之產品的詳細資料](master-detail-filtering-with-two-dropdownlists-cs/_static/image53.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image52.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-196">[![The Selected Product's Details are Displayed in a DetailsView](master-detail-filtering-with-two-dropdownlists-cs/_static/image53.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image52.png)</span></span>

<span data-ttu-id="b8ee9-197">**圖 18**:在 DetailsView 中會顯示選取之產品的詳細資料 ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image54.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-197">**Figure 18**: The Selected Product's Details are Displayed in a DetailsView ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image54.png))</span></span>


<span data-ttu-id="b8ee9-198">如果您將從飲料的類別選項變更為 「 調味品 」 時，就會發生回傳和`ProductsByCategory`DropDownList 會相應地更新，但 DetailsView 仍顯示 Chai 詳細資料。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-198">If you change the category selection from Beverages to Condiments, a postback occurs and the `ProductsByCategory` DropDownList is updated accordingly, but the DetailsView still displays details for Chai.</span></span>


<span data-ttu-id="b8ee9-199">[![仍然顯示的先前選取產品的詳細資料](master-detail-filtering-with-two-dropdownlists-cs/_static/image56.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image55.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-199">[![The Previously Selected Product's Details are Still Displayed](master-detail-filtering-with-two-dropdownlists-cs/_static/image56.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image55.png)</span></span>

<span data-ttu-id="b8ee9-200">**圖 19**:仍然顯示的先前選取產品的詳細資料 ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image57.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-200">**Figure 19**: The Previously Selected Product's Details are Still Displayed ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image57.png))</span></span>


<span data-ttu-id="b8ee9-201">挑選新的產品，從清單重新整理 DetailsView，如預期般運作。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-201">Picking a new product from the list refreshes the DetailsView as expected.</span></span> <span data-ttu-id="b8ee9-202">如果您之後變更產品挑選新的類別，DetailsView 一次不會重新整理。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-202">If you pick a new category after changing the product, the DetailsView again won't refresh.</span></span> <span data-ttu-id="b8ee9-203">不過，如果不要選擇新的產品，您會選取新的類別，就會重新整理 DetailsView。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-203">However, if instead of choosing a new product you selected a new category, the DetailsView would refresh.</span></span> <span data-ttu-id="b8ee9-204">在世界情形這裡？</span><span class="sxs-lookup"><span data-stu-id="b8ee9-204">What in the world is going on here?</span></span>

<span data-ttu-id="b8ee9-205">問題是網頁的生命週期中的時間問題。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-205">The problem is a timing issue in the page's lifecycle.</span></span> <span data-ttu-id="b8ee9-206">每次要求頁面時繼續進行一些步驟，為其呈現方式。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-206">Whenever a page is requested it proceeds through a number of steps as its rendering.</span></span> <span data-ttu-id="b8ee9-207">在其中一個步驟中 ObjectDataSource 控制項，看看是否有任一的核取其`SelectParameters`值已變更。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-207">In one of these steps the ObjectDataSource controls check to see if any of their `SelectParameters` values have changed.</span></span> <span data-ttu-id="b8ee9-208">因此，資料 Web 控制項繫結至 ObjectDataSource 會知道它需要重新整理其顯示。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-208">If so, the data Web control bound to the ObjectDataSource knows that it needs to refresh its display.</span></span> <span data-ttu-id="b8ee9-209">例如，當新的類別目錄選取時， `ProductsByCategoryDataSource` ObjectDataSource 會偵測已變更其參數值和`ProductsByCategory`DropDownList 重新繫結本身，取得所選分類的產品。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-209">For example, when a new category is selected, the `ProductsByCategoryDataSource` ObjectDataSource detects that its parameter values have changed and the `ProductsByCategory` DropDownList rebinds itself, getting the products for the selected category.</span></span>

<span data-ttu-id="b8ee9-210">在此情況下，就會發生此問題是在頁面生命週期的 ObjectDataSources 檢查已變更的參數中的點就會發生*之前*的相關聯的資料 Web 控制項重新繫結。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-210">The problem that arises in this situation is that the point in the page lifecycle that the ObjectDataSources check for changed parameters occurs *before* the rebinding of the associated data Web controls.</span></span> <span data-ttu-id="b8ee9-211">因此，當您選取新的類別時`ProductsByCategoryDataSource`ObjectDataSource 偵測到它的參數值的變更。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-211">Therefore, when selecting a new category the `ProductsByCategoryDataSource` ObjectDataSource detects a change in its parameter's value.</span></span> <span data-ttu-id="b8ee9-212">使用 ObjectDataSource `ProductDetails` DetailsView，不過，不會注意任何這類變更因為`ProductsByCategory`DropDownList 尚未重新繫結。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-212">The ObjectDataSource used by the `ProductDetails` DetailsView, however, doesn't note any such changes because the `ProductsByCategory` DropDownList has yet to be rebound.</span></span> <span data-ttu-id="b8ee9-213">稍後的生命週期`ProductsByCategory`DropDownList 重新繫結至其 ObjectDataSource，抓取新選取的分類的產品。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-213">Later in the lifecycle the `ProductsByCategory` DropDownList rebinds to its ObjectDataSource, grabbing the products for the newly selected category.</span></span> <span data-ttu-id="b8ee9-214">雖然`ProductsByCategory`DropDownList 的值已變更， `ProductDetails` DetailsView 的 ObjectDataSource 已完成其參數值檢查; 因此，DetailsView 會顯示其先前的結果。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-214">While the `ProductsByCategory` DropDownList's value has changed, the `ProductDetails` DetailsView's ObjectDataSource has already done its parameter value check; therefore, the DetailsView displays its previous results.</span></span> <span data-ttu-id="b8ee9-215">這種互動是以 圖 20 所示。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-215">This interaction is depicted in Figure 20.</span></span>


<span data-ttu-id="b8ee9-216">[![ProductsByCategory DropDownList 值變更之後 ProductDetails DetailsView 的 ObjectDataSource 會檢查變更](master-detail-filtering-with-two-dropdownlists-cs/_static/image59.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image58.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-216">[![The ProductsByCategory DropDownList Value Changes After the ProductDetails DetailsView's ObjectDataSource Checks for Changes](master-detail-filtering-with-two-dropdownlists-cs/_static/image59.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image58.png)</span></span>

<span data-ttu-id="b8ee9-217">**圖 20**:`ProductsByCategory` DropDownList 值變更之後`ProductDetails`DetailsView 的 ObjectDataSource 會檢查變更 ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image60.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-217">**Figure 20**: The `ProductsByCategory` DropDownList Value Changes After the `ProductDetails` DetailsView's ObjectDataSource Checks for Changes ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image60.png))</span></span>


<span data-ttu-id="b8ee9-218">若要補救這我們需要明確地重新繫結`ProductDetails`DetailsView 之後`ProductsByCategory`已繫結 DropDownList。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-218">To remedy this we need to explicitly rebind the `ProductDetails` DetailsView after the `ProductsByCategory` DropDownList has been bound.</span></span> <span data-ttu-id="b8ee9-219">我們可以呼叫來完成這`ProductDetails`DetailsView 的`DataBind()`方法時`ProductsByCategory`DropDownList 的`DataBound`引發事件。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-219">We can accomplish this by calling the `ProductDetails` DetailsView's `DataBind()` method when the `ProductsByCategory` DropDownList's `DataBound` event fires.</span></span> <span data-ttu-id="b8ee9-220">加入下列事件處理常式程式碼，以`MasterDetailsDetails.aspx`頁面的程式碼後置類別 (請參閱 「[以程式設計方式設定 ObjectDataSource 的參數值](../basic-reporting/programmatically-setting-the-objectdatasource-s-parameter-values-cs.md)「 如需有關如何加入事件處理常式的討論):</span><span class="sxs-lookup"><span data-stu-id="b8ee9-220">Add the following event handler code to the `MasterDetailsDetails.aspx` page's code-behind class (refer to the "[Programmatically Setting the ObjectDataSource's Parameter Values](../basic-reporting/programmatically-setting-the-objectdatasource-s-parameter-values-cs.md)" for a discussion on how to add an event handler):</span></span>


[!code-csharp[Main](master-detail-filtering-with-two-dropdownlists-cs/samples/sample2.cs)]

<span data-ttu-id="b8ee9-221">此明確呼叫之後`ProductDetails`DetailsView 的`DataBind()`方法已加入，本教學課程可以正常運作。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-221">After this explicit call to the `ProductDetails` DetailsView's `DataBind()` method has been added, the tutorial works as expected.</span></span> <span data-ttu-id="b8ee9-222">圖 21 反白顯示已變更如何補救我們先前的問題。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-222">Figure 21 highlights how this changed remedied our earlier problem.</span></span>


<span data-ttu-id="b8ee9-223">[![ProductDetails DetailsView 是明確地重新整理時 ProductsByCategory DropDownList 的資料繫結事件引發](master-detail-filtering-with-two-dropdownlists-cs/_static/image62.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image61.png)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-223">[![The ProductDetails DetailsView is Explicitly Refreshed When the ProductsByCategory DropDownList's DataBound Event Fires](master-detail-filtering-with-two-dropdownlists-cs/_static/image62.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image61.png)</span></span>

<span data-ttu-id="b8ee9-224">**圖 21**:`ProductDetails` DetailsView 時，明確地重新整理`ProductsByCategory`DropDownList 的`DataBound`引發事件 ([按一下以檢視完整大小的影像](master-detail-filtering-with-two-dropdownlists-cs/_static/image63.png))</span><span class="sxs-lookup"><span data-stu-id="b8ee9-224">**Figure 21**: The `ProductDetails` DetailsView is Explicitly Refreshed When the `ProductsByCategory` DropDownList's `DataBound` Event Fires ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image63.png))</span></span>


## <a name="summary"></a><span data-ttu-id="b8ee9-225">總結</span><span class="sxs-lookup"><span data-stu-id="b8ee9-225">Summary</span></span>

<span data-ttu-id="b8ee9-226">DropDownList 作為主版/詳細報告的理想的使用者介面項目之間的主要和詳細的記錄沒有一個對多關聯性。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-226">The DropDownList serves as an ideal user interface element for master/detail reports where there is a one-to-many relationship between the master and detail records.</span></span> <span data-ttu-id="b8ee9-227">在先前的教學課程中，我們了解如何使用單一的 DropDownList 來篩選所選取的類別顯示產品的內容。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-227">In the preceding tutorial we saw how to use a single DropDownList to filter the products displayed by the selected category.</span></span> <span data-ttu-id="b8ee9-228">在本教學課程我們產品的 GridView 取代下拉式清單中，並用 DetailsView 來顯示所選產品的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-228">In this tutorial we replaced the GridView of products with a DropDownList, and used a DetailsView to display the details of the selected product.</span></span> <span data-ttu-id="b8ee9-229">在本教學課程所討論的概念，可以輕鬆擴充到資料模型包含多個的其中一個對多關聯性，例如客戶、 訂單及訂單項目中。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-229">The concepts discussed in this tutorial can easily be extended to data models involving multiple one-to-many relationships, such as customers, orders, and order items.</span></span> <span data-ttu-id="b8ee9-230">一般情況下，您可以隨時加入 dropdownlist 進行的每個 「 一 」 實體中的一對多關聯性中。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-230">In general, you can always add a DropDownList for each of the "one" entities in the one-to-many relationships.</span></span>

<span data-ttu-id="b8ee9-231">快樂地寫程式 ！</span><span class="sxs-lookup"><span data-stu-id="b8ee9-231">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="b8ee9-232">關於作者</span><span class="sxs-lookup"><span data-stu-id="b8ee9-232">About the Author</span></span>

<span data-ttu-id="b8ee9-233">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)，作者的七個 ASP 書籍和的創辦人[4GuysFromRolla.com](http://www.4guysfromrolla.com)，自 1998 年從事 Microsoft Web 技術工作。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-233">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="b8ee9-234">Scott 會擔任獨立的顧問、 培訓講師和作家。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-234">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="b8ee9-235">他最新的著作是[ *Sams 教導您自己 ASP.NET 2.0 在 24 小時內*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-235">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="b8ee9-236">他可以在觸達[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-236">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="b8ee9-237">或透過他的部落格，這位於 [http://ScottOnWriting.NET](http://ScottOnWriting.NET)。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-237">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="b8ee9-238">特別感謝</span><span class="sxs-lookup"><span data-stu-id="b8ee9-238">Special Thanks To</span></span>

<span data-ttu-id="b8ee9-239">本教學課程系列是由許多實用的檢閱者檢閱。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-239">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="b8ee9-240">本教學課程中的潛在客戶檢閱者已 Hilton Giesenow。</span><span class="sxs-lookup"><span data-stu-id="b8ee9-240">Lead reviewer for this tutorial was Hilton Giesenow.</span></span> <span data-ttu-id="b8ee9-241">有興趣檢閱我即將推出的 MSDN 文章嗎？</span><span class="sxs-lookup"><span data-stu-id="b8ee9-241">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="b8ee9-242">如果是這樣，psychic 在[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-242">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b8ee9-243">[上一頁](master-detail-filtering-with-a-dropdownlist-cs.md)
> [下一頁](master-detail-filtering-across-two-pages-cs.md)</span><span class="sxs-lookup"><span data-stu-id="b8ee9-243">[Previous](master-detail-filtering-with-a-dropdownlist-cs.md)
[Next](master-detail-filtering-across-two-pages-cs.md)</span></span>
