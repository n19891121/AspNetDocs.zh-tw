---
uid: web-forms/overview/data-access/enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs
title: 新增 GridView 資料行的核取方塊 (C#) |Microsoft Docs
author: rick-anderson
description: 本教學課程會探討如何將為使用者提供以直覺的方式，來選取多個資料列的 G.的 GridView 控制項中的核取方塊的資料行...
ms.author: riande
ms.date: 03/06/2007
ms.assetid: f63a9443-2db0-4f80-8246-840d3e86c2a3
msc.legacyurl: /web-forms/overview/data-access/enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs
msc.type: authoredcontent
ms.openlocfilehash: 0b381623487ce1f10ce2ae8d640b87589d06d412
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 05/06/2019
ms.locfileid: "65114682"
---
# <a name="adding-a-gridview-column-of-checkboxes-c"></a><span data-ttu-id="3e66c-103">新增 GridView 的核取方塊欄 (C#)</span><span class="sxs-lookup"><span data-stu-id="3e66c-103">Adding a GridView Column of Checkboxes (C#)</span></span>

<span data-ttu-id="3e66c-104">藉由[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="3e66c-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="3e66c-105">[下載範例應用程式](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_52_CS.exe)或[下載 PDF](adding-a-gridview-column-of-checkboxes-cs/_static/datatutorial52cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="3e66c-105">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_52_CS.exe) or [Download PDF](adding-a-gridview-column-of-checkboxes-cs/_static/datatutorial52cs1.pdf)</span></span>

> <span data-ttu-id="3e66c-106">本教學課程會探討如何將為使用者提供以直覺的方式，來選取多個資料列的 GridView 的 GridView 控制項中的核取方塊的資料行。</span><span class="sxs-lookup"><span data-stu-id="3e66c-106">This tutorial looks at how to add a column of check boxes to a GridView control to provide the user with an intuitive way of selecting multiple rows of the GridView.</span></span>

## <a name="introduction"></a><span data-ttu-id="3e66c-107">簡介</span><span class="sxs-lookup"><span data-stu-id="3e66c-107">Introduction</span></span>

<span data-ttu-id="3e66c-108">在先前的教學課程中，我們會檢查如何將選項按鈕的資料行加入至 GridView，以選取特定的記錄。</span><span class="sxs-lookup"><span data-stu-id="3e66c-108">In the preceding tutorial we examined how to add a column of radio buttons to the GridView for the purpose of selecting a particular record.</span></span> <span data-ttu-id="3e66c-109">當使用者選擇最多一個項目，從方格中有限時，選項按鈕的資料行是合適的使用者介面。</span><span class="sxs-lookup"><span data-stu-id="3e66c-109">A column of radio buttons is a suitable user interface when the user is limited to choosing at most one item from the grid.</span></span> <span data-ttu-id="3e66c-110">有些時候，不過，我們可能會想要讓使用者能夠選取任意數目的方格中的項目。</span><span class="sxs-lookup"><span data-stu-id="3e66c-110">At times, however, we may want to allow the user to pick an arbitrary number of items from the grid.</span></span> <span data-ttu-id="3e66c-111">比方說，web 型電子郵件用戶端，通常顯示核取方塊的資料行的訊息的清單。</span><span class="sxs-lookup"><span data-stu-id="3e66c-111">Web-based email clients, for example, typically display the list of messages with a column of checkboxes.</span></span> <span data-ttu-id="3e66c-112">使用者可以選取任意數目的訊息，並接著執行某些動作，例如將電子郵件移到另一個資料夾，或刪除它們。</span><span class="sxs-lookup"><span data-stu-id="3e66c-112">The user can select an arbitrary number of messages and then perform some action, such as moving the emails to another folder or deleting them.</span></span>

<span data-ttu-id="3e66c-113">在本教學課程中，我們會看到如何將資料行的核取方塊以及如何判斷在回傳時簽入哪些核取方塊。</span><span class="sxs-lookup"><span data-stu-id="3e66c-113">In this tutorial we will see how to add a column of checkboxes and how to determine what checkboxes were checked on postback.</span></span> <span data-ttu-id="3e66c-114">特別是，我們將建置的範例，精確地模擬 web 型電子郵件用戶端使用者介面。</span><span class="sxs-lookup"><span data-stu-id="3e66c-114">In particular, we'll build an example that closely mimics the web-based email client user interface.</span></span> <span data-ttu-id="3e66c-115">我們的範例中會包含清單中的產品分頁的 GridView`Products`資料庫資料表的核取方塊，在每個資料列 （請參閱 圖 1）。</span><span class="sxs-lookup"><span data-stu-id="3e66c-115">Our example will include a paged GridView listing the products in the `Products` database table with a checkbox in each row (see Figure 1).</span></span> <span data-ttu-id="3e66c-116">刪除選取的產品按鈕，按一下時，將會刪除選取的產品。</span><span class="sxs-lookup"><span data-stu-id="3e66c-116">A Delete Selected Products button, when clicked, will delete those products selected.</span></span>

<span data-ttu-id="3e66c-117">[![每個產品的資料列包含一個核取方塊](adding-a-gridview-column-of-checkboxes-cs/_static/image1.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="3e66c-117">[![Each Product Row Includes a Checkbox](adding-a-gridview-column-of-checkboxes-cs/_static/image1.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image1.png)</span></span>

<span data-ttu-id="3e66c-118">**圖 1**:每個產品的資料列包含一個核取方塊 ([按一下以檢視完整大小的影像](adding-a-gridview-column-of-checkboxes-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="3e66c-118">**Figure 1**: Each Product Row Includes a Checkbox ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image2.png))</span></span>

## <a name="step-1-adding-a-paged-gridview-that-lists-product-information"></a><span data-ttu-id="3e66c-119">步驟 1：新增的分頁的 GridView 會列出產品資訊</span><span class="sxs-lookup"><span data-stu-id="3e66c-119">Step 1: Adding a Paged GridView that Lists Product Information</span></span>

<span data-ttu-id="3e66c-120">我們會擔心加入資料行的核取方塊之前，讓 s 第一個著重於清單中的 GridView 會支援分頁的產品。</span><span class="sxs-lookup"><span data-stu-id="3e66c-120">Before we worry about adding a column of checkboxes, let s first focus on listing the products in a GridView that supports paging.</span></span> <span data-ttu-id="3e66c-121">首先開啟`CheckBoxField.aspx`頁面中`EnhancedGridView`資料夾，然後拖曳的 GridView，從 [工具箱] 拖曳至設計工具，設定其`ID`至`Products`。</span><span class="sxs-lookup"><span data-stu-id="3e66c-121">Start by opening the `CheckBoxField.aspx` page in the `EnhancedGridView` folder and drag a GridView from the Toolbox onto the Designer, setting its `ID` to `Products`.</span></span> <span data-ttu-id="3e66c-122">接下來，選擇要繫結至名為新 ObjectDataSource 的 GridView `ProductsDataSource`。</span><span class="sxs-lookup"><span data-stu-id="3e66c-122">Next, choose to bind the GridView to a new ObjectDataSource named `ProductsDataSource`.</span></span> <span data-ttu-id="3e66c-123">設定要使用 ObjectDataSource`ProductsBLL`類別，呼叫`GetProducts()`方法傳回的資料。</span><span class="sxs-lookup"><span data-stu-id="3e66c-123">Configure the ObjectDataSource to use the `ProductsBLL` class, calling the `GetProducts()` method to return the data.</span></span> <span data-ttu-id="3e66c-124">此 GridView 會處於唯讀模式，因為設定下拉式清單中更新、 插入和刪除索引標籤為 （無）。</span><span class="sxs-lookup"><span data-stu-id="3e66c-124">Since this GridView will be read-only, set the drop-down lists in the UPDATE, INSERT, and DELETE tabs to (None) .</span></span>

<span data-ttu-id="3e66c-125">[![建立名為 ProductsDataSource 新 ObjectDataSource](adding-a-gridview-column-of-checkboxes-cs/_static/image2.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="3e66c-125">[![Create a New ObjectDataSource Named ProductsDataSource](adding-a-gridview-column-of-checkboxes-cs/_static/image2.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image3.png)</span></span>

<span data-ttu-id="3e66c-126">**圖 2**:建立新的 ObjectDataSource 具名`ProductsDataSource`([按一下以檢視完整大小的影像](adding-a-gridview-column-of-checkboxes-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="3e66c-126">**Figure 2**: Create a New ObjectDataSource Named `ProductsDataSource` ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image4.png))</span></span>

<span data-ttu-id="3e66c-127">[![設定要使用 GetProducts() 方法擷取資料的 ObjectDataSource](adding-a-gridview-column-of-checkboxes-cs/_static/image3.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="3e66c-127">[![Configure the ObjectDataSource to Retrieve Data Using the GetProducts() Method](adding-a-gridview-column-of-checkboxes-cs/_static/image3.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image5.png)</span></span>

<span data-ttu-id="3e66c-128">**圖 3**:設定要擷取的資料使用 ObjectDataSource`GetProducts()`方法 ([按一下以檢視完整大小的影像](adding-a-gridview-column-of-checkboxes-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="3e66c-128">**Figure 3**: Configure the ObjectDataSource to Retrieve Data Using the `GetProducts()` Method ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image6.png))</span></span>

<span data-ttu-id="3e66c-129">[![設定下拉式清單中更新、 插入和刪除 （無） 索引標籤](adding-a-gridview-column-of-checkboxes-cs/_static/image4.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="3e66c-129">[![Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE Tabs to (None)](adding-a-gridview-column-of-checkboxes-cs/_static/image4.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image7.png)</span></span>

<span data-ttu-id="3e66c-130">**圖 4**:設定下拉式清單中更新、 插入和刪除索引標籤為 （無） ([按一下以檢視完整大小的影像](adding-a-gridview-column-of-checkboxes-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="3e66c-130">**Figure 4**: Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE Tabs to (None) ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image8.png))</span></span>

<span data-ttu-id="3e66c-131">完成設定資料來源精靈之後，Visual Studio 會自動建立 BoundColumns 和 CheckBoxColumn 產品相關的資料欄位。</span><span class="sxs-lookup"><span data-stu-id="3e66c-131">After completing the Configure Data Source wizard, Visual Studio will automatically create BoundColumns and a CheckBoxColumn for the product-related data fields.</span></span> <span data-ttu-id="3e66c-132">像我們在上一個教學課程中，移除以外的所有`ProductName`， `CategoryName`，並`UnitPrice`BoundFields，並將變更`HeaderText`產品、 類別和價格的屬性。</span><span class="sxs-lookup"><span data-stu-id="3e66c-132">Like we did in the previous tutorial, remove all but the `ProductName`, `CategoryName`, and `UnitPrice` BoundFields, and change the `HeaderText` properties to Product, Category, and Price.</span></span> <span data-ttu-id="3e66c-133">設定`UnitPrice`BoundField，讓其值會格式化為貨幣。</span><span class="sxs-lookup"><span data-stu-id="3e66c-133">Configure the `UnitPrice` BoundField so that its value is formatted as a currency.</span></span> <span data-ttu-id="3e66c-134">也設定 GridView，以支援分頁，藉由檢查智慧標籤啟用分頁 核取方塊。</span><span class="sxs-lookup"><span data-stu-id="3e66c-134">Also configure the GridView to support paging by checking the Enable Paging checkbox from the smart tag.</span></span>

<span data-ttu-id="3e66c-135">可讓 s 也將刪除所選的產品的使用者介面。</span><span class="sxs-lookup"><span data-stu-id="3e66c-135">Let s also add the user interface for deleting the selected products.</span></span> <span data-ttu-id="3e66c-136">加入 Button Web 控制項下方 GridView，設定其`ID`要`DeleteSelectedProducts`及其`Text`屬性，以刪除選取的產品。</span><span class="sxs-lookup"><span data-stu-id="3e66c-136">Add a Button Web control beneath the GridView, setting its `ID` to `DeleteSelectedProducts` and its `Text` property to Delete Selected Products.</span></span> <span data-ttu-id="3e66c-137">而不是實際刪除資料庫中的產品，此範例中我們只想顯示訊息，指出產品會被刪除。</span><span class="sxs-lookup"><span data-stu-id="3e66c-137">Rather than actually deleting products from the database, for this example we'll just display a message stating the products that would have been deleted.</span></span> <span data-ttu-id="3e66c-138">若要做到這一點，新增至按鈕下方的標籤 Web 控制項。</span><span class="sxs-lookup"><span data-stu-id="3e66c-138">To accommodate this, add a Label Web control beneath the Button.</span></span> <span data-ttu-id="3e66c-139">將其識別碼設`DeleteResults`，請參閱清除其`Text`屬性，並設定其`Visible`並`EnableViewState`屬性，以`false`。</span><span class="sxs-lookup"><span data-stu-id="3e66c-139">Set its ID to `DeleteResults`, clear out its `Text` property, and set its `Visible` and `EnableViewState` properties to `false`.</span></span>

<span data-ttu-id="3e66c-140">進行這些變更之後，GridView、 ObjectDataSource、 按鈕和標籤 s 宣告式標記應該如下所示：</span><span class="sxs-lookup"><span data-stu-id="3e66c-140">After making these changes, the GridView, ObjectDataSource, Button, and Label s declarative markup should similar to the following:</span></span>

[!code-aspx[Main](adding-a-gridview-column-of-checkboxes-cs/samples/sample1.aspx)]

<span data-ttu-id="3e66c-141">請花一點時間瀏覽器中檢視頁面 （請參閱 [圖 5]）。</span><span class="sxs-lookup"><span data-stu-id="3e66c-141">Take a moment to view the page in a browser (see Figure 5).</span></span> <span data-ttu-id="3e66c-142">此時您應該會看到名稱、 類別和的前十個產品的價格。</span><span class="sxs-lookup"><span data-stu-id="3e66c-142">At this point you should see the name, category, and price of the first ten products.</span></span>

<span data-ttu-id="3e66c-143">[![列出名稱、 類別和第十個產品的價格](adding-a-gridview-column-of-checkboxes-cs/_static/image5.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="3e66c-143">[![The Name, Category, and Price of the First Ten Products are Listed](adding-a-gridview-column-of-checkboxes-cs/_static/image5.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image9.png)</span></span>

<span data-ttu-id="3e66c-144">**圖 5**:列出名稱、 類別和第十個產品的價格 ([按一下以檢視完整大小的影像](adding-a-gridview-column-of-checkboxes-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="3e66c-144">**Figure 5**: The Name, Category, and Price of the First Ten Products are Listed ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image10.png))</span></span>

## <a name="step-2-adding-a-column-of-checkboxes"></a><span data-ttu-id="3e66c-145">步驟 2：加入資料行的核取方塊</span><span class="sxs-lookup"><span data-stu-id="3e66c-145">Step 2: Adding a Column of Checkboxes</span></span>

<span data-ttu-id="3e66c-146">由於 ASP.NET 2.0 包含 CheckBoxField，有人可能會認為它可以用來將資料行的核取方塊新增至 GridView。</span><span class="sxs-lookup"><span data-stu-id="3e66c-146">Since ASP.NET 2.0 includes a CheckBoxField, one might think that it could be used to add a column of checkboxes to a GridView.</span></span> <span data-ttu-id="3e66c-147">不幸的是，不在案例中，如 CheckBoxField 設計來搭配布林值的資料欄位。</span><span class="sxs-lookup"><span data-stu-id="3e66c-147">Unfortunately, that is not the case, as the CheckBoxField is designed to work with a Boolean data field.</span></span> <span data-ttu-id="3e66c-148">亦即，若要使用 CheckBoxField 我們必須指定其值會參考要判斷是否要檢查的呈現核取方塊的基礎資料欄位。</span><span class="sxs-lookup"><span data-stu-id="3e66c-148">That is, in order to use the CheckBoxField we must specify the underlying data field whose value is consulted to determine whether the rendered checkbox is checked.</span></span> <span data-ttu-id="3e66c-149">我們不能使用 CheckBoxField 只包含資料行的核取核取方塊。</span><span class="sxs-lookup"><span data-stu-id="3e66c-149">We cannot use the CheckBoxField to just include a column of unchecked checkboxes.</span></span>

<span data-ttu-id="3e66c-150">相反地，我們必須在 新增為 TemplateField，然後將核取方塊 Web 控制項，加入其`ItemTemplate`。</span><span class="sxs-lookup"><span data-stu-id="3e66c-150">Instead, we must add a TemplateField and add a CheckBox Web control to its `ItemTemplate`.</span></span> <span data-ttu-id="3e66c-151">繼續並加入至為 TemplateField `Products` GridView，並使它的第一個 （最左邊） 欄位。</span><span class="sxs-lookup"><span data-stu-id="3e66c-151">Go ahead and add a TemplateField to the `Products` GridView and make it the first (far-left) field.</span></span> <span data-ttu-id="3e66c-152">從 GridView s 智慧標籤，按一下 [編輯範本] 連結，然後拖曳核取方塊 Web 控制項從工具箱拖曳到`ItemTemplate`。</span><span class="sxs-lookup"><span data-stu-id="3e66c-152">From the GridView s smart tag, click on the Edit Templates link and then drag a CheckBox Web control from the Toolbox into the `ItemTemplate`.</span></span> <span data-ttu-id="3e66c-153">設定此核取方塊 s`ID`屬性設`ProductSelector`。</span><span class="sxs-lookup"><span data-stu-id="3e66c-153">Set this CheckBox s `ID` property to `ProductSelector`.</span></span>

<span data-ttu-id="3e66c-154">[![新增名為 TemplateField 的 ItemTemplate 的 ProductSelector 的核取方塊 Web 控制項](adding-a-gridview-column-of-checkboxes-cs/_static/image6.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="3e66c-154">[![Add a CheckBox Web Control Named ProductSelector to the TemplateField s ItemTemplate](adding-a-gridview-column-of-checkboxes-cs/_static/image6.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image11.png)</span></span>

<span data-ttu-id="3e66c-155">**圖 6**:新增核取方塊 Web 控制項名為`ProductSelector`TemplateField s `ItemTemplate` ([按一下以檢視完整大小的影像](adding-a-gridview-column-of-checkboxes-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="3e66c-155">**Figure 6**: Add a CheckBox Web Control Named `ProductSelector` to the TemplateField s `ItemTemplate` ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image12.png))</span></span>

<span data-ttu-id="3e66c-156">與新增 TemplateField 和核取方塊 Web 控制項，每個資料列現在包含一個核取方塊。</span><span class="sxs-lookup"><span data-stu-id="3e66c-156">With the TemplateField and CheckBox Web control added, each row now includes a checkbox.</span></span> <span data-ttu-id="3e66c-157">圖 7 顯示此頁面上，新增 TemplateField 和核取方塊之後，在瀏覽器檢視時。</span><span class="sxs-lookup"><span data-stu-id="3e66c-157">Figure 7 shows this page, when viewed through a browser, after the TemplateField and CheckBox have been added.</span></span>

<span data-ttu-id="3e66c-158">[![每個產品的資料列現在包含一個核取方塊](adding-a-gridview-column-of-checkboxes-cs/_static/image7.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="3e66c-158">[![Each Product Row Now Includes a Checkbox](adding-a-gridview-column-of-checkboxes-cs/_static/image7.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image13.png)</span></span>

<span data-ttu-id="3e66c-159">**圖 7**:每個產品的資料列現在包含一個核取方塊 ([按一下以檢視完整大小的影像](adding-a-gridview-column-of-checkboxes-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="3e66c-159">**Figure 7**: Each Product Row Now Includes a Checkbox ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image14.png))</span></span>

## <a name="step-3-determining-what-checkboxes-were-checked-on-postback"></a><span data-ttu-id="3e66c-160">步驟 3：判斷哪些核取方塊在回傳時簽入</span><span class="sxs-lookup"><span data-stu-id="3e66c-160">Step 3: Determining What Checkboxes Were Checked On Postback</span></span>

<span data-ttu-id="3e66c-161">此時，我們會有核取方塊，但沒有辦法決定何種核取方塊已核取回傳的資料行。</span><span class="sxs-lookup"><span data-stu-id="3e66c-161">At this point we have a column of checkboxes but no way to determine what checkboxes were checked on postback.</span></span> <span data-ttu-id="3e66c-162">按一下 [刪除選取的產品] 按鈕時，不過，我們需要知道哪些核取方塊已核取若要刪除這些產品。</span><span class="sxs-lookup"><span data-stu-id="3e66c-162">When the Delete Selected Products button is clicked, though, we need to know what checkboxes were checked in order to delete those products.</span></span>

<span data-ttu-id="3e66c-163">GridView s [ `Rows`屬性](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rows.aspx)提供 GridView 中資料列的存取。</span><span class="sxs-lookup"><span data-stu-id="3e66c-163">The GridView s [`Rows` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rows.aspx) provides access to the data rows in the GridView.</span></span> <span data-ttu-id="3e66c-164">我們可以逐一查看這些資料列，以程式設計方式存取 核取方塊控制項，並請參考其`Checked`屬性來判斷是否已選取此核取方塊。</span><span class="sxs-lookup"><span data-stu-id="3e66c-164">We can iterate through these rows, programmatically access the CheckBox control, and then consult its `Checked` property to determine whether the CheckBox has been selected.</span></span>

<span data-ttu-id="3e66c-165">建立事件處理常式`DeleteSelectedProducts`Button Web 控制項的`Click`事件，並新增下列程式碼：</span><span class="sxs-lookup"><span data-stu-id="3e66c-165">Create an event handler for the `DeleteSelectedProducts` Button Web control s `Click` event and add the following code:</span></span>

[!code-csharp[Main](adding-a-gridview-column-of-checkboxes-cs/samples/sample2.cs)]

<span data-ttu-id="3e66c-166">`Rows`屬性傳回的集合`GridViewRow`GridView 的資料列執行個體的結構。</span><span class="sxs-lookup"><span data-stu-id="3e66c-166">The `Rows` property returns a collection of `GridViewRow` instances that makeup the GridView s data rows.</span></span> <span data-ttu-id="3e66c-167">`foreach`這裡迴圈會列舉此集合。</span><span class="sxs-lookup"><span data-stu-id="3e66c-167">The `foreach` loop here enumerates this collection.</span></span> <span data-ttu-id="3e66c-168">每個`GridViewRow`物件，使用以程式設計方式存取資料列的 [s] 核取方塊`row.FindControl("controlID")`。</span><span class="sxs-lookup"><span data-stu-id="3e66c-168">For each `GridViewRow` object, the row s CheckBox is programmatically accessed using `row.FindControl("controlID")`.</span></span> <span data-ttu-id="3e66c-169">如果勾選此核取方塊，則對應的資料列 s`ProductID`值從擷取`DataKeys`集合。</span><span class="sxs-lookup"><span data-stu-id="3e66c-169">If the CheckBox is checked, the row s corresponding `ProductID` value is retrieved from the `DataKeys` collection.</span></span> <span data-ttu-id="3e66c-170">在此練習中，我們只是顯示在資訊訊息`DeleteResults`加上標籤，雖然在運作中應用程式 d 我們改為呼叫`ProductsBLL`類別的`DeleteProduct(productID)`方法。</span><span class="sxs-lookup"><span data-stu-id="3e66c-170">In this exercise, we simply display an informative message in the `DeleteResults` Label, although in a working application we d instead make a call to the `ProductsBLL` class s `DeleteProduct(productID)` method.</span></span>

<span data-ttu-id="3e66c-171">加入此事件處理常式之後，按一下 [刪除選取的產品] 按鈕現在會顯示`ProductID`s 所選的產品。</span><span class="sxs-lookup"><span data-stu-id="3e66c-171">With the addition of this event handler, clicking the Delete Selected Products button now displays the `ProductID` s of the selected products.</span></span>

<span data-ttu-id="3e66c-172">[![按一下 刪除選取的產品按鈕時即會顯示選取的產品 Productid](adding-a-gridview-column-of-checkboxes-cs/_static/image8.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="3e66c-172">[![When the Delete Selected Products Button is Clicked the Selected Products ProductIDs are Listed](adding-a-gridview-column-of-checkboxes-cs/_static/image8.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image15.png)</span></span>

<span data-ttu-id="3e66c-173">**圖 8**:當按一下 刪除選取的產品按鈕選取的產品`ProductID`橋接器列示 ([按一下以檢視完整大小的影像](adding-a-gridview-column-of-checkboxes-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="3e66c-173">**Figure 8**: When the Delete Selected Products Button is Clicked the Selected Products `ProductID` s are Listed ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image16.png))</span></span>

## <a name="step-4-adding-check-all-and-uncheck-all-buttons"></a><span data-ttu-id="3e66c-174">步驟 4：新增全選和取消選取所有按鈕</span><span class="sxs-lookup"><span data-stu-id="3e66c-174">Step 4: Adding Check All and Uncheck All Buttons</span></span>

<span data-ttu-id="3e66c-175">如果使用者想要刪除目前的頁面上的所有產品，它們必須檢查每十個核取方塊。</span><span class="sxs-lookup"><span data-stu-id="3e66c-175">If a user wants to delete all products on the current page, they must check each of the ten checkboxes.</span></span> <span data-ttu-id="3e66c-176">我們可以協助加速此程序加上核取所有按鈕，按一下時，在方格中選取所有核取方塊。</span><span class="sxs-lookup"><span data-stu-id="3e66c-176">We can help expedite this process by adding a Check All button that, when clicked, selects all of the checkboxes in the grid.</span></span> <span data-ttu-id="3e66c-177">取消核取 [全部] 按鈕會同樣很有幫助。</span><span class="sxs-lookup"><span data-stu-id="3e66c-177">An Uncheck All button would be equally helpful.</span></span>

<span data-ttu-id="3e66c-178">兩個按鈕 Web 將控制項加入至頁面上，將它們放入上述 GridView。</span><span class="sxs-lookup"><span data-stu-id="3e66c-178">Add two Button Web controls to the page, placing them above the GridView.</span></span> <span data-ttu-id="3e66c-179">設定第一個 s`ID`來`CheckAll`並將其`Text`屬性來檢查所有; 集合的第二項 s`ID`來`UncheckAll`並將其`Text`來取消選取所有的屬性。</span><span class="sxs-lookup"><span data-stu-id="3e66c-179">Set the first one s `ID` to `CheckAll` and its `Text` property to Check All ; set the second one s `ID` to `UncheckAll` and its `Text` property to Uncheck All .</span></span>

[!code-aspx[Main](adding-a-gridview-column-of-checkboxes-cs/samples/sample3.aspx)]

<span data-ttu-id="3e66c-180">接下來，建立名為的程式碼後置類別中的 方法`ToggleCheckState(checkState)`，叫用時，會列舉`Products`GridView s`Rows`集合，並設定每個核取方塊 s`Checked`屬性設為傳遞的值在*已核取 checkState*參數。</span><span class="sxs-lookup"><span data-stu-id="3e66c-180">Next, create a method in the code-behind class named `ToggleCheckState(checkState)` that, when invoked, enumerates the `Products` GridView s `Rows` collection and sets each CheckBox s `Checked` property to the value of the passed in *checkState* parameter.</span></span>

[!code-csharp[Main](adding-a-gridview-column-of-checkboxes-cs/samples/sample4.cs)]

<span data-ttu-id="3e66c-181">接下來，建立`Click`事件處理常式`CheckAll`和`UncheckAll`按鈕。</span><span class="sxs-lookup"><span data-stu-id="3e66c-181">Next, create `Click` event handlers for the `CheckAll` and `UncheckAll` buttons.</span></span> <span data-ttu-id="3e66c-182">在  `CheckAll` s 事件處理常式，只需呼叫`ToggleCheckState(true)`; 在`UncheckAll`，呼叫`ToggleCheckState(false)`。</span><span class="sxs-lookup"><span data-stu-id="3e66c-182">In `CheckAll` s event handler, simply call `ToggleCheckState(true)`; in `UncheckAll`, call `ToggleCheckState(false)`.</span></span>

[!code-csharp[Main](adding-a-gridview-column-of-checkboxes-cs/samples/sample5.cs)]

<span data-ttu-id="3e66c-183">使用此程式碼中，按一下 [查看全部] 按鈕造成回傳，並檢查所有在 GridView 的核取方塊。</span><span class="sxs-lookup"><span data-stu-id="3e66c-183">With this code, clicking the Check All button causes a postback and checks all of the checkboxes in the GridView.</span></span> <span data-ttu-id="3e66c-184">同樣地，按一下 取消選取全部取消選取所有核取方塊。</span><span class="sxs-lookup"><span data-stu-id="3e66c-184">Likewise, clicking Uncheck All unselects all checkboxes.</span></span> <span data-ttu-id="3e66c-185">圖 9 顯示的畫面之後已核取 查看全部 按鈕。</span><span class="sxs-lookup"><span data-stu-id="3e66c-185">Figure 9 shows the screen after the Check All button has been checked.</span></span>

<span data-ttu-id="3e66c-186">[![按一下核取所有按鈕會選取所有核取方塊](adding-a-gridview-column-of-checkboxes-cs/_static/image9.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="3e66c-186">[![Clicking the Check All Button Selects All Checkboxes](adding-a-gridview-column-of-checkboxes-cs/_static/image9.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image17.png)</span></span>

<span data-ttu-id="3e66c-187">**圖 9**:按一下核取所有按鈕會選取所有核取方塊 ([按一下以檢視完整大小的影像](adding-a-gridview-column-of-checkboxes-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="3e66c-187">**Figure 9**: Clicking the Check All Button Selects All Checkboxes ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image18.png))</span></span>

> [!NOTE]
> <span data-ttu-id="3e66c-188">當顯示的資料行的核取方塊，選取或取消選取所有核取方塊的其中一種方法是透過標頭資料列中的核取方塊。</span><span class="sxs-lookup"><span data-stu-id="3e66c-188">When displaying a column of checkboxes, one approach for selecting or unselecting all of the checkboxes is through a checkbox in the header row.</span></span> <span data-ttu-id="3e66c-189">此外，目前全選/取消核取所有的實作所需的回傳。</span><span class="sxs-lookup"><span data-stu-id="3e66c-189">Moreover, the current Check All / Uncheck All implementation requires a postback.</span></span> <span data-ttu-id="3e66c-190">核取方塊已核取或取消核取，但是，可能會完全是透過用戶端指令碼，進而提供更快速得到的使用者體驗。</span><span class="sxs-lookup"><span data-stu-id="3e66c-190">The checkboxes can be checked or unchecked, however, entirely through client-side script, thereby providing a snappier user experience.</span></span> <span data-ttu-id="3e66c-191">若要瀏覽詳細資料，以及使用用戶端技術的討論中，使用的所有核取及取消核取所有的標頭資料列核取方塊中，請參閱[檢查所有核取方塊在 GridView 使用用戶端指令碼，並選取所有核取方塊](http://aspnet.4guysfromrolla.com/articles/053106-1.aspx)。</span><span class="sxs-lookup"><span data-stu-id="3e66c-191">To explore using a header row checkbox for Check All and Uncheck All in detail, along with a discussion on using client-side techniques, check out [Checking All CheckBoxes in a GridView Using Client-Side Script and a Check All CheckBox](http://aspnet.4guysfromrolla.com/articles/053106-1.aspx).</span></span>

## <a name="summary"></a><span data-ttu-id="3e66c-192">總結</span><span class="sxs-lookup"><span data-stu-id="3e66c-192">Summary</span></span>

<span data-ttu-id="3e66c-193">在您要讓使用者從一個 GridView，再繼續選擇任意數目的資料列的情況下，加入資料行的核取方塊是選項之一。</span><span class="sxs-lookup"><span data-stu-id="3e66c-193">In cases where you need to let users choose an arbitrary number of rows from a GridView before proceeding, adding a column of checkboxes is one option.</span></span> <span data-ttu-id="3e66c-194">如我們所見本教學課程中，包括在 GridView 的核取方塊的資料行，必須新增為 TemplateField 與核取方塊 Web 控制項。</span><span class="sxs-lookup"><span data-stu-id="3e66c-194">As we saw in this tutorial, including a column of checkboxes in the GridView entails adding a TemplateField with a CheckBox Web control.</span></span> <span data-ttu-id="3e66c-195">使用 Web 控制項 （相對於如同我們在上一個教學課程，請直接在範本中，插入標記） 項目核取方塊已和不簽入跨越回傳，自動會記住 ASP.NET。</span><span class="sxs-lookup"><span data-stu-id="3e66c-195">By using a Web control (versus injecting markup directly into the template, as we did in the previous tutorial) ASP.NET automatically remembers what CheckBoxes were and were not checked across postback.</span></span> <span data-ttu-id="3e66c-196">我們也以程式設計的方式可以存取的核取方塊中的程式碼來判斷是否已使用指定的核取方塊，或變更核取的狀態。</span><span class="sxs-lookup"><span data-stu-id="3e66c-196">We can also programmatically access the CheckBoxes in code to determine whether a given CheckBox is checked, or to change the checked state.</span></span>

<span data-ttu-id="3e66c-197">本教學課程和最後一個討論過的資料列選取器的資料行加入至 GridView。</span><span class="sxs-lookup"><span data-stu-id="3e66c-197">This tutorial and the last one looked at adding a row selector column to the GridView.</span></span> <span data-ttu-id="3e66c-198">在我們的下一個教學課程中，我們將檢驗如何，一些工作，我們可以新增插入功能至 GridView。</span><span class="sxs-lookup"><span data-stu-id="3e66c-198">In our next tutorial we'll examine how, with a bit of work, we can add inserting capabilities to the GridView.</span></span>

<span data-ttu-id="3e66c-199">快樂地寫程式 ！</span><span class="sxs-lookup"><span data-stu-id="3e66c-199">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="3e66c-200">關於作者</span><span class="sxs-lookup"><span data-stu-id="3e66c-200">About the Author</span></span>

<span data-ttu-id="3e66c-201">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)，作者的七個 ASP 書籍和的創辦人[4GuysFromRolla.com](http://www.4guysfromrolla.com)，自 1998 年從事 Microsoft Web 技術工作。</span><span class="sxs-lookup"><span data-stu-id="3e66c-201">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="3e66c-202">Scott 會擔任獨立的顧問、 培訓講師和作家。</span><span class="sxs-lookup"><span data-stu-id="3e66c-202">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="3e66c-203">他最新的著作是[ *Sams 教導您自己 ASP.NET 2.0 在 24 小時內*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)。</span><span class="sxs-lookup"><span data-stu-id="3e66c-203">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="3e66c-204">他可以在觸達[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="3e66c-204">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="3e66c-205">或透過他的部落格，這位於 [http://ScottOnWriting.NET](http://ScottOnWriting.NET)。</span><span class="sxs-lookup"><span data-stu-id="3e66c-205">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="3e66c-206">[上一頁](adding-a-gridview-column-of-radio-buttons-cs.md)
> [下一頁](inserting-a-new-record-from-the-gridview-s-footer-cs.md)</span><span class="sxs-lookup"><span data-stu-id="3e66c-206">[Previous](adding-a-gridview-column-of-radio-buttons-cs.md)
[Next](inserting-a-new-record-from-the-gridview-s-footer-cs.md)</span></span>
