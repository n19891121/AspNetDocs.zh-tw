---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
title: 設定目標環境的部署屬性 |Microsoft Docs
author: jrjlee
description: 本主題描述如何設定環境特定的屬性，以便將範例 Contact Manager 解決方案部署到特定目標環境 。
ms.author: riande
ms.date: 05/04/2012
ms.assetid: b5b86e03-b8ed-46e6-90fa-e1da88ef34e9
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
msc.type: authoredcontent
ms.openlocfilehash: 9742be7d718384c1b108d5f2c0c43e8e8d4fe8a9
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/06/2020
ms.locfileid: "78636441"
---
# <a name="configuring-deployment-properties-for-a-target-environment"></a><span data-ttu-id="b40c6-103">設定目標環境的部署屬性</span><span class="sxs-lookup"><span data-stu-id="b40c6-103">Configuring Deployment Properties for a Target Environment</span></span>

<span data-ttu-id="b40c6-104">[Jason 先生](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="b40c6-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="b40c6-105">下載 PDF</span><span class="sxs-lookup"><span data-stu-id="b40c6-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="b40c6-106">本主題描述如何設定環境特定的屬性，以便將範例 Contact Manager 解決方案部署至特定的目標環境。</span><span class="sxs-lookup"><span data-stu-id="b40c6-106">This topic describes how to configure environment-specific properties in order to deploy the sample Contact Manager solution to a specific target environment.</span></span>

<span data-ttu-id="b40c6-107">本主題會根據名為 Fabrikam，Inc. 之虛構公司的企業部署需求，形成一系列教學課程的一部分。本教學課程系列使用&#x2014; [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)解決方案&#x2014;的範例解決方案，來代表具有實際複雜度層級的 WEB 應用程式，包括 ASP.NET MVC 3 應用程式、Windows Communication Foundation （WCF）服務和資料庫專案。</span><span class="sxs-lookup"><span data-stu-id="b40c6-107">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) solution&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="b40c6-108">這些教學課程中的部署方法是以[瞭解組建](../web-deployment-in-the-enterprise/understanding-the-build-process.md)程式中所述的分割專案檔案方法為基礎，其中的組建程式是由兩個專案檔所控制&#x2014;，其中一個包含適用于每個目的地環境的組建指示，另一個包含環境特定的組建和部署設定。</span><span class="sxs-lookup"><span data-stu-id="b40c6-108">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="b40c6-109">在組建期間，環境特定的專案檔會合並到環境無關的專案檔中，以形成一組完整的組建指示。</span><span class="sxs-lookup"><span data-stu-id="b40c6-109">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="process-overview"></a><span data-ttu-id="b40c6-110">程序概觀</span><span class="sxs-lookup"><span data-stu-id="b40c6-110">Process Overview</span></span>

<span data-ttu-id="b40c6-111">您將用來建立及部署 Contact Manager 解決方案的專案檔會分割成兩個實體檔案：</span><span class="sxs-lookup"><span data-stu-id="b40c6-111">The project file that you'll use to build and deploy the Contact Manager solution is split into two physical files:</span></span>

- <span data-ttu-id="b40c6-112">其中一個包含萬用群組建設定和指示（ *Publish*檔案）。</span><span class="sxs-lookup"><span data-stu-id="b40c6-112">One that contains universal build settings and instructions (the *Publish.proj* file).</span></span>
- <span data-ttu-id="b40c6-113">其中一個包含環境特定的組建設定（*env-Dev*、 *env-Stage*等等）。</span><span class="sxs-lookup"><span data-stu-id="b40c6-113">One that contains environment-specific build settings (*Env-Dev.proj*, *Env-Stage.proj*, and so on).</span></span>

<span data-ttu-id="b40c6-114">在組建期間，適當的環境特定專案檔會合並到通用的*Publish*檔案中，以形成一組完整的組建指示。</span><span class="sxs-lookup"><span data-stu-id="b40c6-114">At build time, the appropriate environment-specific project file is merged into the universal *Publish.proj* file to form a complete set of build instructions.</span></span> <span data-ttu-id="b40c6-115">您可以使用描述您自己的部署案例的設定，來建立或自訂環境特定的專案檔，以設定特定目的地環境的部署。</span><span class="sxs-lookup"><span data-stu-id="b40c6-115">You can configure deployment to specific destination environments by creating or customizing environment-specific project files with settings that describe your own deployment scenario.</span></span>

<span data-ttu-id="b40c6-116">其中有許多值取決於您的目的地環境的設定&#x2014;方式，無論您的目標網頁伺服器是設定為使用 Web Deployment Agent 服務（遠端代理程式）還是 Web Deploy 處理常式。</span><span class="sxs-lookup"><span data-stu-id="b40c6-116">Lots of these values are determined by how your destination environment is configured&#x2014;in particular, whether your target web server is configured to use the Web Deployment Agent Service (the remote agent) or the Web Deploy Handler.</span></span> <span data-ttu-id="b40c6-117">如需這些方法的詳細資訊，以及有關為您自己的環境選擇正確方法的指引，請參閱[選擇正確的 Web 部署方法](choosing-the-right-approach-to-web-deployment.md)。</span><span class="sxs-lookup"><span data-stu-id="b40c6-117">For more information on these approaches, and for guidance on choosing the right approach for your own environment, see [Choosing the Right Approach to Web Deployment](choosing-the-right-approach-to-web-deployment.md).</span></span>

<span data-ttu-id="b40c6-118">[Contact Manager 案例](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md)需要兩個環境特定的專案檔：</span><span class="sxs-lookup"><span data-stu-id="b40c6-118">The [Contact Manager scenario](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md) requires two environment-specific project files:</span></span>

- <span data-ttu-id="b40c6-119">部署至開發人員測試環境（*Env-Dev*）。</span><span class="sxs-lookup"><span data-stu-id="b40c6-119">Deployment to a developer test environment (*Env-Dev.proj*).</span></span> <span data-ttu-id="b40c6-120">開發人員測試環境已設定為接受使用遠端代理程式的遠端部署，如[案例：設定 Web 部署的測試環境](scenario-configuring-a-test-environment-for-web-deployment.md)中所述。</span><span class="sxs-lookup"><span data-stu-id="b40c6-120">The developer test environment is configured to accept remote deployments using the remote agent, as described in [Scenario: Configuring a Test Environment for Web Deployment](scenario-configuring-a-test-environment-for-web-deployment.md).</span></span> <span data-ttu-id="b40c6-121">此檔案必須提供遠端代理程式端點位址，以及特定位置的設定，例如連接字串和服務端點。</span><span class="sxs-lookup"><span data-stu-id="b40c6-121">This file needs to provide the remote agent endpoint address as well as location-specific settings like connection strings and service endpoints.</span></span>
- <span data-ttu-id="b40c6-122">部署至預備環境（*Env-Stage*）。</span><span class="sxs-lookup"><span data-stu-id="b40c6-122">Deployment to a staging environment (*Env-Stage.proj*).</span></span> <span data-ttu-id="b40c6-123">預備環境已設定為接受使用 Web Deploy 處理常式的遠端部署，如[案例：設定 Web 部署的預備環境](scenario-configuring-a-staging-environment-for-web-deployment.md)中所述。</span><span class="sxs-lookup"><span data-stu-id="b40c6-123">The staging environment is configured to accept remote deployments using the Web Deploy Handler, as described in [Scenario: Configuring a Staging Environment for Web Deployment](scenario-configuring-a-staging-environment-for-web-deployment.md).</span></span> <span data-ttu-id="b40c6-124">此檔案必須提供 Web Deploy 處理常式端點位址，以及特定位置的設定，例如連接字串和服務端點。</span><span class="sxs-lookup"><span data-stu-id="b40c6-124">This file needs to provide the Web Deploy Handler endpoint address as well as location-specific settings like connection strings and service endpoints.</span></span>

<span data-ttu-id="b40c6-125">請務必注意，您在環境特定的專案檔中設定的設定不會影響 web 套件本身&#x2014;的內容，而是會控制封裝的部署方式，以及解壓縮封裝時所提供的參數值。</span><span class="sxs-lookup"><span data-stu-id="b40c6-125">It's important to note that the settings you configure in the environment-specific project file don't affect the contents of the web package itself&#x2014;instead, they control how the package is deployed and what parameter values are provided when the package is extracted.</span></span> <span data-ttu-id="b40c6-126">您正以手動方式將 web 套件匯入到生產環境，如[案例：設定 Web 部署的生產環境](scenario-configuring-a-production-environment-for-web-deployment.md)和[手動安裝 web 套件](../web-deployment-in-the-enterprise/manually-installing-web-packages.md)中所述，因此當您在產生封裝時，在環境特定的專案檔中使用了哪些設定並不重要。</span><span class="sxs-lookup"><span data-stu-id="b40c6-126">You're importing the web package into the production environment manually, as described in [Scenario: Configuring a Production Environment for Web Deployment](scenario-configuring-a-production-environment-for-web-deployment.md) and [Manually Installing Web Packages](../web-deployment-in-the-enterprise/manually-installing-web-packages.md), so it doesn't matter what settings you used in the environment-specific project file when you generated the package.</span></span> <span data-ttu-id="b40c6-127">當您匯入封裝時，Internet Information Services （IIS）管理員會提示您輸入任何參數化的值，例如連接字串和服務端點。</span><span class="sxs-lookup"><span data-stu-id="b40c6-127">Internet Information Services (IIS) Manager will prompt you for any parameterized values, like connection strings and service endpoints, when you import the package.</span></span>

<span data-ttu-id="b40c6-128">若要將 Contact Manager 解決方案部署至您自己的目標環境，您可以自訂此檔案，或使用它做為範本，並建立您自己的檔案。</span><span class="sxs-lookup"><span data-stu-id="b40c6-128">To deploy the Contact Manager solution to your own target environment, you can either customize this file or use it as a template and create your own file.</span></span>

<span data-ttu-id="b40c6-129">**設定 Contact Manager 解決方案的環境特定部署設定**</span><span class="sxs-lookup"><span data-stu-id="b40c6-129">**To configure environment-specific deployment settings for the Contact Manager solution**</span></span>

1. <span data-ttu-id="b40c6-130">在 Visual Studio 2010 中開啟 ContactManager-WCF 方案。</span><span class="sxs-lookup"><span data-stu-id="b40c6-130">Open the ContactManager-WCF solution in Visual Studio 2010.</span></span>
2. <span data-ttu-id="b40c6-131">在 [**方案總管**] 視窗中，依序展開 [**發行**] 資料夾、[ **EnvConfig** ] 資料夾，然後按兩下 [ **Env-Dev. proj**]。</span><span class="sxs-lookup"><span data-stu-id="b40c6-131">In the **Solution Explorer** window, expand the **Publish** folder, expand the **EnvConfig** folder, and then double-click **Env-Dev.proj**.</span></span>

    ![](configuring-deployment-properties-for-a-target-environment/_static/image1.png)
3. <span data-ttu-id="b40c6-132">將*Env Dev*檔案中的屬性值取代為您自己的測試環境的正確值。</span><span class="sxs-lookup"><span data-stu-id="b40c6-132">Replace the property values in the *Env-Dev.proj* file with the correct values for your own test environment.</span></span>

    > [!NOTE]
    > <span data-ttu-id="b40c6-133">遵循此程式的表格會提供每個屬性的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="b40c6-133">The table that follows this procedure provides more information on each of these properties.</span></span>
4. <span data-ttu-id="b40c6-134">儲存您的工作，然後關閉*Env Dev proj*檔案。</span><span class="sxs-lookup"><span data-stu-id="b40c6-134">Save your work, and then close the *Env-Dev.proj* file.</span></span>

## <a name="choosing-the-right-deployment-properties"></a><span data-ttu-id="b40c6-135">選擇正確的部署屬性</span><span class="sxs-lookup"><span data-stu-id="b40c6-135">Choosing the Right Deployment Properties</span></span>

<span data-ttu-id="b40c6-136">下表描述範例環境特定專案檔（ *Env Dev*）中每個屬性的用途，並針對您應該提供的值提供一些指引。</span><span class="sxs-lookup"><span data-stu-id="b40c6-136">This table describes the purpose of each property in the sample environment-specific project file, *Env-Dev.proj*, and provides some guidance on the values you should provide.</span></span>

|                                                        <span data-ttu-id="b40c6-137">屬性名稱</span><span class="sxs-lookup"><span data-stu-id="b40c6-137">Property Name</span></span>                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="b40c6-138">詳細資料</span><span class="sxs-lookup"><span data-stu-id="b40c6-138">Details</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|              <span data-ttu-id="b40c6-139"><strong>MSDeployComputerName</strong>目的地 web 伺服器或服務端點的名稱。</span><span class="sxs-lookup"><span data-stu-id="b40c6-139"><strong>MSDeployComputerName</strong> The name of the destination web server or service endpoint.</span></span>               |                                                                                                                                                                                                                                              <span data-ttu-id="b40c6-140">如果您要部署到目的地 web 伺服器上的遠端代理程式服務，可以指定目標電腦名稱稱（例如， <strong>TESTWEB1</strong>或<strong>TESTWEB1.fabrikam.net</strong>），也可以指定遠端代理程式端點（例如 `http://TESTWEB1/MSDEPLOYAGENTSERVICE`）。</span><span class="sxs-lookup"><span data-stu-id="b40c6-140">If you're deploying to the remote agent service on the destination web server, you can specify the target computer name (for example, <strong>TESTWEB1</strong> or <strong>TESTWEB1.fabrikam.net</strong>), or you can specify the remote agent endpoint (for example, `http://TESTWEB1/MSDEPLOYAGENTSERVICE`).</span></span> <span data-ttu-id="b40c6-141">在每個案例中，部署的運作方式都相同。</span><span class="sxs-lookup"><span data-stu-id="b40c6-141">The deployment works the same way in each case.</span></span> <span data-ttu-id="b40c6-142">如果您要部署到目的地 Web 服務器上的 Web Deploy 處理常式，則應該指定服務端點，並將 IIS 網站的名稱包含為查詢字串參數（例如，`https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`）。</span><span class="sxs-lookup"><span data-stu-id="b40c6-142">If you're deploying to the Web Deploy Handler on the destination web server, you should specify the service endpoint and include the name of the IIS website as a query string parameter (for example, `https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`).</span></span>                                                                                                                                                                                                                                              |
|         <span data-ttu-id="b40c6-143"><strong>MSDeployAuth</strong>Web Deploy 應該用來驗證遠端電腦的方法。</span><span class="sxs-lookup"><span data-stu-id="b40c6-143"><strong>MSDeployAuth</strong> The method that Web Deploy should use to authenticate to the remote computer.</span></span>          |                                                                                                                                                                                                                          <span data-ttu-id="b40c6-144">這應該設定為 [ <strong>NTLM</strong> ] 或 [<strong>基本</strong>]。</span><span class="sxs-lookup"><span data-stu-id="b40c6-144">This should be set to <strong>NTLM</strong> or <strong>Basic</strong>.</span></span> <span data-ttu-id="b40c6-145">一般而言，如果您要部署至遠端代理程式服務，則會使用<strong>NTLM</strong> ，而如果您要部署到 Web Deploy 處理常式，則會使用<strong>基本</strong>。</span><span class="sxs-lookup"><span data-stu-id="b40c6-145">Typically, you'll use <strong>NTLM</strong> if you're deploying to the remote agent service and <strong>Basic</strong> if you're deploying to the Web Deploy Handler.</span></span> <span data-ttu-id="b40c6-146">如果您使用基本驗證，您也必須指定 IIS Web Deployment Tool （Web Deploy）應模擬的使用者名稱和密碼，才能執行部署。</span><span class="sxs-lookup"><span data-stu-id="b40c6-146">If you use basic authentication, you also need to specify the user name and password that the IIS Web Deployment Tool (Web Deploy) should impersonate in order to perform the deployment.</span></span> <span data-ttu-id="b40c6-147">在此範例中，這些值是透過<strong>MSDeployUsername</strong>和<strong>MSDeployPassword</strong>屬性來提供。</span><span class="sxs-lookup"><span data-stu-id="b40c6-147">In this example, these values are provided through the <strong>MSDeployUsername</strong> and <strong>MSDeployPassword</strong> properties.</span></span> <span data-ttu-id="b40c6-148">如果您使用 NTLM 驗證，則可以省略這些屬性，或將它們保留空白。</span><span class="sxs-lookup"><span data-stu-id="b40c6-148">If you use NTLM authentication, you can omit these properties or leave them blank.</span></span>                                                                                                                                                                                                                          |
| <span data-ttu-id="b40c6-149"><strong>MSDeployUsername</strong>如果您使用基本驗證，Web Deploy 將會在遠端電腦上使用此帳戶。</span><span class="sxs-lookup"><span data-stu-id="b40c6-149"><strong>MSDeployUsername</strong> If you use basic authentication, Web Deploy will use this account on the remote computer.</span></span>  |                                                                                                                                                                                                                                                                                                                                                                                                                       <span data-ttu-id="b40c6-150">這應該會採用表單<em>網域</em>\*使用者名稱 \* （例如<strong>FABRIKAM\matt</strong>）。</span><span class="sxs-lookup"><span data-stu-id="b40c6-150">This should take the form <em>DOMAIN</em>\*username\* (for example, <strong>FABRIKAM\matt</strong>).</span></span> <span data-ttu-id="b40c6-151">只有在您指定 [基本驗證] 時，才會使用此值。</span><span class="sxs-lookup"><span data-stu-id="b40c6-151">This value is only used if you specify basic authentication.</span></span> <span data-ttu-id="b40c6-152">如果您使用 NTLM 驗證，則可以省略屬性。</span><span class="sxs-lookup"><span data-stu-id="b40c6-152">If you use NTLM authentication, the property can be omitted.</span></span> <span data-ttu-id="b40c6-153">如果提供值，則會忽略它。</span><span class="sxs-lookup"><span data-stu-id="b40c6-153">If a value is supplied, it will be ignored.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="b40c6-154"><strong>MSDeployPassword</strong>如果您使用基本驗證，Web Deploy 將會在遠端電腦上使用此密碼。</span><span class="sxs-lookup"><span data-stu-id="b40c6-154"><strong>MSDeployPassword</strong> If you use basic authentication, Web Deploy will use this password on the remote computer.</span></span> |                                                                                                                                                                                                                                                                                                                                                                                                                    <span data-ttu-id="b40c6-155">這是您在<strong>MSDeployUsername</strong>屬性中指定之使用者帳戶的密碼。</span><span class="sxs-lookup"><span data-stu-id="b40c6-155">This is the password for the user account you specified in the <strong>MSDeployUsername</strong> property.</span></span> <span data-ttu-id="b40c6-156">只有在您指定 [基本驗證] 時，才會使用此值。</span><span class="sxs-lookup"><span data-stu-id="b40c6-156">This value is only used if you specify basic authentication.</span></span> <span data-ttu-id="b40c6-157">如果您使用 NTLM 驗證，則可以省略屬性。</span><span class="sxs-lookup"><span data-stu-id="b40c6-157">If you use NTLM authentication, the property can be omitted.</span></span> <span data-ttu-id="b40c6-158">如果提供值，則會忽略它。</span><span class="sxs-lookup"><span data-stu-id="b40c6-158">If a value is supplied, it will be ignored.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                    |
|     <span data-ttu-id="b40c6-159"><strong>ContactManagerIisPath</strong>您想要在其上部署 Contact Manager MVC 應用程式的 IIS 路徑。</span><span class="sxs-lookup"><span data-stu-id="b40c6-159"><strong>ContactManagerIisPath</strong> The IIS path on which you want to deploy the Contact Manager MVC application.</span></span>     |                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="b40c6-160">這應該是出現在 IIS 管理員中的路徑，格式為 [<em>iis 網站名稱</em>]/[<em>web</em><em>應用程式名稱</em>]。</span><span class="sxs-lookup"><span data-stu-id="b40c6-160">This should be the path as it appears in IIS Manager, in the form [<em>IIS website name</em>]/[<em>web</em><em>application name</em>].</span></span> <span data-ttu-id="b40c6-161">請記住，在部署應用程式之前，IIS 網站必須存在。</span><span class="sxs-lookup"><span data-stu-id="b40c6-161">Remember that the IIS website needs to exist before you deploy your application.</span></span> <span data-ttu-id="b40c6-162">例如，如果您已建立名為 DemoSite 的 IIS 網站，則可以將 MVC 應用程式的 IIS 路徑指定為 DemoSite/ContactManager。</span><span class="sxs-lookup"><span data-stu-id="b40c6-162">For example, if you've created an IIS website named DemoSite, you could specify the IIS path for the MVC application as DemoSite/ContactManager.</span></span>                                                                                                                                                                                                                                                                                                                                                                        |
|   <span data-ttu-id="b40c6-163"><strong>ContactManagerServiceIisPath</strong>您想要在其上部署 Contact Manager WCF 服務的 IIS 路徑。</span><span class="sxs-lookup"><span data-stu-id="b40c6-163"><strong>ContactManagerServiceIisPath</strong> The IIS path on which you want to deploy the Contact Manager WCF service.</span></span>    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <span data-ttu-id="b40c6-164">例如，如果您已建立名為 DemoSite 的 IIS 網站，則可以將 WCF 服務的 IIS 路徑指定為<strong>DemoSite/ContactManagerService</strong>。</span><span class="sxs-lookup"><span data-stu-id="b40c6-164">For example, if you've created an IIS website named DemoSite, you could specify the IIS path for the WCF service as <strong>DemoSite/ContactManagerService</strong>.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|                  <span data-ttu-id="b40c6-165"><strong>ContactManagerTargetUrl</strong>可在其上到達 WCF 服務的 URL。</span><span class="sxs-lookup"><span data-stu-id="b40c6-165"><strong>ContactManagerTargetUrl</strong> The URL at which the WCF service can be reached.</span></span>                   |                                                                                                                                                     <span data-ttu-id="b40c6-166">這會採用下列格式： [<em>IIS 網站根 URL</em>]/[<em>服務應用程式名稱</em>]/[<em>服務端點</em>]。</span><span class="sxs-lookup"><span data-stu-id="b40c6-166">This will take the form [<em>IIS website root URL</em>]/[<em>service application name</em>]/[<em>service endpoint</em>].</span></span> <span data-ttu-id="b40c6-167">例如，如果您已在埠85上建立 IIS 網站，則 URL 的格式會是 `http://localhost:85/ContactManagerService/ContactService.svc`。</span><span class="sxs-lookup"><span data-stu-id="b40c6-167">For example, if you've created an IIS website on port 85, the URL would take the form `http://localhost:85/ContactManagerService/ContactService.svc`.</span></span> <span data-ttu-id="b40c6-168">請記住，MVC 應用程式和 WCF 服務會部署到相同的伺服器。</span><span class="sxs-lookup"><span data-stu-id="b40c6-168">Remember that the MVC application and the WCF service are deployed to the same server.</span></span> <span data-ttu-id="b40c6-169">因此，此 URL 只會從其安裝所在的電腦存取。</span><span class="sxs-lookup"><span data-stu-id="b40c6-169">As a result, this URL is only ever accessed from the machine on which it's installed.</span></span> <span data-ttu-id="b40c6-170">因此，最好是在 URL 中使用 localhost 或 IP 位址，而不是電腦名稱稱或主機標頭。</span><span class="sxs-lookup"><span data-stu-id="b40c6-170">Because of this, it's better to use localhost or the IP address, rather than the machine name or a host header, in the URL.</span></span> <span data-ttu-id="b40c6-171">如果您使用電腦名稱稱或主機標頭，IIS 中的[回送檢查](https://go.microsoft.com/?linkid=9805131)安全性功能可能會封鎖 URL，並傳回<strong>HTTP 401.1-未經授權</strong>的錯誤。</span><span class="sxs-lookup"><span data-stu-id="b40c6-171">If you use the machine name or a host header, the [loopback check](https://go.microsoft.com/?linkid=9805131) security feature in IIS may block the URL and return an <strong>HTTP 401.1 - Unauthorized</strong> error.</span></span>                                                                                                                                                     |
|                  <span data-ttu-id="b40c6-172"><strong>CmDatabaseConnectionString</strong>資料庫伺服器的連接字串。</span><span class="sxs-lookup"><span data-stu-id="b40c6-172"><strong>CmDatabaseConnectionString</strong> The connection string for the database server.</span></span>                  | <span data-ttu-id="b40c6-173">連接字串會決定 VSDBCMD 將用來與資料庫伺服器連線的認證，並建立資料庫和網頁伺服器應用程式集區將用來連線資料庫伺服器並與資料庫互動的認證。</span><span class="sxs-lookup"><span data-stu-id="b40c6-173">The connection string determines both the credentials that VSDBCMD will use to contact the database server and create the database and the credentials that the web server application pool will use to contact the database server and interact with the database.</span></span> <span data-ttu-id="b40c6-174">基本上，您有兩個選擇。</span><span class="sxs-lookup"><span data-stu-id="b40c6-174">Essentially you have two choices here.</span></span> <span data-ttu-id="b40c6-175">您可以指定<strong>整合式安全性 = true</strong>，在此情況下會使用整合式 Windows 驗證： <strong>DATA Source = TESTDB1; 整合式安全性 = true</strong>在此情況下，將會使用執行 VSDBCMD 可執行檔之使用者的認證來建立資料庫，而應用程式會使用 web 伺服器電腦帳戶的身分識別來存取資料庫。</span><span class="sxs-lookup"><span data-stu-id="b40c6-175">You can specify <strong>Integrated Security=true</strong>, in which case integrated Windows authentication is used: <strong>Data Source=TESTDB1;Integrated Security=true</strong> In this case, the database will be created using the credentials of the user who runs the VSDBCMD executable, and the application will access the database using the identity of the web server machine account.</span></span> <span data-ttu-id="b40c6-176">或者，您也可以指定 SQL Server 帳戶的使用者名稱和密碼。</span><span class="sxs-lookup"><span data-stu-id="b40c6-176">Alternatively, you can specify the user name and password of a SQL Server account.</span></span> <span data-ttu-id="b40c6-177">在此情況下，VSDBCMD 會使用 SQL Server 認證來建立資料庫，而由應用程式集區用來與資料庫互動： <strong>Data Source = TESTDB1;使用者識別碼 = ASqlUser;Password = Pa $ $w 0rd</strong>本主題中的逐步解說假設您將使用整合式 Windows 驗證。</span><span class="sxs-lookup"><span data-stu-id="b40c6-177">In this case, the SQL Server credentials are used both by VSDBCMD to create the database and by the application pool to interact with the database: <strong>Data Source=TESTDB1;User Id=ASqlUser; Password=Pa$$w0rd</strong> The walkthroughs in this topic assume that you'll use integrated Windows authentication.</span></span> |
|        <span data-ttu-id="b40c6-178"><strong>CmTargetDatabase</strong>您想要授與資料庫伺服器上所建立之資料庫的名稱。</span><span class="sxs-lookup"><span data-stu-id="b40c6-178"><strong>CmTargetDatabase</strong> The name you want to give the database you'll create on the database server.</span></span>        |                                                                                                                                                                                                                                                                                                                                                                                                                                                     <span data-ttu-id="b40c6-179">您在此處提供的值會新增至 VSDBCMD 命令做為參數。</span><span class="sxs-lookup"><span data-stu-id="b40c6-179">The value you provide here is added to the VSDBCMD command as a parameter.</span></span> <span data-ttu-id="b40c6-180">它也可用來建立完整的連接字串，讓 web 伺服器上的應用程式集區可以用來與資料庫互動。</span><span class="sxs-lookup"><span data-stu-id="b40c6-180">It's also used to build a full connection string that the application pool on the web server can use to interact with the database.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

<span data-ttu-id="b40c6-181">這些範例會示範如何針對特定的部署案例設定這些屬性。</span><span class="sxs-lookup"><span data-stu-id="b40c6-181">These examples show how you might configure these properties for specific deployment scenarios.</span></span>

### <a name="example-1x2014deployment-to-the-remote-agent-service"></a><span data-ttu-id="b40c6-182">部署至&#x2014;遠端代理程式服務的範例1</span><span class="sxs-lookup"><span data-stu-id="b40c6-182">Example 1&#x2014;Deployment to the Remote Agent Service</span></span>

<span data-ttu-id="b40c6-183">在這個範例中：</span><span class="sxs-lookup"><span data-stu-id="b40c6-183">In this example:</span></span>

- <span data-ttu-id="b40c6-184">您要部署到 TESTWEB1 上的遠端代理程式服務。</span><span class="sxs-lookup"><span data-stu-id="b40c6-184">You're deploying to the remote agent service on TESTWEB1.</span></span>
- <span data-ttu-id="b40c6-185">您正指示 Web Deploy 使用 NTLM 驗證。</span><span class="sxs-lookup"><span data-stu-id="b40c6-185">You're instructing Web Deploy to use NTLM authentication.</span></span> <span data-ttu-id="b40c6-186">Web Deploy 將使用您用來叫用 Microsoft Build Engine （MSBuild）的認證來執行。</span><span class="sxs-lookup"><span data-stu-id="b40c6-186">Web Deploy will run using the credentials you used to invoke the Microsoft Build Engine (MSBuild).</span></span>
- <span data-ttu-id="b40c6-187">您使用整合式驗證將**ContactManager**資料庫部署至 TESTDB1。</span><span class="sxs-lookup"><span data-stu-id="b40c6-187">You're using integrated authentication to deploy the **ContactManager** database to TESTDB1.</span></span> <span data-ttu-id="b40c6-188">將使用您用來叫用 MSBuild 的認證來部署資料庫。</span><span class="sxs-lookup"><span data-stu-id="b40c6-188">The database will be deployed using the credentials you used to invoke MSBuild.</span></span>

[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample1.xml)]

### <a name="example-2x2014deployment-to-the-web-deploy-handler-endpoint"></a><span data-ttu-id="b40c6-189">範例 2&#x2014;部署至 Web Deploy 處理常式端點</span><span class="sxs-lookup"><span data-stu-id="b40c6-189">Example 2&#x2014;Deployment to the Web Deploy Handler Endpoint</span></span>

<span data-ttu-id="b40c6-190">在這個範例中：</span><span class="sxs-lookup"><span data-stu-id="b40c6-190">In this example:</span></span>

- <span data-ttu-id="b40c6-191">您要部署到 STAGEWEB1 上的 Web Deploy 處理常式服務端點。</span><span class="sxs-lookup"><span data-stu-id="b40c6-191">You're deploying to the Web Deploy Handler service endpoint on STAGEWEB1.</span></span>
- <span data-ttu-id="b40c6-192">您正指示 Web Deploy 使用基本驗證。</span><span class="sxs-lookup"><span data-stu-id="b40c6-192">You're instructing Web Deploy to use basic authentication.</span></span>
- <span data-ttu-id="b40c6-193">您要指定 Web Deploy 應該模擬遠端電腦上的 FABRIKAM\stagingdeployer 帳戶。</span><span class="sxs-lookup"><span data-stu-id="b40c6-193">You're specifying that Web Deploy should impersonate the FABRIKAM\stagingdeployer account on the remote computer.</span></span>
- <span data-ttu-id="b40c6-194">您正在使用 SQL Server authentication 將**ContactManager**資料庫部署至 STAGEDB1。</span><span class="sxs-lookup"><span data-stu-id="b40c6-194">You're using SQL Server authentication to deploy the **ContactManager** database to STAGEDB1.</span></span>

[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample2.xml)]

## <a name="conclusion"></a><span data-ttu-id="b40c6-195">結論</span><span class="sxs-lookup"><span data-stu-id="b40c6-195">Conclusion</span></span>

<span data-ttu-id="b40c6-196">此時，您的專案檔已完全設定為可建立 Contact Manager 解決方案，並將其部署到一或多個目的地環境。</span><span class="sxs-lookup"><span data-stu-id="b40c6-196">At this point, your project files are fully configured to build and deploy the Contact Manager solution to one or more destination environments.</span></span>

<span data-ttu-id="b40c6-197">若要使用這些專案檔做為單一步驟、可重複部署程式的一部分，您需要使用 MSBuild 執行*Publish*檔案，並傳入環境特定專案檔的位置做為參數。</span><span class="sxs-lookup"><span data-stu-id="b40c6-197">To use these project files as part of a single-step, repeatable deployment process, you need to execute the *Publish.proj* file using MSBuild and pass in the location of the environment-specific project file as a parameter.</span></span> <span data-ttu-id="b40c6-198">您可以透過各種方式來執行這項操作：</span><span class="sxs-lookup"><span data-stu-id="b40c6-198">You can do this in various ways:</span></span>

- <span data-ttu-id="b40c6-199">如需 MSBuild 和自訂專案檔簡介的總覽，請參閱[瞭解專案檔案](../web-deployment-in-the-enterprise/understanding-the-project-file.md)。</span><span class="sxs-lookup"><span data-stu-id="b40c6-199">For an overview of MSBuild and an introduction to custom project files, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span>
- <span data-ttu-id="b40c6-200">如需如何制訂執行自訂專案檔之 MSBuild 命令的相關資訊，請參閱[部署 Web 套件](../web-deployment-in-the-enterprise/deploying-web-packages.md)。</span><span class="sxs-lookup"><span data-stu-id="b40c6-200">For information on how to formulate an MSBuild command that executes your custom project files, see [Deploying Web Packages](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span></span>
- <span data-ttu-id="b40c6-201">如需如何將 MSBuild 命令併入命令檔中進行單一步驟、可重複部署的相關資訊，請參閱[建立和執行部署命令](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md)檔。</span><span class="sxs-lookup"><span data-stu-id="b40c6-201">For information on how to incorporate your MSBuild commands into a command file for single-step, repeatable deployments, see [Creating and Running a Deployment Command File](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md).</span></span>
- <span data-ttu-id="b40c6-202">如需如何從 Team Build 執行自訂專案檔的詳細資訊，請參閱[建立支援部署的組建定義](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md)。</span><span class="sxs-lookup"><span data-stu-id="b40c6-202">For information on how to execute your custom project files from Team Build, see [Creating a Build Definition that Supports Deployment](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="b40c6-203">上一篇</span><span class="sxs-lookup"><span data-stu-id="b40c6-203">Previous</span></span>](creating-a-server-farm-with-the-web-farm-framework.md)
