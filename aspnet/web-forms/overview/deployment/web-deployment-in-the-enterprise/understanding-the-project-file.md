---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-project-file
title: 瞭解專案檔 |Microsoft Docs
author: jrjlee
description: Microsoft Build Engine （MSBuild）專案檔案位於組建和部署程式的核心。 本主題一開始會說明 MSBuild 的概念總覽 。
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 07978d9d-341c-4524-bcba-62976f390f77
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-project-file
msc.type: authoredcontent
ms.openlocfilehash: 419fe51aaf65bddcc2c50380f099f842a8d9439c
ms.sourcegitcommit: 84b1681d4e6253e30468c8df8a09fe03beea9309
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/02/2019
ms.locfileid: "73445696"
---
# <a name="understanding-the-project-file"></a><span data-ttu-id="ff020-104">瞭解專案檔</span><span class="sxs-lookup"><span data-stu-id="ff020-104">Understanding the project file</span></span>

<span data-ttu-id="ff020-105">[Jason 先生](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="ff020-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="ff020-106">下載 PDF</span><span class="sxs-lookup"><span data-stu-id="ff020-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="ff020-107">Microsoft Build Engine （MSBuild）專案檔案位於組建和部署程式的核心。</span><span class="sxs-lookup"><span data-stu-id="ff020-107">Microsoft Build Engine (MSBuild) project files lie at the heart of the build and deployment process.</span></span> <span data-ttu-id="ff020-108">本主題一開始會概述 MSBuild 和專案檔的概念。</span><span class="sxs-lookup"><span data-stu-id="ff020-108">This topic starts with a conceptual overview of MSBuild and the project file.</span></span> <span data-ttu-id="ff020-109">其中描述當您使用專案檔時，您會遇到的主要元件，而且它會透過如何使用專案檔來部署實際應用程式的範例來運作。</span><span class="sxs-lookup"><span data-stu-id="ff020-109">It describes the key components you'll come across when you work with project files, and it works through an example of how you can use project files to deploy real-world applications.</span></span>
> 
> <span data-ttu-id="ff020-110">您將瞭解的內容：</span><span class="sxs-lookup"><span data-stu-id="ff020-110">What you'll learn:</span></span>
> 
> - <span data-ttu-id="ff020-111">MSBuild 如何使用 MSBuild 專案檔來建立專案。</span><span class="sxs-lookup"><span data-stu-id="ff020-111">How MSBuild uses MSBuild project files to build projects.</span></span>
> - <span data-ttu-id="ff020-112">MSBuild 如何與部署技術整合，例如 Internet Information Services （IIS） Web 部署工具（Web Deploy）。</span><span class="sxs-lookup"><span data-stu-id="ff020-112">How MSBuild integrates with deployment technologies, like the Internet Information Services (IIS) Web Deployment Tool (Web Deploy).</span></span>
> - <span data-ttu-id="ff020-113">如何瞭解專案檔的主要元件。</span><span class="sxs-lookup"><span data-stu-id="ff020-113">How to understand the key components of a project file.</span></span>
> - <span data-ttu-id="ff020-114">如何使用專案檔來建立及部署複雜的應用程式。</span><span class="sxs-lookup"><span data-stu-id="ff020-114">How you can use project files to build and deploy complex applications.</span></span>

## <a name="msbuild-and-the-project-file"></a><span data-ttu-id="ff020-115">MSBuild 和專案檔</span><span class="sxs-lookup"><span data-stu-id="ff020-115">MSBuild and the Project File</span></span>

<span data-ttu-id="ff020-116">當您在 Visual Studio 中建立並建立解決方案時，Visual Studio 會使用 MSBuild 來建立方案中的每個專案。</span><span class="sxs-lookup"><span data-stu-id="ff020-116">When you create and build solutions in Visual Studio, Visual Studio uses MSBuild to build each project in your solution.</span></span> <span data-ttu-id="ff020-117">每個 Visual Studio 專案都包含一個 MSBuild 專案檔，其副檔名會反映專案&#x2014;的類型，例如， C#專案（.csproj）、Visual Basic.NET 專案（. vbproj）或資料庫專案（.dbproj）。</span><span class="sxs-lookup"><span data-stu-id="ff020-117">Every Visual Studio project includes an MSBuild project file, with a file extension that reflects the type of project&#x2014;for example, a C# project (.csproj), a Visual Basic.NET project (.vbproj), or a database project (.dbproj).</span></span> <span data-ttu-id="ff020-118">為了建立專案，MSBuild 必須處理與專案相關聯的專案檔。</span><span class="sxs-lookup"><span data-stu-id="ff020-118">In order to build a project, MSBuild must process the project file associated with the project.</span></span> <span data-ttu-id="ff020-119">專案檔是一個 XML 檔，其中包含 MSBuild 所需的所有資訊和指示，以建立您的專案，例如要包含的內容、平臺需求、版本資訊、網頁伺服器或資料庫伺服器設定，以及必須執行的工作。</span><span class="sxs-lookup"><span data-stu-id="ff020-119">The project file is an XML document that contains all the information and instructions that MSBuild needs in order to build your project, like the content to include, the platform requirements, versioning information, web server or database server settings, and the tasks that must be performed.</span></span>

<span data-ttu-id="ff020-120">MSBuild 專案檔是以[MSBUILD XML 架構](/visualstudio/msbuild/msbuild-project-file-schema-reference)為基礎，因此組建程式完全開放且透明。</span><span class="sxs-lookup"><span data-stu-id="ff020-120">MSBuild project files are based on the [MSBuild XML schema](/visualstudio/msbuild/msbuild-project-file-schema-reference), and as a result the build process is entirely open and transparent.</span></span> <span data-ttu-id="ff020-121">此外，您不需要安裝 Visual Studio，就能使用 MSBuild 引擎&#x2014;，msbuild.exe 可執行檔是 .NET Framework 的一部分，而且您可以從命令提示字元中執行它。</span><span class="sxs-lookup"><span data-stu-id="ff020-121">In addition, you don't need to install Visual Studio in order to use the MSBuild engine&#x2014;the MSBuild.exe executable is part of the .NET Framework, and you can run it from a command prompt.</span></span> <span data-ttu-id="ff020-122">身為開發人員，您可以使用 MSBuild XML 架構製作自己的 MSBuild 專案檔，以對您的專案建立和部署方式進行精密且精細的控制。</span><span class="sxs-lookup"><span data-stu-id="ff020-122">As a developer, you can craft your own MSBuild project files, using the MSBuild XML schema, to impose sophisticated and fine-grained control over how your projects are built and deployed.</span></span> <span data-ttu-id="ff020-123">這些自訂專案檔的工作方式與 Visual Studio 自動產生的專案檔完全相同。</span><span class="sxs-lookup"><span data-stu-id="ff020-123">These custom project files work in exactly the same way as the project files that Visual Studio generates automatically.</span></span>

> [!NOTE]
> <span data-ttu-id="ff020-124">您也可以在 Team Foundation Server （TFS）中搭配使用 MSBuild 專案檔與 Team Build service。</span><span class="sxs-lookup"><span data-stu-id="ff020-124">You can also use MSBuild project files with the Team Build service in Team Foundation Server (TFS).</span></span> <span data-ttu-id="ff020-125">例如，您可以使用連續整合（CI）案例中的專案檔，在簽入新的程式碼時自動部署至測試環境。</span><span class="sxs-lookup"><span data-stu-id="ff020-125">For example, you can use project files in continuous integration (CI) scenarios to automate deployment to a test environment when new code is checked in.</span></span> <span data-ttu-id="ff020-126">如需詳細資訊，請參閱設定[自動化 Web 部署的 Team Foundation Server](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md)。</span><span class="sxs-lookup"><span data-stu-id="ff020-126">For more information, see [Configuring Team Foundation Server for Automated Web Deployment](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md).</span></span>

### <a name="project-file-naming-conventions"></a><span data-ttu-id="ff020-127">專案檔案命名慣例</span><span class="sxs-lookup"><span data-stu-id="ff020-127">Project File Naming Conventions</span></span>

<span data-ttu-id="ff020-128">當您建立自己的專案檔時，可以使用任何您喜歡的副檔名。</span><span class="sxs-lookup"><span data-stu-id="ff020-128">When you create your own project files, you can use any file extension you like.</span></span> <span data-ttu-id="ff020-129">不過，若要讓其他人更容易瞭解您的解決方案，您應該使用下列常見的慣例：</span><span class="sxs-lookup"><span data-stu-id="ff020-129">However, to make your solutions easier for others to understand, you should use these common conventions:</span></span>

- <span data-ttu-id="ff020-130">當您建立建立專案的專案檔時，請使用 proj 副檔名。</span><span class="sxs-lookup"><span data-stu-id="ff020-130">Use the .proj extension when you create a project file that builds projects.</span></span>
- <span data-ttu-id="ff020-131">當您建立可重複使用的專案檔以匯入其他專案檔時，請使用 .targets 副檔名。</span><span class="sxs-lookup"><span data-stu-id="ff020-131">Use the .targets extension when you create a reusable project file to import into other project files.</span></span> <span data-ttu-id="ff020-132">具有 .targets 副檔名的檔案通常不會建立任何專案，而是只包含您可以匯入到您的 .targets 檔案的指示。</span><span class="sxs-lookup"><span data-stu-id="ff020-132">Files with a .targets extension typically don't build anything themselves, they simply contain instructions that you can import into your .proj files.</span></span>

### <a name="integration-with-deployment-technologies"></a><span data-ttu-id="ff020-133">與部署技術整合</span><span class="sxs-lookup"><span data-stu-id="ff020-133">Integration with Deployment Technologies</span></span>

<span data-ttu-id="ff020-134">如果您已在 Visual Studio 2010 中使用 web 應用程式專案（例如 ASP.NET web 應用程式和 ASP.NET MVC web 應用程式），您會知道這些專案包含內建支援，可將 web 應用程式封裝及部署至目標環境。</span><span class="sxs-lookup"><span data-stu-id="ff020-134">If you've worked with web application projects in Visual Studio 2010, like ASP.NET web applications and ASP.NET MVC web applications, you'll know that these projects include built-in support for packaging and deploying the web application to a target environment.</span></span> <span data-ttu-id="ff020-135">這些專案的 [**屬性**] 頁面包括 [**封裝/發行 Web** ] 和 [**封裝/發行 SQL** ] 索引標籤，可讓您用來設定應用程式元件的封裝和部署方式。</span><span class="sxs-lookup"><span data-stu-id="ff020-135">The **Properties** pages for these projects include **Package/Publish Web** and **Package/Publish SQL** tabs that you can use to configure how the components of your application are packaged and deployed.</span></span> <span data-ttu-id="ff020-136">這會顯示 [**封裝/發行 Web** ] 索引標籤：</span><span class="sxs-lookup"><span data-stu-id="ff020-136">This shows the **Package/Publish Web** tab:</span></span>

![](understanding-the-project-file/_static/image1.png)

<span data-ttu-id="ff020-137">這些功能背後的基礎技術稱為「Web 發佈管線」（WPP）。</span><span class="sxs-lookup"><span data-stu-id="ff020-137">The underlying technology behind these capabilities is known as the Web Publishing Pipeline (WPP).</span></span> <span data-ttu-id="ff020-138">WPP 基本上會將 MSBuild 和[Web Deploy](https://go.microsoft.com/?linkid=9805122)整合在一起，為您的 Web 應用程式提供完整的組建、封裝和部署流程。</span><span class="sxs-lookup"><span data-stu-id="ff020-138">The WPP essentially brings MSBuild and [Web Deploy](https://go.microsoft.com/?linkid=9805122) together to provide a complete build, package, and deployment process for your web applications.</span></span>

<span data-ttu-id="ff020-139">好消息是，您可以在建立 Web 專案的自訂專案檔時，利用 WPP 提供的整合點。</span><span class="sxs-lookup"><span data-stu-id="ff020-139">The good news is that you can take advantage of the integration points that the WPP provides when you create custom project files for web projects.</span></span> <span data-ttu-id="ff020-140">您可以在專案檔中包含部署指示，讓您建立專案、建立 web 部署套件，以及透過單一專案檔和對 MSBuild 的單一呼叫，在遠端伺服器上安裝這些套件。</span><span class="sxs-lookup"><span data-stu-id="ff020-140">You can include deployment instructions in your project file, which allows you to build your projects, create web deployment packages, and install these packages on remote servers through a single project file and a single call to MSBuild.</span></span> <span data-ttu-id="ff020-141">您也可以在組建程式中呼叫任何其他可執行檔。</span><span class="sxs-lookup"><span data-stu-id="ff020-141">You can also call any other executables as part of your build process.</span></span> <span data-ttu-id="ff020-142">例如，您可以執行 VSDBCMD 命令列工具，從架構檔案部署資料庫。</span><span class="sxs-lookup"><span data-stu-id="ff020-142">For example, you can run the VSDBCMD.exe command-line tool to deploy a database from a schema file.</span></span> <span data-ttu-id="ff020-143">在本主題的課程中，您將瞭解如何利用這些功能來滿足企業部署案例的需求。</span><span class="sxs-lookup"><span data-stu-id="ff020-143">Over the course of this topic, you'll see how you can take advantage of these capabilities to meet the requirements of your enterprise deployment scenarios.</span></span>

> [!NOTE]
> <span data-ttu-id="ff020-144">如需 web 應用程式部署流程運作方式的詳細資訊，請參閱[ASP.NET Web 應用程式專案部署總覽](https://msdn.microsoft.com/library/dd394698.aspx)。</span><span class="sxs-lookup"><span data-stu-id="ff020-144">For more information on how the web application deployment process works, see [ASP.NET Web Application Project Deployment Overview](https://msdn.microsoft.com/library/dd394698.aspx).</span></span>

## <a name="the-anatomy-of-a-project-file"></a><span data-ttu-id="ff020-145">專案檔的剖析</span><span class="sxs-lookup"><span data-stu-id="ff020-145">The Anatomy of a Project File</span></span>

<span data-ttu-id="ff020-146">在您仔細查看組建程式之前，值得花一些時間讓自己熟悉 MSBuild 專案檔的基本結構。</span><span class="sxs-lookup"><span data-stu-id="ff020-146">Before you look at the build process in more detail, it's worth taking a few moments to familiarize yourself with the basic structure of an MSBuild project file.</span></span> <span data-ttu-id="ff020-147">本節概述當您查看、編輯或建立專案檔時，將會遇到的更常見元素。</span><span class="sxs-lookup"><span data-stu-id="ff020-147">This section provides an overview of the more common elements that you'll encounter when you review, edit, or create a project file.</span></span> <span data-ttu-id="ff020-148">特別是，您將瞭解：</span><span class="sxs-lookup"><span data-stu-id="ff020-148">In particular, you'll learn:</span></span>

- <span data-ttu-id="ff020-149">如何使用*屬性*來管理組建進程的變數。</span><span class="sxs-lookup"><span data-stu-id="ff020-149">How to use *properties* to manage variables for the build process.</span></span>
- <span data-ttu-id="ff020-150">如何使用*專案*來識別組建進程的輸入，例如程式碼檔案。</span><span class="sxs-lookup"><span data-stu-id="ff020-150">How to use *items* to identify the inputs to the build process, like code files.</span></span>
- <span data-ttu-id="ff020-151">如何使用*目標* *和工作，將*執行指示提供給 MSBuild，方法是使用專案檔中其他位置所定義的*屬性*和*專案*。</span><span class="sxs-lookup"><span data-stu-id="ff020-151">How to use *targets* and *tasks* to provide execution instructions to MSBuild, using *properties* and *items* defined elsewhere in the project file.</span></span>

<span data-ttu-id="ff020-152">這會顯示 MSBuild 專案檔中的主要元素之間的關聯性：</span><span class="sxs-lookup"><span data-stu-id="ff020-152">This shows the relationship between the key elements in an MSBuild project file:</span></span>

![](understanding-the-project-file/_static/image2.png)

### <a name="the-project-element"></a><span data-ttu-id="ff020-153">專案元素</span><span class="sxs-lookup"><span data-stu-id="ff020-153">The Project Element</span></span>

<span data-ttu-id="ff020-154">[Project](https://msdn.microsoft.com/library/bcxfsh87.aspx)元素是每個專案檔的根項目。</span><span class="sxs-lookup"><span data-stu-id="ff020-154">The [Project](https://msdn.microsoft.com/library/bcxfsh87.aspx) element is the root element of every project file.</span></span> <span data-ttu-id="ff020-155">除了識別專案檔的 XML 架構之外， **Project 專案**還可以包含屬性，以指定組建進程的進入點。</span><span class="sxs-lookup"><span data-stu-id="ff020-155">In addition to identifying the XML schema for the project file, the **Project** element can include attributes to specify the entry points for the build process.</span></span> <span data-ttu-id="ff020-156">例如，在[Contact Manager 範例方案](the-contact-manager-solution.md)中， *Publish*檔案會指定組建應從呼叫名為**FullPublish**的目標開始。</span><span class="sxs-lookup"><span data-stu-id="ff020-156">For example, in the [Contact Manager sample solution](the-contact-manager-solution.md), the *Publish.proj* file specifies that the build should start by calling the target named **FullPublish**.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample1.xml)]

### <a name="properties-and-conditions"></a><span data-ttu-id="ff020-157">屬性和條件</span><span class="sxs-lookup"><span data-stu-id="ff020-157">Properties and Conditions</span></span>

<span data-ttu-id="ff020-158">專案檔通常需要提供許多不同的資訊片段，才能成功建立及部署您的專案。</span><span class="sxs-lookup"><span data-stu-id="ff020-158">A project file typically needs to provide lots of different pieces of information in order to successfully build and deploy your projects.</span></span> <span data-ttu-id="ff020-159">這些資訊片段可能包括伺服器名稱、連接字串、認證、組建設定、來源與目的地檔案路徑，以及您想要包含以支援自訂的任何其他資訊。</span><span class="sxs-lookup"><span data-stu-id="ff020-159">These pieces of information could include server names, connection strings, credentials, build configurations, source and destination file paths, and any other information you want to include to support customization.</span></span> <span data-ttu-id="ff020-160">在專案檔中，屬性必須在[PropertyGroup](https://msdn.microsoft.com/library/t4w159bs.aspx)元素內定義。</span><span class="sxs-lookup"><span data-stu-id="ff020-160">In a project file, properties must be defined within a [PropertyGroup](https://msdn.microsoft.com/library/t4w159bs.aspx) element.</span></span> <span data-ttu-id="ff020-161">MSBuild 屬性是由索引鍵/值組所組成。</span><span class="sxs-lookup"><span data-stu-id="ff020-161">MSBuild properties consist of key-value pairs.</span></span> <span data-ttu-id="ff020-162">在**PropertyGroup**元素中，元素名稱會定義屬性索引鍵，而元素的內容則會定義屬性值。</span><span class="sxs-lookup"><span data-stu-id="ff020-162">Within the **PropertyGroup** element, the element name defines the property key and the content of the element defines the property value.</span></span> <span data-ttu-id="ff020-163">例如，您可以定義名為**ServerName**和**ConnectionString**的屬性，以儲存靜態伺服器名稱和連接字串。</span><span class="sxs-lookup"><span data-stu-id="ff020-163">For example, you could define properties named **ServerName** and **ConnectionString** to store a static server name and connection string.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample2.xml)]

<span data-ttu-id="ff020-164">若要取出屬性值，請使用 *$ （PropertyName）* 格式。</span><span class="sxs-lookup"><span data-stu-id="ff020-164">To retrieve a property value, use the format *$(PropertyName)*.</span></span> <span data-ttu-id="ff020-165">例如，若要取出**ServerName**屬性的值，您必須輸入：</span><span class="sxs-lookup"><span data-stu-id="ff020-165">For example, to retrieve the value of the **ServerName** property, you would type:</span></span>

[!code-powershell[Main](understanding-the-project-file/samples/sample3.ps1)]

> [!NOTE]
> <span data-ttu-id="ff020-166">您會在本主題稍後看到如何及何時使用屬性值的範例。</span><span class="sxs-lookup"><span data-stu-id="ff020-166">You'll see examples of how and when to use property values later in this topic.</span></span>

<span data-ttu-id="ff020-167">在專案檔中將資訊內嵌為靜態屬性，並不一定是管理組建程式的理想方法。</span><span class="sxs-lookup"><span data-stu-id="ff020-167">Embedding information as static properties in a project file is not always the ideal approach to managing the build process.</span></span> <span data-ttu-id="ff020-168">在許多情況下，您會想要從其他來源取得資訊，或讓使用者從命令提示字元提供資訊。</span><span class="sxs-lookup"><span data-stu-id="ff020-168">In a lot of scenarios, you'll want to obtain the information from other sources or empower the user to provide the information from the command prompt.</span></span> <span data-ttu-id="ff020-169">MSBuild 可讓您將任何屬性值指定為命令列參數。</span><span class="sxs-lookup"><span data-stu-id="ff020-169">MSBuild allows you to specify any property value as a command-line parameter.</span></span> <span data-ttu-id="ff020-170">例如，使用者可以在從命令列執行 Msbuild.exe 時，提供**ServerName**的值。</span><span class="sxs-lookup"><span data-stu-id="ff020-170">For example, the user could provide a value for **ServerName** when he or she runs MSBuild.exe from the command line.</span></span>

[!code-console[Main](understanding-the-project-file/samples/sample4.cmd)]

> [!NOTE]
> <span data-ttu-id="ff020-171">如需可搭配 Msbuild.exe 使用之引數和參數的詳細資訊，請參閱[Msbuild 命令列參考](https://msdn.microsoft.com/library/ms164311.aspx)。</span><span class="sxs-lookup"><span data-stu-id="ff020-171">For more information on the arguments and switches you can use with MSBuild.exe, see [MSBuild Command Line Reference](https://msdn.microsoft.com/library/ms164311.aspx).</span></span>

<span data-ttu-id="ff020-172">您可以使用相同的屬性語法來取得環境變數和內建專案屬性的值。</span><span class="sxs-lookup"><span data-stu-id="ff020-172">You can use the same property syntax to obtain the values of environment variables and built-in project properties.</span></span> <span data-ttu-id="ff020-173">許多常用的屬性都是為您定義的，而且您可以藉由加入相關的參數名稱，在專案檔中使用它們。</span><span class="sxs-lookup"><span data-stu-id="ff020-173">Lots of commonly used properties are defined for you, and you can use them in your project files by including the relevant parameter name.</span></span> <span data-ttu-id="ff020-174">例如，若要取出目前的專案平臺&#x2014;（例如， **x86**或**AnyCpu**&#x2014;），您可以在專案檔中包含 **$ （platform）** 屬性參考。</span><span class="sxs-lookup"><span data-stu-id="ff020-174">For example, to retrieve the current project platform&#x2014;for example, **x86** or **AnyCpu**&#x2014;you can include the **$(Platform)** property reference in your project file.</span></span> <span data-ttu-id="ff020-175">如需詳細資訊，請參閱[組建命令和屬性的宏](https://msdn.microsoft.com/library/c02as0cs.aspx)、[一般 MSBuild 專案屬性](https://msdn.microsoft.com/library/bb629394.aspx)和[保留的屬性](https://msdn.microsoft.com/library/ms164309.aspx)。</span><span class="sxs-lookup"><span data-stu-id="ff020-175">For more information, see [Macros for Build Commands and Properties](https://msdn.microsoft.com/library/c02as0cs.aspx), [Common MSBuild Project Properties](https://msdn.microsoft.com/library/bb629394.aspx), and [Reserved Properties](https://msdn.microsoft.com/library/ms164309.aspx).</span></span>

<span data-ttu-id="ff020-176">屬性通常會與*條件*搭配使用。</span><span class="sxs-lookup"><span data-stu-id="ff020-176">Properties are often used in conjunction with *conditions*.</span></span> <span data-ttu-id="ff020-177">大部分的 MSBuild 專案都支援**Condition**屬性，可讓您指定 MSBuild 應該評估專案的準則。</span><span class="sxs-lookup"><span data-stu-id="ff020-177">Most MSBuild elements support the **Condition** attribute, which lets you specify the criteria upon which MSBuild should evaluate the element.</span></span> <span data-ttu-id="ff020-178">例如，請考慮這個屬性定義：</span><span class="sxs-lookup"><span data-stu-id="ff020-178">For example, consider this property definition:</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample5.xml)]

<span data-ttu-id="ff020-179">當 MSBuild 處理這個屬性定義時，它會先檢查 **$ （OutputRoot）** 屬性值是否可用。</span><span class="sxs-lookup"><span data-stu-id="ff020-179">When MSBuild processes this property definition, it first checks to see whether an **$(OutputRoot)** property value is available.</span></span> <span data-ttu-id="ff020-180">如果屬性值為空白&#x2014;，則表示使用者未提供此屬性&#x2014;的值，條件評估為**true** ，且屬性值設定為 **。\Publish\Out**。如果使用者已提供此屬性的值，則條件會評估為**false** ，而且不會使用靜態屬性值。</span><span class="sxs-lookup"><span data-stu-id="ff020-180">If the property value is blank&#x2014;in other words, the user hasn't provided a value for this property&#x2014;the condition evaluates to **true** and the property value is set to **..\Publish\Out**. If the user has provided a value for this property, the condition evaluates to **false** and the static property value is not used.</span></span>

<span data-ttu-id="ff020-181">如需您可以指定條件之不同方式的詳細資訊，請參閱[MSBuild 條件](https://msdn.microsoft.com/library/7szfhaft.aspx)。</span><span class="sxs-lookup"><span data-stu-id="ff020-181">For more information on the different ways in which you can specify conditions, see [MSBuild Conditions](https://msdn.microsoft.com/library/7szfhaft.aspx).</span></span>

### <a name="items-and-item-groups"></a><span data-ttu-id="ff020-182">專案和專案群組</span><span class="sxs-lookup"><span data-stu-id="ff020-182">Items and Item Groups</span></span>

<span data-ttu-id="ff020-183">專案檔的其中一個重要角色是定義組建進程的輸入。</span><span class="sxs-lookup"><span data-stu-id="ff020-183">One of the important roles of the project file is to define the inputs to the build process.</span></span> <span data-ttu-id="ff020-184">一般而言，這些輸入是檔案&#x2014;程式碼檔案、設定檔案、命令檔，以及您需要在組建流程中處理或複製的任何其他檔案。</span><span class="sxs-lookup"><span data-stu-id="ff020-184">Typically, these inputs are files&#x2014;code files, configuration files, command files, and any other files that you need to process or copy as part of the build process.</span></span> <span data-ttu-id="ff020-185">在 MSBuild 專案架構中，這些輸入是以[專案](https://msdn.microsoft.com/library/ms164283.aspx)元素表示。</span><span class="sxs-lookup"><span data-stu-id="ff020-185">In the MSBuild project schema, these inputs are represented by [Item](https://msdn.microsoft.com/library/ms164283.aspx) elements.</span></span> <span data-ttu-id="ff020-186">在專案檔中，專案必須在[ItemGroup](https://msdn.microsoft.com/library/646dk05y.aspx)元素內定義。</span><span class="sxs-lookup"><span data-stu-id="ff020-186">In a project file, items must be defined within an [ItemGroup](https://msdn.microsoft.com/library/646dk05y.aspx) element.</span></span> <span data-ttu-id="ff020-187">就像**屬性**專案一樣，您可以用您喜歡的方式來命名**Item**元素。</span><span class="sxs-lookup"><span data-stu-id="ff020-187">Just like **Property** elements, you can name an **Item** element however you like.</span></span> <span data-ttu-id="ff020-188">不過，您必須指定**包含**屬性，以識別專案所代表的檔案或萬用字元。</span><span class="sxs-lookup"><span data-stu-id="ff020-188">However, you must specify an **Include** attribute to identify the file or wildcard that the item represents.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample6.xml)]

<span data-ttu-id="ff020-189">藉由指定多個具有相同名稱的**專案**元素，您就可以有效地建立命名資源的清單。</span><span class="sxs-lookup"><span data-stu-id="ff020-189">By specifying multiple **Item** elements with the same name, you're effectively creating a named list of resources.</span></span> <span data-ttu-id="ff020-190">若要查看其實際運作方式，最好先查看 Visual Studio 建立的其中一個專案檔。</span><span class="sxs-lookup"><span data-stu-id="ff020-190">A good way to see this in action is to take a look inside one of the project files that Visual Studio creates.</span></span> <span data-ttu-id="ff020-191">例如，範例方案中的*ContactManager*檔案包含許多專案群組，每個都有數個名稱相同的**專案**元素。</span><span class="sxs-lookup"><span data-stu-id="ff020-191">For example, the *ContactManager.Mvc.csproj* file in the sample solution includes a lot of item groups, each with several identically named **Item** elements.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample7.xml)]

<span data-ttu-id="ff020-192">如此一來，專案檔會指示 MSBuild 建立檔案清單，這些檔案必須以**參考**清單所含的相同方式&#x2014;來處理，而此清單中包含必須針對成功組建準備就緒的元件、**編譯**清單包含必須編譯的程式碼檔案，且**內容**清單包含必須原封不動地複製的資源。</span><span class="sxs-lookup"><span data-stu-id="ff020-192">In this way, the project file is instructing MSBuild to construct lists of files that need to be processed in the same way&#x2014;the **Reference** list includes assemblies that must be in place for a successful build, the **Compile** list includes code files that must be compiled, and the **Content** list includes resources that must be copied unaltered.</span></span> <span data-ttu-id="ff020-193">我們將在本主題稍後探討組建程式如何參考和使用這些專案。</span><span class="sxs-lookup"><span data-stu-id="ff020-193">We'll look at how the build process references and uses these items later in this topic.</span></span>

<span data-ttu-id="ff020-194">專案元素也可以包含[ItemMetadata](https://msdn.microsoft.com/library/ms164284.aspx)的子項目。</span><span class="sxs-lookup"><span data-stu-id="ff020-194">Item elements can also include [ItemMetadata](https://msdn.microsoft.com/library/ms164284.aspx) child elements.</span></span> <span data-ttu-id="ff020-195">這些是使用者定義的索引鍵/值組，基本上代表該專案特有的屬性。</span><span class="sxs-lookup"><span data-stu-id="ff020-195">These are user-defined key-value pairs and essentially represent properties that are specific to that item.</span></span> <span data-ttu-id="ff020-196">例如，專案檔中的許多**編譯**專案元素都包含**DependentUpon**的子項目。</span><span class="sxs-lookup"><span data-stu-id="ff020-196">For example, a lot of the **Compile** item elements in the project file include **DependentUpon** child elements.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample8.xml)]

> [!NOTE]
> <span data-ttu-id="ff020-197">除了使用者建立的專案中繼資料以外，所有專案都會在建立時指派各種共同的中繼資料。</span><span class="sxs-lookup"><span data-stu-id="ff020-197">In addition to user-created item metadata, all items are assigned various common metadata on creation.</span></span> <span data-ttu-id="ff020-198">如需詳細資訊，請參閱[已知的項目中繼資料](https://msdn.microsoft.com/library/ms164313.aspx)。</span><span class="sxs-lookup"><span data-stu-id="ff020-198">For more information, see [Well-known Item Metadata](https://msdn.microsoft.com/library/ms164313.aspx).</span></span>

<span data-ttu-id="ff020-199">您可以在根層級的**專案**元素內或特定**目標**元素內建立**ItemGroup**元素。</span><span class="sxs-lookup"><span data-stu-id="ff020-199">You can create **ItemGroup** elements within the root-level **Project** element or within specific **Target** elements.</span></span> <span data-ttu-id="ff020-200">**ItemGroup**元素也支援**條件**屬性，可讓您根據專案設定或平臺之類的條件，量身打造組建程式的輸入。</span><span class="sxs-lookup"><span data-stu-id="ff020-200">**ItemGroup** elements also support **Condition** attributes, which lets you tailor the inputs to the build process according to conditions like the project configuration or platform.</span></span>

### <a name="targets-and-tasks"></a><span data-ttu-id="ff020-201">目標和工作</span><span class="sxs-lookup"><span data-stu-id="ff020-201">Targets and Tasks</span></span>

<span data-ttu-id="ff020-202">在 MSBuild 架構中， [Task](https://msdn.microsoft.com/library/77f2hx1s.aspx)元素代表個別的組建指令（或工作）。</span><span class="sxs-lookup"><span data-stu-id="ff020-202">In the MSBuild schema, a [Task](https://msdn.microsoft.com/library/77f2hx1s.aspx) element represents an individual build instruction (or task).</span></span> <span data-ttu-id="ff020-203">MSBuild 包含許多預先定義的工作。</span><span class="sxs-lookup"><span data-stu-id="ff020-203">MSBuild includes a multitude of predefined tasks.</span></span> <span data-ttu-id="ff020-204">例如：</span><span class="sxs-lookup"><span data-stu-id="ff020-204">For example:</span></span>

- <span data-ttu-id="ff020-205">**複製**工作會將檔案複製到新的位置。</span><span class="sxs-lookup"><span data-stu-id="ff020-205">The **Copy** task copies files to a new location.</span></span>
- <span data-ttu-id="ff020-206">**Csc**工作會叫用 Visual C#編譯器。</span><span class="sxs-lookup"><span data-stu-id="ff020-206">The **Csc** task invokes the Visual C# compiler.</span></span>
- <span data-ttu-id="ff020-207">**Vbc**工作會叫用 Visual Basic 編譯器。</span><span class="sxs-lookup"><span data-stu-id="ff020-207">The **Vbc** task invokes the Visual Basic compiler.</span></span>
- <span data-ttu-id="ff020-208">**Exec**工作會執行指定的程式。</span><span class="sxs-lookup"><span data-stu-id="ff020-208">The **Exec** task runs a specified program.</span></span>
- <span data-ttu-id="ff020-209">**Message**工作會將訊息寫入記錄器。</span><span class="sxs-lookup"><span data-stu-id="ff020-209">The **Message** task writes a message to a logger.</span></span>

> [!NOTE]
> <span data-ttu-id="ff020-210">如需現成可用工作的完整詳細資料，請參閱[MSBuild 工作參考](https://msdn.microsoft.com/library/7z253716.aspx)。</span><span class="sxs-lookup"><span data-stu-id="ff020-210">For full details of the tasks that are available out of the box, see [MSBuild Task Reference](https://msdn.microsoft.com/library/7z253716.aspx).</span></span> <span data-ttu-id="ff020-211">如需工作的詳細資訊，包括如何建立您自己的自訂作業，請參閱[MSBuild tasks](https://msdn.microsoft.com/library/ms171466.aspx)。</span><span class="sxs-lookup"><span data-stu-id="ff020-211">For more information on tasks, including how to create your own custom tasks, see [MSBuild Tasks](https://msdn.microsoft.com/library/ms171466.aspx).</span></span>

<span data-ttu-id="ff020-212">工作必須一律包含在[目標](https://msdn.microsoft.com/library/t50z2hka.aspx)元素內。</span><span class="sxs-lookup"><span data-stu-id="ff020-212">Tasks must always be contained within [Target](https://msdn.microsoft.com/library/t50z2hka.aspx) elements.</span></span> <span data-ttu-id="ff020-213">**Target**專案是一組依序執行的一或多個工作，而專案檔可以包含多個目標。</span><span class="sxs-lookup"><span data-stu-id="ff020-213">A **Target** element is a set of one or more tasks that are executed sequentially, and a project file can contain multiple targets.</span></span> <span data-ttu-id="ff020-214">當您想要執行工作或一組工作時，您會叫用包含它們的目標。</span><span class="sxs-lookup"><span data-stu-id="ff020-214">When you want to run a task, or a set of tasks, you invoke the target that contains them.</span></span> <span data-ttu-id="ff020-215">例如，假設您有一個簡單的專案檔，會記錄一則訊息。</span><span class="sxs-lookup"><span data-stu-id="ff020-215">For example, suppose you have a simple project file that logs a message.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample9.xml)]

<span data-ttu-id="ff020-216">您可以從命令列叫用目標，方法是使用 **/t**參數指定目標。</span><span class="sxs-lookup"><span data-stu-id="ff020-216">You can invoke the target from the command line, by using the **/t** switch to specify the target.</span></span>

[!code-console[Main](understanding-the-project-file/samples/sample10.cmd)]

<span data-ttu-id="ff020-217">或者，您也可以將**DefaultTargets**屬性加入至**Project**元素，以指定您要叫用的目標。</span><span class="sxs-lookup"><span data-stu-id="ff020-217">Alternatively, you can add a **DefaultTargets** attribute to the **Project** element, to specify the targets that you want to invoke.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample11.xml)]

<span data-ttu-id="ff020-218">在此情況下，您不需要從命令列指定目標。</span><span class="sxs-lookup"><span data-stu-id="ff020-218">In this case, you don't need to specify the target from the command line.</span></span> <span data-ttu-id="ff020-219">您可以直接指定專案檔，MSBuild 將會為您叫用**FullPublish**目標。</span><span class="sxs-lookup"><span data-stu-id="ff020-219">You can simply specify the project file, and MSBuild will invoke the **FullPublish** target for you.</span></span>

[!code-console[Main](understanding-the-project-file/samples/sample12.cmd)]

<span data-ttu-id="ff020-220">目標和工作都可以包含**條件**屬性。</span><span class="sxs-lookup"><span data-stu-id="ff020-220">Both targets and tasks can include **Condition** attributes.</span></span> <span data-ttu-id="ff020-221">因此，您可以選擇在符合特定條件時，省略整個目標或個別工作。</span><span class="sxs-lookup"><span data-stu-id="ff020-221">As such, you can choose to omit entire targets or individual tasks if certain conditions are met.</span></span>

<span data-ttu-id="ff020-222">一般而言，當您建立有用的工作和目標時，您必須參考您在專案檔中的其他位置定義的屬性和專案：</span><span class="sxs-lookup"><span data-stu-id="ff020-222">Generally speaking, when you create useful tasks and targets, you'll need to refer to the properties and items that you've defined elsewhere in the project file:</span></span>

- <span data-ttu-id="ff020-223">若要使用屬性值，請輸入 **$ （***propertyname***）** ，其中*PropertyName*是**property**元素的名稱或參數的名稱。</span><span class="sxs-lookup"><span data-stu-id="ff020-223">To use a property value, type **$(***PropertyName***)**, where *PropertyName* is the name of the **Property** element or the name of the parameter.</span></span>
- <span data-ttu-id="ff020-224">若要使用專案，請輸入 **@（** 專案名稱） *，其中*專案名稱是**item**元素的名稱。</span><span class="sxs-lookup"><span data-stu-id="ff020-224">To use an item, type **@(***ItemName***)**, where *ItemName* is the name of the **Item** element.</span></span>

> [!NOTE]
> <span data-ttu-id="ff020-225">請記住，如果您使用相同的名稱建立多個專案，則會建立一個清單。</span><span class="sxs-lookup"><span data-stu-id="ff020-225">Remember that if you create multiple items with the same name, you're building a list.</span></span> <span data-ttu-id="ff020-226">相反地，如果您建立多個具有相同名稱的屬性，您提供的最後一個屬性值將會覆寫具有相同名稱&#x2014;的任何先前屬性，而屬性只能包含單一值。</span><span class="sxs-lookup"><span data-stu-id="ff020-226">In contrast, if you create multiple properties with the same name, the last property value you provide will overwrite any previous properties with the same name&#x2014;a property can only contain a single value.</span></span>

<span data-ttu-id="ff020-227">例如，在範例方案的*Publish*檔案中，請查看**BuildProjects**目標。</span><span class="sxs-lookup"><span data-stu-id="ff020-227">For example, in the *Publish.proj* file in the sample solution, take a look at the **BuildProjects** target.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample13.xml)]

<span data-ttu-id="ff020-228">在此範例中，您可以觀察下列重點：</span><span class="sxs-lookup"><span data-stu-id="ff020-228">In this sample, you can observe these key points:</span></span>

- <span data-ttu-id="ff020-229">如果指定**BuildingInTeamBuild**參數，且其值為**true**，則不會執行此目標中的任何工作。</span><span class="sxs-lookup"><span data-stu-id="ff020-229">If the **BuildingInTeamBuild** parameter is specified and has a value of **true**, none of the tasks within this target will be executed.</span></span>
- <span data-ttu-id="ff020-230">目標包含[MSBuild](https://msdn.microsoft.com/library/z7f65y0d.aspx)工作的單一實例。</span><span class="sxs-lookup"><span data-stu-id="ff020-230">The target contains a single instance of the [MSBuild](https://msdn.microsoft.com/library/z7f65y0d.aspx) task.</span></span> <span data-ttu-id="ff020-231">這項工作可讓您建立其他 MSBuild 專案。</span><span class="sxs-lookup"><span data-stu-id="ff020-231">This task lets you build other MSBuild projects.</span></span>
- <span data-ttu-id="ff020-232">**ProjectsToBuild**專案會傳遞至工作。</span><span class="sxs-lookup"><span data-stu-id="ff020-232">The **ProjectsToBuild** item is passed to the task.</span></span> <span data-ttu-id="ff020-233">這個專案可以代表專案或方案檔的清單，這些檔案都是由專案群組中的**ProjectsToBuild**專案元素所定義。</span><span class="sxs-lookup"><span data-stu-id="ff020-233">This item could represent a list of project or solution files, all defined by **ProjectsToBuild** item elements within an item group.</span></span> <span data-ttu-id="ff020-234">在此情況下， **ProjectsToBuild**專案會參考單一方案檔。</span><span class="sxs-lookup"><span data-stu-id="ff020-234">In this case, the **ProjectsToBuild** item refers to a single solution file.</span></span>

    [!code-xml[Main](understanding-the-project-file/samples/sample14.xml)]
- <span data-ttu-id="ff020-235">傳遞至**MSBuild**工作的屬性值包含名為**OutputRoot**和**Configuration**的參數。</span><span class="sxs-lookup"><span data-stu-id="ff020-235">The property values passed to the **MSBuild** task include parameters named **OutputRoot** and **Configuration**.</span></span> <span data-ttu-id="ff020-236">如果有提供參數值，則會將它們設定為，如果不是，則設為靜態屬性值。</span><span class="sxs-lookup"><span data-stu-id="ff020-236">These are set to parameter values if they are provided, or static property values if they are not.</span></span>

    [!code-xml[Main](understanding-the-project-file/samples/sample15.xml)]

<span data-ttu-id="ff020-237">您也可以看到**MSBuild**工作會叫用名為**Build**的目標。</span><span class="sxs-lookup"><span data-stu-id="ff020-237">You can also see that the **MSBuild** task invokes a target named **Build**.</span></span> <span data-ttu-id="ff020-238">這是幾個廣泛用於 Visual Studio 專案檔中的內建目標之一，可供您在自訂專案檔中使用，例如**組建**、**清除**、**重建**和**發行**。</span><span class="sxs-lookup"><span data-stu-id="ff020-238">This is one of several built-in targets that are widely used in Visual Studio project files and are available to you in your custom project files, like **Build**, **Clean**, **Rebuild**, and **Publish**.</span></span> <span data-ttu-id="ff020-239">您將會進一步瞭解如何使用目標和工作來控制組建程式，以及在本主題稍後的關於**MSBuild**工作。</span><span class="sxs-lookup"><span data-stu-id="ff020-239">You'll learn more about using targets and tasks to control the build process, and about the **MSBuild** task in particular, later in this topic.</span></span>

> [!NOTE]
> <span data-ttu-id="ff020-240">如需目標的詳細資訊，請參閱[MSBuild 目標](https://msdn.microsoft.com/library/ms171462.aspx)。</span><span class="sxs-lookup"><span data-stu-id="ff020-240">For more information on targets, see [MSBuild Targets](https://msdn.microsoft.com/library/ms171462.aspx).</span></span>

## <a name="splitting-project-files-to-support-multiple-environments"></a><span data-ttu-id="ff020-241">分割專案檔案以支援多個環境</span><span class="sxs-lookup"><span data-stu-id="ff020-241">Splitting Project Files to Support Multiple Environments</span></span>

<span data-ttu-id="ff020-242">假設您想要能夠將解決方案部署到多個環境，例如測試伺服器、預備平臺及生產環境。</span><span class="sxs-lookup"><span data-stu-id="ff020-242">Suppose you want to be able to deploy a solution to multiple environments, like test servers, staging platforms, and production environments.</span></span> <span data-ttu-id="ff020-243">在這些環境&#x2014;中，設定可能會有極大的差異，而不只是伺服器名稱、連接字串等，而且也可能在認證、安全性設定和許多其他因素方面。</span><span class="sxs-lookup"><span data-stu-id="ff020-243">The configuration may vary substantially between these environments&#x2014;not just in terms of server names, connection strings, and so on, but also potentially in terms of credentials, security settings, and lots of other factors.</span></span> <span data-ttu-id="ff020-244">如果您需要定期執行此動作，您可以在每次切換目標環境時，編輯專案檔中的多個屬性並不容易。</span><span class="sxs-lookup"><span data-stu-id="ff020-244">If you need to do this regularly, it's not really expedient to edit multiple properties in your project file every time you switch the target environment.</span></span> <span data-ttu-id="ff020-245">也不是理想的解決方案，需要提供無止盡的屬性值清單給組建進程。</span><span class="sxs-lookup"><span data-stu-id="ff020-245">Nor is it an ideal solution to require an endless list of property values to be provided to the build process.</span></span>

<span data-ttu-id="ff020-246">幸好有替代方案。</span><span class="sxs-lookup"><span data-stu-id="ff020-246">Fortunately there is an alternative.</span></span> <span data-ttu-id="ff020-247">MSBuild 可讓您將組建設定分割成多個專案檔案。</span><span class="sxs-lookup"><span data-stu-id="ff020-247">MSBuild lets you split your build configuration across multiple project files.</span></span> <span data-ttu-id="ff020-248">若要查看其運作方式，請注意，在範例解決方案中，有兩個自訂專案檔案：</span><span class="sxs-lookup"><span data-stu-id="ff020-248">To see how this works, in the sample solution, notice that there are two custom project files:</span></span>

- <span data-ttu-id="ff020-249">*Publish*，其中包含所有環境通用的屬性、專案和目標。</span><span class="sxs-lookup"><span data-stu-id="ff020-249">*Publish.proj*, which contains properties, items, and targets that are common to all environments.</span></span>
- <span data-ttu-id="ff020-250">*Env-Dev. proj*，其中包含開發人員環境特有的屬性。</span><span class="sxs-lookup"><span data-stu-id="ff020-250">*Env-Dev.proj*, which contains properties that are specific to a developer environment.</span></span>

<span data-ttu-id="ff020-251">現在請注意， *Publish*檔案包含匯[入](https://msdn.microsoft.com/library/92x05xfs.aspx)元素，緊接在開啟**專案**標記的正下方。</span><span class="sxs-lookup"><span data-stu-id="ff020-251">Now notice that the *Publish.proj* file includes an [Import](https://msdn.microsoft.com/library/92x05xfs.aspx) element, immediately beneath the opening **Project** tag.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample16.xml)]

<span data-ttu-id="ff020-252">**Import**元素可用來將另一個 msbuild 專案檔的內容匯入到目前的 msbuild 專案檔中。</span><span class="sxs-lookup"><span data-stu-id="ff020-252">The **Import** element is used to import the contents of another MSBuild project file into the current MSBuild project file.</span></span> <span data-ttu-id="ff020-253">在此情況下， **TargetEnvPropsFile**參數會提供您想要匯入之專案檔的檔案名。</span><span class="sxs-lookup"><span data-stu-id="ff020-253">In this case, the **TargetEnvPropsFile** parameter provides the filename of the project file you want to import.</span></span> <span data-ttu-id="ff020-254">當您執行 MSBuild 時，可以提供此參數的值。</span><span class="sxs-lookup"><span data-stu-id="ff020-254">You can provide a value for this parameter when you run MSBuild.</span></span>

[!code-console[Main](understanding-the-project-file/samples/sample17.cmd)]

<span data-ttu-id="ff020-255">這會將這兩個檔案的內容有效率地合併成一個專案檔。</span><span class="sxs-lookup"><span data-stu-id="ff020-255">This effectively merges the contents of the two files into a single project file.</span></span> <span data-ttu-id="ff020-256">使用這種方法，您可以建立一個包含萬用群組建設定的專案檔，以及包含環境特定屬性的多個補充專案檔案。</span><span class="sxs-lookup"><span data-stu-id="ff020-256">Using this approach, you can create one project file containing your universal build configuration and multiple supplementary project files containing environment-specific properties.</span></span> <span data-ttu-id="ff020-257">因此，只要以不同的參數值執行命令，就可以將您的方案部署到不同的環境。</span><span class="sxs-lookup"><span data-stu-id="ff020-257">As a result, simply running a command with a different parameter value lets you deploy your solution to a different environment.</span></span>

![](understanding-the-project-file/_static/image3.png)

<span data-ttu-id="ff020-258">以這種方式分割專案檔是很好的作法。</span><span class="sxs-lookup"><span data-stu-id="ff020-258">Splitting your project files in this way is a good practice to follow.</span></span> <span data-ttu-id="ff020-259">它可讓開發人員藉由執行單一命令來部署至多個環境，同時避免跨多個專案檔重複萬用群組建屬性。</span><span class="sxs-lookup"><span data-stu-id="ff020-259">It allows developers to deploy to multiple environments by running a single command, while avoiding the duplication of universal build properties across multiple project files.</span></span>

> [!NOTE]
> <span data-ttu-id="ff020-260">如需如何為您自己的伺服器環境自訂環境特定專案檔案的指引，請參閱[設定目標環境的部署屬性](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md)。</span><span class="sxs-lookup"><span data-stu-id="ff020-260">For guidance on how to customize the environment-specific project files for your own server environments, see [Configuring Deployment Properties for a Target Environment](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="ff020-261">結論</span><span class="sxs-lookup"><span data-stu-id="ff020-261">Conclusion</span></span>

<span data-ttu-id="ff020-262">本主題提供 MSBuild 專案檔案的一般簡介，並說明如何建立您自己的自訂專案檔來控制組建程式。</span><span class="sxs-lookup"><span data-stu-id="ff020-262">This topic provided a general introduction to MSBuild project files and explained how you can create your own custom project files to control the build process.</span></span> <span data-ttu-id="ff020-263">同時也引進了將專案檔分割成萬用群組建指示和環境特定組建屬性的概念，讓您輕鬆建立專案並將其部署至多個目的地。</span><span class="sxs-lookup"><span data-stu-id="ff020-263">It also introduced the concept of splitting project files into universal build instructions and environment-specific build properties, to make it easy to build and deploy projects to multiple destinations.</span></span>

<span data-ttu-id="ff020-264">下一個主題：[瞭解組建](understanding-the-build-process.md)程式，可讓您更深入瞭解如何使用專案檔來控制組建和部署，方法是逐步執行解決方案的部署，並提供實際的複雜性層級。</span><span class="sxs-lookup"><span data-stu-id="ff020-264">The next topic, [Understanding the Build Process](understanding-the-build-process.md), provides more insight into how you can use project files to control build and deployment by walking you through the deployment of a solution with a realistic level of complexity.</span></span>

## <a name="further-reading"></a><span data-ttu-id="ff020-265">進一步閱讀</span><span class="sxs-lookup"><span data-stu-id="ff020-265">Further Reading</span></span>

<span data-ttu-id="ff020-266">如需更深入的專案檔和 WPP 簡介，請參閱[Microsoft Build Engine 內：使用 MSBuild 和 Team Foundation Build](http://amzn.com/0735645248) By Sayed Ibrahim Hashimi 和 William BARTHOLOMEW，ISBN：978-0-7356-4524-0。</span><span class="sxs-lookup"><span data-stu-id="ff020-266">For a more in-depth introduction to project files and the WPP, see [Inside the Microsoft Build Engine: Using MSBuild and Team Foundation Build](http://amzn.com/0735645248) by Sayed Ibrahim Hashimi and William Bartholomew, ISBN: 978-0-7356-4524-0.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="ff020-267">[上一頁](setting-up-the-contact-manager-solution.md)
> [下一頁](understanding-the-build-process.md)</span><span class="sxs-lookup"><span data-stu-id="ff020-267">[Previous](setting-up-the-contact-manager-solution.md)
[Next](understanding-the-build-process.md)</span></span>
