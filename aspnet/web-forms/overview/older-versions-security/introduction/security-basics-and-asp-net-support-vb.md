---
uid: web-forms/overview/older-versions-security/introduction/security-basics-and-asp-net-support-vb
title: 安全性基本概念和 ASP.NET 支援（VB） |Microsoft Docs
author: rick-anderson
description: 這是一系列教學課程中的第一個教學課程，將探索透過 web 表單驗證訪客的技術，並授權存取參與 。
ms.author: riande
ms.date: 01/13/2008
ms.assetid: ab68a92b-fc81-40a4-a7dc-406625d2c5d4
msc.legacyurl: /web-forms/overview/older-versions-security/introduction/security-basics-and-asp-net-support-vb
msc.type: authoredcontent
ms.openlocfilehash: 99e986013cb5a923ddb150022013e3a75852ce55
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/06/2020
ms.locfileid: "78575338"
---
# <a name="security-basics-and-aspnet-support-vb"></a><span data-ttu-id="c8894-103">安全性基本概念和 ASP.NET 支援 (VB)</span><span class="sxs-lookup"><span data-stu-id="c8894-103">Security Basics and ASP.NET Support (VB)</span></span>

<span data-ttu-id="c8894-104">由[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="c8894-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

[<span data-ttu-id="c8894-105">下載 PDF</span><span class="sxs-lookup"><span data-stu-id="c8894-105">Download PDF</span></span>](https://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/aspnet_tutorial01_Basics_vb.pdf)

> <span data-ttu-id="c8894-106">這是一系列教學課程中的第一個教學課程，將探索透過 web 表單驗證訪客、授權存取特定頁面和功能，以及在 ASP.NET 應用程式中管理使用者帳戶的技術。</span><span class="sxs-lookup"><span data-stu-id="c8894-106">This is the first tutorial in a series of tutorials that will explore techniques for authenticating visitors through a web form, authorizing access to particular pages and functionality, and managing user accounts in an ASP.NET application.</span></span>

## <a name="introduction"></a><span data-ttu-id="c8894-107">簡介</span><span class="sxs-lookup"><span data-stu-id="c8894-107">Introduction</span></span>

<span data-ttu-id="c8894-108">什麼是論壇、電子商務網站、線上電子郵件網站、入口網站和社交網站全都有共同的功能？</span><span class="sxs-lookup"><span data-stu-id="c8894-108">What is the one thing forums, eCommerce sites, online email websites, portal websites, and social network sites all have in common?</span></span> <span data-ttu-id="c8894-109">它們全都提供*使用者帳戶*。</span><span class="sxs-lookup"><span data-stu-id="c8894-109">They all offer *user accounts*.</span></span> <span data-ttu-id="c8894-110">提供使用者帳戶的網站必須提供許多服務。</span><span class="sxs-lookup"><span data-stu-id="c8894-110">Sites that offer user accounts must provide a number of services.</span></span> <span data-ttu-id="c8894-111">最少的新訪客必須能夠建立帳戶並傳回訪客，才能登入。</span><span class="sxs-lookup"><span data-stu-id="c8894-111">At a minimum, new visitors need to be able to create an account and returning visitors must be able to log in.</span></span> <span data-ttu-id="c8894-112">這類 web 應用程式可以根據登入的使用者做出決策：某些頁面或動作可能會限制為僅限登入的使用者，或是特定的使用者子集;其他頁面可能會顯示已登入使用者的特定資訊，或者可能會顯示更多或更少的資訊，視使用者在頁面上的流覽方式而定。</span><span class="sxs-lookup"><span data-stu-id="c8894-112">Such web applications can make decisions based on the logged in user: some pages or actions might be restricted to only logged in users, or to a certain subset of users; other pages might show information specific to the logged in user, or might show more or less information, depending on what user is viewing the page.</span></span>

<span data-ttu-id="c8894-113">這是一系列教學課程中的第一個教學課程，將探索透過 web 表單驗證訪客、授權存取特定頁面和功能，以及在 ASP.NET 應用程式中管理使用者帳戶的技術。</span><span class="sxs-lookup"><span data-stu-id="c8894-113">This is the first tutorial in a series of tutorials that will explore techniques for authenticating visitors through a web form, authorizing access to particular pages and functionality, and managing user accounts in an ASP.NET application.</span></span> <span data-ttu-id="c8894-114">在這些教學課程中，我們將探討如何：</span><span class="sxs-lookup"><span data-stu-id="c8894-114">Over the course of these tutorials we will examine how to:</span></span>

- <span data-ttu-id="c8894-115">識別使用者並將其登入網站</span><span class="sxs-lookup"><span data-stu-id="c8894-115">Identify and log users in to a website</span></span>
- <span data-ttu-id="c8894-116">使用 ASP。用來管理使用者帳戶的網路成員資格架構</span><span class="sxs-lookup"><span data-stu-id="c8894-116">Use ASP.NET's Membership framework to manage user accounts</span></span>
- <span data-ttu-id="c8894-117">建立、更新和刪除使用者帳戶</span><span class="sxs-lookup"><span data-stu-id="c8894-117">Create, update, and delete user accounts</span></span>
- <span data-ttu-id="c8894-118">根據登入的使用者限制存取網頁、目錄或特定功能</span><span class="sxs-lookup"><span data-stu-id="c8894-118">Limit access to a web page, directory, or specific functionality based on the logged in user</span></span>
- <span data-ttu-id="c8894-119">使用 ASP。將使用者帳戶與角色建立關聯的網路角色架構</span><span class="sxs-lookup"><span data-stu-id="c8894-119">Use ASP.NET's Roles framework to associate user accounts with roles</span></span>
- <span data-ttu-id="c8894-120">管理使用者角色</span><span class="sxs-lookup"><span data-stu-id="c8894-120">Manage user roles</span></span>
- <span data-ttu-id="c8894-121">根據已登入使用者的角色，限制存取網頁、目錄或特定功能</span><span class="sxs-lookup"><span data-stu-id="c8894-121">Limit access to a web page, directory, or specific functionality based on the logged in user's role</span></span>
- <span data-ttu-id="c8894-122">自訂和擴充 ASP。NET 的安全性 Web 控制項</span><span class="sxs-lookup"><span data-stu-id="c8894-122">Customize and extend ASP.NET's security Web controls</span></span>

<span data-ttu-id="c8894-123">這些教學課程的目的是要精簡，並提供逐步指示，讓您能以視覺化方式逐步完成整個流程。</span><span class="sxs-lookup"><span data-stu-id="c8894-123">These tutorials are geared to be concise and provide step-by-step instructions with plenty of screen shots to walk you through the process visually.</span></span> <span data-ttu-id="c8894-124">每個教學課程都C#可在和 Visual Basic 版本中取得，並包含下載所使用的完整程式碼。</span><span class="sxs-lookup"><span data-stu-id="c8894-124">Each tutorial is available in C# and Visual Basic versions and includes a download of the complete code used.</span></span> <span data-ttu-id="c8894-125">（第一個教學課程著重于高階觀點的安全性概念，因此不包含任何相關的程式碼）。</span><span class="sxs-lookup"><span data-stu-id="c8894-125">(This first tutorial focuses on security concepts from a high-level viewpoint and therefore does not contain any associated code.)</span></span>

<span data-ttu-id="c8894-126">在本教學課程中，我們將討論重要的安全性概念，以及 ASP.NET 中可用來協助執行表單驗證、授權、使用者帳戶和角色的功能。</span><span class="sxs-lookup"><span data-stu-id="c8894-126">In this tutorial we will discuss important security concepts and what facilities are available in ASP.NET to assist in implementing forms authentication, authorization, user accounts, and roles.</span></span> <span data-ttu-id="c8894-127">現在就開始吧！</span><span class="sxs-lookup"><span data-stu-id="c8894-127">Let's get started!</span></span>

> [!NOTE]
> <span data-ttu-id="c8894-128">安全性是任何應用程式的重要層面，其中涵蓋實體、技術和原則決策，而且需要高程度的規劃和領域知識。</span><span class="sxs-lookup"><span data-stu-id="c8894-128">Security is an important aspect of any application that spans physical, technological, and policy decisions and requires a high degree of planning and domain knowledge.</span></span> <span data-ttu-id="c8894-129">本教學課程系列並非用於開發安全 web 應用程式的指南。</span><span class="sxs-lookup"><span data-stu-id="c8894-129">This tutorial series is not intended as a guide for developing secure web applications.</span></span> <span data-ttu-id="c8894-130">相反地，它特別著重于表單驗證、授權、使用者帳戶和角色。</span><span class="sxs-lookup"><span data-stu-id="c8894-130">Rather, it focuses specifically on forms authentication, authorization, user accounts, and roles.</span></span> <span data-ttu-id="c8894-131">雖然此系列中會討論一些關於這些問題的安全性概念，但有些是未探索。</span><span class="sxs-lookup"><span data-stu-id="c8894-131">While some security concepts revolving around these issues are discussed in this series, others are left unexplored.</span></span>

## <a name="authentication-authorization-user-accounts-and-roles"></a><span data-ttu-id="c8894-132">驗證、授權、使用者帳戶和角色</span><span class="sxs-lookup"><span data-stu-id="c8894-132">Authentication, Authorization, User Accounts, and Roles</span></span>

<span data-ttu-id="c8894-133">「驗證」、「授權」、「使用者帳戶」和「角色」是在此教學課程系列中經常使用的四個詞彙，所以我想要在 web 安全性內容中快速地定義這些詞彙。</span><span class="sxs-lookup"><span data-stu-id="c8894-133">Authentication, authorization, user accounts, and roles are four terms that will be used very often throughout this tutorial series, so I'd like to take a quick moment to define these terms within the context of web security.</span></span> <span data-ttu-id="c8894-134">在用戶端伺服器模型（例如網際網路）中，有許多情況下，伺服器需要識別提出要求的用戶端。</span><span class="sxs-lookup"><span data-stu-id="c8894-134">In a client-server model, such as the Internet, there are many scenarios in which the server needs to identify the client making the request.</span></span> <span data-ttu-id="c8894-135">*驗證*是查明用戶端身分識別的程式。</span><span class="sxs-lookup"><span data-stu-id="c8894-135">*Authentication* is the process of ascertaining the client's identity.</span></span> <span data-ttu-id="c8894-136">已成功識別的用戶端稱為「已*驗證*」。</span><span class="sxs-lookup"><span data-stu-id="c8894-136">A client who has been successfully identified is said to be *authenticated*.</span></span> <span data-ttu-id="c8894-137">無法識別的用戶端稱為未*驗證*或*匿名*。</span><span class="sxs-lookup"><span data-stu-id="c8894-137">An unidentified client is said to be *unauthenticated* or *anonymous*.</span></span>

<span data-ttu-id="c8894-138">安全驗證系統至少需要下列三個 facet 之一：[您知道的專案、您有的東西，或是您](http://www.cs.cornell.edu/Courses/cs513/2005fa/NNLauthPeople.html)的事物。</span><span class="sxs-lookup"><span data-stu-id="c8894-138">Secure authentication systems involve at least one of the following three facets: [something you know, something you have, or something you are](http://www.cs.cornell.edu/Courses/cs513/2005fa/NNLauthPeople.html).</span></span> <span data-ttu-id="c8894-139">大部分的 web 應用程式都依賴用戶端知道的某個專案，例如密碼或 PIN。</span><span class="sxs-lookup"><span data-stu-id="c8894-139">Most web applications rely on something the client knows, such as a password or a PIN.</span></span> <span data-ttu-id="c8894-140">例如，用來識別使用者的使用者名稱和密碼的資訊稱為*認證*。</span><span class="sxs-lookup"><span data-stu-id="c8894-140">The information used to identify a user - her username and password, for example - are referred to as *credentials*.</span></span> <span data-ttu-id="c8894-141">本教學課程系列著重于*表單驗*證，這是一種驗證模型，使用者可以在網頁表單中提供認證，以登入網站。</span><span class="sxs-lookup"><span data-stu-id="c8894-141">This tutorial series focuses on *forms authentication*, which is an authentication model where users log in to the site by providing their credentials in a web page form.</span></span> <span data-ttu-id="c8894-142">在之前，我們都已經歷過這種類型的驗證。</span><span class="sxs-lookup"><span data-stu-id="c8894-142">We have all experienced this type of authentication before.</span></span> <span data-ttu-id="c8894-143">前往任何電子商務網站。</span><span class="sxs-lookup"><span data-stu-id="c8894-143">Go to any eCommerce site.</span></span> <span data-ttu-id="c8894-144">當您準備好要簽出時，系統會要求您登入，方法是在網頁的文字方塊中輸入您的使用者名稱和密碼。</span><span class="sxs-lookup"><span data-stu-id="c8894-144">When you are ready to check out you are asked to log in by entering your username and password into textboxes on a web page.</span></span>

<span data-ttu-id="c8894-145">除了識別用戶端，伺服器可能需要根據提出要求的用戶端，限制可存取的資源或功能。</span><span class="sxs-lookup"><span data-stu-id="c8894-145">In addition to identifying clients, a server may need to limit what resources or functionalities are accessible depending on the client making the request.</span></span> <span data-ttu-id="c8894-146">「授權」（ *Authorization* ）是判斷特定使用者是否有權存取特定資源或功能的程式。</span><span class="sxs-lookup"><span data-stu-id="c8894-146">*Authorization* is the process of determining whether a particular user has the authority to access a specific resource or functionality.</span></span>

<span data-ttu-id="c8894-147">*使用者帳戶*是保存特定使用者相關資訊的存放區。</span><span class="sxs-lookup"><span data-stu-id="c8894-147">A *user account* is a store for persisting information about a particular user.</span></span> <span data-ttu-id="c8894-148">使用者帳戶必須至少包含可唯一識別使用者的資訊，例如使用者的登入名稱和密碼。</span><span class="sxs-lookup"><span data-stu-id="c8894-148">User accounts must minimally include information that uniquely identifies the user, such as the user's login name and password.</span></span> <span data-ttu-id="c8894-149">除了這項基本資訊之外，使用者帳戶可能還包括：使用者的電子郵件地址、建立帳戶的日期和時間;上次登入的日期和時間;名字和姓氏;電話號碼;和郵寄地址。</span><span class="sxs-lookup"><span data-stu-id="c8894-149">Along with this essential information, user accounts may include things like: the user's email address; the date and time the account was created; the date and time they last logged in; first and last name; phone number; and mailing address.</span></span> <span data-ttu-id="c8894-150">使用表單驗證時，使用者帳戶資訊通常會儲存在關係資料庫中，例如 Microsoft SQL Server。</span><span class="sxs-lookup"><span data-stu-id="c8894-150">When using forms authentication, user account information is typically stored in a relational database like Microsoft SQL Server.</span></span>

<span data-ttu-id="c8894-151">支援使用者帳戶的 Web 應用程式可以選擇性地將使用者分組為*角色*。</span><span class="sxs-lookup"><span data-stu-id="c8894-151">Web applications that support user accounts may optionally group users into *roles*.</span></span> <span data-ttu-id="c8894-152">角色只是套用至使用者的標籤，並提供定義授權規則和頁面層級功能的抽象概念。</span><span class="sxs-lookup"><span data-stu-id="c8894-152">A role is simply a label that is applied to a user and provides an abstraction for defining authorization rules and page-level functionality.</span></span> <span data-ttu-id="c8894-153">例如，網站可能會包含系統管理員角色，其授權規則會禁止任何人（但系統管理員）存取一組特定的網頁。</span><span class="sxs-lookup"><span data-stu-id="c8894-153">For example, a website might include an Administrator role with authorization rules that prohibit anyone but an Administrator to access a particular set of web pages.</span></span> <span data-ttu-id="c8894-154">此外，所有使用者（包括非系統管理員）都可以存取的各種頁面，可能會顯示額外的資料，或在系統管理員角色的使用者造訪時提供額外的功能。</span><span class="sxs-lookup"><span data-stu-id="c8894-154">Moreover, a variety of pages that are accessible to all users (including non-Administrators) might display additional data or offer extra functionality when visited by users in the Administrators role.</span></span> <span data-ttu-id="c8894-155">藉由使用角色，我們可以依角色逐一定義這些授權規則，而不是以使用者為依據。</span><span class="sxs-lookup"><span data-stu-id="c8894-155">Using roles, we can define these authorization rules on a role-by-role basis rather than user-by-user.</span></span>

## <a name="authenticating-users-in-an-aspnet-application"></a><span data-ttu-id="c8894-156">在 ASP.NET 應用程式中驗證使用者</span><span class="sxs-lookup"><span data-stu-id="c8894-156">Authenticating Users in an ASP.NET Application</span></span>

<span data-ttu-id="c8894-157">當使用者在瀏覽器的位址視窗中輸入 URL 或按一下連結時，瀏覽器會針對指定的內容，對 web 伺服器進行[超文字傳輸通訊協定（HTTP）](http://en.wikipedia.org/wiki/HTTP)要求，其為 ASP.NET 網頁、影像、JavaScript 檔案或任何其他類型的內容。</span><span class="sxs-lookup"><span data-stu-id="c8894-157">When a user enters a URL into their browser's address window or clicks on a link, the browser makes a [Hypertext Transfer Protocol (HTTP)](http://en.wikipedia.org/wiki/HTTP) request to the web server for the specified content, be it an ASP.NET page, an image, a JavaScript file, or any other type of content.</span></span> <span data-ttu-id="c8894-158">Web 服務器負責傳回要求的內容。</span><span class="sxs-lookup"><span data-stu-id="c8894-158">The web server is tasked with returning the requested content.</span></span> <span data-ttu-id="c8894-159">在這種情況下，它必須判斷有關要求的一些事項，包括提出要求的人員，以及身分識別是否獲得授權可取得要求的內容。</span><span class="sxs-lookup"><span data-stu-id="c8894-159">In doing so, it must determine a number of things about the request, including who made the request and whether the identity is authorized to retrieve the requested content.</span></span>

<span data-ttu-id="c8894-160">根據預設，瀏覽器會傳送缺少任何類型識別資訊的 HTTP 要求。</span><span class="sxs-lookup"><span data-stu-id="c8894-160">By default, browsers send HTTP requests that lack any sort of identification information.</span></span> <span data-ttu-id="c8894-161">但是，如果瀏覽器確實包含驗證資訊，則 web 伺服器會啟動驗證工作流程，這會嘗試識別提出要求的用戶端。</span><span class="sxs-lookup"><span data-stu-id="c8894-161">But if the browser does include authentication information then the web server starts the authentication workflow, which attempts to identify the client making the request.</span></span> <span data-ttu-id="c8894-162">驗證工作流程的步驟取決於 web 應用程式所使用的驗證類型。</span><span class="sxs-lookup"><span data-stu-id="c8894-162">The steps of the authentication workflow depend on the type of authentication being used by the web application.</span></span> <span data-ttu-id="c8894-163">ASP.NET 支援三種類型的驗證： Windows、Passport 和 forms。</span><span class="sxs-lookup"><span data-stu-id="c8894-163">ASP.NET supports three types of authentication: Windows, Passport, and forms.</span></span> <span data-ttu-id="c8894-164">本教學課程系列著重于表單驗證，但讓我們花一點時間比較和對比 Windows 驗證使用者存放區和工作流程。</span><span class="sxs-lookup"><span data-stu-id="c8894-164">This tutorial series focuses on forms authentication, but let's take a minute to compare and contrast Windows authentication user stores and workflow.</span></span>

### <a name="authentication-via-windows-authentication"></a><span data-ttu-id="c8894-165">透過 Windows 驗證進行驗證</span><span class="sxs-lookup"><span data-stu-id="c8894-165">Authentication via Windows Authentication</span></span>

<span data-ttu-id="c8894-166">Windows 驗證工作流程會使用下列其中一種驗證技術：</span><span class="sxs-lookup"><span data-stu-id="c8894-166">The Windows authentication workflow uses one of the following authentication techniques:</span></span>

- <span data-ttu-id="c8894-167">基本驗證</span><span class="sxs-lookup"><span data-stu-id="c8894-167">Basic authentication</span></span>
- <span data-ttu-id="c8894-168">摘要式驗證</span><span class="sxs-lookup"><span data-stu-id="c8894-168">Digest authentication</span></span>
- <span data-ttu-id="c8894-169">Windows 整合式驗證</span><span class="sxs-lookup"><span data-stu-id="c8894-169">Windows Integrated Authentication</span></span>

<span data-ttu-id="c8894-170">這三種技術的工作大致相同：當未經授權的匿名要求抵達時，web 伺服器會傳回 HTTP 回應，表示需要授權才能繼續。</span><span class="sxs-lookup"><span data-stu-id="c8894-170">All three techniques work in roughly the same way: when an unauthorized, anonymous request arrives, the web server sends back an HTTP response that indicates that authorization is required to continue.</span></span> <span data-ttu-id="c8894-171">然後，瀏覽器會顯示一個強制回應對話方塊，提示使用者輸入其使用者名稱和密碼（請參閱 [圖 1]）。</span><span class="sxs-lookup"><span data-stu-id="c8894-171">The browser then displays a modal dialog box that prompts the user for their username and password (see Figure 1).</span></span> <span data-ttu-id="c8894-172">此資訊接著會透過 HTTP 標頭傳送回 web 伺服器。</span><span class="sxs-lookup"><span data-stu-id="c8894-172">This information is then sent back to the web server via an HTTP header.</span></span>

![強制回應對話方塊會提示使用者輸入其認證](security-basics-and-asp-net-support-vb/_static/image1.png)

<span data-ttu-id="c8894-174">**圖 1**：強制回應對話方塊會提示使用者輸入其認證</span><span class="sxs-lookup"><span data-stu-id="c8894-174">**Figure 1**: A Modal Dialog Box Prompts the User for His Credentials</span></span>

<span data-ttu-id="c8894-175">提供的認證會針對網頁伺服器的 Windows 使用者存放區進行驗證。</span><span class="sxs-lookup"><span data-stu-id="c8894-175">The supplied credentials are validated against the web server's Windows User Store.</span></span> <span data-ttu-id="c8894-176">這表示您的 web 應用程式中每個已驗證的使用者，在您的組織中都必須有 Windows 帳戶。</span><span class="sxs-lookup"><span data-stu-id="c8894-176">This means that each authenticated user in your web application must have a Windows account in your organization.</span></span> <span data-ttu-id="c8894-177">這在內部網路案例中很常見。</span><span class="sxs-lookup"><span data-stu-id="c8894-177">This is commonplace in intranet scenarios.</span></span> <span data-ttu-id="c8894-178">事實上，在內部網路設定中使用「Windows 整合式驗證」時，瀏覽器會自動為網頁伺服器提供用來登入網路的認證，藉此隱藏 [圖 1] 所示的對話方塊。</span><span class="sxs-lookup"><span data-stu-id="c8894-178">In fact, when using Windows Integrated Authentication in an intranet setting, the browser automatically provides the web server with the credentials used to log on to the network, thereby suppressing the dialog box shown in Figure 1.</span></span> <span data-ttu-id="c8894-179">雖然 Windows 驗證適用于內部網路應用程式，但通常會不可行網際網路應用程式，因為您不想要為每個在您網站上註冊的使用者建立 Windows 帳戶。</span><span class="sxs-lookup"><span data-stu-id="c8894-179">While Windows authentication is great for intranet applications, it is usually unfeasible for Internet applications since you do not want to create Windows accounts for each and every user who signs up at your site.</span></span>

### <a name="authentication-via-forms-authentication"></a><span data-ttu-id="c8894-180">透過表單驗證驗證</span><span class="sxs-lookup"><span data-stu-id="c8894-180">Authentication via Forms Authentication</span></span>

<span data-ttu-id="c8894-181">另一方面，表單驗證是網際網路 web 應用程式的理想選擇。</span><span class="sxs-lookup"><span data-stu-id="c8894-181">Forms authentication, on the other hand, is ideal for Internet web applications.</span></span> <span data-ttu-id="c8894-182">回想一下，表單驗證會藉由提示使用者透過 web 表單輸入其認證來識別使用者。</span><span class="sxs-lookup"><span data-stu-id="c8894-182">Recall that forms authentication identifies the user by prompting them to enter their credentials through a web form.</span></span> <span data-ttu-id="c8894-183">因此，當使用者嘗試存取未經授權的資源時，系統會自動將他們重新導向至登入頁面，讓他們可以在其中輸入其認證。</span><span class="sxs-lookup"><span data-stu-id="c8894-183">Consequently, when a user attempts to access an unauthorized resource, they are automatically redirected to the login page where they can enter their credentials.</span></span> <span data-ttu-id="c8894-184">提交的認證接著會針對自訂使用者存放區（通常是資料庫）進行驗證。</span><span class="sxs-lookup"><span data-stu-id="c8894-184">The submitted credentials are then validated against a custom user store - usually a database.</span></span>

<span data-ttu-id="c8894-185">確認提交的認證之後，就會為使用者建立*表單驗證票證*。</span><span class="sxs-lookup"><span data-stu-id="c8894-185">After verifying the submitted credentials, a *forms authentication ticket* is created for the user.</span></span> <span data-ttu-id="c8894-186">此票證表示使用者已通過驗證，並包含識別資訊，例如使用者名稱。</span><span class="sxs-lookup"><span data-stu-id="c8894-186">This ticket indicates that the user has been authenticated and includes identifying information, such as the username.</span></span> <span data-ttu-id="c8894-187">表單驗證票證（通常）會在用戶端電腦上儲存為 cookie。</span><span class="sxs-lookup"><span data-stu-id="c8894-187">The forms authentication ticket is (typically) stored as a cookie on the client computer.</span></span> <span data-ttu-id="c8894-188">因此，後續造訪網站時，會在 HTTP 要求中包含表單驗證票證，藉此讓 web 應用程式在使用者登入後識別該使用者。</span><span class="sxs-lookup"><span data-stu-id="c8894-188">Therefore, subsequent visits to the website include the forms authentication ticket in the HTTP request, thereby enabling the web application to identify the user once they have logged in.</span></span>

<span data-ttu-id="c8894-189">[圖 2] 說明來自高層級有利點的表單驗證工作流程。</span><span class="sxs-lookup"><span data-stu-id="c8894-189">Figure 2 illustrates the forms authentication workflow from a high-level vantage point.</span></span> <span data-ttu-id="c8894-190">請注意 ASP.NET 中的驗證和授權片段如何作為兩個不同的實體。</span><span class="sxs-lookup"><span data-stu-id="c8894-190">Notice how the authentication and authorization pieces in ASP.NET act as two separate entities.</span></span> <span data-ttu-id="c8894-191">表單驗證系統會識別使用者（或其為匿名的報告）。</span><span class="sxs-lookup"><span data-stu-id="c8894-191">The forms authentication system identifies the user (or reports that they are anonymous).</span></span> <span data-ttu-id="c8894-192">授權系統可判斷使用者是否有權存取要求的資源。</span><span class="sxs-lookup"><span data-stu-id="c8894-192">The authorization system is what determines whether the user has access to the requested resource.</span></span> <span data-ttu-id="c8894-193">如果使用者未經授權（如 [圖 2] 嘗試匿名流覽 ProtectedPage），授權系統會報告使用者遭到拒絕，導致表單驗證系統自動將使用者重新導向至登入頁面。</span><span class="sxs-lookup"><span data-stu-id="c8894-193">If the user is unauthorized (as they are in Figure 2 when attempting to anonymously visit ProtectedPage.aspx), the authorization system reports that the user is denied, causing the forms authentication system to automatically redirect the user to the login page.</span></span>

<span data-ttu-id="c8894-194">使用者成功登入之後，後續的 HTTP 要求會包含表單驗證票證。</span><span class="sxs-lookup"><span data-stu-id="c8894-194">Once the user has successfully logged in, subsequent HTTP requests include the forms authentication ticket.</span></span> <span data-ttu-id="c8894-195">表單驗證系統只會識別使用者-它是用來判斷使用者是否可以存取所要求資源的授權系統。</span><span class="sxs-lookup"><span data-stu-id="c8894-195">The forms authentication system merely identifies the user - it is the authorization system that determines whether the user can access the requested resource.</span></span>

![表單驗證工作流程](security-basics-and-asp-net-support-vb/_static/image2.png)

<span data-ttu-id="c8894-197">**圖 2**：表單驗證工作流程</span><span class="sxs-lookup"><span data-stu-id="c8894-197">**Figure 2**: The Forms Authentication Workflow</span></span>

<span data-ttu-id="c8894-198">在接下來的兩個教學課程中，我們將深入探討「表單驗證」的詳細資訊，[概述表單驗](an-overview-of-forms-authentication-vb.md)證和[表單驗證設定和 Advanced 主題](forms-authentication-configuration-and-advanced-topics-vb.md)。</span><span class="sxs-lookup"><span data-stu-id="c8894-198">We will dig into forms authentication in much greater detail in the next two tutorials,[An Overview of Forms Authentication](an-overview-of-forms-authentication-vb.md) and [Forms Authentication Configuration and Advanced Topics](forms-authentication-configuration-and-advanced-topics-vb.md).</span></span> <span data-ttu-id="c8894-199">深入瞭解 ASP。NET 的驗證選項，請參閱[ASP.NET authentication](https://msdn.microsoft.com/library/eeyk640h.aspx)。</span><span class="sxs-lookup"><span data-stu-id="c8894-199">For more on ASP.NET's authentication options, see [ASP.NET Authentication](https://msdn.microsoft.com/library/eeyk640h.aspx).</span></span>

## <a name="limiting-access-to-web-pages-directories-and-page-functionality"></a><span data-ttu-id="c8894-200">限制網頁、目錄和頁面功能的存取</span><span class="sxs-lookup"><span data-stu-id="c8894-200">Limiting Access to Web Pages, Directories, and Page Functionality</span></span>

<span data-ttu-id="c8894-201">ASP.NET 包含兩種判斷特定使用者是否有權存取特定檔案或目錄的方式：</span><span class="sxs-lookup"><span data-stu-id="c8894-201">ASP.NET includes two ways to determine whether a particular user has authority to access a specific file or directory:</span></span>

- <span data-ttu-id="c8894-202">檔案**授權**-由於 ASP.NET 網頁和 web 服務會實作為位於 web 伺服器檔案系統上的檔案，因此可以透過存取控制清單（acl）來指定這些檔案的存取權。</span><span class="sxs-lookup"><span data-stu-id="c8894-202">**File authorization** - since ASP.NET pages and web services are implemented as files that reside on the web server's file system, access to these files can be specified through Access Control Lists (ACLs).</span></span> <span data-ttu-id="c8894-203">檔案授權最常用於 Windows 驗證，因為 Acl 是適用于 Windows 帳戶的許可權。</span><span class="sxs-lookup"><span data-stu-id="c8894-203">File authorization is most commonly used with Windows authentication because ACLs are permissions that apply to Windows accounts.</span></span> <span data-ttu-id="c8894-204">使用表單驗證時，不論造訪網站的使用者為何，所有作業系統和檔案系統層級的要求都會由相同的 Windows 帳戶執行。</span><span class="sxs-lookup"><span data-stu-id="c8894-204">When using forms authentication, all operating system- and file system-level requests are executed by the same Windows account, regardless of the user visiting the site.</span></span>
- <span data-ttu-id="c8894-205">**Url 授權**-使用 url 授權，網頁開發人員會在 web.config 中指定授權規則。這些授權規則會指定允許哪些使用者或角色存取，或拒絕其存取應用程式中的特定頁面或目錄。</span><span class="sxs-lookup"><span data-stu-id="c8894-205">**URL authorization**- with URL authorization, the page developer specifies authorization rules in Web.config. These authorization rules specify what users or roles are allowed to access or are denied from accessing certain pages or directories in the application.</span></span>

<span data-ttu-id="c8894-206">檔案授權和 URL 授權會定義用來存取特定 ASP.NET 網頁或特定目錄中所有 ASP.NET 網頁的授權規則。</span><span class="sxs-lookup"><span data-stu-id="c8894-206">File authorization and URL authorization define authorization rules for accessing a particular ASP.NET page or for all ASP.NET pages in a particular directory.</span></span> <span data-ttu-id="c8894-207">我們可以使用這些技巧來指示 ASP.NET 拒絕特定使用者對特定頁面的要求，或允許存取一組使用者，並拒絕其他人存取。</span><span class="sxs-lookup"><span data-stu-id="c8894-207">Using these techniques we can instruct ASP.NET to deny requests to a particular page for a particular user, or allow access to a set of users and deny access to everyone else.</span></span> <span data-ttu-id="c8894-208">那麼，所有使用者都可以存取該頁面的情況，但是網頁的功能取決於使用者的情況呢？</span><span class="sxs-lookup"><span data-stu-id="c8894-208">What about scenarios where all of the users can access the page, but the page's functionality depends on the user?</span></span> <span data-ttu-id="c8894-209">例如，許多支援使用者帳戶的網站，都有頁面顯示已驗證使用者的不同內容或資料，而不是匿名使用者。</span><span class="sxs-lookup"><span data-stu-id="c8894-209">For example, many sites that support user accounts have pages that display different content or data for authenticated users versus anonymous users.</span></span> <span data-ttu-id="c8894-210">匿名使用者可能會看到用來登入網站的連結，而已驗證的使用者會看到像是「歡迎回來 *」的訊息，以及登出*的連結。另一個範例：當您在拍賣網站上觀看專案時，您會看到不同的資訊，取決於您是 bidder 或拍賣專案的人。</span><span class="sxs-lookup"><span data-stu-id="c8894-210">An anonymous user might see a link to log in to the site, whereas an authenticated user would instead see a message like, Welcome back, *Username* along with a link to log out. Another example: when viewing an item at an auction site you see different information depending on whether you are a bidder or the one auctioning the item.</span></span>

<span data-ttu-id="c8894-211">這類頁面層級的調整可以透過宣告方式或以程式設計方式完成。</span><span class="sxs-lookup"><span data-stu-id="c8894-211">Such page-level adjustments can be accomplished declaratively or programmatically.</span></span> <span data-ttu-id="c8894-212">若要顯示與已驗證使用者不同的匿名內容，只要將[LoginView 控制項](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginview.aspx)拖曳到頁面上，並在其 AnonymousTemplate 和 LoggedInTemplate 範本中輸入適當的內容即可。</span><span class="sxs-lookup"><span data-stu-id="c8894-212">To show different content for anonymous than authenticated users, simply drag a [LoginView control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginview.aspx) onto your page and enter the appropriate content into its AnonymousTemplate and LoggedInTemplate templates.</span></span> <span data-ttu-id="c8894-213">或者，您可以透過程式設計方式判斷目前的要求是否已驗證、使用者是誰，以及它們屬於哪些角色（如果有的話）。</span><span class="sxs-lookup"><span data-stu-id="c8894-213">Alternatively, you can programmatically determine whether the current request is authenticated, who the user is, and what roles they belong to (if any).</span></span> <span data-ttu-id="c8894-214">您可以使用這項資訊，在頁面上的方格或面板中顯示或隱藏資料行。</span><span class="sxs-lookup"><span data-stu-id="c8894-214">You can use this information to then show or hide columns in a grid or Panels on the page.</span></span>

<span data-ttu-id="c8894-215">此系列包含三個著重于授權的教學課程。</span><span class="sxs-lookup"><span data-stu-id="c8894-215">This series includes three tutorials that focus on authorization.</span></span> <span data-ttu-id="c8894-216">以***使用者為基礎的授權***會檢查如何限制特定使用者帳戶對目錄中頁面或頁面的存取權;以***角色為基礎的授權***會查看在角色層級提供授權規則;最後，***根據目前登入的使用者***教學課程來顯示內容，會根據造訪頁面的使用者，探索修改特定頁面的內容和功能。</span><span class="sxs-lookup"><span data-stu-id="c8894-216">***User-Based Authorization***examines how to limit access to a page or pages in a directory for specific user accounts; ***Role-Based Authorization*** looks at supplying authorization rules at the role level; lastly, the ***Displaying Content Based on the Currently Logged In User*** tutorial explores modifying a particular page's content and functionality based on the user visiting the page.</span></span> <span data-ttu-id="c8894-217">深入瞭解 ASP。NET 的授權選項，請參閱[ASP.NET 授權](https://msdn.microsoft.com/library/wce3kxhd.aspx)。</span><span class="sxs-lookup"><span data-stu-id="c8894-217">For more on ASP.NET's authorization options, see [ASP.NET Authorization](https://msdn.microsoft.com/library/wce3kxhd.aspx).</span></span>

## <a name="user-accounts-and-roles"></a><span data-ttu-id="c8894-218">使用者帳戶和角色</span><span class="sxs-lookup"><span data-stu-id="c8894-218">User Accounts and Roles</span></span>

<span data-ttu-id="c8894-219">ASP.NET 的表單驗證提供了一種基礎結構，可讓使用者登入網站，並在頁面流覽時記住其已驗證的狀態。</span><span class="sxs-lookup"><span data-stu-id="c8894-219">ASP.NET's forms authentication provides an infrastructure for users to log in to a site and have their authenticated state remembered across page visits.</span></span> <span data-ttu-id="c8894-220">和 URL 授權提供了一種架構，可限制對 ASP.NET 應用程式中特定檔案或資料夾的存取。</span><span class="sxs-lookup"><span data-stu-id="c8894-220">And URL authorization offers a framework for limiting access to specific files or folders in an ASP.NET application.</span></span> <span data-ttu-id="c8894-221">不過，這兩種功能都不提供儲存使用者帳戶資訊或管理角色的方法。</span><span class="sxs-lookup"><span data-stu-id="c8894-221">Neither feature, however, supplies a means for storing user account information or managing roles.</span></span>

<span data-ttu-id="c8894-222">在 ASP.NET 2.0 之前，開發人員會負責建立自己的使用者和角色存放區。</span><span class="sxs-lookup"><span data-stu-id="c8894-222">Prior to ASP.NET 2.0, developers were responsible for creating their own user and role stores.</span></span> <span data-ttu-id="c8894-223">它們也是在設計使用者介面的攔截程式，並撰寫程式碼來進行重要的使用者帳戶相關頁面，例如登入頁面和建立新帳戶的頁面，還有其他專案。</span><span class="sxs-lookup"><span data-stu-id="c8894-223">They were also on the hook for designing the user interfaces and writing the code for essential user account-related pages like the login page and the page to create a new account, among others.</span></span> <span data-ttu-id="c8894-224">如果 ASP.NET 中沒有任何內建的使用者帳戶架構，則每位開發人員都必須負責自己的問題，例如，如何? 儲存密碼或其他機密資訊？那麼，我應該對密碼長度和強度施加哪些指導方針？</span><span class="sxs-lookup"><span data-stu-id="c8894-224">Without any built-in user account framework in ASP.NET, each developer implementing user accounts had to arrive at his own design decisions on questions like, How do I store passwords or other sensitive information? and What guidelines should I impose regarding password length and strength?</span></span>

<span data-ttu-id="c8894-225">現在，在 ASP.NET 應用程式中執行使用者帳戶，會因為*成員資格架構*和內建的登入 Web 控制項而變得更簡單。</span><span class="sxs-lookup"><span data-stu-id="c8894-225">Today, implementing user accounts in an ASP.NET application is much simpler thanks to the *Membership framework* and the built-in Login Web controls.</span></span> <span data-ttu-id="c8894-226">成員資格架構是[system.web. Security 命名空間](https://msdn.microsoft.com/library/system.web.security.aspx)中的少數類別，可提供執行重要使用者帳戶相關工作的功能。</span><span class="sxs-lookup"><span data-stu-id="c8894-226">The Membership framework is a handful of classes in the [System.Web.Security namespace](https://msdn.microsoft.com/library/system.web.security.aspx) that provide functionality for performing essential user account-related tasks.</span></span> <span data-ttu-id="c8894-227">成員資格架構中的主要類別是[成員資格類別](https://msdn.microsoft.com/library/system.web.security.membership.aspx)，其具有如下的方法：</span><span class="sxs-lookup"><span data-stu-id="c8894-227">The key class in the Membership framework is the [Membership class](https://msdn.microsoft.com/library/system.web.security.membership.aspx), which has methods like:</span></span>

- <span data-ttu-id="c8894-228">CreateUser</span><span class="sxs-lookup"><span data-stu-id="c8894-228">CreateUser</span></span>
- <span data-ttu-id="c8894-229">DeleteUser</span><span class="sxs-lookup"><span data-stu-id="c8894-229">DeleteUser</span></span>
- <span data-ttu-id="c8894-230">GetAllUsers</span><span class="sxs-lookup"><span data-stu-id="c8894-230">GetAllUsers</span></span>
- <span data-ttu-id="c8894-231">GetUser</span><span class="sxs-lookup"><span data-stu-id="c8894-231">GetUser</span></span>
- <span data-ttu-id="c8894-232">UpdateUser</span><span class="sxs-lookup"><span data-stu-id="c8894-232">UpdateUser</span></span>
- <span data-ttu-id="c8894-233">ValidateUser</span><span class="sxs-lookup"><span data-stu-id="c8894-233">ValidateUser</span></span>

<span data-ttu-id="c8894-234">成員資格架構使用[提供者模型](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx)，其可將成員資格架構的 API 與其執行方式完全分開。</span><span class="sxs-lookup"><span data-stu-id="c8894-234">The Membership framework uses the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), which cleanly separates the Membership framework's API from its implementation.</span></span> <span data-ttu-id="c8894-235">這可讓開發人員使用通用的 API，但可讓他們使用符合其應用程式自訂需求的執行方式。</span><span class="sxs-lookup"><span data-stu-id="c8894-235">This enables developers to use a common API, but empowers them to use an implementation that meets their application's custom needs.</span></span> <span data-ttu-id="c8894-236">簡單地說，成員資格類別會定義架構的基本功能（方法、屬性和事件），但不會實際提供任何的執行詳細資料。</span><span class="sxs-lookup"><span data-stu-id="c8894-236">In short, the Membership class defines the essential functionality of the framework (the methods, properties, and events), but does not actually supply any implementation details.</span></span> <span data-ttu-id="c8894-237">相反地，成員資格類別的方法會叫用已設定的提供者，這就是執行實際工作的方式。</span><span class="sxs-lookup"><span data-stu-id="c8894-237">Instead, the methods of the Membership class invoke the configured provider, which is what performs the actual work.</span></span> <span data-ttu-id="c8894-238">例如，當叫用成員資格類別的 CreateUser 方法時，成員資格類別並不知道使用者存放區的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="c8894-238">For example, when the Membership class's CreateUser method is invoked, the Membership class doesn't know the details of the user store.</span></span> <span data-ttu-id="c8894-239">它不知道使用者是在資料庫中，或是在 XML 檔案或其他存放區中進行維護。</span><span class="sxs-lookup"><span data-stu-id="c8894-239">It doesn't know if users are being maintained in a database or in an XML file or in some other store.</span></span> <span data-ttu-id="c8894-240">成員資格類別會檢查 web 應用程式的設定，以判斷要將呼叫委派給哪個提供者，而該提供者類別負責在適當的使用者存放區中實際建立新的使用者帳戶。</span><span class="sxs-lookup"><span data-stu-id="c8894-240">The Membership class examines the web application's configuration to determine what provider to delegate the call to, and that provider class is responsible for actually creating the new user account in the appropriate user store.</span></span> <span data-ttu-id="c8894-241">這項互動如 [圖 3] 所示。</span><span class="sxs-lookup"><span data-stu-id="c8894-241">This interaction is illustrated in Figure 3.</span></span>

<span data-ttu-id="c8894-242">Microsoft 在 .NET Framework 中送出兩個成員資格提供者類別：</span><span class="sxs-lookup"><span data-stu-id="c8894-242">Microsoft ships two Membership provider classes in the .NET Framework:</span></span>

- <span data-ttu-id="c8894-243">[System.web.security.activedirectorymembershipprovider](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) -在 Active Directory 和 Active Directory 應用程式模式（ADAM）伺服器中執行成員資格 API。</span><span class="sxs-lookup"><span data-stu-id="c8894-243">[ActiveDirectoryMembershipProvider](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) - implements the Membership API in Active Directory and Active Directory Application Mode (ADAM) servers.</span></span>
- <span data-ttu-id="c8894-244">[SqlMembershipProvider](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx) -在 SQL Server 資料庫中執行成員資格 API。</span><span class="sxs-lookup"><span data-stu-id="c8894-244">[SqlMembershipProvider](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx) - implements the Membership API in a SQL Server database.</span></span>

<span data-ttu-id="c8894-245">本教學課程系列僅著重于 SqlMembershipProvider。</span><span class="sxs-lookup"><span data-stu-id="c8894-245">This tutorial series focuses exclusively on the SqlMembershipProvider.</span></span>

<span data-ttu-id="c8894-246">[![提供者模型可讓不同的實現順暢地插入架構中](security-basics-and-asp-net-support-vb/_static/image4.png)](security-basics-and-asp-net-support-vb/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="c8894-246">[![The Provider Model Enables Different Implementations to be Seamlessly Plugged Into the Framework](security-basics-and-asp-net-support-vb/_static/image4.png)](security-basics-and-asp-net-support-vb/_static/image3.png)</span></span>

<span data-ttu-id="c8894-247">**圖 03**：提供者模型可讓不同的執行順暢地插入架構中（[按一下以觀看完整大小的影像](security-basics-and-asp-net-support-vb/_static/image5.png)）</span><span class="sxs-lookup"><span data-stu-id="c8894-247">**Figure 03**: The Provider Model Enables Different Implementations to be Seamlessly Plugged Into the Framework ([Click to view full-size image](security-basics-and-asp-net-support-vb/_static/image5.png))</span></span>

<span data-ttu-id="c8894-248">提供者模型的優點是可以由 Microsoft、協力廠商或個別開發人員開發，並順暢地插入成員資格架構。</span><span class="sxs-lookup"><span data-stu-id="c8894-248">The benefit of the provider model is that alternative implementations can be developed by Microsoft, third-party vendors, or individual developers and seamlessly plugged into the Membership framework.</span></span> <span data-ttu-id="c8894-249">例如，Microsoft 已發行[Microsoft Access 資料庫的成員資格提供者](https://download.microsoft.com/download/5/5/b/55bc291f-4316-4fd7-9269-dbf9edbaada8/sampleaccessproviders.vsi)。</span><span class="sxs-lookup"><span data-stu-id="c8894-249">For example, Microsoft has released [a Membership provider for Microsoft Access databases](https://download.microsoft.com/download/5/5/b/55bc291f-4316-4fd7-9269-dbf9edbaada8/sampleaccessproviders.vsi).</span></span> <span data-ttu-id="c8894-250">如需成員資格提供者的詳細資訊，請參閱[提供者工具](https://msdn.microsoft.com/asp.net/aa336558.aspx)組，其中包括成員資格提供者的逐步解說、範例自訂提供者、提供者模型上超過100頁的檔，以及內建成員資格提供者（亦即 System.web.security.activedirectorymembershipprovider 和 SqlMembershipProvider）的完整原始程式碼。</span><span class="sxs-lookup"><span data-stu-id="c8894-250">For more information on the Membership providers, refer to the [Provider Toolkit](https://msdn.microsoft.com/asp.net/aa336558.aspx), which includes a walkthrough of the Membership providers, sample custom providers, over 100 pages of documentation on the provider model, and the complete source code for the built-in Membership providers (namely, ActiveDirectoryMembershipProvider and SqlMembershipProvider).</span></span>

<span data-ttu-id="c8894-251">ASP.NET 2.0 也引進了 Roles 架構。</span><span class="sxs-lookup"><span data-stu-id="c8894-251">ASP.NET 2.0 also introduced the Roles framework.</span></span> <span data-ttu-id="c8894-252">如同成員資格架構，角色架構是建立在提供者模型的上方。</span><span class="sxs-lookup"><span data-stu-id="c8894-252">Like the Membership framework, the Roles framework is built atop the provider model.</span></span> <span data-ttu-id="c8894-253">其 API 是透過[Roles 類別](https://msdn.microsoft.com/library/system.web.security.roles.aspx)公開，而 .NET Framework 隨附三個提供者類別：</span><span class="sxs-lookup"><span data-stu-id="c8894-253">Its API is exposed via the [Roles class](https://msdn.microsoft.com/library/system.web.security.roles.aspx) and the .NET Framework ships with three provider classes:</span></span>

- <span data-ttu-id="c8894-254">[AuthorizationStoreRoleProvider](https://msdn.microsoft.com/library/system.web.security.authorizationstoreroleprovider.aspx) -管理授權管理員原則存放區中的角色資訊，例如 ACTIVE DIRECTORY 或 ADAM。</span><span class="sxs-lookup"><span data-stu-id="c8894-254">[AuthorizationStoreRoleProvider](https://msdn.microsoft.com/library/system.web.security.authorizationstoreroleprovider.aspx) - manages role information in an authorization-manager policy store, such as Active Directory or ADAM.</span></span>
- <span data-ttu-id="c8894-255">[SqlRoleProvider](https://msdn.microsoft.com/library/system.web.security.sqlroleprovider.aspx) -在 SQL Server 資料庫中執行角色。</span><span class="sxs-lookup"><span data-stu-id="c8894-255">[SqlRoleProvider](https://msdn.microsoft.com/library/system.web.security.sqlroleprovider.aspx) - implements roles in a SQL Server database.</span></span>
- <span data-ttu-id="c8894-256">[WindowsTokenRoleProvider](https://msdn.microsoft.com/library/system.web.security.windowstokenroleprovider.aspx) -根據訪客的 Windows 群組建立角色資訊的關聯。</span><span class="sxs-lookup"><span data-stu-id="c8894-256">[WindowsTokenRoleProvider](https://msdn.microsoft.com/library/system.web.security.windowstokenroleprovider.aspx) - associates role information based on the visitor's Windows group.</span></span> <span data-ttu-id="c8894-257">這個方法通常與 Windows 驗證搭配使用。</span><span class="sxs-lookup"><span data-stu-id="c8894-257">This method is typically used with Windows authentication.</span></span>

<span data-ttu-id="c8894-258">本教學課程系列僅著重于 SqlRoleProvider。</span><span class="sxs-lookup"><span data-stu-id="c8894-258">This tutorial series focuses exclusively on the SqlRoleProvider.</span></span>

<span data-ttu-id="c8894-259">由於提供者模型包含一個順向對應的 API （成員資格和角色類別），因此可以在該 API 周圍建立功能，而不必擔心執行細節，這些是由頁面所選取的提供者所處理。員.</span><span class="sxs-lookup"><span data-stu-id="c8894-259">Since the provider model includes a single forward-facing API (the Membership and Roles classes), it is possible to build functionality around that API without having to worry about the implementation details - those are handled by the providers selected by the page developer.</span></span> <span data-ttu-id="c8894-260">這個整合的 API 可讓 Microsoft 和協力廠商廠商建立 Web 控制項，以與成員資格和角色架構進行介面。</span><span class="sxs-lookup"><span data-stu-id="c8894-260">This unified API allows for Microsoft and third-party vendors to build Web controls that interface with the Membership and Roles frameworks.</span></span> <span data-ttu-id="c8894-261">ASP.NET 隨附許多[登入 Web 控制項](https://msdn.microsoft.com/library/ms178329.aspx)，可用於執行一般使用者帳戶的使用者介面。</span><span class="sxs-lookup"><span data-stu-id="c8894-261">ASP.NET ships with a number of [Login Web controls](https://msdn.microsoft.com/library/ms178329.aspx) for implementing common user account user interfaces.</span></span> <span data-ttu-id="c8894-262">例如，登入[控制項會](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx)提示使用者提供其認證、進行驗證，然後透過表單驗證將其記錄在中。</span><span class="sxs-lookup"><span data-stu-id="c8894-262">For example, the [Login control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx) prompts a user for their credentials, validates them, and then logs them in via forms authentication.</span></span> <span data-ttu-id="c8894-263">[LoginView 控制項](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginview.aspx)提供的範本可向匿名使用者和已驗證的使用者顯示不同的標記，或是根據使用者的角色而不同的標記。</span><span class="sxs-lookup"><span data-stu-id="c8894-263">The [LoginView control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginview.aspx) offers templates for displaying different markup to anonymous users versus authenticated users, or different markup based on the user's role.</span></span> <span data-ttu-id="c8894-264">而[CreateUserWizard 控制項](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.aspx)提供逐步執行的使用者介面，用來建立新的使用者帳戶。</span><span class="sxs-lookup"><span data-stu-id="c8894-264">And the [CreateUserWizard control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.aspx) provides a step-by-step user interface for creating a new user account.</span></span>

<span data-ttu-id="c8894-265">底下的各種登入控制項會與成員資格和角色架構互動。</span><span class="sxs-lookup"><span data-stu-id="c8894-265">Underneath the covers the various Login controls interact with the Membership and Roles frameworks.</span></span> <span data-ttu-id="c8894-266">大部分的登入控制項都可以執行，而不需要撰寫任何一行程式碼。</span><span class="sxs-lookup"><span data-stu-id="c8894-266">Most Login controls can be implemented without having to write a single line of code.</span></span> <span data-ttu-id="c8894-267">在未來的教學課程中，我們將更詳細地探討這些控制項，包括擴充和自訂其功能的技巧。</span><span class="sxs-lookup"><span data-stu-id="c8894-267">We will examine these controls in greater detail in future tutorials, including techniques for extending and customizing their functionality.</span></span>

## <a name="summary"></a><span data-ttu-id="c8894-268">總結</span><span class="sxs-lookup"><span data-stu-id="c8894-268">Summary</span></span>

<span data-ttu-id="c8894-269">所有支援使用者帳戶的 web 應用程式都需要類似的功能，例如：使用者能夠登入，並在頁面流覽時記住其登入狀態;用來建立帳戶的新訪客的網頁;網頁開發人員能夠指定哪些資源、資料和功能可供使用者或角色使用。</span><span class="sxs-lookup"><span data-stu-id="c8894-269">All web applications that support user accounts require similar features, such as: the ability for users to log in and have their log in status remembered across page visits; a web page for new visitors to create an account; and the ability to the page developer to specify what resource, data, and functionality are available to what users or roles.</span></span> <span data-ttu-id="c8894-270">驗證和授權使用者，以及管理使用者帳戶和角色的工作，在 ASP.NET 應用程式中很容易完成，因為表單驗證、URL 授權和成員資格和角色架構。</span><span class="sxs-lookup"><span data-stu-id="c8894-270">The tasks of authenticating and authorizing users and of managing user accounts and roles is remarkably easy to accomplish in ASP.NET applications thanks to forms authentication, URL authorization, and the Membership and Roles frameworks.</span></span>

<span data-ttu-id="c8894-271">在接下來的幾個教學課程中，我們將逐步建立一個可運作的 web 應用程式，從頭開始探討這些層面。</span><span class="sxs-lookup"><span data-stu-id="c8894-271">Over the course of the next several tutorials we will examine these aspects by building a working web application from the ground up in a step-by-step fashion.</span></span> <span data-ttu-id="c8894-272">在接下來的兩個教學課程中，我們將詳細探討表單驗證。</span><span class="sxs-lookup"><span data-stu-id="c8894-272">In the next two tutorial we will explore forms authentication in detail.</span></span> <span data-ttu-id="c8894-273">我們會看到表單驗證工作流程的運作方式、仔細分析表單驗證票證、討論安全性考慮，以及瞭解如何設定表單驗證系統，同時建立 web 應用程式，讓訪客能夠登入和登出。</span><span class="sxs-lookup"><span data-stu-id="c8894-273">We will see the forms authentication workflow in action, dissect the forms authentication ticket, discuss security concerns, and see how to configure the forms authentication system - all while building a web application that allows visitors to log in and log out.</span></span>

<span data-ttu-id="c8894-274">快樂的程式設計！</span><span class="sxs-lookup"><span data-stu-id="c8894-274">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="c8894-275">進一步閱讀</span><span class="sxs-lookup"><span data-stu-id="c8894-275">Further Reading</span></span>

<span data-ttu-id="c8894-276">如需本教學課程中所討論之主題的詳細資訊，請參閱下列資源：</span><span class="sxs-lookup"><span data-stu-id="c8894-276">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="c8894-277">ASP.NET 2.0 成員資格、角色、表單驗證和安全性資源</span><span class="sxs-lookup"><span data-stu-id="c8894-277">ASP.NET 2.0 Membership, Roles, Forms Authentication, and Security Resources</span></span>](https://weblogs.asp.net/scottgu/ASP.NET-2.0-Membership_2C00_-Roles_2C00_-Forms-Authentication_2C00_-and-Security-Resources-)
- [<span data-ttu-id="c8894-278">ASP.NET 2.0 安全性指導方針</span><span class="sxs-lookup"><span data-stu-id="c8894-278">ASP.NET 2.0 Security Guidelines</span></span>](https://msdn.microsoft.com/library/ms998258.aspx)
- [<span data-ttu-id="c8894-279">ASP.NET 驗證</span><span class="sxs-lookup"><span data-stu-id="c8894-279">ASP.NET Authentication</span></span>](https://msdn.microsoft.com/library/eeyk640h.aspx)
- [<span data-ttu-id="c8894-280">ASP.NET 授權</span><span class="sxs-lookup"><span data-stu-id="c8894-280">ASP.NET Authorization</span></span>](https://msdn.microsoft.com/library/wce3kxhd.aspx)
- [<span data-ttu-id="c8894-281">ASP.NET 登入控制項總覽</span><span class="sxs-lookup"><span data-stu-id="c8894-281">ASP.NET Login Controls Overview</span></span>](https://msdn.microsoft.com/library/ms178329.aspx)
- [<span data-ttu-id="c8894-282">檢查 ASP.NET 2.0 的成員資格、角色和設定檔</span><span class="sxs-lookup"><span data-stu-id="c8894-282">Examining ASP.NET 2.0's Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="c8894-283">如何：使用成員資格和角色保護我的網站？</span><span class="sxs-lookup"><span data-stu-id="c8894-283">How Do I: Secure My Site Using Membership and Roles?</span></span>](https://asp.net/learn/videos/video-45.aspx) <span data-ttu-id="c8894-284">影片</span><span class="sxs-lookup"><span data-stu-id="c8894-284">(Video)</span></span>
- [<span data-ttu-id="c8894-285">成員資格簡介</span><span class="sxs-lookup"><span data-stu-id="c8894-285">Introduction to Membership</span></span>](https://msdn.microsoft.com/library/yh26yfzy.aspx)
- [<span data-ttu-id="c8894-286">MSDN 安全性開發人員中心</span><span class="sxs-lookup"><span data-stu-id="c8894-286">MSDN Security Developer Center</span></span>](https://msdn.microsoft.com/security/default.aspx)
- <span data-ttu-id="c8894-287">[Professional ASP.NET 2.0 安全性、成員資格和角色管理](http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764596985.html)（ISBN：978-0-7645-9698-8）</span><span class="sxs-lookup"><span data-stu-id="c8894-287">[Professional ASP.NET 2.0 Security, Membership, and Role Management](http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764596985.html) (ISBN: 978-0-7645-9698-8)</span></span>
- [<span data-ttu-id="c8894-288">提供者工具組</span><span class="sxs-lookup"><span data-stu-id="c8894-288">Provider Toolkit</span></span>](https://msdn.microsoft.com/asp.net/aa336558.aspx)

## <a name="about-the-author"></a><span data-ttu-id="c8894-289">關於作者</span><span class="sxs-lookup"><span data-stu-id="c8894-289">About the Author</span></span>

<span data-ttu-id="c8894-290">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)，自1998起，有七個 ASP/ASP. NET 書籍和創辦人的[4GuysFromRolla.com](http://www.4guysfromrolla.com)。</span><span class="sxs-lookup"><span data-stu-id="c8894-290">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="c8894-291">Scott 以獨立的顧問、訓練員和作者的身分運作。</span><span class="sxs-lookup"><span data-stu-id="c8894-291">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="c8894-292">他的最新著作是[*在24小時內讓自己的 ASP.NET 2.0*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)。</span><span class="sxs-lookup"><span data-stu-id="c8894-292">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="c8894-293">他可以在mitchell@4GuysFromRolla.com觸達[。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="c8894-293">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="c8894-294">或者透過他的 blog，可以在[http://ScottOnWriting.NET](http://ScottOnWriting.NET)找到。</span><span class="sxs-lookup"><span data-stu-id="c8894-294">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="c8894-295">特別感謝</span><span class="sxs-lookup"><span data-stu-id="c8894-295">Special Thanks To</span></span>

<span data-ttu-id="c8894-296">本教學課程系列已由許多有用的審核者所審查。</span><span class="sxs-lookup"><span data-stu-id="c8894-296">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="c8894-297">本教學課程的領導審查者是由許多有用的審核者所審查的教學課程系列。</span><span class="sxs-lookup"><span data-stu-id="c8894-297">Lead reviewer for this tutorial was This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="c8894-298">本教學課程的領導審查者包括 Alicja Maziarz、John Suru 和 Teresa Murphy。</span><span class="sxs-lookup"><span data-stu-id="c8894-298">Lead reviewers for this tutorial include Alicja Maziarz, John Suru, and Teresa Murphy.</span></span> <span data-ttu-id="c8894-299">有興趣複習我即將發行的 MSDN 文章嗎？</span><span class="sxs-lookup"><span data-stu-id="c8894-299">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="c8894-300">若是如此，請在mitchell@4GuysFromRolla.com的那一行下拉式[。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="c8894-300">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="c8894-301">[上一頁](forms-authentication-configuration-and-advanced-topics-cs.md)
> [下一頁](an-overview-of-forms-authentication-vb.md)</span><span class="sxs-lookup"><span data-stu-id="c8894-301">[Previous](forms-authentication-configuration-and-advanced-topics-cs.md)
[Next](an-overview-of-forms-authentication-vb.md)</span></span>
