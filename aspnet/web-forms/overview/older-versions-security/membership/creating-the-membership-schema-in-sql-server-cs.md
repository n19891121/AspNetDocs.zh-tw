---
uid: web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs
title: '在 SQL Server 中建立成員資格架構 (c # ) |Microsoft Docs'
author: rick-anderson
description: 本教學課程一開始先檢查將必要架構新增至資料庫以使用 SqlMembershipProvider 的技巧。 之後我們 .。。
ms.author: riande
ms.date: 01/18/2008
ms.assetid: b4ac129d-1b8e-41ca-a38f-9b19d7c7bb0e
msc.legacyurl: /web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs
msc.type: authoredcontent
ms.openlocfilehash: 8160c422d7a20b7c6954f960e73d5d59f7b90a5f
ms.sourcegitcommit: 4e6d586faadbe4d9ef27122f86335ec9385134af
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/28/2020
ms.locfileid: "89044736"
---
# <a name="creating-the-membership-schema-in-sql-server-c"></a><span data-ttu-id="97b02-104">在 SQL Server 中建立成員資格結構描述 (C#)</span><span class="sxs-lookup"><span data-stu-id="97b02-104">Creating the Membership Schema in SQL Server (C#)</span></span>

<span data-ttu-id="97b02-105">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="97b02-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="97b02-106">[下載程式代碼](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_CS.zip) 或 [下載 PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="97b02-106">[Download Code](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_CS.zip) or [Download PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_cs.pdf)</span></span>

> <span data-ttu-id="97b02-107">本教學課程一開始先檢查將必要架構新增至資料庫以使用 SqlMembershipProvider 的技巧。</span><span class="sxs-lookup"><span data-stu-id="97b02-107">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the SqlMembershipProvider.</span></span> <span data-ttu-id="97b02-108">接下來，我們將檢查架構中的重要資料表，並討論其用途和重要性。</span><span class="sxs-lookup"><span data-stu-id="97b02-108">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="97b02-109">本教學課程最後會探討如何告訴 ASP.NET 應用程式，成員資格架構應該使用哪一個提供者。</span><span class="sxs-lookup"><span data-stu-id="97b02-109">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

## <a name="introduction"></a><span data-ttu-id="97b02-110">簡介</span><span class="sxs-lookup"><span data-stu-id="97b02-110">Introduction</span></span>

<span data-ttu-id="97b02-111">先前的兩個教學課程使用表單驗證來識別網站訪客。</span><span class="sxs-lookup"><span data-stu-id="97b02-111">The previous two tutorials examined using forms authentication to identify website visitors.</span></span> <span data-ttu-id="97b02-112">表單驗證架構可讓開發人員輕鬆地將使用者登入網站，並透過使用驗證票證在頁面流覽期間記住這些使用者。</span><span class="sxs-lookup"><span data-stu-id="97b02-112">The forms authentication framework makes it easy for developers to log a user into a website and to remember them across page visits through the use of authentication tickets.</span></span> <span data-ttu-id="97b02-113">`FormsAuthentication`類別包含產生票證的方法，並將其新增至訪客的 cookie。</span><span class="sxs-lookup"><span data-stu-id="97b02-113">The `FormsAuthentication` class includes methods for generating the ticket and adding it to the visitor's cookies.</span></span> <span data-ttu-id="97b02-114">會 `FormsAuthenticationModule` 檢查所有傳入的要求，對於具有有效驗證票證的要求，則會建立一個物件，並使其 `GenericPrincipal` `FormsIdentity` 與目前的要求產生關聯。</span><span class="sxs-lookup"><span data-stu-id="97b02-114">The `FormsAuthenticationModule` examines all incoming requests and, for those with a valid authentication ticket, creates and associates a `GenericPrincipal` and a `FormsIdentity` object with the current request.</span></span> <span data-ttu-id="97b02-115">表單驗證只是一種機制，可在登入時將驗證票證授與訪客，並在後續要求中剖析該票證，以判斷使用者的身分識別。</span><span class="sxs-lookup"><span data-stu-id="97b02-115">Forms authentication is merely a mechanism for granting an authentication ticket to a visitor when logging in and, on subsequent requests, parsing that ticket to determine the user's identity.</span></span> <span data-ttu-id="97b02-116">若要讓 web 應用程式支援使用者帳戶，我們仍然需要執行使用者存放區，並新增功能來驗證認證、註冊新的使用者，以及其他使用者帳戶相關的工作。</span><span class="sxs-lookup"><span data-stu-id="97b02-116">For a web application to support user accounts, we still need to implement a user store and add functionality to validate credentials, register new users, and the myriad of other user account-related tasks.</span></span>

<span data-ttu-id="97b02-117">在 ASP.NET 2.0 之前，開發人員會在攔截，以執行所有使用者帳戶相關的工作。</span><span class="sxs-lookup"><span data-stu-id="97b02-117">Prior to ASP.NET 2.0, developers were on the hook for implementing all of these user account-related tasks.</span></span> <span data-ttu-id="97b02-118">幸運的是，ASP.NET 團隊已辨識出這種缺點，並引進了具有 ASP.NET 2.0 的成員資格架構。</span><span class="sxs-lookup"><span data-stu-id="97b02-118">Fortunately the ASP.NET team recognized this shortcoming and introduced the Membership framework with ASP.NET 2.0.</span></span> <span data-ttu-id="97b02-119">成員資格架構是 .NET Framework 中的一組類別，可提供程式設計介面來完成核心使用者帳戶相關工作。</span><span class="sxs-lookup"><span data-stu-id="97b02-119">The Membership framework is a set of classes in the .NET Framework that provide a programmatic interface for accomplishing core user account-related tasks.</span></span> <span data-ttu-id="97b02-120">此架構是以 [提供者模型](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx)為基礎，可讓開發人員將自訂的執行插入標準化的 API。</span><span class="sxs-lookup"><span data-stu-id="97b02-120">This framework is built atop the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), which allows developers to plug a customized implementation into a standardized API.</span></span>

<span data-ttu-id="97b02-121">如 <a id="Tutorial1"></a> [*安全性基本概念和 ASP.NET 支援*](../introduction/security-basics-and-asp-net-support-cs.md)教學課程中所述，.NET Framework 隨附兩個內建的成員資格提供者： [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) 和 [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx) 。</span><span class="sxs-lookup"><span data-stu-id="97b02-121">As discussed in the <a id="Tutorial1"></a>[*Security Basics and ASP.NET Support*](../introduction/security-basics-and-asp-net-support-cs.md) tutorial, the .NET Framework ships with two built-in Membership providers: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) and [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span></span> <span data-ttu-id="97b02-122">顧名思義，會 `SqlMembershipProvider` 使用 Microsoft SQL Server 資料庫做為使用者存放區。</span><span class="sxs-lookup"><span data-stu-id="97b02-122">As its name implies, the `SqlMembershipProvider` uses a Microsoft SQL Server database as the user store.</span></span> <span data-ttu-id="97b02-123">為了在應用程式中使用這個提供者，我們必須告訴提供者要使用哪個資料庫做為存放區。</span><span class="sxs-lookup"><span data-stu-id="97b02-123">In order to use this provider in an application, we need to tell the provider what database to use as the store.</span></span> <span data-ttu-id="97b02-124">您可能會想像，會 `SqlMembershipProvider` 預期使用者儲存資料庫必須有特定的資料庫資料表、views 和預存程式。</span><span class="sxs-lookup"><span data-stu-id="97b02-124">As you might imagine, the `SqlMembershipProvider` expects the user store database to have certain database tables, views, and stored procedures.</span></span> <span data-ttu-id="97b02-125">我們需要將此預期的架構新增至選取的資料庫。</span><span class="sxs-lookup"><span data-stu-id="97b02-125">We need to add this expected schema to the selected database.</span></span>

<span data-ttu-id="97b02-126">本教學課程一開始會先檢查將必要架構新增至資料庫的技巧，以便使用 `SqlMembershipProvider` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-126">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the `SqlMembershipProvider`.</span></span> <span data-ttu-id="97b02-127">接下來，我們將檢查架構中的重要資料表，並討論其用途和重要性。</span><span class="sxs-lookup"><span data-stu-id="97b02-127">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="97b02-128">本教學課程最後會探討如何告訴 ASP.NET 應用程式，成員資格架構應該使用哪一個提供者。</span><span class="sxs-lookup"><span data-stu-id="97b02-128">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

<span data-ttu-id="97b02-129">現在就開始吧！</span><span class="sxs-lookup"><span data-stu-id="97b02-129">Let's get started!</span></span>

## <a name="step-1-deciding-where-to-place-the-user-store"></a><span data-ttu-id="97b02-130">步驟1：決定使用者存放區的放置位置</span><span class="sxs-lookup"><span data-stu-id="97b02-130">Step 1: Deciding Where to Place the User Store</span></span>

<span data-ttu-id="97b02-131">ASP.NET 應用程式的資料通常會儲存在資料庫的多個資料表中。</span><span class="sxs-lookup"><span data-stu-id="97b02-131">An ASP.NET application's data is commonly stored in a number of tables in a database.</span></span> <span data-ttu-id="97b02-132">在執行 `SqlMembershipProvider` 資料庫架構時，我們必須決定是否將成員資格架構放在與應用程式資料相同的資料庫或替代資料庫中。</span><span class="sxs-lookup"><span data-stu-id="97b02-132">When implementing the `SqlMembershipProvider` database schema we must decide whether to place the Membership schema in the same database as the application data or in an alternate database.</span></span>

<span data-ttu-id="97b02-133">建議您在與應用程式資料相同的資料庫中找出成員資格架構，原因如下：</span><span class="sxs-lookup"><span data-stu-id="97b02-133">I recommend locating the Membership schema in the same database as the application data for the following reasons:</span></span>

- <span data-ttu-id="97b02-134">可**維護性**「將資料封裝在某個資料庫中的應用程式，比具有兩個不同資料庫的應用程式更容易瞭解、維護和部署。</span><span class="sxs-lookup"><span data-stu-id="97b02-134">**Maintainability** ' an application whose data is encapsulated in one database is easier to understand, maintain, and deploy than an application that has two separate databases.</span></span>
- <span data-ttu-id="97b02-135">**關聯式完整性** 「藉由在與應用程式資料表相同的資料庫中找出成員資格相關資料表，可以在成員資格相關資料表和相關應用程式資料表的主鍵之間建立 [外鍵條件約束](http://en.wikipedia.org/wiki/Foreign_key) 。</span><span class="sxs-lookup"><span data-stu-id="97b02-135">**Relational Integrity** ' by locating the Membership-related tables in the same database as the application tables it is possible to establish [foreign key constraints](http://en.wikipedia.org/wiki/Foreign_key) between the primary keys in the Membership-related tables and related application tables.</span></span>

<span data-ttu-id="97b02-136">如果您有多個應用程式都使用不同的資料庫，但需要共用一個通用的使用者存放區，則將使用者存放區和應用程式資料分離成不同的資料庫就有意義。</span><span class="sxs-lookup"><span data-stu-id="97b02-136">Decoupling the user store and application data into separate databases only makes sense if you have multiple applications that each use separate databases, but need to share a common user store.</span></span>

### <a name="creating-a-database"></a><span data-ttu-id="97b02-137">建立資料庫</span><span class="sxs-lookup"><span data-stu-id="97b02-137">Creating a Database</span></span>

<span data-ttu-id="97b02-138">我們在第二個教學課程之後所建立的應用程式還不需要資料庫。</span><span class="sxs-lookup"><span data-stu-id="97b02-138">The application we have been building since the second tutorial has not yet needed a database.</span></span> <span data-ttu-id="97b02-139">不過，我們現在需要一個使用者存放區。</span><span class="sxs-lookup"><span data-stu-id="97b02-139">We need one now, however, for the user store.</span></span> <span data-ttu-id="97b02-140">讓我們建立一個，然後新增至提供者所需的架構 `SqlMembershipProvider` (請參閱步驟 2) 。</span><span class="sxs-lookup"><span data-stu-id="97b02-140">Let's create one and then add to it the schema required by the `SqlMembershipProvider` provider (see Step 2).</span></span>

> [!NOTE]
> <span data-ttu-id="97b02-141">在本教學課程系列中，我們將使用 [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) 資料庫來儲存應用程式資料表和 `SqlMembershipProvider` 架構。</span><span class="sxs-lookup"><span data-stu-id="97b02-141">Throughout this tutorial series we will be using a [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) database to store our application tables and the `SqlMembershipProvider` schema.</span></span> <span data-ttu-id="97b02-142">這項決定的原因有兩個：首先，由於其成本免費，Express Edition 是 SQL Server 2005 的最牽扯不清可存取版本;其次，SQL Server 2005 Express Edition 資料庫可以直接放在 web 應用程式的 `App_Data` 資料夾中，讓它成為將資料庫和 web 應用程式封裝在單一 ZIP 檔案中的標準化，並在不需要任何特殊的設定指示或設定選項的情況下重新部署。</span><span class="sxs-lookup"><span data-stu-id="97b02-142">This decision was made for two reasons: first, due to its cost - free - the Express Edition is the most readably accessible version of SQL Server 2005; second, SQL Server 2005 Express Edition databases can be placed directly in the web application's `App_Data` folder, making it a cinch to package the database and web application together in one ZIP file and to redeploy it without any special setup instructions or configuration options.</span></span> <span data-ttu-id="97b02-143">如果您想要遵循 SQL Server 的非 Express Edition 版本，請隨意使用。</span><span class="sxs-lookup"><span data-stu-id="97b02-143">If you'd prefer to follow along using a non-Express Edition version of SQL Server, feel free.</span></span> <span data-ttu-id="97b02-144">這些步驟幾乎完全相同。</span><span class="sxs-lookup"><span data-stu-id="97b02-144">The steps are virtually identical.</span></span> <span data-ttu-id="97b02-145">`SqlMembershipProvider`架構可搭配任何版本的 Microsoft SQL Server 2000 和更新版本使用。</span><span class="sxs-lookup"><span data-stu-id="97b02-145">The `SqlMembershipProvider` schema will work with any version of Microsoft SQL Server 2000 and up.</span></span>

<span data-ttu-id="97b02-146">在 [方案總管中，以滑鼠右鍵按一下 `App_Data` 資料夾，然後選擇 [加入新專案]。</span><span class="sxs-lookup"><span data-stu-id="97b02-146">From the Solution Explorer, right-click on the `App_Data` folder and choose to Add New Item.</span></span> <span data-ttu-id="97b02-147"> (如果您沒有 `App_Data` 在專案中看到資料夾，請以滑鼠右鍵按一下方案總管中的專案，) 然後選取 `App_Data` [加入新專案] 對話方塊中的 [加入新專案] 對話方塊，加入宣告名為的新 SQL Database `SecurityTutorials.mdf` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-147">(If you do not see an `App_Data` folder in your project, right-click on the project in Solution Explorer, select Add ASP.NET Folder, and pick `App_Data`.) From the Add New Item dialog box, choose to add a new SQL Database named `SecurityTutorials.mdf`.</span></span> <span data-ttu-id="97b02-148">在本教學課程中，我們會將 `SqlMembershipProvider` 此架構新增至這個資料庫; 在後續的教學課程中，我們會建立額外的資料表來捕捉我們的應用程式資料。</span><span class="sxs-lookup"><span data-stu-id="97b02-148">In this tutorial we will add the `SqlMembershipProvider` schema to this database; in subsequent tutorials we will create additional tables to capture our application data.</span></span>

<span data-ttu-id="97b02-149">[![將名為 SecurityTutorials .mdf 資料庫的新 SQL Database 新增至 App_Data 資料夾](creating-the-membership-schema-in-sql-server-cs/_static/image2.png)](creating-the-membership-schema-in-sql-server-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="97b02-149">[![Add a New SQL Database Named SecurityTutorials.mdf Database to the App_Data Folder](creating-the-membership-schema-in-sql-server-cs/_static/image2.png)](creating-the-membership-schema-in-sql-server-cs/_static/image1.png)</span></span>

<span data-ttu-id="97b02-150">**圖 1**：將名為 Database 的新 SQL Database 新增 `SecurityTutorials.mdf` 至 `App_Data` 資料夾， ([按一下以查看完整大小的影像](creating-the-membership-schema-in-sql-server-cs/_static/image3.png)) </span><span class="sxs-lookup"><span data-stu-id="97b02-150">**Figure 1**: Add a New SQL Database Named `SecurityTutorials.mdf` Database to the `App_Data` Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image3.png))</span></span>

<span data-ttu-id="97b02-151">將資料庫新增至 `App_Data` 資料夾，會自動將它包含在資料庫總管視圖中。</span><span class="sxs-lookup"><span data-stu-id="97b02-151">Adding a database to the `App_Data` folder automatically includes it in the Database Explorer view.</span></span> <span data-ttu-id="97b02-152"> (在 Visual Studio 的非 Express 版本中，資料庫總管稱為伺服器總管。 ) 移至資料庫總管並展開剛剛加入的 `SecurityTutorials` 資料庫。</span><span class="sxs-lookup"><span data-stu-id="97b02-152">(In the non-Express Edition version of Visual Studio, the Database Explorer is called the Server Explorer.) Go to the Database Explorer and expand the just-added `SecurityTutorials` database.</span></span> <span data-ttu-id="97b02-153">如果您在畫面上看不到資料庫總管，請移至 [View] 功能表並選擇 [資料庫總管]，或按 Ctrl + Alt + S。</span><span class="sxs-lookup"><span data-stu-id="97b02-153">If you do not see the Database Explorer on screen, go to the View menu and choose Database Explorer, or hit Ctrl+Alt+S.</span></span> <span data-ttu-id="97b02-154">如 [圖 2] 所示， `SecurityTutorials` 資料庫是空的，它不包含任何資料表、沒有任何視圖，而且沒有任何預存程式。</span><span class="sxs-lookup"><span data-stu-id="97b02-154">As Figure 2 shows, the `SecurityTutorials` database is empty - it contains no tables, no views, and no stored procedures.</span></span>

<span data-ttu-id="97b02-155">[![SecurityTutorials 資料庫目前是空的](creating-the-membership-schema-in-sql-server-cs/_static/image5.png)](creating-the-membership-schema-in-sql-server-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="97b02-155">[![The SecurityTutorials Database is Currently Empty](creating-the-membership-schema-in-sql-server-cs/_static/image5.png)](creating-the-membership-schema-in-sql-server-cs/_static/image4.png)</span></span>

<span data-ttu-id="97b02-156">**圖 2**： `SecurityTutorials` 資料庫目前為空白 ([按一下以查看完整大小的影像](creating-the-membership-schema-in-sql-server-cs/_static/image6.png)) </span><span class="sxs-lookup"><span data-stu-id="97b02-156">**Figure 2**: The `SecurityTutorials` Database is Currently Empty ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image6.png))</span></span>

## <a name="step-2-adding-thesqlmembershipproviderschema-to-the-database"></a><span data-ttu-id="97b02-157">步驟2：將 `SqlMembershipProvider` 架構新增至資料庫</span><span class="sxs-lookup"><span data-stu-id="97b02-157">Step 2: Adding the`SqlMembershipProvider`Schema to the Database</span></span>

<span data-ttu-id="97b02-158">`SqlMembershipProvider`需要在使用者存放區資料庫中安裝一組特定的資料表、views 和預存程式。</span><span class="sxs-lookup"><span data-stu-id="97b02-158">The `SqlMembershipProvider` requires a particular set of tables, views, and stored procedures to be installed in the user store database.</span></span> <span data-ttu-id="97b02-159">您可以使用[ `aspnet_regsql.exe` 工具](https://msdn.microsoft.com/library/ms229862.aspx)新增這些必要的資料庫物件。</span><span class="sxs-lookup"><span data-stu-id="97b02-159">These requisite database objects can be added using the [`aspnet_regsql.exe` tool](https://msdn.microsoft.com/library/ms229862.aspx).</span></span> <span data-ttu-id="97b02-160">這個檔案位於 `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` 資料夾中。</span><span class="sxs-lookup"><span data-stu-id="97b02-160">This file is located in the `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder.</span></span>

> [!NOTE]
> <span data-ttu-id="97b02-161">此 `aspnet_regsql.exe` 工具提供命令列功能和圖形化使用者介面。</span><span class="sxs-lookup"><span data-stu-id="97b02-161">The `aspnet_regsql.exe` tool offers both command line functionality and a graphical user interface.</span></span> <span data-ttu-id="97b02-162">圖形化介面比較容易使用，而且我們將在本教學課程中檢查。</span><span class="sxs-lookup"><span data-stu-id="97b02-162">The graphical interface is more user friendly and is what we will examine in this tutorial.</span></span> <span data-ttu-id="97b02-163">當 `SqlMembershipProvider` 需要自動化新增架構時（例如在組建腳本或自動化測試案例中），命令列介面會很有用。</span><span class="sxs-lookup"><span data-stu-id="97b02-163">The command line interface is useful when the addition of the `SqlMembershipProvider` schema needs to be automated, such as in build scripts or automated testing scenarios.</span></span>

<span data-ttu-id="97b02-164">此 `aspnet_regsql.exe` 工具可用來將 *ASP.NET 應用程式服務* 新增或移除至指定的 SQL Server 資料庫。</span><span class="sxs-lookup"><span data-stu-id="97b02-164">The `aspnet_regsql.exe` tool is used to add or remove *ASP.NET application services* to a specified SQL Server database.</span></span> <span data-ttu-id="97b02-165">ASP.NET 應用程式服務包含與的架構 `SqlMembershipProvider` ，以及 `SqlRoleProvider` 其他 ASP.NET 2.0 架構之 SQL 提供者的架構。</span><span class="sxs-lookup"><span data-stu-id="97b02-165">The ASP.NET application services encompass the schemas for the `SqlMembershipProvider` and `SqlRoleProvider`, along with the schemas for the SQL-based providers for other ASP.NET 2.0 frameworks.</span></span> <span data-ttu-id="97b02-166">我們需要提供兩個位的資訊給 `aspnet_regsql.exe` 工具：</span><span class="sxs-lookup"><span data-stu-id="97b02-166">We need to provide two bits of information to the `aspnet_regsql.exe` tool:</span></span>

- <span data-ttu-id="97b02-167">是否要新增或移除應用程式服務，以及</span><span class="sxs-lookup"><span data-stu-id="97b02-167">Whether we want to add or remove application services, and</span></span>
- <span data-ttu-id="97b02-168">要從中新增或移除應用程式服務架構的資料庫</span><span class="sxs-lookup"><span data-stu-id="97b02-168">The database from which to add or remove the application services schema</span></span>

<span data-ttu-id="97b02-169">在提示資料庫使用 `aspnet_regsql.exe` 時，工具會要求我們提供資料庫所在的伺服器名稱、用於連接至資料庫的安全性認證，以及資料庫名稱。</span><span class="sxs-lookup"><span data-stu-id="97b02-169">In prompting for the database to use, the `aspnet_regsql.exe` tool asks us to provide the name of the server the database resides on, the security credentials for connecting to the database, and the database name.</span></span> <span data-ttu-id="97b02-170">如果您使用非 Express 版的 SQL Server，您應該已經知道這項資訊，因為這是您在透過 ASP.NET 網頁處理資料庫時，必須透過連接字串提供的相同資訊。</span><span class="sxs-lookup"><span data-stu-id="97b02-170">If you are using the non-Express Edition of SQL Server, you should already know this information, as it is the same information you must provide through a connection string when working with the database through an ASP.NET web page.</span></span> <span data-ttu-id="97b02-171">不過，在資料夾中使用 SQL Server 2005 Express Edition 資料庫時，判斷伺服器和資料庫名稱 `App_Data` 會比較複雜一點。</span><span class="sxs-lookup"><span data-stu-id="97b02-171">Determining the server and database name when using a SQL Server 2005 Express Edition database in the `App_Data` folder, however, is a bit more involved.</span></span>

<span data-ttu-id="97b02-172">下一節將檢查在資料夾中指定 SQL Server 2005 Express Edition 資料庫之伺服器和資料庫名稱的簡單方式 `App_Data` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-172">The following section examines a straightforward way for specifying the server and database name for a SQL Server 2005 Express Edition database in the `App_Data` folder.</span></span> <span data-ttu-id="97b02-173">如果您不是使用 SQL Server 2005 Express Edition 請隨意跳到 [安裝應用程式服務] 區段。</span><span class="sxs-lookup"><span data-stu-id="97b02-173">If you are not using SQL Server 2005 Express Edition feel free to skip ahead to the Installing the Application Services section.</span></span>

### <a name="determining-the-server-and-database-name-for-a-sql-server-2005-express-edition-database-in-theapp_datafolder"></a><span data-ttu-id="97b02-174">判斷資料夾中 SQL Server 2005 Express Edition 資料庫的伺服器和資料庫名稱 `App_Data`</span><span class="sxs-lookup"><span data-stu-id="97b02-174">Determining the Server and Database Name for a SQL Server 2005 Express Edition Database in the`App_Data`Folder</span></span>

<span data-ttu-id="97b02-175">為了使用此工具， `aspnet_regsql.exe` 我們必須知道伺服器和資料庫名稱。</span><span class="sxs-lookup"><span data-stu-id="97b02-175">In order to use the `aspnet_regsql.exe` tool we need to know the server and database names.</span></span> <span data-ttu-id="97b02-176">伺服器名稱為 `localhost\InstanceName` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-176">The server name is `localhost\InstanceName`.</span></span> <span data-ttu-id="97b02-177">最有可能的是， *InstanceName* 是 `SQLExpress` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-177">Most likely, the *InstanceName* is `SQLExpress`.</span></span> <span data-ttu-id="97b02-178">但是，如果您手動安裝 SQL Server 2005 Express Edition (亦即，您未在安裝 Visual Studio) 時自動安裝，則可能是您已選取不同的實例名稱。</span><span class="sxs-lookup"><span data-stu-id="97b02-178">However, if you installed SQL Server 2005 Express Edition manually (that is, you did not install it automatically while installing Visual Studio), then it is possible that you selected a different instance name.</span></span>

<span data-ttu-id="97b02-179">資料庫名稱有點棘手，可以決定。</span><span class="sxs-lookup"><span data-stu-id="97b02-179">The database name is a bit trickier to determine.</span></span> <span data-ttu-id="97b02-180">資料夾中的資料庫 `App_Data` 通常會有資料庫名稱，其中包含 [全域唯一識別碼](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) 以及資料庫檔案的路徑。</span><span class="sxs-lookup"><span data-stu-id="97b02-180">Databases in the `App_Data` folder typically have a database name that includes a [globally unique identifier](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) along with the path to the database file.</span></span> <span data-ttu-id="97b02-181">我們必須判斷此資料庫名稱，才能透過來新增應用程式服務架構 `aspnet_regsql.exe` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-181">We need to determine this database name in order to add the application services schema through `aspnet_regsql.exe`.</span></span>

<span data-ttu-id="97b02-182">確定資料庫名稱最簡單的方式，就是透過 SQL Server Management Studio 檢查它。</span><span class="sxs-lookup"><span data-stu-id="97b02-182">The easiest way to ascertain the database name is to examine it through SQL Server Management Studio.</span></span> <span data-ttu-id="97b02-183">SQL Server Management Studio 提供用來管理 SQL Server 2005 資料庫的圖形化介面，但未隨附 SQL Server 2005 的 Express 版。</span><span class="sxs-lookup"><span data-stu-id="97b02-183">SQL Server Management Studio provides a graphical interface for managing SQL Server 2005 databases, but it does not ship with the Express Edition of SQL Server 2005.</span></span> <span data-ttu-id="97b02-184">好消息是， [您可以下載](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) 免費的 Express 版的 SQL Server Management Studio。</span><span class="sxs-lookup"><span data-stu-id="97b02-184">The good news is that [you can download](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) the free Express Edition of SQL Server Management Studio.</span></span>

> [!NOTE]
> <span data-ttu-id="97b02-185">如果您的電腦上也安裝了非 Express Edition 版本的 SQL Server 2005，則可能會安裝 Management Studio 的完整版本。</span><span class="sxs-lookup"><span data-stu-id="97b02-185">If you also have a non-Express Edition version of SQL Server 2005 installed on your desktop then the full version of Management Studio is likely installed.</span></span> <span data-ttu-id="97b02-186">您可以使用完整版本來判斷資料庫名稱，並遵循下列與 Express Edition 相同的步驟。</span><span class="sxs-lookup"><span data-stu-id="97b02-186">You can use the full version to determine the database name, following the same steps as outlined below for the Express Edition.</span></span>

<span data-ttu-id="97b02-187">從關閉 Visual Studio 開始，以確定資料庫檔案上 Visual Studio 所加諸的任何鎖定都已關閉。</span><span class="sxs-lookup"><span data-stu-id="97b02-187">Start by closing Visual Studio to ensure that any locks imposed by Visual Studio on the database file are closed.</span></span> <span data-ttu-id="97b02-188">接下來，啟動 SQL Server Management Studio，並連接至 `localhost\InstanceName` 資料庫以進行 SQL Server 2005 Express Edition。</span><span class="sxs-lookup"><span data-stu-id="97b02-188">Next, launch SQL Server Management Studio and connect to the `localhost\InstanceName` database for SQL Server 2005 Express Edition.</span></span> <span data-ttu-id="97b02-189">如先前所述，實例名稱可能是 `SQLExpress` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-189">As noted earlier, chances are the instance name is `SQLExpress`.</span></span> <span data-ttu-id="97b02-190">在 [驗證] 選項中，選取 [Windows 驗證]。</span><span class="sxs-lookup"><span data-stu-id="97b02-190">For the Authentication option, select Windows Authentication.</span></span>

<span data-ttu-id="97b02-191">[![連接到 SQL Server 2005 Express Edition 實例](creating-the-membership-schema-in-sql-server-cs/_static/image8.png)](creating-the-membership-schema-in-sql-server-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="97b02-191">[![Connect to the SQL Server 2005 Express Edition Instance](creating-the-membership-schema-in-sql-server-cs/_static/image8.png)](creating-the-membership-schema-in-sql-server-cs/_static/image7.png)</span></span>

<span data-ttu-id="97b02-192">**圖 3**：連接到 SQL Server 2005 Express Edition 實例 ([按一下以查看完整大小的影像](creating-the-membership-schema-in-sql-server-cs/_static/image9.png)) </span><span class="sxs-lookup"><span data-stu-id="97b02-192">**Figure 3**: Connect to the SQL Server 2005 Express Edition Instance ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image9.png))</span></span>

<span data-ttu-id="97b02-193">連接到 SQL Server 2005 Express Edition 實例之後，Management Studio 會顯示資料庫的資料夾、安全性設定、伺服器物件等等。</span><span class="sxs-lookup"><span data-stu-id="97b02-193">After connecting to the SQL Server 2005 Express Edition instance, Management Studio displays folders for the Databases, the Security settings, the Server Objects, and so on.</span></span> <span data-ttu-id="97b02-194">如果您展開 [資料庫] 索引標籤，您會看到 `SecurityTutorials.mdf` 資料庫 *未* 在資料庫實例中註冊，我們必須先附加資料庫。</span><span class="sxs-lookup"><span data-stu-id="97b02-194">If you expand the Databases tab you will see that the `SecurityTutorials.mdf` database is *not* registered in the database instance - we need to attach the database first.</span></span>

<span data-ttu-id="97b02-195">以滑鼠右鍵按一下 [資料庫] 資料夾，然後從內容功能表中選擇 [附加]。</span><span class="sxs-lookup"><span data-stu-id="97b02-195">Right-click on the Databases folder and choose Attach from the context menu.</span></span> <span data-ttu-id="97b02-196">這會顯示 [附加資料庫] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="97b02-196">This will display the Attach Databases dialog box.</span></span> <span data-ttu-id="97b02-197">從這裡按一下 [加入] 按鈕，流覽至 `SecurityTutorials.mdf` 資料庫，然後按一下 [確定]。</span><span class="sxs-lookup"><span data-stu-id="97b02-197">From here, click the Add button, browse to the `SecurityTutorials.mdf` database, and click OK.</span></span> <span data-ttu-id="97b02-198">[圖 4] 顯示在選取資料庫之後，[附加資料庫] 對話方塊 `SecurityTutorials.mdf` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-198">Figure 4 shows the Attach Databases dialog box after the `SecurityTutorials.mdf` database has been selected.</span></span> <span data-ttu-id="97b02-199">[圖 5] 顯示成功附加資料庫之後 Management Studio 的物件總管。</span><span class="sxs-lookup"><span data-stu-id="97b02-199">Figure 5 shows Management Studio's Object Explorer after the database has been successfully attached.</span></span>

<span data-ttu-id="97b02-200">[![附加 SecurityTutorials .mdf 資料庫](creating-the-membership-schema-in-sql-server-cs/_static/image11.png)](creating-the-membership-schema-in-sql-server-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="97b02-200">[![Attach the SecurityTutorials.mdf Database](creating-the-membership-schema-in-sql-server-cs/_static/image11.png)](creating-the-membership-schema-in-sql-server-cs/_static/image10.png)</span></span>

<span data-ttu-id="97b02-201">**圖 4**：附加 `SecurityTutorials.mdf` 資料庫 ([按一下以查看完整大小的影像](creating-the-membership-schema-in-sql-server-cs/_static/image12.png)) </span><span class="sxs-lookup"><span data-stu-id="97b02-201">**Figure 4**: Attach the `SecurityTutorials.mdf` Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image12.png))</span></span>

<span data-ttu-id="97b02-202">[![SecurityTutorials .mdf 資料庫會出現在 [資料庫] 資料夾中。](creating-the-membership-schema-in-sql-server-cs/_static/image14.png)](creating-the-membership-schema-in-sql-server-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="97b02-202">[![The SecurityTutorials.mdf Database Appears in the Databases Folder](creating-the-membership-schema-in-sql-server-cs/_static/image14.png)](creating-the-membership-schema-in-sql-server-cs/_static/image13.png)</span></span>

<span data-ttu-id="97b02-203">**圖 5**： `SecurityTutorials.mdf` 資料庫會出現在 [資料庫] 資料夾中， ([按一下以查看完整大小的影像](creating-the-membership-schema-in-sql-server-cs/_static/image15.png)) </span><span class="sxs-lookup"><span data-stu-id="97b02-203">**Figure 5**: The `SecurityTutorials.mdf` Database Appears in the Databases Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image15.png))</span></span>

<span data-ttu-id="97b02-204">如 [圖 5] 所示， `SecurityTutorials.mdf` 資料庫的名稱是 abstruse。</span><span class="sxs-lookup"><span data-stu-id="97b02-204">As Figure 5 shows, the `SecurityTutorials.mdf` database has a rather abstruse name.</span></span> <span data-ttu-id="97b02-205">讓我們將其變更為更容易記住的 (，並更輕鬆地輸入) 名稱。</span><span class="sxs-lookup"><span data-stu-id="97b02-205">Let's change it to a more memorable (and easier to type) name.</span></span> <span data-ttu-id="97b02-206">以滑鼠右鍵按一下資料庫，從內容功能表中選擇 [重新命名]，然後將它重新命名 `SecurityTutorialsDatabase` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-206">Right-click on the database, choose Rename from the context menu, and rename it `SecurityTutorialsDatabase`.</span></span> <span data-ttu-id="97b02-207">這不會變更檔案名，而是資料庫用來識別其本身以 SQL Server 的名稱。</span><span class="sxs-lookup"><span data-stu-id="97b02-207">This does not change the filename, just the name the database uses to identify itself to SQL Server.</span></span>

<span data-ttu-id="97b02-208">[![將資料庫重新命名為 SecurityTutorialsDatabase](creating-the-membership-schema-in-sql-server-cs/_static/image17.png)](creating-the-membership-schema-in-sql-server-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="97b02-208">[![Rename the Database to SecurityTutorialsDatabase](creating-the-membership-schema-in-sql-server-cs/_static/image17.png)](creating-the-membership-schema-in-sql-server-cs/_static/image16.png)</span></span>

<span data-ttu-id="97b02-209">**圖 6**：重新命名資料庫以 `SecurityTutorialsDatabase` ([按一下以查看完整大小的影像](creating-the-membership-schema-in-sql-server-cs/_static/image18.png)) </span><span class="sxs-lookup"><span data-stu-id="97b02-209">**Figure 6**: Rename the Database to `SecurityTutorialsDatabase`([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image18.png))</span></span>

<span data-ttu-id="97b02-210">現在，我們知道資料庫檔案的伺服器和資料庫名稱 `SecurityTutorials.mdf` ： `localhost\InstanceName` 和 `SecurityTutorialsDatabase` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-210">At this point we know the server and database names for the `SecurityTutorials.mdf` database file: `localhost\InstanceName` and `SecurityTutorialsDatabase`, respectively.</span></span> <span data-ttu-id="97b02-211">我們現在已準備好透過工具安裝應用程式服務 `aspnet_regsql.exe` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-211">We are now ready to install the application services through the `aspnet_regsql.exe` tool.</span></span>

### <a name="installing-the-application-services"></a><span data-ttu-id="97b02-212">安裝應用程式服務</span><span class="sxs-lookup"><span data-stu-id="97b02-212">Installing the Application Services</span></span>

<span data-ttu-id="97b02-213">若要啟動 `aspnet_regsql.exe` 工具，請移至 [開始] 功能表，然後選擇 [執行]。</span><span class="sxs-lookup"><span data-stu-id="97b02-213">To launch the `aspnet_regsql.exe` tool, go to the start menu and choose Run.</span></span> <span data-ttu-id="97b02-214">`%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe`在文字方塊中輸入，然後按一下 [確定]。</span><span class="sxs-lookup"><span data-stu-id="97b02-214">Enter `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` into the textbox and click OK.</span></span> <span data-ttu-id="97b02-215">或者，您可以使用 Windows 檔案總管向下切入至適當的資料夾，然後按兩下該檔案 `aspnet_regsql.exe` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-215">Alternatively, you can use Windows Explorer to drill down to the appropriate folder and double-click the `aspnet_regsql.exe` file.</span></span> <span data-ttu-id="97b02-216">這兩種方法都會得到相同的結果。</span><span class="sxs-lookup"><span data-stu-id="97b02-216">Either approach will net the same results.</span></span>

<span data-ttu-id="97b02-217">執行 `aspnet_regsql.exe` 沒有任何命令列引數的工具，會啟動 ASP.NET SQL Server 安裝 Wizard 圖形化使用者介面。</span><span class="sxs-lookup"><span data-stu-id="97b02-217">Running the `aspnet_regsql.exe` tool without any command line arguments launches the ASP.NET SQL Server Setup Wizard graphical user interface.</span></span> <span data-ttu-id="97b02-218">此嚮導可讓您輕鬆地在指定的資料庫上新增或移除 ASP.NET 的應用程式服務。</span><span class="sxs-lookup"><span data-stu-id="97b02-218">The wizard makes it easy to add or remove the ASP.NET application services on a specified database.</span></span> <span data-ttu-id="97b02-219">[圖 7] 所示的 wizard 第一個畫面會說明工具的用途。</span><span class="sxs-lookup"><span data-stu-id="97b02-219">The first screen of the wizard, shown in Figure 7, describes the purpose of the tool.</span></span>

<span data-ttu-id="97b02-220">[![使用 ASP.NET SQL Server 安裝 Wizard 新增成員資格架構](creating-the-membership-schema-in-sql-server-cs/_static/image20.png)](creating-the-membership-schema-in-sql-server-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="97b02-220">[![Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema](creating-the-membership-schema-in-sql-server-cs/_static/image20.png)](creating-the-membership-schema-in-sql-server-cs/_static/image19.png)</span></span>

<span data-ttu-id="97b02-221">**圖 7**：使用 [ASP.NET SQL Server 安裝程式] 來新增成員資格架構 ([按一下以查看完整大小的影像](creating-the-membership-schema-in-sql-server-cs/_static/image21.png)) </span><span class="sxs-lookup"><span data-stu-id="97b02-221">**Figure 7**: Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image21.png))</span></span>

<span data-ttu-id="97b02-222">嚮導的第二個步驟會詢問我們是否要新增應用程式服務或移除它們。</span><span class="sxs-lookup"><span data-stu-id="97b02-222">The second step in the wizard asks us whether we want to add the application services or remove them.</span></span> <span data-ttu-id="97b02-223">由於我們想要加入所需的資料表、views 和預存程式 `SqlMembershipProvider` ，請選擇 [設定 SQL Server 的應用程式服務] 選項。</span><span class="sxs-lookup"><span data-stu-id="97b02-223">Since we want to add the tables, views, and stored procedures necessary for the `SqlMembershipProvider`, choose the Configure SQL Server for application services option.</span></span> <span data-ttu-id="97b02-224">稍後，如果您想要從資料庫中移除此架構，請重新執行此嚮導，但改為選擇 [從現有的資料庫移除應用程式服務資訊] 選項。</span><span class="sxs-lookup"><span data-stu-id="97b02-224">Later, if you want to remove this schema from your database, re-run this wizard, but instead choose the Remove application services information from an existing database option.</span></span>

<span data-ttu-id="97b02-225">[![選擇 [設定應用程式服務 SQL Server] 選項](creating-the-membership-schema-in-sql-server-cs/_static/image23.png)](creating-the-membership-schema-in-sql-server-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="97b02-225">[![Choose the Configure SQL Server for Application Services Option](creating-the-membership-schema-in-sql-server-cs/_static/image23.png)](creating-the-membership-schema-in-sql-server-cs/_static/image22.png)</span></span>

<span data-ttu-id="97b02-226">**圖 8**：選擇 [設定應用程式服務 SQL Server] 選項 ([按一下以查看完整大小的影像](creating-the-membership-schema-in-sql-server-cs/_static/image24.png)) </span><span class="sxs-lookup"><span data-stu-id="97b02-226">**Figure 8**: Choose the Configure SQL Server for Application Services Option ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image24.png))</span></span>

<span data-ttu-id="97b02-227">第三個步驟會提示您輸入資料庫資訊：伺服器名稱、驗證資訊，以及資料庫名稱。</span><span class="sxs-lookup"><span data-stu-id="97b02-227">The third step prompts for the database information: the server name, authentication information, and the database name.</span></span> <span data-ttu-id="97b02-228">如果您已遵循本教學課程，並已將資料庫附加至，並將它重新命名為，請 `SecurityTutorials.mdf` `App_Data` `localhost\InstanceName` `SecurityTutorialsDatabase` 使用下列值：</span><span class="sxs-lookup"><span data-stu-id="97b02-228">If you have been following along with this tutorial and have added the `SecurityTutorials.mdf` database to `App_Data`, attached it to `localhost\InstanceName`, and renamed it to `SecurityTutorialsDatabase`, then use the following values:</span></span>

- <span data-ttu-id="97b02-229">伺服器：`localhost\InstanceName`</span><span class="sxs-lookup"><span data-stu-id="97b02-229">Server: `localhost\InstanceName`</span></span>
- <span data-ttu-id="97b02-230">Windows 驗證</span><span class="sxs-lookup"><span data-stu-id="97b02-230">Windows authentication</span></span>
- <span data-ttu-id="97b02-231">資料庫： `SecurityTutorialsDatabase`</span><span class="sxs-lookup"><span data-stu-id="97b02-231">Database: `SecurityTutorialsDatabase`</span></span>

<span data-ttu-id="97b02-232">[![輸入資料庫資訊](creating-the-membership-schema-in-sql-server-cs/_static/image26.png)](creating-the-membership-schema-in-sql-server-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="97b02-232">[![Enter the Database Information](creating-the-membership-schema-in-sql-server-cs/_static/image26.png)](creating-the-membership-schema-in-sql-server-cs/_static/image25.png)</span></span>

<span data-ttu-id="97b02-233">**圖 9**：輸入資料庫資訊 ([按一下以查看完整大小的影像](creating-the-membership-schema-in-sql-server-cs/_static/image27.png)) </span><span class="sxs-lookup"><span data-stu-id="97b02-233">**Figure 9**: Enter the Database Information ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image27.png))</span></span>

<span data-ttu-id="97b02-234">輸入資料庫資訊之後，請按 [下一步]。</span><span class="sxs-lookup"><span data-stu-id="97b02-234">After entering the database information, click Next.</span></span> <span data-ttu-id="97b02-235">最後一個步驟會摘要說明將採取的步驟。</span><span class="sxs-lookup"><span data-stu-id="97b02-235">The final step summarizes the steps that will be taken.</span></span> <span data-ttu-id="97b02-236">按一下 [下一步] 以安裝應用程式服務，然後完成嚮導完成。</span><span class="sxs-lookup"><span data-stu-id="97b02-236">Click Next to install the application services and then Finish to complete the wizard.</span></span>

> [!NOTE]
> <span data-ttu-id="97b02-237">如果您使用 Management Studio 附加資料庫，並重新命名資料庫檔案，請務必先卸離資料庫並關閉 Management Studio，然後再重新開啟 Visual Studio。</span><span class="sxs-lookup"><span data-stu-id="97b02-237">If you used Management Studio to attach the database and rename the database file, be sure to detach the database and close Management Studio before reopening Visual Studio.</span></span> <span data-ttu-id="97b02-238">若要卸離 `SecurityTutorialsDatabase` 資料庫，請以滑鼠右鍵按一下資料庫名稱，然後從 [工作] 功能表選擇 [卸離]。</span><span class="sxs-lookup"><span data-stu-id="97b02-238">To detach the `SecurityTutorialsDatabase` database, right-click on the database name and, from the Tasks menu, choose Detach.</span></span>

<span data-ttu-id="97b02-239">完成嚮導之後，請返回 Visual Studio，然後流覽至資料庫總管。</span><span class="sxs-lookup"><span data-stu-id="97b02-239">Upon completion of the wizard, return to Visual Studio and navigate to the Database Explorer.</span></span> <span data-ttu-id="97b02-240">展開 [資料表] 資料夾。</span><span class="sxs-lookup"><span data-stu-id="97b02-240">Expand the Tables folder.</span></span> <span data-ttu-id="97b02-241">您應該會看到一系列的資料表，其名稱開頭為前置詞 `aspnet_` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-241">You should see a series of tables whose names start with the prefix `aspnet_`.</span></span> <span data-ttu-id="97b02-242">同樣地，您可以在 [Views] 和 [預存程式] 資料夾下找到各種不同的 views 和預存程式。</span><span class="sxs-lookup"><span data-stu-id="97b02-242">Likewise, a variety of views and stored procedures can be found under the Views and Stored Procedures folders.</span></span> <span data-ttu-id="97b02-243">這些資料庫物件會構成應用程式服務架構。</span><span class="sxs-lookup"><span data-stu-id="97b02-243">These database objects make up the application services schema.</span></span> <span data-ttu-id="97b02-244">我們將在步驟3中檢查成員資格和角色特定的資料庫物件。</span><span class="sxs-lookup"><span data-stu-id="97b02-244">We will examine the membership- and role-specific database objects in Step 3.</span></span>

<span data-ttu-id="97b02-245">[![資料庫中已加入各種資料表、Views 和預存程式](creating-the-membership-schema-in-sql-server-cs/_static/image29.png)](creating-the-membership-schema-in-sql-server-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="97b02-245">[![A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database](creating-the-membership-schema-in-sql-server-cs/_static/image29.png)](creating-the-membership-schema-in-sql-server-cs/_static/image28.png)</span></span>

<span data-ttu-id="97b02-246">**圖 10**：已在資料庫中加入各種資料表、視圖及預存程式 ([按一下以查看完整大小的影像](creating-the-membership-schema-in-sql-server-cs/_static/image30.png)) </span><span class="sxs-lookup"><span data-stu-id="97b02-246">**Figure 10**: A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image30.png))</span></span>

> [!NOTE]
> <span data-ttu-id="97b02-247">`aspnet_regsql.exe`工具的圖形化使用者介面會安裝整個應用程式服務架構。</span><span class="sxs-lookup"><span data-stu-id="97b02-247">The `aspnet_regsql.exe` tool's graphical user interface installs the entire application services schema.</span></span> <span data-ttu-id="97b02-248">但是，當 `aspnet_regsql.exe` 您從命令列執行時，可以指定要安裝的特定應用程式服務元件 (或移除) 。</span><span class="sxs-lookup"><span data-stu-id="97b02-248">But when executing `aspnet_regsql.exe` from the command-line you can specify what particular application services components to install (or remove).</span></span> <span data-ttu-id="97b02-249">因此，如果您只想要加入和提供者所需的資料表、views 和預存程式 `SqlMembershipProvider` `SqlRoleProvider` ，請 `aspnet_regsql.exe` 從命令列執行。</span><span class="sxs-lookup"><span data-stu-id="97b02-249">Therefore, if you want to add just the tables, views, and stored procedures necessary for the `SqlMembershipProvider` and `SqlRoleProvider` providers, run `aspnet_regsql.exe` from the command-line.</span></span> <span data-ttu-id="97b02-250">或者，您可以手動執行所使用的適當 T-sql 建立腳本子集 `aspnet_regsql.exe` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-250">Alternatively, you can manually run the appropriate subset of T-SQL create scripts used by `aspnet_regsql.exe`.</span></span> <span data-ttu-id="97b02-251">這些腳本位於 `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` 資料夾中，其名稱如、、、、等等 `InstallCommon.sql` `InstallMembership.sql` `InstallRoles.sql` `InstallProfile.sql` `InstallSqlState.sql` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-251">These scripts are located in the `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder with names like `InstallCommon.sql`,`InstallMembership.sql`,`InstallRoles.sql`, `InstallProfile.sql`,`InstallSqlState.sql`, and so on.</span></span>

<span data-ttu-id="97b02-252">至此，我們已建立所需的資料庫物件 `SqlMembershipProvider` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-252">At this point we have created the database objects needed by the `SqlMembershipProvider`.</span></span> <span data-ttu-id="97b02-253">不過，我們仍然需要指示成員資格架構應該使用 (而不是 `SqlMembershipProvider` `ActiveDirectoryMembershipProvider`) ，而且 `SqlMembershipProvider` 應該使用 `SecurityTutorials` 資料庫。</span><span class="sxs-lookup"><span data-stu-id="97b02-253">However, we still need to instruct the Membership framework that it should use the `SqlMembershipProvider` (versus, say, the `ActiveDirectoryMembershipProvider`) and that the `SqlMembershipProvider` should use the `SecurityTutorials` database.</span></span> <span data-ttu-id="97b02-254">我們將探討如何指定要使用的提供者，以及如何自訂步驟4中所選取提供者的設定。</span><span class="sxs-lookup"><span data-stu-id="97b02-254">We'll look at how to specify what provider to use and how to customize the selected provider's settings in Step 4.</span></span> <span data-ttu-id="97b02-255">但是首先，讓我們更深入探討剛建立的資料庫物件。</span><span class="sxs-lookup"><span data-stu-id="97b02-255">But first, let's take a deeper look at the database objects that were just created.</span></span>

## <a name="step-3-a-look-at-the-schemas-core-tables"></a><span data-ttu-id="97b02-256">步驟3：查看架構的核心資料表</span><span class="sxs-lookup"><span data-stu-id="97b02-256">Step 3: A Look at the Schema's Core Tables</span></span>

<span data-ttu-id="97b02-257">在 ASP.NET 應用程式中使用成員資格和角色架構時，提供者會封裝執行詳細資料。</span><span class="sxs-lookup"><span data-stu-id="97b02-257">When working with the Membership and Roles frameworks in an ASP.NET application, the implementation details are encapsulated by the provider.</span></span> <span data-ttu-id="97b02-258">在後續的教學課程中，我們會透過 .NET Framework 的和類別，與這些架構進行介面 `Membership` `Roles` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-258">In future tutorials we will interface with these frameworks via the .NET Framework's `Membership` and `Roles` classes.</span></span> <span data-ttu-id="97b02-259">使用這些高階 Api 時，我們不需要關注您自己的低層級詳細資料，例如執行的查詢或和所修改的資料表 `SqlMembershipProvider` `SqlRoleProvider` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-259">When using these high-level APIs we do not need to concern ourselves with the low-level details, like what queries are executed or what tables are modified by the `SqlMembershipProvider` and `SqlRoleProvider`.</span></span>

<span data-ttu-id="97b02-260">如此一來，我們就可以安心地使用成員資格和角色架構，而不需要探索在步驟2中建立的資料庫架構。</span><span class="sxs-lookup"><span data-stu-id="97b02-260">Given this, we could confidently use the Membership and Roles frameworks without having explored the database schema created in Step 2.</span></span> <span data-ttu-id="97b02-261">不過，建立資料表來儲存應用程式資料時，可能需要建立與使用者或角色相關的實體。</span><span class="sxs-lookup"><span data-stu-id="97b02-261">However, when creating the tables to store application data we may need to create entities that relate to users or roles.</span></span> <span data-ttu-id="97b02-262">在 `SqlMembershipProvider` `SqlRoleProvider` 建立應用程式資料表與步驟2中建立之資料表之間的外鍵條件約束時，有助於熟悉和架構。</span><span class="sxs-lookup"><span data-stu-id="97b02-262">It helps to have a familiarity with the `SqlMembershipProvider` and `SqlRoleProvider` schemas when establishing foreign key constraints between the application data tables and those tables created in Step 2.</span></span> <span data-ttu-id="97b02-263">此外，在某些罕見的情況下，我們可能需要直接在資料庫層級與使用者和角色存放區進行介面 (，而不是透過 `Membership` 或 `Roles` 類別) 。</span><span class="sxs-lookup"><span data-stu-id="97b02-263">Moreover, in certain rare circumstances we may need to interface with the user and role stores directly at the database level (instead of through the `Membership` or `Roles` classes).</span></span>

### <a name="partitioning-the-user-store-into-applications"></a><span data-ttu-id="97b02-264">將使用者存放區分割為應用程式</span><span class="sxs-lookup"><span data-stu-id="97b02-264">Partitioning the User Store Into Applications</span></span>

<span data-ttu-id="97b02-265">成員資格和角色架構的設計，就是可以在許多不同的應用程式之間共用單一使用者和角色存放區。</span><span class="sxs-lookup"><span data-stu-id="97b02-265">The Membership and Roles frameworks are designed such that a single user and role store can be shared among many different applications.</span></span> <span data-ttu-id="97b02-266">使用成員資格或角色架構的 ASP.NET 應用程式，必須指定要使用的應用程式分割區。</span><span class="sxs-lookup"><span data-stu-id="97b02-266">An ASP.NET application that uses the Membership or Roles frameworks must specify what application partition to use.</span></span> <span data-ttu-id="97b02-267">簡單地說，多個 web 應用程式可以使用相同的使用者和角色存放區。</span><span class="sxs-lookup"><span data-stu-id="97b02-267">In short, multiple web applications can use the same user and role stores.</span></span> <span data-ttu-id="97b02-268">圖11描述分割成三個應用程式的使用者和角色存放區： HRSite、CustomerSite 和 SalesSite。</span><span class="sxs-lookup"><span data-stu-id="97b02-268">Figure 11 depicts user and role stores that are partitioned into three applications: HRSite, CustomerSite, and SalesSite.</span></span> <span data-ttu-id="97b02-269">這三個 web 應用程式都有自己的唯一使用者和角色，但它們都將其使用者帳戶和角色資訊實際儲存在相同的資料庫資料表中。</span><span class="sxs-lookup"><span data-stu-id="97b02-269">These three web applications each have their own unique users and roles, yet they all physically store their user account and role information in the same database tables.</span></span>

<span data-ttu-id="97b02-270">[![使用者帳戶可能會分割成多個應用程式](creating-the-membership-schema-in-sql-server-cs/_static/image32.png)](creating-the-membership-schema-in-sql-server-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="97b02-270">[![User Accounts May Be Partitioned Across Multiple Applications](creating-the-membership-schema-in-sql-server-cs/_static/image32.png)](creating-the-membership-schema-in-sql-server-cs/_static/image31.png)</span></span>

<span data-ttu-id="97b02-271">**圖 11**：使用者帳戶可能會分割成多個應用程式 ([按一下以查看完整大小的影像](creating-the-membership-schema-in-sql-server-cs/_static/image33.png)) </span><span class="sxs-lookup"><span data-stu-id="97b02-271">**Figure 11**: User Accounts May Be Partitioned Across Multiple Applications ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image33.png))</span></span>

<span data-ttu-id="97b02-272">`aspnet_Applications`資料表是定義這些資料分割的定義。</span><span class="sxs-lookup"><span data-stu-id="97b02-272">The `aspnet_Applications` table is what defines these partitions.</span></span> <span data-ttu-id="97b02-273">使用資料庫儲存使用者帳戶資訊的每個應用程式都是以這個資料表中的資料列來表示。</span><span class="sxs-lookup"><span data-stu-id="97b02-273">Each application that uses the database to store user account information is represented by a row in this table.</span></span> <span data-ttu-id="97b02-274">`aspnet_Applications`資料表有四個數據行： `ApplicationId` 、 `ApplicationName` 、 `LoweredApplicationName` 和 `Description` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-274">The `aspnet_Applications` table has four columns: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`, and `Description`.</span></span> <span data-ttu-id="97b02-275">`ApplicationId` 的類型是 [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) ，而且是資料表的主鍵; 為 `ApplicationName` 每個應用程式提供獨特的易記名稱。</span><span class="sxs-lookup"><span data-stu-id="97b02-275">`ApplicationId` is of type [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) and is the table's primary key; `ApplicationName` provides a unique human-friendly name for each application.</span></span>

<span data-ttu-id="97b02-276">其他成員資格和角色相關資料表會連結回 `ApplicationId` 中的欄位 `aspnet_Applications` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-276">The other Membership- and Role-related tables link back to the `ApplicationId` field in `aspnet_Applications`.</span></span> <span data-ttu-id="97b02-277">例如， `aspnet_Users` 資料表（其中包含每個使用者帳戶的記錄）有 `ApplicationId` 外鍵欄位; 資料表的 ditto `aspnet_Roles` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-277">For example, the `aspnet_Users` table, which contains a record for each user account, has an `ApplicationId` foreign key field; ditto for the `aspnet_Roles` table.</span></span> <span data-ttu-id="97b02-278">`ApplicationId`這些資料表中的欄位會指定使用者帳戶或角色所屬的應用程式磁碟分割。</span><span class="sxs-lookup"><span data-stu-id="97b02-278">The `ApplicationId` field in these tables specifies the application partition the user account or role belongs to.</span></span>

### <a name="storing-user-account-information"></a><span data-ttu-id="97b02-279">儲存使用者帳戶資訊</span><span class="sxs-lookup"><span data-stu-id="97b02-279">Storing User Account Information</span></span>

<span data-ttu-id="97b02-280">使用者帳戶資訊會保存在兩個數據表中： `aspnet_Users` 和 `aspnet_Membership` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-280">User account information is housed in two tables: `aspnet_Users` and `aspnet_Membership`.</span></span> <span data-ttu-id="97b02-281">`aspnet_Users`資料表包含保存必要使用者帳戶資訊的欄位。</span><span class="sxs-lookup"><span data-stu-id="97b02-281">The `aspnet_Users` table contains fields that hold the essential user account information.</span></span> <span data-ttu-id="97b02-282">最相關的三個數據行是：</span><span class="sxs-lookup"><span data-stu-id="97b02-282">The three most pertinent columns are:</span></span>

- `UserId`
- `UserName`
- `ApplicationId`

<span data-ttu-id="97b02-283">`UserId` 這是主鍵 (和類型 `uniqueidentifier`) 。</span><span class="sxs-lookup"><span data-stu-id="97b02-283">`UserId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="97b02-284">`UserName` 的型別 `nvarchar(256)` 和密碼都組成使用者的認證。</span><span class="sxs-lookup"><span data-stu-id="97b02-284">`UserName` is of type `nvarchar(256)` and, along with the password, makes up the user's credentials.</span></span> <span data-ttu-id="97b02-285"> (使用者的密碼會儲存在資料表中 `aspnet_Membership` 。 ) 將 `ApplicationId` 使用者帳戶連結至中的特定應用程式 `aspnet_Applications` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-285">(A user's password is stored in the `aspnet_Membership` table.) `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="97b02-286">和資料行上有一個複合[ `UNIQUE` 條件約束](https://msdn.microsoft.com/library/ms191166.aspx) `UserName` `ApplicationId` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-286">There is a composite [`UNIQUE` constraint](https://msdn.microsoft.com/library/ms191166.aspx) on the `UserName` and `ApplicationId` columns.</span></span> <span data-ttu-id="97b02-287">這可確保在指定的應用程式中，每個使用者名稱都是唯一的，但它允許在 `UserName` 不同的應用程式中使用相同的使用者名稱。</span><span class="sxs-lookup"><span data-stu-id="97b02-287">This ensures that in a given application each UserName is unique, yet it allows for the same `UserName` to be used in different applications.</span></span>

<span data-ttu-id="97b02-288">此 `aspnet_Membership` 表格包含其他使用者帳戶資訊，例如使用者的密碼、電子郵件地址、上次登入日期和時間等等。</span><span class="sxs-lookup"><span data-stu-id="97b02-288">The `aspnet_Membership` table includes additional user account information, like the user's password, email address, the last login date and time, and so forth.</span></span> <span data-ttu-id="97b02-289">和資料表中的記錄之間有一對一的對應關係 `aspnet_Users` `aspnet_Membership` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-289">There is a one-to-one correspondence between records in the `aspnet_Users` and `aspnet_Membership` tables.</span></span> <span data-ttu-id="97b02-290">此關聯性是由中的欄位來確保 `UserId` ，此欄位 `aspnet_Membership` 可做為資料表的主鍵。</span><span class="sxs-lookup"><span data-stu-id="97b02-290">This relationship is ensured by the `UserId` field in `aspnet_Membership`, which serves as the table's primary key.</span></span> <span data-ttu-id="97b02-291">`aspnet_Users`和資料表一樣， `aspnet_Membership` 包含將 `ApplicationId` 此資訊系結至特定應用程式分割區的欄位。</span><span class="sxs-lookup"><span data-stu-id="97b02-291">Like the `aspnet_Users` table, `aspnet_Membership` includes an `ApplicationId` field that ties this information to a particular application partition.</span></span>

### <a name="securing-passwords"></a><span data-ttu-id="97b02-292">保護密碼</span><span class="sxs-lookup"><span data-stu-id="97b02-292">Securing Passwords</span></span>

<span data-ttu-id="97b02-293">密碼資訊會儲存在 `aspnet_Membership` 資料表中。</span><span class="sxs-lookup"><span data-stu-id="97b02-293">Password information is stored in the `aspnet_Membership` table.</span></span> <span data-ttu-id="97b02-294">`SqlMembershipProvider`可以使用下列三種技術的其中一種，將密碼儲存在資料庫中：</span><span class="sxs-lookup"><span data-stu-id="97b02-294">The `SqlMembershipProvider` allows for passwords to be stored in the database using one of the following three techniques:</span></span>

- <span data-ttu-id="97b02-295">**Clear** -密碼會以純文字的形式儲存在資料庫中。</span><span class="sxs-lookup"><span data-stu-id="97b02-295">**Clear** - the password is stored in the database as plain-text.</span></span> <span data-ttu-id="97b02-296">我強烈建議您不要使用這個選項。</span><span class="sxs-lookup"><span data-stu-id="97b02-296">I strongly discourage using this option.</span></span> <span data-ttu-id="97b02-297">如果資料庫遭到入侵，則是由尋找後門的駭客或具有資料庫存取權的不滿意員工所提供-每一位使用者的認證都可供採用。</span><span class="sxs-lookup"><span data-stu-id="97b02-297">If the database is compromised - be it by a hacker who finds a back door or a disgruntled employee who has database access - every single user's credentials are there for the taking.</span></span>
- <span data-ttu-id="97b02-298">**哈** 希-密碼會使用單向雜湊演算法和隨機產生的 salt 值進行雜湊處理。</span><span class="sxs-lookup"><span data-stu-id="97b02-298">**Hashed** - passwords are hashed using a one-way hash algorithm and a randomly generated salt value.</span></span> <span data-ttu-id="97b02-299">此雜湊值 (以及 salt) 會儲存在資料庫中。</span><span class="sxs-lookup"><span data-stu-id="97b02-299">This hashed value (along with the salt) is stored in the database.</span></span>
- <span data-ttu-id="97b02-300">已**加密**-加密版本的密碼會儲存在資料庫中。</span><span class="sxs-lookup"><span data-stu-id="97b02-300">**Encrypted** - an encrypted version of the password is stored in the database.</span></span>

<span data-ttu-id="97b02-301">使用的密碼儲存技術取決於 `SqlMembershipProvider` 中指定的設定 `Web.config` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-301">The password storage technique used depends on the `SqlMembershipProvider` settings specified in `Web.config`.</span></span> <span data-ttu-id="97b02-302">我們將探討如何自訂 `SqlMembershipProvider` 步驟4中的設定。</span><span class="sxs-lookup"><span data-stu-id="97b02-302">We will look at customizing the `SqlMembershipProvider` settings in Step 4.</span></span> <span data-ttu-id="97b02-303">預設行為是儲存密碼的雜湊。</span><span class="sxs-lookup"><span data-stu-id="97b02-303">The default behavior is to store the hash of the password.</span></span>

<span data-ttu-id="97b02-304">負責儲存密碼的資料行為 `Password` 、 `PasswordFormat` 和 `PasswordSalt` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-304">The columns responsible for storing the password are `Password`, `PasswordFormat`, and `PasswordSalt`.</span></span> <span data-ttu-id="97b02-305">`PasswordFormat` 這是類型的欄位， `int` 其值表示用於儲存密碼的技術：0表示清除，1表示雜湊，2表示加密。</span><span class="sxs-lookup"><span data-stu-id="97b02-305">`PasswordFormat` is a field of type `int` whose value indicates the technique used for storing the password: 0 for Clear; 1 for Hashed; 2 for Encrypted.</span></span> <span data-ttu-id="97b02-306">`PasswordSalt` 無論使用的密碼儲存技術為何，都會指派隨機產生的字串。 `PasswordSalt` 只有在計算密碼的雜湊時，才會使用的值。</span><span class="sxs-lookup"><span data-stu-id="97b02-306">`PasswordSalt` is assigned a randomly generated string regardless of the password storage technique used; the value of `PasswordSalt` is only used when computing the hash of the password.</span></span> <span data-ttu-id="97b02-307">最後， `Password` 資料行包含實際的密碼資料，也就是純文字密碼、密碼的雜湊或加密密碼。</span><span class="sxs-lookup"><span data-stu-id="97b02-307">Finally, the `Password` column contains the actual password data, be it the plain-text password, the hash of the password, or the encrypted password.</span></span>

<span data-ttu-id="97b02-308">[表 1] 說明在儲存密碼 MySecret 時，這三個數據行的各種儲存技巧可能會有什麼樣子！</span><span class="sxs-lookup"><span data-stu-id="97b02-308">Table 1 illustrates what these three columns might look like for the various storage techniques when storing the password MySecret!</span></span> <span data-ttu-id="97b02-309">.</span><span class="sxs-lookup"><span data-stu-id="97b02-309">.</span></span>

| <span data-ttu-id="97b02-310">**儲存技術 &lt; \_ o3a \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="97b02-310">**Storage Technique&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="97b02-311">**密碼 &lt; \_ o3a \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="97b02-311">**Password&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="97b02-312">**PasswordFormat &lt; \_ o3a \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="97b02-312">**PasswordFormat&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="97b02-313">**PasswordSalt &lt; \_ o3a \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="97b02-313">**PasswordSalt&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="97b02-314">Clear</span><span class="sxs-lookup"><span data-stu-id="97b02-314">Clear</span></span> | <span data-ttu-id="97b02-315">MySecret!</span><span class="sxs-lookup"><span data-stu-id="97b02-315">MySecret!</span></span> | <span data-ttu-id="97b02-316">0</span><span class="sxs-lookup"><span data-stu-id="97b02-316">0</span></span> | <span data-ttu-id="97b02-317">tTnkPlesqissc2y2SMEygA = =</span><span class="sxs-lookup"><span data-stu-id="97b02-317">tTnkPlesqissc2y2SMEygA==</span></span> |
| <span data-ttu-id="97b02-318">散 列</span><span class="sxs-lookup"><span data-stu-id="97b02-318">Hashed</span></span> | <span data-ttu-id="97b02-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM =</span><span class="sxs-lookup"><span data-stu-id="97b02-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span></span> | <span data-ttu-id="97b02-320">1</span><span class="sxs-lookup"><span data-stu-id="97b02-320">1</span></span> | <span data-ttu-id="97b02-321">wFgjUfhdUFOCKQiI61vtiQ = =</span><span class="sxs-lookup"><span data-stu-id="97b02-321">wFgjUfhdUFOCKQiI61vtiQ==</span></span> |
| <span data-ttu-id="97b02-322">已加密</span><span class="sxs-lookup"><span data-stu-id="97b02-322">Encrypted</span></span> | <span data-ttu-id="97b02-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span><span class="sxs-lookup"><span data-stu-id="97b02-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span></span> | <span data-ttu-id="97b02-324">2</span><span class="sxs-lookup"><span data-stu-id="97b02-324">2</span></span> | <span data-ttu-id="97b02-325">LSRzhGS/aa/oqAXGLHJNBw = =</span><span class="sxs-lookup"><span data-stu-id="97b02-325">LSRzhGS/aa/oqAXGLHJNBw==</span></span> |

<span data-ttu-id="97b02-326">**表 1**：儲存密碼 MySecret 時，密碼相關欄位的範例值！</span><span class="sxs-lookup"><span data-stu-id="97b02-326">**Table 1**: Example Values for the Password-Related Fields When Storing the Password MySecret!</span></span>

> [!NOTE]
> <span data-ttu-id="97b02-327">使用的特定加密或雜湊演算法 `SqlMembershipProvider` 取決於元素中的設定 `<machineKey>` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-327">The particular encryption or hashing algorithm used by the `SqlMembershipProvider` is determined by the settings in the `<machineKey>` element.</span></span> <span data-ttu-id="97b02-328">我們已在 <a id="Tutorial3"></a> [*表單驗證設定和高級主題*](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md)教學課程的步驟3中討論過這個設定元素。</span><span class="sxs-lookup"><span data-stu-id="97b02-328">We discussed this configuration element in Step 3 of the <a id="Tutorial3"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md) tutorial.</span></span>

### <a name="storing-roles-and-role-associations"></a><span data-ttu-id="97b02-329">儲存角色和角色關聯</span><span class="sxs-lookup"><span data-stu-id="97b02-329">Storing Roles and Role Associations</span></span>

<span data-ttu-id="97b02-330">角色架構可讓開發人員定義一組角色，並指定哪些使用者屬於哪些角色。</span><span class="sxs-lookup"><span data-stu-id="97b02-330">The Roles framework allows developers to define a set of roles and specify what users belong to what roles.</span></span> <span data-ttu-id="97b02-331">這項資訊會透過兩個數據表，在資料庫中加以捕獲： `aspnet_Roles` 和 `aspnet_UsersInRoles` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-331">This information is captured in the database through two tables: `aspnet_Roles` and `aspnet_UsersInRoles`.</span></span> <span data-ttu-id="97b02-332">資料表中的每一筆記錄都 `aspnet_Roles` 代表特定應用程式的角色。</span><span class="sxs-lookup"><span data-stu-id="97b02-332">Each record in the `aspnet_Roles` table represents a role for a particular application.</span></span> <span data-ttu-id="97b02-333">資料表很類似于 `aspnet_Users` 資料表， `aspnet_Roles` 有三個與我們討論相關的資料行：</span><span class="sxs-lookup"><span data-stu-id="97b02-333">Much like the `aspnet_Users` table, the `aspnet_Roles` table has three columns pertinent to our discussion:</span></span>

- `RoleId`
- `RoleName`
- `ApplicationId`

<span data-ttu-id="97b02-334">`RoleId` 這是主鍵 (和類型 `uniqueidentifier`) 。</span><span class="sxs-lookup"><span data-stu-id="97b02-334">`RoleId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="97b02-335">`RoleName` 是 `nvarchar(256)` 類型。</span><span class="sxs-lookup"><span data-stu-id="97b02-335">`RoleName` is of type `nvarchar(256)`.</span></span> <span data-ttu-id="97b02-336">並將 `ApplicationId` 使用者帳戶連結至中的特定應用程式 `aspnet_Applications` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-336">And `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="97b02-337">和資料行上有一個複合 `UNIQUE` 條件約束 `RoleName` ，可 `ApplicationId` 確保在指定的應用程式中，每個角色名稱都是唯一的。</span><span class="sxs-lookup"><span data-stu-id="97b02-337">There is a composite `UNIQUE` constraint on the `RoleName` and `ApplicationId` columns, ensuring that in a given application each role name is unique.</span></span>

<span data-ttu-id="97b02-338">`aspnet_UsersInRoles`資料表可做為使用者和角色之間的對應。</span><span class="sxs-lookup"><span data-stu-id="97b02-338">The `aspnet_UsersInRoles` table serves as a mapping between users and roles.</span></span> <span data-ttu-id="97b02-339">只有兩個數據行 `UserId` ，而且 `RoleId` 它們組成複合主鍵。</span><span class="sxs-lookup"><span data-stu-id="97b02-339">There are only two columns - `UserId` and `RoleId` - and together they make up a composite primary key.</span></span>

## <a name="step-4-specifying-the-provider-and-customizing-its-settings"></a><span data-ttu-id="97b02-340">步驟4：指定提供者和自訂其設定</span><span class="sxs-lookup"><span data-stu-id="97b02-340">Step 4: Specifying the Provider and Customizing Its Settings</span></span>

<span data-ttu-id="97b02-341">所有支援提供者模型的架構（例如成員資格和角色架構）本身缺乏實作為本身，而是將該責任委派給提供者類別。</span><span class="sxs-lookup"><span data-stu-id="97b02-341">All of the frameworks that support the provider model - such as the Membership and Roles frameworks - lack implementation details themselves and instead delegate that responsibility to a provider class.</span></span> <span data-ttu-id="97b02-342">在成員資格架構的情況下， `Membership` 類別會定義用來管理使用者帳戶的 API，但不會直接與任何使用者存放區互動。</span><span class="sxs-lookup"><span data-stu-id="97b02-342">In the case of the Membership framework, the `Membership` class defines the API for managing user accounts, but it does not interact directly with any user store.</span></span> <span data-ttu-id="97b02-343">相反地， `Membership` 類別的方法會將要求交給設定的提供者，我們將使用 `SqlMembershipProvider` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-343">Rather, the `Membership` class's methods hand off the request to the configured provider - we will be using the `SqlMembershipProvider`.</span></span> <span data-ttu-id="97b02-344">當我們叫用類別中的其中一個方法時 `Membership` ，成員資格架構如何知道將呼叫委派給 `SqlMembershipProvider` ？</span><span class="sxs-lookup"><span data-stu-id="97b02-344">When we invoke one of the methods in the `Membership` class, how does the Membership framework know to delegate the call to the `SqlMembershipProvider`?</span></span>

<span data-ttu-id="97b02-345">`Membership`類別具有[ `Providers` 屬性](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx)，其中包含可供成員資格架構使用的所有已註冊提供者類別的參考。</span><span class="sxs-lookup"><span data-stu-id="97b02-345">The `Membership` class has a [`Providers` property](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) that contains a reference to all of the registered provider classes available for use by the Membership framework.</span></span> <span data-ttu-id="97b02-346">每個已註冊的提供者都有相關聯的名稱和類型。</span><span class="sxs-lookup"><span data-stu-id="97b02-346">Each registered provider has an associated name and type.</span></span> <span data-ttu-id="97b02-347">此名稱提供了方便使用的方式來參考集合中的特定提供者 `Providers` ，而類型則會識別提供者類別。</span><span class="sxs-lookup"><span data-stu-id="97b02-347">The name offers a human-friendly way to reference a particular provider in the `Providers` collection, while the type identifies the provider class.</span></span> <span data-ttu-id="97b02-348">此外，每個已註冊的提供者都可能包含設定。</span><span class="sxs-lookup"><span data-stu-id="97b02-348">Moreover, each registered provider may include configuration settings.</span></span> <span data-ttu-id="97b02-349">成員資格架構的設定設定包括 `passwordFormat` 與 `requiresUniqueEmail` 其他許多專案。</span><span class="sxs-lookup"><span data-stu-id="97b02-349">Configuration settings for the Membership framework include `passwordFormat` and `requiresUniqueEmail`, among many others.</span></span> <span data-ttu-id="97b02-350">如需所使用之設定設定的完整清單，請參閱 [表 2] `SqlMembershipProvider` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-350">See Table 2 for a complete list of configuration settings used by the `SqlMembershipProvider`.</span></span>

<span data-ttu-id="97b02-351">`Providers`屬性的內容是透過 web 應用程式的設定來指定。</span><span class="sxs-lookup"><span data-stu-id="97b02-351">The `Providers` property's contents are specified through the web application's configuration settings.</span></span> <span data-ttu-id="97b02-352">根據預設，所有的 web 應用程式都有一個名為的提供者 `AspNetSqlMembershipProvider` 類型 `SqlMembershipProvider` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-352">By default, all web applications have a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span> <span data-ttu-id="97b02-353">此預設成員資格提供者是在 (登錄于 `machine.config` `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG)` 下列位置：</span><span class="sxs-lookup"><span data-stu-id="97b02-353">This default Membership provider is registered in `machine.config` (located at `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG)`:</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample1.xml)]

<span data-ttu-id="97b02-354">如上面的[ `<membership>` 標記所示](https://msdn.microsoft.com/library/1b9hw62f.aspx)，專案會定義成員資格架構的設定，而[ `<providers>` 子項目](https://msdn.microsoft.com/library/6d4936ht.aspx)會指定已註冊的提供者。</span><span class="sxs-lookup"><span data-stu-id="97b02-354">As the markup above shows, the [`<membership>` element](https://msdn.microsoft.com/library/1b9hw62f.aspx) defines the configuration settings for the Membership framework while the [`<providers>` child element](https://msdn.microsoft.com/library/6d4936ht.aspx) specifies the registered providers.</span></span> <span data-ttu-id="97b02-355">您可以使用或元素來新增或移除提供者 [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) ; 使用 [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) 元素可移除所有目前註冊的提供者。</span><span class="sxs-lookup"><span data-stu-id="97b02-355">Providers may be added or removed using the [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) or [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) elements; use the [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) element to remove all currently registered providers.</span></span> <span data-ttu-id="97b02-356">如上面的標記所示，會 `machine.config` 加入名為的提供者，其 `AspNetSqlMembershipProvider` 類型為 `SqlMembershipProvider` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-356">As the markup above shows, `machine.config` adds a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span>

<span data-ttu-id="97b02-357">除了 `name` 和 `type` 屬性之外，元素還 `<add>` 包含定義各種設定設定值的屬性。</span><span class="sxs-lookup"><span data-stu-id="97b02-357">In addition to the `name` and `type` attributes, the `<add>` element contains attributes that define the values for various configuring settings.</span></span> <span data-ttu-id="97b02-358">[表 2] 列出可用的 `SqlMembershipProvider` 特定設定，以及每個設定的描述。</span><span class="sxs-lookup"><span data-stu-id="97b02-358">Table 2 lists the available `SqlMembershipProvider`-specific configuration settings, along with a description of each.</span></span>

> [!NOTE]
> <span data-ttu-id="97b02-359">表2中記下的任何預設值都會參考類別中定義的預設值 `SqlMembershipProvider` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-359">Any default values noted in Table 2 refer to the default values defined in the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="97b02-360">請注意，並非所有的設定都 `AspNetSqlMembershipProvider` 對應至類別的預設值 `SqlMembershipProvider` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-360">Note that not all of the configuration settings in `AspNetSqlMembershipProvider` correspond to the default values of the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="97b02-361">例如，如果未在成員資格提供者中指定，此 `requiresUniqueEmail` 設定會預設為 true。</span><span class="sxs-lookup"><span data-stu-id="97b02-361">For example, if not specified in a Membership provider, the `requiresUniqueEmail` setting defaults to true.</span></span> <span data-ttu-id="97b02-362">但是，會 `AspNetSqlMembershipProvider` 明確指定的值來覆寫這個預設值 `false` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-362">However, the `AspNetSqlMembershipProvider` overrides this default value by explicitly specifying a value of `false`.</span></span>

| <span data-ttu-id="97b02-363">**設定 &lt; \_ o3a \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="97b02-363">**Setting&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="97b02-364">**描述 &lt; \_ o3a \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="97b02-364">**Description&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- |
| `ApplicationName` | <span data-ttu-id="97b02-365">回想一下，成員架構可讓單一使用者存放區跨多個應用程式進行分割。</span><span class="sxs-lookup"><span data-stu-id="97b02-365">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="97b02-366">這項設定表示成員資格提供者所使用的應用程式資料分割名稱。</span><span class="sxs-lookup"><span data-stu-id="97b02-366">This setting indicates the name of the application partition used by the Membership provider.</span></span> <span data-ttu-id="97b02-367">如果未明確指定此值，則會在執行時間將其設定為應用程式的虛擬根路徑的值。</span><span class="sxs-lookup"><span data-stu-id="97b02-367">If this value is not explicitly specified, it is set, at runtime, to the value of the application's virtual root path.</span></span> |
| `commandTimeout` | <span data-ttu-id="97b02-368">以秒為單位指定 SQL 命令逾時值 () 。</span><span class="sxs-lookup"><span data-stu-id="97b02-368">Specifies the SQL command timeout value (in seconds).</span></span> <span data-ttu-id="97b02-369">預設值是 30。</span><span class="sxs-lookup"><span data-stu-id="97b02-369">The default value is 30.</span></span> |
| `connectionStringName` | <span data-ttu-id="97b02-370">專案中 `<connectionStrings>` 用來連接到使用者存放區資料庫的連接字串名稱。</span><span class="sxs-lookup"><span data-stu-id="97b02-370">The name of the connection string in the `<connectionStrings>` element to use to connect to the user store database.</span></span> <span data-ttu-id="97b02-371">這是必要的值。</span><span class="sxs-lookup"><span data-stu-id="97b02-371">This value is required.</span></span> |
| `description` | <span data-ttu-id="97b02-372">提供已註冊之提供者的易記描述。</span><span class="sxs-lookup"><span data-stu-id="97b02-372">Provides a human-friendly description of the registered provider.</span></span> |
| `enablePasswordRetrieval` | <span data-ttu-id="97b02-373">指定使用者是否可以取出忘記的密碼。</span><span class="sxs-lookup"><span data-stu-id="97b02-373">Specifies whether users may retrieve their forgotten password.</span></span> <span data-ttu-id="97b02-374">預設值是 `false`。</span><span class="sxs-lookup"><span data-stu-id="97b02-374">The default value is `false`.</span></span> |
| `enablePasswordReset` | <span data-ttu-id="97b02-375">指出是否允許使用者重設其密碼。</span><span class="sxs-lookup"><span data-stu-id="97b02-375">Indicates whether users are allowed to reset their password.</span></span> <span data-ttu-id="97b02-376">預設為 `true`。</span><span class="sxs-lookup"><span data-stu-id="97b02-376">Defaults to `true`.</span></span> |
| `maxInvalidPasswordAttempts` | <span data-ttu-id="97b02-377">在使用者被鎖定之前，指定使用者在指定期間內可能發生的失敗登入嘗試次數上限 `passwordAttemptWindow` 。預設值為5。</span><span class="sxs-lookup"><span data-stu-id="97b02-377">The maximum number of unsuccessful login attempts that may occur for a given user during the specified `passwordAttemptWindow` before the user is locked out. The default value is 5.</span></span> |
| `minRequiredNonalphanumericCharacters` | <span data-ttu-id="97b02-378">必須出現在使用者密碼中的非英數位元數目下限。</span><span class="sxs-lookup"><span data-stu-id="97b02-378">The minimum number of non-alphanumeric characters that must appear in a user's password.</span></span> <span data-ttu-id="97b02-379">此值必須介於0到128之間;預設值為1。</span><span class="sxs-lookup"><span data-stu-id="97b02-379">This value must be between 0 and 128; the default is 1.</span></span> |
| `minRequiredPasswordLength` | <span data-ttu-id="97b02-380">密碼中所需的字元數下限。</span><span class="sxs-lookup"><span data-stu-id="97b02-380">The minimum number of characters required in a password.</span></span> <span data-ttu-id="97b02-381">此值必須介於0到128之間;預設值為7。</span><span class="sxs-lookup"><span data-stu-id="97b02-381">This value must be between 0 and 128; the default is 7.</span></span> |
| `name` | <span data-ttu-id="97b02-382">已註冊之提供者的名稱。</span><span class="sxs-lookup"><span data-stu-id="97b02-382">The name of the registered provider.</span></span> <span data-ttu-id="97b02-383">這是必要的值。</span><span class="sxs-lookup"><span data-stu-id="97b02-383">This value is required.</span></span> |
| `passwordAttemptWindow` | <span data-ttu-id="97b02-384">追蹤失敗的登入嘗試的分鐘數。</span><span class="sxs-lookup"><span data-stu-id="97b02-384">The number of minutes during which failed login attempts are tracked.</span></span> <span data-ttu-id="97b02-385">如果使用者 `maxInvalidPasswordAttempts` 在此指定的時間範圍內提供不正確登入認證，則會被鎖定。預設值為10。</span><span class="sxs-lookup"><span data-stu-id="97b02-385">If a user supplies invalid login credentials `maxInvalidPasswordAttempts` times within this specified window, they are locked out. The default value is 10.</span></span> |
| `PasswordFormat` | <span data-ttu-id="97b02-386">密碼儲存格式： `Clear` 、 `Hashed` 或 `Encrypted` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-386">The password storage format: `Clear`, `Hashed`, or `Encrypted`.</span></span> <span data-ttu-id="97b02-387">預設為 `Hashed`。</span><span class="sxs-lookup"><span data-stu-id="97b02-387">The default is `Hashed`.</span></span> |
| `passwordStrengthRegularExpression` | <span data-ttu-id="97b02-388">如果有提供此正則運算式，會在建立新帳戶或變更其密碼時，用來評估使用者所選取密碼的強度。</span><span class="sxs-lookup"><span data-stu-id="97b02-388">If provided, this regular expression is used to evaluate the strength of the user's selected password when creating a new account or when changing their password.</span></span> <span data-ttu-id="97b02-389">預設值為空字串。</span><span class="sxs-lookup"><span data-stu-id="97b02-389">The default value is an empty string.</span></span> |
| `requiresQuestionAndAnswer` | <span data-ttu-id="97b02-390">指定使用者是否必須在抓取或重設其密碼時回答他的安全性問題。</span><span class="sxs-lookup"><span data-stu-id="97b02-390">Specifies whether a user must answer his security question when retrieving or resetting his password.</span></span> <span data-ttu-id="97b02-391">預設值是 `true`。</span><span class="sxs-lookup"><span data-stu-id="97b02-391">The default value is `true`.</span></span> |
| `requiresUniqueEmail` | <span data-ttu-id="97b02-392">指出指定之應用程式分割區中的所有使用者帳戶是否都必須有唯一的電子郵件地址。</span><span class="sxs-lookup"><span data-stu-id="97b02-392">Indicates whether all user accounts in a given application partition must have a unique email address.</span></span> <span data-ttu-id="97b02-393">預設值是 `true`。</span><span class="sxs-lookup"><span data-stu-id="97b02-393">The default value is `true`.</span></span> |
| `type` | <span data-ttu-id="97b02-394">指定提供者的類型。</span><span class="sxs-lookup"><span data-stu-id="97b02-394">Specifies the type of the provider.</span></span> <span data-ttu-id="97b02-395">這是必要的值。</span><span class="sxs-lookup"><span data-stu-id="97b02-395">This value is required.</span></span> |

<span data-ttu-id="97b02-396">**表 2**：成員資格和 `SqlMembershipProvider` 設定</span><span class="sxs-lookup"><span data-stu-id="97b02-396">**Table 2**: Membership and `SqlMembershipProvider` Configuration Settings</span></span>

<span data-ttu-id="97b02-397">除了 `AspNetSqlMembershipProvider` 之外，其他成員資格提供者也可以在應用程式上註冊，方法是將類似的標記新增至檔案 `Web.config` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-397">In addition to `AspNetSqlMembershipProvider`, other Membership providers may be registered on an application-by-application basis by adding similar markup to the `Web.config` file.</span></span>

> [!NOTE]
> <span data-ttu-id="97b02-398">角色架構的運作方式大致相同：在中有預設的已登錄角色提供者 `machine.config` ，而且可在中依應用程式來自訂已註冊的提供者 `Web.config` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-398">The Roles framework works in much the same way: there is a default registered role provider in `machine.config` and the registered providers may be customized on an application-by-application basis in `Web.config`.</span></span> <span data-ttu-id="97b02-399">我們將在未來的教學課程中詳細檢查角色架構及其設定標記。</span><span class="sxs-lookup"><span data-stu-id="97b02-399">We will examine the Roles framework and its configuration markup in detail in a future tutorial.</span></span>

### <a name="customizing-thesqlmembershipprovidersettings"></a><span data-ttu-id="97b02-400">自訂 `SqlMembershipProvider` 設定</span><span class="sxs-lookup"><span data-stu-id="97b02-400">Customizing the`SqlMembershipProvider`Settings</span></span>

<span data-ttu-id="97b02-401">預設的 `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) 將其 `connectionStringName` 屬性設定為 `LocalSqlServer` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-401">The default `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) has its `connectionStringName` attribute set to `LocalSqlServer`.</span></span> <span data-ttu-id="97b02-402">與 `AspNetSqlMembershipProvider` 提供者一樣，連接字串名稱 `LocalSqlServer` 是在中定義 `machine.config` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-402">Like the `AspNetSqlMembershipProvider` provider, the connection string name `LocalSqlServer` is defined in `machine.config`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample2.xml)]

<span data-ttu-id="97b02-403">如您所見，此連接字串會定義 SQL 2005 Express Edition 資料庫，位於 |DataDirectory | aspnetdb.mdf .mdf '。</span><span class="sxs-lookup"><span data-stu-id="97b02-403">As you can see, this connection string defines a SQL 2005 Express Edition database located at |DataDirectory|aspnetdb.mdf'.</span></span> <span data-ttu-id="97b02-404">字串 |DataDirectory |會在執行時間轉譯以指向 `~/App_Data/` 目錄，因此資料庫路徑 |DataDirectory | aspnetdb.mdf .mdf 會轉譯為 `~/App_Data` / `aspnet.mdf` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-404">The string |DataDirectory| is translated at runtime to point to the `~/App_Data/` directory, so the database path |DataDirectory|aspnetdb.mdf" translates to `~/App_Data`/`aspnet.mdf`.</span></span>

<span data-ttu-id="97b02-405">如果我們未在應用程式的檔案中指定任何成員資格提供者資訊 `Web.config` ，應用程式會使用預設註冊的成員資格提供者 `AspNetSqlMembershipProvider` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-405">If we did not specify any Membership provider information in our application's `Web.config` file, the application uses the default registered Membership provider, `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="97b02-406">如果 `~/App_Data/aspnet.mdf` 資料庫不存在，ASP.NET 執行時間會自動建立該資料庫，並新增應用程式服務架構。</span><span class="sxs-lookup"><span data-stu-id="97b02-406">If the `~/App_Data/aspnet.mdf` database does not exist, the ASP.NET runtime will automatically create it and add the application services schema.</span></span> <span data-ttu-id="97b02-407">不過，我們不想要使用 `aspnet.mdf` 資料庫，而是想要使用 `SecurityTutorials.mdf` 我們在步驟2中建立的資料庫。</span><span class="sxs-lookup"><span data-stu-id="97b02-407">However, we don't want to use the `aspnet.mdf` database; rather, we want to use the `SecurityTutorials.mdf` database we created in Step 2.</span></span> <span data-ttu-id="97b02-408">您可以透過下列兩種方式之一來完成這項修改：</span><span class="sxs-lookup"><span data-stu-id="97b02-408">This modification can be accomplished in one of two ways:</span></span>

- <span data-ttu-id="97b02-409"><strong>指定值給</strong> <strong>`LocalSqlServer`</strong><strong>中的</strong> <strong>`Web.config`</strong> 連接字串名稱<strong>.</strong></span><span class="sxs-lookup"><span data-stu-id="97b02-409"><strong>Specify a value for the</strong><strong>`LocalSqlServer`</strong><strong>connection string name in</strong><strong>`Web.config`</strong><strong>.</strong></span></span> <span data-ttu-id="97b02-410">藉由覆寫 `LocalSqlServer` 中的連接字串名稱值 `Web.config` ，我們可以使用預設註冊的成員資格提供者 (`AspNetSqlMembershipProvider`) ，並讓它正確地使用 `SecurityTutorials.mdf` 資料庫。</span><span class="sxs-lookup"><span data-stu-id="97b02-410">By overwriting the `LocalSqlServer` connection string name value in `Web.config`, we can use the default registered Membership provider (`AspNetSqlMembershipProvider`) and have it correctly work with the `SecurityTutorials.mdf` database.</span></span> <span data-ttu-id="97b02-411">如果您是具有所指定之設定設定的內容，這種方法就很好用 `AspNetSqlMembershipProvider` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-411">This approach is fine if you are content with the configuration settings specified by `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="97b02-412">如需這項技術的詳細資訊，請參閱 [Scott Guthrie](https://weblogs.asp.net/scottgu/)的 blog 文章、設定 [ASP.NET 2.0 應用程式服務以使用 SQL Server 2000 或 SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)。</span><span class="sxs-lookup"><span data-stu-id="97b02-412">For more information on this technique, see [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog post, [Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span></span>
- <span data-ttu-id="97b02-413"><strong>新增類型</strong> <strong>`SqlMembershipProvider`</strong> 的已註冊提供者<strong>並設定其</strong> <strong>`connectionStringName`</strong><strong>將設定為指向</strong> <strong>`SecurityTutorials.mdf`</strong><strong>資料庫。</strong></span><span class="sxs-lookup"><span data-stu-id="97b02-413"><strong>Add a new registered provider of type</strong><strong>`SqlMembershipProvider`</strong><strong>and configure its</strong><strong>`connectionStringName`</strong><strong>setting to point to the</strong><strong>`SecurityTutorials.mdf`</strong><strong>database.</strong></span></span> <span data-ttu-id="97b02-414">如果您想要自訂資料庫連接字串以外的其他設定屬性，此方法很有用。</span><span class="sxs-lookup"><span data-stu-id="97b02-414">This approach is useful in scenarios where you want to customize other configuration properties in addition to the database connection string.</span></span> <span data-ttu-id="97b02-415">在我自己的專案中，我一直都是使用這個方法，因為它的彈性和可讀性。</span><span class="sxs-lookup"><span data-stu-id="97b02-415">In my own projects I always use this approach because of its flexibility and readability.</span></span>

<span data-ttu-id="97b02-416">在加入參考資料庫的新已註冊提供者之前 `SecurityTutorials.mdf` ，我們必須先在的區段中加入適當的連接字串值 `<connectionStrings>` `Web.config` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-416">Before we can add a new registered provider that references the `SecurityTutorials.mdf` database, we first need to add an appropriate connection string value in the `<connectionStrings>` section in `Web.config`.</span></span> <span data-ttu-id="97b02-417">下列標記會新增名為的新連接字串 `SecurityTutorialsConnectionString` ，這個連接字串會參考 `SecurityTutorials.mdf` 資料夾中的 SQL Server 2005 Express Edition 資料庫 `App_Data` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-417">The following markup adds a new connection string named `SecurityTutorialsConnectionString` that references the SQL Server 2005 Express Edition `SecurityTutorials.mdf` database in the `App_Data` folder.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample3.xml)]

> [!NOTE]
> <span data-ttu-id="97b02-418">如果您使用替代資料庫檔案，請視需要更新連接字串。</span><span class="sxs-lookup"><span data-stu-id="97b02-418">If you are using an alternate database file, update the connection string as needed.</span></span> <span data-ttu-id="97b02-419">如需有關形成正確連接字串的詳細資訊，請參閱 [ConnectionStrings.com](http://www.connectionstrings.com/)。</span><span class="sxs-lookup"><span data-stu-id="97b02-419">For more information on forming the correct connection string, refer to [ConnectionStrings.com](http://www.connectionstrings.com/).</span></span>

<span data-ttu-id="97b02-420">接下來，將下列成員資格設定標記新增至檔案 `Web.config` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-420">Next, add the following Membership configuration markup to the `Web.config` file.</span></span> <span data-ttu-id="97b02-421">此標記會註冊名為的新提供者 `SecurityTutorialsSqlMembershipProvider` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-421">This markup registers a new provider named `SecurityTutorialsSqlMembershipProvider`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample4.xml)]

<span data-ttu-id="97b02-422">除了註冊 `SecurityTutorialsSqlMembershipProvider` 提供者之外，上述標記還會透過 `SecurityTutorialsSqlMembershipProvider`) 專案中的屬性，將作為預設的提供者 (`defaultProvider` `<membership>` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-422">In addition to registering the `SecurityTutorialsSqlMembershipProvider` provider, the above markup defines the `SecurityTutorialsSqlMembershipProvider` as the default provider (via the `defaultProvider` attribute in the `<membership>` element).</span></span> <span data-ttu-id="97b02-423">回想一下，成員資格架構可以有多個已註冊的提供者。</span><span class="sxs-lookup"><span data-stu-id="97b02-423">Recall that the Membership framework can have multiple registered providers.</span></span> <span data-ttu-id="97b02-424">因為 `AspNetSqlMembershipProvider` 是註冊為中的第一個提供者 `machine.config` ，所以它會作為預設提供者，除非我們另外指出。</span><span class="sxs-lookup"><span data-stu-id="97b02-424">Since `AspNetSqlMembershipProvider` is registered as the first provider in `machine.config`, it serves as the default provider unless we indicate otherwise.</span></span>

<span data-ttu-id="97b02-425">目前，我們的應用程式有兩個已註冊的提供者： `AspNetSqlMembershipProvider` 和 `SecurityTutorialsSqlMembershipProvider` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-425">Currently, our application has two registered providers: `AspNetSqlMembershipProvider` and `SecurityTutorialsSqlMembershipProvider`.</span></span> <span data-ttu-id="97b02-426">不過，在註冊 `SecurityTutorialsSqlMembershipProvider` 提供者之前，我們可以先在專案之前加入一個[ `<clear />` 元素](https://msdn.microsoft.com/library/t062y6yc.aspx)，以清除所有先前註冊的提供者 `<add>` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-426">However, before registering the `SecurityTutorialsSqlMembershipProvider` provider we could have cleared out all previously registered providers by adding a [`<clear />` element](https://msdn.microsoft.com/library/t062y6yc.aspx) immediately before our `<add>` element.</span></span> <span data-ttu-id="97b02-427">這會 `AspNetSqlMembershipProvider` 從已註冊的提供者清單中清除，這表示會 `SecurityTutorialsSqlMembershipProvider` 是唯一註冊的成員資格提供者。</span><span class="sxs-lookup"><span data-stu-id="97b02-427">This would clear out the `AspNetSqlMembershipProvider` from the list of registered providers, meaning that the `SecurityTutorialsSqlMembershipProvider` would be the only registered Membership provider.</span></span> <span data-ttu-id="97b02-428">如果使用此方法，則不需要將設 `SecurityTutorialsSqlMembershipProvider` 為預設提供者，因為它會是唯一註冊的成員資格提供者。</span><span class="sxs-lookup"><span data-stu-id="97b02-428">If we used this approach, then we would not need to mark the `SecurityTutorialsSqlMembershipProvider` as the default provider, since it would be the only registered Membership provider.</span></span> <span data-ttu-id="97b02-429">如需使用的詳細資訊 `<clear />` ，請參閱 [ `<clear />` 加入提供者時使用](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)。</span><span class="sxs-lookup"><span data-stu-id="97b02-429">For more information on using `<clear />`, see [Using `<clear />` When Adding Providers](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span></span>

<span data-ttu-id="97b02-430">請注意， `SecurityTutorialsSqlMembershipProvider` 的 `connectionStringName` 設定會參考剛加入的 `SecurityTutorialsConnectionString` 連接字串名稱，而且其 `applicationName` 設定已設定為 SecurityTutorials 的值。</span><span class="sxs-lookup"><span data-stu-id="97b02-430">Note that the `SecurityTutorialsSqlMembershipProvider`'s `connectionStringName` setting references the just-added `SecurityTutorialsConnectionString` connection string name, and that its `applicationName` setting has been set to a value of SecurityTutorials.</span></span> <span data-ttu-id="97b02-431">此外，此 `requiresUniqueEmail` 設定已設定為 `true` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-431">Additionally, the `requiresUniqueEmail` setting has been set to `true`.</span></span> <span data-ttu-id="97b02-432">所有其他設定選項與中的值相同 `AspNetSqlMembershipProvider` 。</span><span class="sxs-lookup"><span data-stu-id="97b02-432">All other configuration options are identical to the values in `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="97b02-433">如果您想要的話，可以隨意在這裡進行任何設定修改。</span><span class="sxs-lookup"><span data-stu-id="97b02-433">Feel free to make any configuration modifications here, if you wish.</span></span> <span data-ttu-id="97b02-434">例如，您可以藉由要求兩個非英數位元（而不是一個），或將密碼長度增加為8個字元（而不是七個字元）來加強密碼強度。</span><span class="sxs-lookup"><span data-stu-id="97b02-434">For example, you could tighten the password strength by requiring two non-alphanumeric characters instead of one, or by increasing the password length to eight characters instead of seven.</span></span>

> [!NOTE]
> <span data-ttu-id="97b02-435">回想一下，成員架構可讓單一使用者存放區跨多個應用程式進行分割。</span><span class="sxs-lookup"><span data-stu-id="97b02-435">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="97b02-436">成員資格提供者的 `applicationName` 設定會指出提供者在使用使用者存放區時所使用的應用程式。</span><span class="sxs-lookup"><span data-stu-id="97b02-436">The Membership provider's `applicationName` setting indicates what application the provider uses when working with the user store.</span></span> <span data-ttu-id="97b02-437">請務必明確設定設定設定的值 `applicationName` ，因為如果 `applicationName` 未明確設定，則會在執行時間將它指派給 web 應用程式的虛擬根路徑。</span><span class="sxs-lookup"><span data-stu-id="97b02-437">It is important that you explicitly set a value for the `applicationName` configuration setting because if the `applicationName` is not explicitly set, it is assigned to the web application's virtual root path at runtime.</span></span> <span data-ttu-id="97b02-438">只要應用程式的虛擬根路徑不會變更，這就可以正常運作，但如果您將應用程式移到不同的路徑，此 `applicationName` 設定也會變更。</span><span class="sxs-lookup"><span data-stu-id="97b02-438">This works fine as long as the application's virtual root path doesn't change, but if you move the application to a different path, the `applicationName` setting will change too.</span></span> <span data-ttu-id="97b02-439">發生這種情況時，成員資格提供者將會開始使用與先前所用不同的應用程式分割區。</span><span class="sxs-lookup"><span data-stu-id="97b02-439">When this happens, the Membership provider will start working with a different application partition than was previously used.</span></span> <span data-ttu-id="97b02-440">移動之前建立的使用者帳戶會位於不同的應用程式分割區，而且這些使用者將無法再登入網站。</span><span class="sxs-lookup"><span data-stu-id="97b02-440">User accounts created prior to the move will reside in a different application partition and those users will no longer be able to log into the site.</span></span> <span data-ttu-id="97b02-441">如需這項功能的深入討論，請參閱 [設定 `applicationName` ASP.NET 2.0 成員資格和其他提供者時，一律設定屬性](https://weblogs.asp.net/scottgu/443634)。</span><span class="sxs-lookup"><span data-stu-id="97b02-441">For a more in-depth discussion on this matter, see [Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other Providers](https://weblogs.asp.net/scottgu/443634).</span></span>

## <a name="summary"></a><span data-ttu-id="97b02-442">摘要</span><span class="sxs-lookup"><span data-stu-id="97b02-442">Summary</span></span>

<span data-ttu-id="97b02-443">到目前為止，我們有一個具有已設定之應用程式服務 () 的資料庫 `SecurityTutorials.mdf` ，並已設定 web 應用程式，讓成員資格架構可以使用 `SecurityTutorialsSqlMembershipProvider` 我們剛剛註冊的提供者。</span><span class="sxs-lookup"><span data-stu-id="97b02-443">At this point we have a database with the configured application services (`SecurityTutorials.mdf`) and have configured our web application so that the Membership framework uses the `SecurityTutorialsSqlMembershipProvider` provider we just registered.</span></span> <span data-ttu-id="97b02-444">這個已註冊的提供者屬於型別 `SqlMembershipProvider` ，而且會 `connectionStringName` 將其設定為適當的連接字串 (`SecurityTutorialsConnectionString`) ，並 `applicationName` 明確設定其值。</span><span class="sxs-lookup"><span data-stu-id="97b02-444">This registered provider is of type `SqlMembershipProvider` and has its `connectionStringName` set to the appropriate connection string (`SecurityTutorialsConnectionString`) and its `applicationName` value explicitly set.</span></span>

<span data-ttu-id="97b02-445">我們現在已準備好使用應用程式的成員資格架構。</span><span class="sxs-lookup"><span data-stu-id="97b02-445">We are now ready to use the Membership framework from our application.</span></span> <span data-ttu-id="97b02-446">在下一個教學課程中，我們將探討如何建立新的使用者帳戶。</span><span class="sxs-lookup"><span data-stu-id="97b02-446">In the next tutorial we will examine how to create new user accounts.</span></span> <span data-ttu-id="97b02-447">之後，我們將探索驗證使用者、執行以使用者為基礎的授權，以及在資料庫中儲存其他與使用者相關的資訊。</span><span class="sxs-lookup"><span data-stu-id="97b02-447">Following that we will explore authenticating users, performing user-based authorization, and storing additional user-related information in the database.</span></span>

<span data-ttu-id="97b02-448">快樂程式設計！</span><span class="sxs-lookup"><span data-stu-id="97b02-448">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="97b02-449">深入閱讀</span><span class="sxs-lookup"><span data-stu-id="97b02-449">Further Reading</span></span>

<span data-ttu-id="97b02-450">如需本教學課程中所討論之主題的詳細資訊，請參閱下列資源：</span><span class="sxs-lookup"><span data-stu-id="97b02-450">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="97b02-451">設定 `applicationName` ASP.NET 2.0 成員資格和其他提供者時，一律設定屬性</span><span class="sxs-lookup"><span data-stu-id="97b02-451">Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other Providers</span></span>](https://weblogs.asp.net/scottgu/443634)
- [<span data-ttu-id="97b02-452">將 ASP.NET 2.0 應用程式服務設定為使用 SQL Server 2000 或 SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="97b02-452">Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005</span></span>](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)
- [<span data-ttu-id="97b02-453">下載 SQL Server Management Studio Express Edition</span><span class="sxs-lookup"><span data-stu-id="97b02-453">Download SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)
- [<span data-ttu-id="97b02-454">檢查 ASP.NET 2.0 的成員資格、角色和設定檔</span><span class="sxs-lookup"><span data-stu-id="97b02-454">Examining ASP.NET 2.0's Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="97b02-455">`<add>`成員資格提供者的元素</span><span class="sxs-lookup"><span data-stu-id="97b02-455">The `<add>` Element for Providers for Membership</span></span>](https://msdn.microsoft.com/library/whae3t94.aspx)
- [<span data-ttu-id="97b02-456">`<membership>`元素</span><span class="sxs-lookup"><span data-stu-id="97b02-456">The `<membership>` Element</span></span>](https://msdn.microsoft.com/library/1b9hw62f.aspx)
- [<span data-ttu-id="97b02-457">`<providers>`成員資格的元素</span><span class="sxs-lookup"><span data-stu-id="97b02-457">The `<providers>` Element for Membership</span></span>](https://msdn.microsoft.com/library/6d4936ht.aspx)
- [<span data-ttu-id="97b02-458">`<clear />`加入提供者時使用</span><span class="sxs-lookup"><span data-stu-id="97b02-458">Using `<clear />` When Adding Providers</span></span>](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)
- [<span data-ttu-id="97b02-459">直接使用 `SqlMembershipProvider`</span><span class="sxs-lookup"><span data-stu-id="97b02-459">Working Directly with the `SqlMembershipProvider`</span></span>](http://aspnet.4guysfromrolla.com/articles/091207-1.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a><span data-ttu-id="97b02-460">本教學課程所包含主題的影片訓練</span><span class="sxs-lookup"><span data-stu-id="97b02-460">Video Training on Topics Contained in this Tutorial</span></span>

- [<span data-ttu-id="97b02-461">了解 ASP.NET 成員資格</span><span class="sxs-lookup"><span data-stu-id="97b02-461">Understanding ASP.NET Memberships</span></span>](../../../videos/authentication/understanding-aspnet-memberships.md)
- [<span data-ttu-id="97b02-462">設定 SQL 使用成員資格結構描述</span><span class="sxs-lookup"><span data-stu-id="97b02-462">Configuring SQL To Work with Membership Schemas</span></span>](../../../videos/authentication/configuring-sql-to-work-with-membership-schemas.md)
- [<span data-ttu-id="97b02-463">變更預設成員資格結構描述中的成員資格設定</span><span class="sxs-lookup"><span data-stu-id="97b02-463">Changing Membership Settings in the Default Membership Schema</span></span>](../../../videos/authentication/changing-membership-settings-in-the-default-membership-schema.md)

### <a name="about-the-author"></a><span data-ttu-id="97b02-464">關於作者</span><span class="sxs-lookup"><span data-stu-id="97b02-464">About the Author</span></span>

<span data-ttu-id="97b02-465">Scott Mitchell 作者有多個 ASP/ASP. NET 書籍和創辦人 of 4GuysFromRolla.com，自1998起一直都在使用 Microsoft Web 技術。</span><span class="sxs-lookup"><span data-stu-id="97b02-465">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="97b02-466">Scott 以獨立顧問、訓練員和作者的形式運作。</span><span class="sxs-lookup"><span data-stu-id="97b02-466">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="97b02-467">他的最新書籍是 *[在24小時內 ASP.NET 2.0](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*。</span><span class="sxs-lookup"><span data-stu-id="97b02-467">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="97b02-468">Scott 可于或透過他的 blog 來觸達 [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) [http://ScottOnWriting.NET](http://scottonwriting.net/) 。</span><span class="sxs-lookup"><span data-stu-id="97b02-468">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="97b02-469">特別感謝</span><span class="sxs-lookup"><span data-stu-id="97b02-469">Special Thanks To</span></span>

<span data-ttu-id="97b02-470">本教學課程系列是由許多有用的審核者所審核。</span><span class="sxs-lookup"><span data-stu-id="97b02-470">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="97b02-471">本教學課程的潛在客戶審核 Alicja Maziarz。</span><span class="sxs-lookup"><span data-stu-id="97b02-471">Lead reviewer for this tutorial was Alicja Maziarz.</span></span> <span data-ttu-id="97b02-472">有興趣複習我即將推出的 MSDN 文章嗎？</span><span class="sxs-lookup"><span data-stu-id="97b02-472">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="97b02-473">如果是的話，請在這裡放置一行 [mitchell@4GuysFromRolla.com](mailto:mitchell@4guysfromrolla.com) 。</span><span class="sxs-lookup"><span data-stu-id="97b02-473">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4guysfromrolla.com).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="97b02-474">下一個</span><span class="sxs-lookup"><span data-stu-id="97b02-474">Next</span></span>](creating-user-accounts-cs.md)
