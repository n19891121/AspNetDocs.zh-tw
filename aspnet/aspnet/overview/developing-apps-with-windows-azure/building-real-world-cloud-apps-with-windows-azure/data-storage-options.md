---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/data-storage-options
title: 資料儲存體選項（使用 Azure 建立真實世界的雲端應用程式） |Microsoft Docs
author: MikeWasson
description: 使用 Azure 電子書建立真實世界的雲端應用程式，是以 Scott Guthrie 所開發的簡報為基礎。 它會說明13個模式和實務，
ms.author: riande
ms.date: 06/12/2014
ms.assetid: e51fcecb-cb33-4f9e-8428-6d2b3d0fe1bf
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/data-storage-options
msc.type: authoredcontent
ms.openlocfilehash: 9357ed5aef39bed501cdac9ac26d46c884d4fae0
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/06/2020
ms.locfileid: "78617800"
---
# <a name="data-storage-options-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="8e7b1-104">資料儲存體選項（使用 Azure 建立真實世界的雲端應用程式）</span><span class="sxs-lookup"><span data-stu-id="8e7b1-104">Data Storage Options (Building Real-World Cloud Apps with Azure)</span></span>

<span data-ttu-id="8e7b1-105">由[Mike Wasson](https://github.com/MikeWasson)， [Rick Anderson](https://twitter.com/RickAndMSFT)， [Tom 作者: dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="8e7b1-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://twitter.com/RickAndMSFT), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="8e7b1-106">[下載 Fix It 專案](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4)或[下載電子書](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="8e7b1-106">[Download Fix It Project](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="8e7b1-107">**使用 Azure 電子書建立真實世界的雲端應用程式**，是以 Scott Guthrie 所開發的簡報為基礎。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="8e7b1-108">其中說明13種模式和作法，可協助您成功開發雲端 web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="8e7b1-109">如需電子書的相關資訊，請參閱[第一章](introduction.md)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>

<span data-ttu-id="8e7b1-110">大部人員都習慣使用關聯式資料庫，而在設計雲端應用程式時，他們會嘗試尋找其他資料儲存體選項。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-110">Most people are used to relational databases, and they tend to overlook other data storage options when they're designing a cloud app.</span></span> <span data-ttu-id="8e7b1-111">結果可能是較佳的效能、高費用或更糟的，因為[NoSQL](http://en.wikipedia.org/wiki/NoSQL) （非關聯式）資料庫可以比關係資料庫更有效率地處理某些工作。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-111">The result can be suboptimal performance, high expenses, or worse, because [NoSQL](http://en.wikipedia.org/wiki/NoSQL) (non-relational) databases can handle some tasks more efficiently than relational databases.</span></span> <span data-ttu-id="8e7b1-112">當客戶要求我們協助解決重要的資料儲存問題時，通常是因為他們有一個關係資料庫，其中其中一個 NoSQL 選項會有更好的工作。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-112">When customers ask us for help resolving a critical data storage problem, it's often because they have a relational database where one of the NoSQL options would have worked better.</span></span> <span data-ttu-id="8e7b1-113">在這些情況下，如果客戶在將應用程式部署到生產環境之前已實作為 NoSQL 解決方案，就會更好。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-113">In those situations the customer would have been better off if they had implemented the NoSQL solution before deploying the app to production.</span></span>

<span data-ttu-id="8e7b1-114">另一方面，假設 NoSQL 資料庫可以執行良好或足夠的效果，也會造成錯誤。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-114">On the other hand, it would also be a mistake to assume that a NoSQL database can do everything well or well enough.</span></span> <span data-ttu-id="8e7b1-115">並非所有資料儲存工作都有單一的最佳資料管理選擇;不同的資料管理解決方案會針對不同的工作進行優化。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-115">There is no single best data management choice for all data storage tasks; different data management solutions are optimized for different tasks.</span></span> <span data-ttu-id="8e7b1-116">大部分的真實世界雲端應用程式都有各種資料儲存需求，而且通常是由多個資料儲存解決方案的組合所提供的最佳服務。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-116">Most real-world cloud apps have a variety of data storage requirements and are often served best by a combination of multiple data storage solutions.</span></span>

<span data-ttu-id="8e7b1-117">本章的目的是要讓您更瞭解雲端應用程式可用的資料儲存體選項，以及一些如何選擇適合您案例的基本指導方針。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-117">The purpose of this chapter is to give you a broader sense of the data storage options available to a cloud app, and some basic guidance on how to choose the ones that fit your scenario.</span></span> <span data-ttu-id="8e7b1-118">在開發應用程式之前，最好先瞭解您可以使用的選項，並考慮其優缺點。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-118">It's best to be aware of the options available to you and think about their strengths and weaknesses before you develop an application.</span></span> <span data-ttu-id="8e7b1-119">變更生產應用程式中的資料儲存體選項可能非常困難，例如必須在飛機進行時變更 jet 引擎。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-119">Changing data storage options in a production app can be extremely difficult, like having to change a jet engine while the plane is in flight.</span></span>

## <a name="data-storage-options-on-azure"></a><span data-ttu-id="8e7b1-120">Azure 上的資料儲存體選項</span><span class="sxs-lookup"><span data-stu-id="8e7b1-120">Data storage options on Azure</span></span>

<span data-ttu-id="8e7b1-121">雲端可讓您更輕鬆地使用各種關聯式和 NoSQL 資料存放區。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-121">The cloud makes it relatively easy to use a variety of relational and NoSQL data stores.</span></span> <span data-ttu-id="8e7b1-122">以下是一些您可以在 Azure 中使用的資料儲存平臺。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-122">Here are some of the data storage platforms that you can use in Azure.</span></span>

![](data-storage-options/_static/image1.png)

<span data-ttu-id="8e7b1-123">此表格顯示四種類型的 NoSQL 資料庫：</span><span class="sxs-lookup"><span data-stu-id="8e7b1-123">The table shows four types of NoSQL databases:</span></span>

- <span data-ttu-id="8e7b1-124">索引[鍵/值資料庫](https://msdn.microsoft.com/library/dn313285.aspx#sec7)會針對每個索引鍵值儲存單一序列化物件。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-124">[Key/value databases](https://msdn.microsoft.com/library/dn313285.aspx#sec7) store a single serialized object for each key value.</span></span> <span data-ttu-id="8e7b1-125">適合用來儲存大量資料，也就是您要在其中取得指定索引鍵值的一個項目，而且不必根據項目的其他屬性進行查詢。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-125">They're good for storing large volumes of data where you want to get one item for a given key value and you don't have to query based on other properties of the item.</span></span>

    <span data-ttu-id="8e7b1-126">[Azure Blob 儲存體](https://azure.microsoft.com/documentation/articles/storage-dotnet-how-to-use-blobs/)是一種索引鍵/值資料庫，其功能類似于雲端中的檔案儲存體，其索引鍵值對應至資料夾和檔案名。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-126">[Azure Blob storage](https://azure.microsoft.com/documentation/articles/storage-dotnet-how-to-use-blobs/) is a key/value database that functions like file storage in the cloud, with key values that correspond to folder and file names.</span></span> <span data-ttu-id="8e7b1-127">您可以依資料夾和檔案名抓取檔案，而不是搜尋檔案內容中的值。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-127">You retrieve a file by its folder and file name, not by searching for values in the file contents.</span></span>

    <span data-ttu-id="8e7b1-128">「 [Azure 資料表儲存體](https://azure.microsoft.com/documentation/articles/storage-dotnet-how-to-use-tables/)」也是索引鍵/值資料庫。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-128">[Azure Table storage](https://azure.microsoft.com/documentation/articles/storage-dotnet-how-to-use-tables/) is also a key/value database.</span></span> <span data-ttu-id="8e7b1-129">每個值都稱為*實體*（類似于資料分割索引鍵和資料列索引鍵所識別的資料列），而且包含多個*屬性*（類似于資料行，但資料表中的所有實體都不需要共用相同的資料行）。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-129">Each value is called an *entity* (similar to a row, identified by a partition key and row key) and contains multiple *properties* (similar to columns, but not all entities in a table have to share the same columns).</span></span> <span data-ttu-id="8e7b1-130">查詢索引鍵以外的資料行非常沒有效率，應予以避免。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-130">Querying on columns other than the key is extremely inefficient and should be avoided.</span></span> <span data-ttu-id="8e7b1-131">例如，您可以儲存使用者設定檔資料，其中有一個分割區儲存單一使用者的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-131">For example, you can store user profile data, with one partition storing information about a single user.</span></span> <span data-ttu-id="8e7b1-132">您可以將資料（例如使用者名稱、密碼雜湊、出生日期等等）儲存在單一實體的個別屬性中，或是在相同資料分割的個別實體中。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-132">You could store data such as user name, password hash, birth date, and so forth, in separate properties of one entity or in separate entities in the same partition.</span></span> <span data-ttu-id="8e7b1-133">但是，您不想要查詢具有指定之出生日期範圍的所有使用者，也無法在您的設定檔資料表與另一個資料表之間執行聯結查詢。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-133">But you wouldn't want to query for all users with a given range of birth dates, and you can't execute a join query between your profile table and another table.</span></span> <span data-ttu-id="8e7b1-134">資料表儲存體比關係資料庫更具擴充性且成本較低，但不會啟用複雜的查詢或聯結。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-134">Table storage is more scalable and less expensive than a relational database, but it doesn't enable complex queries or joins.</span></span>
- <span data-ttu-id="8e7b1-135">[Documentdatabases](https://msdn.microsoft.com/library/dn313285.aspx#sec8)是索引鍵/值資料庫，其中的值為*檔*。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-135">[Documentdatabases](https://msdn.microsoft.com/library/dn313285.aspx#sec8) are key/value databases in which the values are *documents*.</span></span> <span data-ttu-id="8e7b1-136">此處的「檔」並不是用在 Word 或 Excel 檔的意義上，而是指命名欄位和值的集合，其中任何一項都可以是子檔。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-136">"Document" here isn't used in the sense of a Word or Excel document but means a collection of named fields and values, any of which could be a child document.</span></span> <span data-ttu-id="8e7b1-137">例如，在訂單歷程記錄資料表中，訂單檔可能會有訂單號碼、訂單日期和客戶欄位;而 [customer] 欄位可能會有 [名稱] 和 [位址] 欄位。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-137">For example, in an order history table an order document might have order number, order date, and customer fields; and the customer field might have name and address fields.</span></span> <span data-ttu-id="8e7b1-138">資料庫會以 XML、YAML、JSON 或 BSON 之類的格式來編碼欄位資料;或者，它可以使用純文字。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-138">The database encodes field data in a format such as XML, YAML, JSON, or BSON; or it can use plain text.</span></span> <span data-ttu-id="8e7b1-139">除了索引鍵/值資料庫以外，設定檔資料庫的功能之一，就是能夠查詢非索引鍵欄位並定義次要索引，讓查詢更有效率。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-139">One feature that sets document databases apart from key/value databases is the ability to query on non-key fields and define secondary indexes to make querying more efficient.</span></span> <span data-ttu-id="8e7b1-140">這項功能可讓檔資料庫更適合需要根據比檔索引鍵的值更複雜的準則來抓取資料的應用程式。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-140">This ability makes a document database more suitable for applications that need to retrieve data based on criteria more complex than the value of the document key.</span></span> <span data-ttu-id="8e7b1-141">例如，在「銷售訂單歷程記錄」檔資料庫中，您可以查詢各種欄位，例如「產品識別碼」、「客戶識別碼」、「客戶名稱」等等。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-141">For example, in a sales order history document database you could query on various fields such as product ID, customer ID, customer name, and so forth.</span></span> <span data-ttu-id="8e7b1-142">[MongoDB](http://www.mongodb.org/)是受歡迎的檔資料庫。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-142">[MongoDB](http://www.mongodb.org/) is a popular document database.</span></span>
- <span data-ttu-id="8e7b1-143">資料[行系列資料庫](https://msdn.microsoft.com/library/dn313285.aspx#sec9)是索引鍵/值資料存放區，可讓您將資料儲存體結構為相關資料行的集合，稱為資料行系列。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-143">[Column-family databases](https://msdn.microsoft.com/library/dn313285.aspx#sec9) are key/value data stores that enable you to structure data storage into collections of related columns called column families.</span></span> <span data-ttu-id="8e7b1-144">例如，人口普查資料庫可能有一個使用者名稱的資料行群組（第一個、中間、最後一個）、一個群組用於該人員的位址，以及一個群組用於個人的設定檔資訊（DOB、性別等等）。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-144">For example, a census database might have one group of columns for a person's name (first, middle, last), one group for the person's address, and one group for the person's profile information (DOB, gender, etc.).</span></span> <span data-ttu-id="8e7b1-145">然後，資料庫可以將每個資料行系列儲存在個別的分割區，同時保留一個人與相同索引鍵相關的所有資料。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-145">The database can then store each column family in a separate partition while keeping all of the data for one person related to the same key.</span></span> <span data-ttu-id="8e7b1-146">您接著可以讀取所有的設定檔資訊，而不需要同時讀取所有的名稱和位址資訊。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-146">You can then read all profile information without having to read through all of the name and address information as well.</span></span> <span data-ttu-id="8e7b1-147">[Cassandra](http://cassandra.apache.org/)是熱門的資料行系列資料庫。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-147">[Cassandra](http://cassandra.apache.org/) is a popular column-family database.</span></span>
- <span data-ttu-id="8e7b1-148">[圖形資料庫](https://msdn.microsoft.com/library/dn313285.aspx#sec10)會將資訊儲存成物件和關聯性的集合。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-148">[Graph databases](https://msdn.microsoft.com/library/dn313285.aspx#sec10) store information as a collection of objects and relationships.</span></span> <span data-ttu-id="8e7b1-149">圖形資料庫的目的是要讓應用程式有效率地執行查詢，以跨越物件的網路和兩者之間的關聯性。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-149">The purpose of a graph database is to enable an application to efficiently perform queries that traverse the network of objects and the relationships between them.</span></span> <span data-ttu-id="8e7b1-150">比方說，物件可能是人力資源資料庫中的員工，而您可以進行快速查詢，例如「尋找直接或間接為 Scott 工作的所有員工。」</span><span class="sxs-lookup"><span data-stu-id="8e7b1-150">For example, the objects might be employees in a human resources database, and you might want to facilitate queries such as "find all employees who directly or indirectly work for Scott."</span></span> <span data-ttu-id="8e7b1-151">[Neo4j](http://www.neo4j.org/)是熱門的圖形資料庫。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-151">[Neo4j](http://www.neo4j.org/) is a popular graph database.</span></span>

<span data-ttu-id="8e7b1-152">相較于關係資料庫，NoSQL 選項為儲存和分析非結構化資料提供更高的擴充性和成本效益。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-152">Compared to relational databases, the NoSQL options offer far greater scalability and cost-effectiveness for storage and analysis of unstructured data.</span></span> <span data-ttu-id="8e7b1-153">其缺點是它們不會提供關係資料庫的豐富 queryability 和強大的資料完整性功能。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-153">The tradeoff is that they don't provide the rich queryability and robust data integrity capabilities of relational databases.</span></span> <span data-ttu-id="8e7b1-154">NoSQL 適用于 IIS 記錄檔資料，這牽涉到高容量，而不需要聯結查詢。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-154">NoSQL would work well for IIS log data, which involves high volume with no need for join queries.</span></span> <span data-ttu-id="8e7b1-155">NoSQL 不適用於銀行交易，這需要絕對資料完整性，而且牽涉到與其他帳戶相關資料的多個關聯性。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-155">NoSQL would not work so well for banking transactions, which requires absolute data integrity and involves many relationships to other account-related data.</span></span>

<span data-ttu-id="8e7b1-156">另外還有一種較新的資料庫平臺類別，稱為[NewSQL](http://en.wikipedia.org/wiki/NewSQL) ，其結合了 NoSQL 資料庫的擴充性與關係資料庫的 queryability 和交易完整性。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-156">There is also a newer category of database platform called [NewSQL](http://en.wikipedia.org/wiki/NewSQL) that combines the scalability of a NoSQL database with the queryability and transactional integrity of a relational database.</span></span> <span data-ttu-id="8e7b1-157">NewSQL 資料庫是針對分散式儲存和查詢處理而設計的，這通常很難在 "OldSQL" 資料庫中執行。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-157">NewSQL databases are designed for distributed storage and query processing, which is often hard to implement in "OldSQL" databases.</span></span> <span data-ttu-id="8e7b1-158">[NuoDB](http://www.nuodb.com/)是可在 Azure 上使用的 NewSQL 資料庫範例。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-158">[NuoDB](http://www.nuodb.com/) is an example of a NewSQL database that can be used on Azure.</span></span>

<a id="hadoop"></a>
## <a name="hadoop-and-mapreduce"></a><span data-ttu-id="8e7b1-159">Hadoop 和 MapReduce</span><span class="sxs-lookup"><span data-stu-id="8e7b1-159">Hadoop and MapReduce</span></span>

<span data-ttu-id="8e7b1-160">您可以在 NoSQL 資料庫中儲存的大量資料，很容易就能及時有效率地進行分析。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-160">The high volumes of data that you can store in NoSQL databases may be difficult to analyze efficiently in a timely manner.</span></span> <span data-ttu-id="8e7b1-161">若要這麼做，您可以使用可實行[MapReduce](http://en.wikipedia.org/wiki/MapReduce)功能的架構，例如[Hadoop](http://hadoop.apache.org/) 。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-161">To do that you can use a framework like [Hadoop](http://hadoop.apache.org/) which implements [MapReduce](http://en.wikipedia.org/wiki/MapReduce) functionality.</span></span> <span data-ttu-id="8e7b1-162">基本上，MapReduce 程式的作用如下：</span><span class="sxs-lookup"><span data-stu-id="8e7b1-162">Essentially what a MapReduce process does is the following:</span></span>

- <span data-ttu-id="8e7b1-163">只選取資料存放區，以限制需要處理的資料大小，僅限您實際需要分析的資料。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-163">Limit the size of the data that needs to be processed by selecting out of the data store only the data you actually need to analyze.</span></span> <span data-ttu-id="8e7b1-164">例如，您想要以出生年份的方式來知道您的使用者群，因此您只需從使用者設定檔資料存放區中選取出生年份。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-164">For example, you want to know the makeup of your user base by birth year, so you select only birth years out of your user profile data store.</span></span>
- <span data-ttu-id="8e7b1-165">將資料分成幾個部分，並將它們傳送到不同的電腦進行處理。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-165">Break down the data into parts and send them to different computers for processing.</span></span> <span data-ttu-id="8e7b1-166">電腦 A 會計算具有1950-1959 日期、電腦 B 執行1960-1969 等的人員人數。這一組電腦稱為*Hadoop*叢集。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-166">Computer A calculates the number of people with 1950-1959 dates, computer B does 1960-1969, etc. This group of computers is called a *Hadoop cluster*.</span></span>
- <span data-ttu-id="8e7b1-167">完成元件的處理之後，請將每個部分的結果放在一起。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-167">Put the results of each part back together after the processing on the parts is done.</span></span> <span data-ttu-id="8e7b1-168">您現在有一個相對簡短的清單，其中包含每個出生年份的多少人，以及在此整體清單中計算百分比的工作是可管理的。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-168">You now have a relatively short list of how many people for each birth year and the task of calculating percentages in this overall list is manageable.</span></span>

<span data-ttu-id="8e7b1-169">在 Azure 上， [HDInsight](https://azure.microsoft.com/services/hdinsight/)可讓您使用 Hadoop 的強大功能來處理、分析及取得海量資料的新見解。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-169">On Azure, [HDInsight](https://azure.microsoft.com/services/hdinsight/) enables you to process, analyze, and gain new insights from big data using the power of Hadoop.</span></span> <span data-ttu-id="8e7b1-170">例如，您可以使用它來分析 web 伺服器記錄：</span><span class="sxs-lookup"><span data-stu-id="8e7b1-170">For example, you could use it to analyze web server logs:</span></span>

- <span data-ttu-id="8e7b1-171">啟用對您儲存體帳戶的 web 伺服器記錄。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-171">Enable web server logging to your storage account.</span></span> <span data-ttu-id="8e7b1-172">這會設定 Azure 將記錄檔寫入至應用程式的每個 HTTP 要求的 Blob 服務。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-172">This sets up Azure to write logs to the Blob Service for every HTTP request to your application.</span></span> <span data-ttu-id="8e7b1-173">Blob 服務基本上是雲端檔案儲存體，而且與 HDInsight 完美整合。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-173">The Blob Service is basically cloud file storage, and it integrates nicely with HDInsight.</span></span>

    ![記錄至 Blob 儲存體](data-storage-options/_static/image2.png)
- <span data-ttu-id="8e7b1-175">當應用程式取得流量時，web 伺服器 IIS 記錄會寫入至 Blob 儲存體。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-175">As the app gets traffic, web server IIS logs are written to Blob storage.</span></span>

    ![Web 伺服器記錄](data-storage-options/_static/image3.png)
- <span data-ttu-id="8e7b1-177">在入口網站中，按一下 **新增** - **資料服務** - **hdinsight** - **快速建立**，並指定 hdinsight 叢集名稱、叢集大小（HDInsight 叢集資料節點數目），以及 hdinsight 叢集的使用者名稱和密碼。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-177">In the portal, click **New** - **Data Services** - **HDInsight** - **Quick Create**, and specify an HDInsight cluster name, cluster size (number of HDInsight cluster data nodes), and a user name and password for the HDInsight cluster.</span></span>

    ![HDInsight](data-storage-options/_static/image4.png)

<span data-ttu-id="8e7b1-179">您現在可以設定 MapReduce 作業來分析記錄，並取得問題的解答，例如：</span><span class="sxs-lookup"><span data-stu-id="8e7b1-179">You can now set up MapReduce jobs to analyze your logs and get answers to questions such as:</span></span>

- <span data-ttu-id="8e7b1-180">我的應用程式會在一天內取得最多或最少的流量？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-180">What times of day does my app get the most or least traffic?</span></span>
- <span data-ttu-id="8e7b1-181">我的流量來自哪些國家/地區？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-181">What countries is my traffic coming from?</span></span>
- <span data-ttu-id="8e7b1-182">流量來源區域的平均鄰近收入為何。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-182">What is the average neighborhood income of the areas my traffic comes from.</span></span> <span data-ttu-id="8e7b1-183">（有一個公用資料集可為您提供以 IP 位址為依據的鄰近地區，而您可以將其與 web 伺服器記錄中的 IP 位址比對）。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-183">(There's a public dataset that gives you neighborhood income by IP address, and you can match that against IP address in the web server logs.)</span></span>
- <span data-ttu-id="8e7b1-184">鄰近專案的收入與網站中的特定頁面或產品有何關聯？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-184">How does neighborhood income correlate to specific pages or products in the site?</span></span>

<span data-ttu-id="8e7b1-185">接著，您可以根據客戶感興趣或可能購買特定產品的可能性，使用這類問題的答案來鎖定廣告。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-185">You could then use the answers to questions like these to target ads based on the likelihood a customer would be interested in or likely to buy a particular product.</span></span>

<span data-ttu-id="8e7b1-186">如[自動化所有事項一章](automate-everything.md)所述，您可以在入口網站中執行的大部分功能都可以自動化，包括設定和執行 HDInsight 分析作業。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-186">As explained in the [Automate Everything chapter](automate-everything.md), most functions that you can do in the portal can be automated, and that includes setting up and executing HDInsight analysis jobs.</span></span> <span data-ttu-id="8e7b1-187">一般的 HDInsight 腳本可能包含下列步驟：</span><span class="sxs-lookup"><span data-stu-id="8e7b1-187">A typical HDInsight script might contain the following steps:</span></span>

- <span data-ttu-id="8e7b1-188">布建 HDInsight 叢集，並將它連結至您的儲存體帳戶，以進行 Blob 儲存體輸入。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-188">Provision an HDInsight cluster and link it to your storage account for Blob storage input.</span></span>
- <span data-ttu-id="8e7b1-189">將 MapReduce 工作可執行檔（.jar 或 .exe 檔案）上傳至 HDInsight 叢集。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-189">Upload the MapReduce job executables (.jar or .exe files) to the HDInsight cluster.</span></span>
- <span data-ttu-id="8e7b1-190">提交將輸出資料儲存至 Blob 儲存體的 MapReduce。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-190">Submit a MapReduce that stores the output data to Blob storage.</span></span>
- <span data-ttu-id="8e7b1-191">等候作業完成。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-191">Wait for the job to complete.</span></span>
- <span data-ttu-id="8e7b1-192">刪除 HDInsight 叢集。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-192">Delete the HDInsight cluster.</span></span>
- <span data-ttu-id="8e7b1-193">存取 Blob 儲存體的輸出。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-193">Access the output from Blob storage.</span></span>

<span data-ttu-id="8e7b1-194">藉由執行所有這項工作的腳本，您可以將 HDInsight 叢集布建的時間減到最少，以將成本降到最低。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-194">By running a script that does all this, you minimize the amount of time that the HDInsight cluster is provisioned, which minimizes your costs.</span></span>

<a id="paasiaas"></a>
## <a name="platform-as-a-service-paas-versus-infrastructure-as-a-service-iaas"></a><span data-ttu-id="8e7b1-195">平臺即服務（PaaS）與基礎結構即服務（IaaS）的比較</span><span class="sxs-lookup"><span data-stu-id="8e7b1-195">Platform as a Service (PaaS) versus Infrastructure as a Service (IaaS)</span></span>

<span data-ttu-id="8e7b1-196">先前所列的資料儲存體選項包含「平臺即服務」（PaaS）和「基礎結構即服務」（IaaS）解決方案。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-196">The data storage options listed earlier include both Platform-as-a-Service (PaaS) and Infrastructure-as-a-Service (IaaS) solutions.</span></span> <span data-ttu-id="8e7b1-197">PaaS 表示我們會管理硬體和軟體基礎結構，而您只是使用服務。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-197">PaaS means that we manage the hardware and software infrastructure and you just use the service.</span></span> <span data-ttu-id="8e7b1-198">SQL Database 是 Azure 的 PaaS 功能。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-198">SQL Database is a PaaS feature of Azure.</span></span> <span data-ttu-id="8e7b1-199">您會詢問資料庫，而 Azure 會在幕後設定和設定 Vm，並在其上設定資料庫。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-199">You ask for databases, and behind the scenes Azure sets up and configures the VMs and sets up the databases on them.</span></span> <span data-ttu-id="8e7b1-200">您沒有 Vm 的直接存取權，也不需要管理它們。IaaS 表示您會設定、設定及管理在我們的資料中心基礎結構中執行的 Vm，並將任何您想要的專案放在其上。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-200">You don't have direct access to the VMs and don't have to manage them.IaaS means that you set up, configure, and manage VMs that run in our data center infrastructure, and you put whatever you want on them.</span></span> <span data-ttu-id="8e7b1-201">我們會提供預先設定的 VM 映射資源庫，以進行常見的 VM 配置。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-201">We provide a gallery of pre-configured VM images for common VM configurations.</span></span> <span data-ttu-id="8e7b1-202">例如，您可以為 Windows Server 2008、Windows Server 2012、BizTalk Server、Oracle WebLogic Server、Oracle Database 等安裝預先設定的 VM 映射。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-202">For example, you can install pre-configured VM images for Windows Server 2008, Windows Server 2012, BizTalk Server, Oracle WebLogic Server, Oracle Database, etc.</span></span>

<span data-ttu-id="8e7b1-203">Azure 提供的 PaaS 資料解決方案包括：</span><span class="sxs-lookup"><span data-stu-id="8e7b1-203">PaaS data solutions that Azure offers include:</span></span>

- <span data-ttu-id="8e7b1-204">Azure SQL Database （先前稱為 SQL Azure）。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-204">Azure SQL Database (formerly known as SQL Azure).</span></span> <span data-ttu-id="8e7b1-205">以 SQL Server 為基礎的雲端關係資料庫。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-205">A cloud relational database based on SQL Server.</span></span>
- <span data-ttu-id="8e7b1-206">Azure 資料表儲存體。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-206">Azure Table storage.</span></span> <span data-ttu-id="8e7b1-207">索引鍵/值 NoSQL 資料庫。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-207">A key/value NoSQL database.</span></span>
- <span data-ttu-id="8e7b1-208">Azure Blob 儲存體。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-208">Azure Blob storage.</span></span> <span data-ttu-id="8e7b1-209">雲端中的檔案儲存體。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-209">File storage in the cloud.</span></span>

<span data-ttu-id="8e7b1-210">針對 IaaS，您可以在 VM 上執行任何可載入的專案，例如：</span><span class="sxs-lookup"><span data-stu-id="8e7b1-210">For IaaS, you can run anything you can load onto a VM, for example:</span></span>

- <span data-ttu-id="8e7b1-211">關係資料庫，例如 SQL Server、Oracle、MySQL、SQL Compact、SQLite 或 Postgres。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-211">Relational databases such as SQL Server, Oracle, MySQL, SQL Compact, SQLite, or Postgres.</span></span>
- <span data-ttu-id="8e7b1-212">索引鍵/值資料存放區，例如 Memcached、Redis、Cassandra 和 Riak。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-212">Key/value data stores such as Memcached, Redis, Cassandra, and Riak.</span></span>
- <span data-ttu-id="8e7b1-213">資料行資料存放區，例如 HBase。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-213">Column data stores such as HBase.</span></span>
- <span data-ttu-id="8e7b1-214">記錄資料庫，例如 MongoDB、RavenDB 和 CouchDB。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-214">Document databases such as MongoDB, RavenDB, and CouchDB.</span></span>
- <span data-ttu-id="8e7b1-215">圖表資料庫，例如 Neo4j。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-215">Graph databases such as Neo4j.</span></span>

![Azure 上的資料儲存體選項](data-storage-options/_static/image5.png)

<span data-ttu-id="8e7b1-217">IaaS 選項提供您幾乎無限制的資料儲存體選項，其中有許多會特別容易使用，因為您可以使用預先設定的映射建立 Vm。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-217">The IaaS option gives you almost unlimited data storage options, and many of them are especially easy to use because you can create VMs using preconfigured images.</span></span> <span data-ttu-id="8e7b1-218">例如，在管理入口網站中，移至**虛擬機器**，按一下 [**映射**] 索引標籤，然後按一下 **[流覽 VM 倉庫**]。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-218">For example, in the management portal go to **Virtual Machines**, click the **Images** tab, and click **Browse VM Depot**.</span></span>

![流覽 VM 維修站](data-storage-options/_static/image6.png)

<span data-ttu-id="8e7b1-220">接著，您會看到[數百個預先設定的 vm 映射](http://www.hanselman.com/blog/Over400VirtualMachineImagesOfOpenSourceSoftwareStacksInTheVMDepotAzureGallery.aspx)清單，而且您可以從已預先安裝資料庫管理系統的映射建立 VM，例如 MongoDB、Neo4J、Redis、Cassandra 或 CouchDB：</span><span class="sxs-lookup"><span data-stu-id="8e7b1-220">You then see a list of [hundreds of preconfigured VM images](http://www.hanselman.com/blog/Over400VirtualMachineImagesOfOpenSourceSoftwareStacksInTheVMDepotAzureGallery.aspx), and you can create a VM from an image that has a database management system preinstalled, such as MongoDB, Neo4J, Redis, Cassandra, or CouchDB:</span></span>

![VM 倉庫中的 MongoDB](data-storage-options/_static/image7.png)

<span data-ttu-id="8e7b1-222">Azure 會盡可能輕鬆地使用 IaaS 資料儲存體選項，但 PaaS 供應專案有許多優點，使其更符合成本效益，而且在許多情況下都很實用：</span><span class="sxs-lookup"><span data-stu-id="8e7b1-222">Azure makes IaaS data storage options as easy to use as possible, but the PaaS offerings have many advantages that make them more cost-effective and practical for many scenarios:</span></span>

- <span data-ttu-id="8e7b1-223">您不需要建立 Vm，只需使用入口網站或腳本來設定資料存放區。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-223">You don't have to create VMs, you just use the portal or a script to set up a data store.</span></span> <span data-ttu-id="8e7b1-224">如果您想要 200 tb 的資料存放區，可以只按一下按鈕或執行命令，並在幾秒內準備好供您使用。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-224">If you want a 200 terabyte data store, you can just click a button or run a command, and in seconds it's ready for you to use.</span></span>
- <span data-ttu-id="8e7b1-225">您不需要管理或修補服務所使用的 Vm;Microsoft 會自動為您執行此程式。-您不需要擔心設定調整規模或高可用性的基礎結構;Microsoft 會為您處理所有的程式。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-225">You don't have to manage or patch the VMs used by the service; Microsoft does that for you automatically.- You don't have to worry about setting up infrastructure for scaling or high availability; Microsoft handles all that for you.</span></span>
- <span data-ttu-id="8e7b1-226">您不需要購買授權;授權費用會包含在服務費用中。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-226">You don't have to buy licenses; license fees are included in the service fees.</span></span>
- <span data-ttu-id="8e7b1-227">您只需依據使用量付費。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-227">You only pay for what you use.</span></span>

<span data-ttu-id="8e7b1-228">Azure 中的 PaaS 資料儲存選項包括協力廠商提供者的供應專案。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-228">PaaS data storage options in Azure include offerings by third-party providers.</span></span> <span data-ttu-id="8e7b1-229">例如，您可以從 Azure 市集中選擇[MongoLab 附加](https://azure.microsoft.com/documentation/articles/store-mongolab-web-sites-dotnet-store-data-mongodb/)元件，以提供 MongoDB 資料庫即服務。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-229">For example, you can choose the [MongoLab Add-On](https://azure.microsoft.com/documentation/articles/store-mongolab-web-sites-dotnet-store-data-mongodb/) from the Azure Store to provision a MongoDB database as a service.</span></span>

## <a name="choosing-a-data-storage-option"></a><span data-ttu-id="8e7b1-230">選擇資料儲存選項</span><span class="sxs-lookup"><span data-stu-id="8e7b1-230">Choosing a data storage option</span></span>

<span data-ttu-id="8e7b1-231">在所有案例中，沒有任何一種方法適合。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-231">No one approach is right for all scenarios.</span></span> <span data-ttu-id="8e7b1-232">如果有人說這項技術是解答，第一件事就是「問題是什麼？」，因為不同的解決方案會針對不同的專案進行優化。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-232">If anyone says that this technology is the answer, the first thing to ask is "What is the question?", because different solutions are optimized for different things.</span></span> <span data-ttu-id="8e7b1-233">關聯式模型有一些明確的優點;這就是為什麼它已經是這麼久的原因。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-233">There are definite advantages to the relational model; that's why it's been around for so long.</span></span> <span data-ttu-id="8e7b1-234">但是也有可透過 NoSQL 解決方案解決的 SQL 的右下方。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-234">But there are also down-sides to SQL that can be addressed with a NoSQL solution.</span></span>

<span data-ttu-id="8e7b1-235">我們最常看到的工作是一種複合方法，您可以在單一解決方案中使用 SQL 和 NoSQL。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-235">Often what we see work best is a compositional approach, where you use SQL and NoSQL in a single solution.</span></span> <span data-ttu-id="8e7b1-236">即使有人說他們正在採用 NoSQL，如果您深入探索他們的工作，通常會發現它們使用數個不同的 NoSQL 架構：它們使用[CouchDB](http://wiki.apache.org/couchdb/Introduction)、 [Redis](http://redis.io/)，以及[Riak](http://basho.com/riak/)不同的專案。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-236">Even when people say they're embracing NoSQL, if you drill into what they're doing you often find that they're using several different NoSQL frameworks: they're using [CouchDB](http://wiki.apache.org/couchdb/Introduction), and [Redis](http://redis.io/), and [Riak](http://basho.com/riak/) for different things.</span></span> <span data-ttu-id="8e7b1-237">即使是 Facebook （廣泛使用 NoSQL），也會針對服務的不同部分使用不同的 NoSQL 架構。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-237">Even Facebook, which uses NoSQL extensively, uses different NoSQL frameworks for different parts of the service.</span></span> <span data-ttu-id="8e7b1-238">混合和比對資料儲存方法的彈性是雲端的絕佳功能之一，因為它可以輕鬆地使用多個資料解決方案，並將它們整合到單一應用程式中。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-238">The flexibility to mix and match data storage approaches is one of the things that's nice about the cloud, because it's easy to use multiple data solutions and integrate them in a single app.</span></span>

<span data-ttu-id="8e7b1-239">以下是您在選擇方法時要考慮的一些問題：</span><span class="sxs-lookup"><span data-stu-id="8e7b1-239">Here are some questions to think about when you're choosing an approach:</span></span>

| <span data-ttu-id="8e7b1-240">資料語義</span><span class="sxs-lookup"><span data-stu-id="8e7b1-240">Data semantic</span></span> | <span data-ttu-id="8e7b1-241">-什麼是核心資料儲存體和資料存取語義（您儲存關聯式或非結構化資料）？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-241">- What is the core data storage and data access semantic (are you storing relational or unstructured data)?</span></span> <span data-ttu-id="8e7b1-242">非結構化資料（例如媒體檔案）最適合 blob 儲存體;相關資料的集合，例如產品、清查、供應商、客戶訂單等，最適合在關係資料庫中使用。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-242">Unstructured data such as media files fits best in blob storage; a collection of related data such as products, inventories, suppliers, customer orders, etc., fits best in a relational database.</span></span> |
| --- | --- |
| <span data-ttu-id="8e7b1-243">查詢支援</span><span class="sxs-lookup"><span data-stu-id="8e7b1-243">Query support</span></span> | <span data-ttu-id="8e7b1-244">-查詢資料有多簡單？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-244">- How easy is it to query the data?</span></span> <span data-ttu-id="8e7b1-245">-可以有效率地詢問哪些類型的問題？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-245">- What types of questions can be efficiently asked?</span></span> <span data-ttu-id="8e7b1-246">索引鍵/值資料存放區非常適合用來取得具有索引鍵值的單一資料列，而不適合用于複雜的查詢。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-246">Key/value data stores are very good at getting a single row given a key value but not so good for complex queries.</span></span> <span data-ttu-id="8e7b1-247">如果是使用者設定檔資料存放區，您一律會取得某個特定使用者的資料，則索引鍵/值資料存放區可能會正常運作;針對您想要根據各種產品屬性來取得不同群組的產品目錄，關係資料庫可能會有更好的效果。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-247">For a user profile data store where you are always getting the data for one particular user, a key/value data store could work well; for a product catalog where you want to get different groupings based on various product attributes a relational database might work better.</span></span> <span data-ttu-id="8e7b1-248">NoSQL 資料庫可以有效率地儲存大量資料，但您必須針對應用程式如何查詢資料來建立資料庫的結構，而這會讓臨機操作查詢更難執行。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-248">NoSQL databases can store large volumes of data efficiently, but you have to structure the database around how the app queries the data, and this makes ad hoc queries harder to do.</span></span> <span data-ttu-id="8e7b1-249">透過關系資料庫，您幾乎可以建立任何類型的查詢。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-249">With a relational database, you can build almost any kind of query.</span></span> |
| <span data-ttu-id="8e7b1-250">功能投射</span><span class="sxs-lookup"><span data-stu-id="8e7b1-250">Functional projection</span></span> | <span data-ttu-id="8e7b1-251">-是否可以在伺服器端執行問題、匯總等等？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-251">- Can questions, aggregations, etc., be executed server-side?</span></span> <span data-ttu-id="8e7b1-252">如果我從 SQL 中的資料表執行 SELECT COUNT （\*），它會非常有效率地在伺服器上執行所有工作，並傳回我要尋找的數位。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-252">If I run SELECT COUNT(\*) from a table in SQL, it will very efficiently do all the work on the server and return the number I'm looking for.</span></span> <span data-ttu-id="8e7b1-253">如果我想要從不支援匯總的 NoSQL 資料存放區進行相同的計算，這就是沒有效率的「未系結查詢」，而且可能會超時。即使查詢成功，我還是必須將伺服器上的所有資料都取出到用戶端，並計算用戶端上的資料列。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-253">If I want the same calculation from a NoSQL data store that doesn't support aggregation, this is an inefficient "unbounded query" and will probably time out. Even if the query succeeds I have to retrieve all of the data from the server to the client and count the rows on the client.</span></span> <span data-ttu-id="8e7b1-254">-可以使用哪些語言或類型的運算式？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-254">- What languages or types of expressions can be used?</span></span> <span data-ttu-id="8e7b1-255">在關係資料庫中，我可以使用 SQL。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-255">With a relational database I can use SQL.</span></span> <span data-ttu-id="8e7b1-256">使用某些 NoSQL 資料庫（例如 Azure 資料表儲存體）時，我會使用[OData](http://www.odata.org/)，而我可以做的就是對主要索引鍵進行篩選並取得投影（選取可用欄位的子集）。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-256">With some NoSQL databases such as Azure Table storage, I'll be using [OData](http://www.odata.org/), and all I can do is filter on primary key and get projections (select a subset of the available fields).</span></span> |
| <span data-ttu-id="8e7b1-257">輕鬆擴充性</span><span class="sxs-lookup"><span data-stu-id="8e7b1-257">Ease of scalability</span></span> | <span data-ttu-id="8e7b1-258">-資料需要多長的時間和規模？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-258">- How often and how much will the data need to scale?</span></span> <span data-ttu-id="8e7b1-259">-平臺原本就會執行相應放大嗎？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-259">- Does the platform natively implement scale-out?</span></span> <span data-ttu-id="8e7b1-260">-新增/移除容量（大小和輸送量）有多簡單？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-260">- How easy is it to add/remove capacity (size and throughput)?</span></span> <span data-ttu-id="8e7b1-261">關係資料庫和資料表不會自動進行分割以使其可調整，因此很容易擴充到超出特定限制。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-261">Relational databases and tables aren't automatically partitioned to make them scalable, so they are difficult to scale beyond certain limitations.</span></span> <span data-ttu-id="8e7b1-262">NoSQL 資料存放區（例如 Azure 資料表儲存體）本質上會分割所有專案，幾乎不會有新增資料分割的限制。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-262">NoSQL data stores like Azure Table storage inherently partition everything, and there is almost no limit to adding partitions.</span></span> <span data-ttu-id="8e7b1-263">您可以輕鬆地將表格儲存體調整為 200 tb，但 Azure SQL Database 的資料庫大小上限是 500 gb。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-263">You can readily scale Table Storage up to 200 terabytes, but the maximum database size for Azure SQL Database is 500 gigabytes.</span></span> <span data-ttu-id="8e7b1-264">您可以藉由將關聯式資料分割成多個資料庫來進行調整，但設定應用程式以支援該模型，這牽涉到許多程式設計工作。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-264">You can scale relational data by partitioning it into multiple databases, but setting up an application to support that model involves a lot of programming work.</span></span> |
| <span data-ttu-id="8e7b1-265">檢測與管理能力</span><span class="sxs-lookup"><span data-stu-id="8e7b1-265">Instrumentation and Manageability</span></span> | <span data-ttu-id="8e7b1-266">-要檢測、監視和管理的平臺有多簡單？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-266">- How easy is the platform to instrument, monitor, and manage?</span></span> <span data-ttu-id="8e7b1-267">您必須持續掌握資料存放區的健全狀況和效能，因此您需要事先知道平臺提供給您的計量，以及您必須自行開發的內容。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-267">You will need to keep informed about the health and performance of your data store, so you need to know up front what metrics a platform gives you for free, and what you have to develop yourself.</span></span> |
| <span data-ttu-id="8e7b1-268">作業</span><span class="sxs-lookup"><span data-stu-id="8e7b1-268">Operations</span></span> | <span data-ttu-id="8e7b1-269">-在 Azure 上部署和執行的平臺有多簡單？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-269">- How easy is the platform to deploy and run on Azure?</span></span> <span data-ttu-id="8e7b1-270">PaaS?</span><span class="sxs-lookup"><span data-stu-id="8e7b1-270">PaaS?</span></span> <span data-ttu-id="8e7b1-271">IaaS?</span><span class="sxs-lookup"><span data-stu-id="8e7b1-271">IaaS?</span></span> <span data-ttu-id="8e7b1-272">廠商?</span><span class="sxs-lookup"><span data-stu-id="8e7b1-272">Linux?</span></span> <span data-ttu-id="8e7b1-273">您可以輕鬆地在 Azure 上設定表格儲存體和 SQL Database。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-273">Table Storage and SQL Database are easy to set up on Azure.</span></span> <span data-ttu-id="8e7b1-274">不是內建 Azure PaaS 解決方案的平臺需要更多的人力。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-274">Platforms that aren't built-in Azure PaaS solutions require more effort.</span></span> |
| <span data-ttu-id="8e7b1-275">API 支援</span><span class="sxs-lookup"><span data-stu-id="8e7b1-275">API Support</span></span> | <span data-ttu-id="8e7b1-276">-這是可讓您輕鬆使用平臺的 API 嗎？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-276">- Is an API available that makes it easy to work with the platform?</span></span> <span data-ttu-id="8e7b1-277">針對 Azure 資料表服務，有一個 SDK 具有 .NET API，可支援 .NET 4.5 非同步程式設計模型。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-277">For the Azure Table Service there's an SDK with a .NET API that supports the .NET 4.5 asynchronous programming model.</span></span> <span data-ttu-id="8e7b1-278">如果您撰寫的是 .NET 應用程式，相較于另一個沒有 API 或較不完整的索引鍵/值資料存放區平臺，撰寫和測試 Azure 資料表服務的程式碼會更容易。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-278">If you're writing a .NET app, it'll be much easier to write and test code for the Azure Table Service compared to another key/value column data store platform that has no API or a less comprehensive one.</span></span> |
| <span data-ttu-id="8e7b1-279">交易完整性與資料一致性</span><span class="sxs-lookup"><span data-stu-id="8e7b1-279">Transactional integrity and data consistency</span></span> | <span data-ttu-id="8e7b1-280">-平臺是否支援交易以確保資料的一致性是非常重要的嗎？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-280">- Is it critical that the platform support transactions in order to guarantee data consistency?</span></span> <span data-ttu-id="8e7b1-281">為了追蹤大量傳送的電子郵件，效能和低資料儲存成本可能比自動支援資料平臺中的交易或參考完整性更重要，因此 Azure 資料表服務是不錯的選擇。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-281">For keeping track of bulk emails sent, performance and low data storage cost might be more important than automatic support for transactions or referential integrity in the data platform, making the Azure Table Service a good choice.</span></span> <span data-ttu-id="8e7b1-282">針對追蹤銀行帳戶餘額或採購單，提供強式交易保證的關係資料庫平臺是較佳的選擇。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-282">For tracking bank account balances or purchase orders a relational database platform that provides strong transactional guarantees would be a better choice.</span></span> |
| <span data-ttu-id="8e7b1-283">業務持續性</span><span class="sxs-lookup"><span data-stu-id="8e7b1-283">Business continuity</span></span> | <span data-ttu-id="8e7b1-284">-備份、還原和嚴重損壞修復有多簡單？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-284">- How easy are backup, restore, and disaster recovery?</span></span> <span data-ttu-id="8e7b1-285">較早或之後的生產資料將會損毀，而您將需要復原功能。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-285">Sooner or later production data will get corrupted and you'll need an undo function.</span></span> <span data-ttu-id="8e7b1-286">關係資料庫通常會有更精細的還原功能，例如能夠還原到某個時間點。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-286">Relational databases often have more fine-grained restore capabilities, such as the ability to restore to a point in time.</span></span> <span data-ttu-id="8e7b1-287">瞭解您所考慮的每個平臺中有哪些可用的還原功能是要考慮的重要因素。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-287">Understanding what restore features are available in each platform you're considering is an important factor to consider.</span></span> |
| <span data-ttu-id="8e7b1-288">成本</span><span class="sxs-lookup"><span data-stu-id="8e7b1-288">Cost</span></span> | <span data-ttu-id="8e7b1-289">-如果有多個平臺可支援您的資料工作負載，它們如何比較成本？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-289">- If more than one platform can support your data workload, how do they compare in cost?</span></span> <span data-ttu-id="8e7b1-290">例如，如果您使用 ASP.NET Identity，您可以將使用者設定檔資料儲存在 Azure 資料表服務或 Azure SQL Database 中。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-290">For example, if you use ASP.NET Identity, you can store user profile data in Azure Table Service or Azure SQL Database.</span></span> <span data-ttu-id="8e7b1-291">如果您不需要 SQL Database 的豐富查詢功能，您可以選擇 Azure 資料表，因為它的成本會比指定的儲存體數量低。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-291">If you don't need the rich querying facilities of SQL Database, you might choose Azure Tables in part because it costs much less for a given amount of storage.</span></span> |

<span data-ttu-id="8e7b1-292">我們通常建議您在選擇資料儲存體解決方案之前，知道每個類別中問題的答案。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-292">What we generally recommend is know the answer to the questions in each of these categories before you choose your data storage solutions.</span></span>

<span data-ttu-id="8e7b1-293">此外，您的工作負載可能會有某些平臺可支援的特定需求，而無法比其他平臺更好。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-293">In addition, your workload might have specific requirements that some platforms can support better than others.</span></span> <span data-ttu-id="8e7b1-294">例如:</span><span class="sxs-lookup"><span data-stu-id="8e7b1-294">For example:</span></span>

- <span data-ttu-id="8e7b1-295">您的應用程式需要審核功能嗎？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-295">Does your application require audit capabilities?</span></span>
- <span data-ttu-id="8e7b1-296">您的資料壽命需求為何--您需要自動封存或清除功能嗎？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-296">What are your data longevity requirements -- do you require automated archival or purging capabilities?</span></span>
- <span data-ttu-id="8e7b1-297">您有特殊的安全性需求嗎？</span><span class="sxs-lookup"><span data-stu-id="8e7b1-297">Do you have specialized security needs?</span></span> <span data-ttu-id="8e7b1-298">例如，資料包含 PII （個人識別資訊），但您必須能夠確保該 PII 不會從查詢結果中排除。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-298">For example, the data includes PII (personally identifiable information) but you have to be able to make sure that PII is excluded from query results.</span></span>
- <span data-ttu-id="8e7b1-299">如果您有一些資料因為法規或技術因素而無法儲存在雲端中，您可能需要雲端資料儲存平臺，以協助與您的內部部署儲存體整合。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-299">If you have some data that can't be stored in the cloud for regulatory or technological reasons, you might need a cloud data storage platform that facilitates integrating with your on-premises storage.</span></span>

## <a name="demo--using-sql-database-in-azure"></a><span data-ttu-id="8e7b1-300">示範-在 Azure 中使用 SQL Database</span><span class="sxs-lookup"><span data-stu-id="8e7b1-300">Demo – using SQL Database in Azure</span></span>

<span data-ttu-id="8e7b1-301">Fix It 應用程式會使用關係資料庫來儲存工作。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-301">The Fix It app uses a relational database to store tasks.</span></span> <span data-ttu-id="8e7b1-302">[[自動化所有專案] 一章](automate-everything.md)中所顯示的環境建立 Windows PowerShell 腳本會建立兩個 SQL Database 實例。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-302">The environment creation Windows PowerShell script shown in the [Automate Everything chapter](automate-everything.md) creates two SQL Database instances.</span></span> <span data-ttu-id="8e7b1-303">按一下 [ **SQL** database] 索引標籤，即可在入口網站中查看這些選項。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-303">You can see these in the portal by clicking the **SQL Databases** tab.</span></span>

![入口網站中的 SQL 資料庫](data-storage-options/_static/image8.png)

<span data-ttu-id="8e7b1-305">您也可以使用入口網站輕鬆建立資料庫。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-305">It's also easy to create databases by using the portal.</span></span>

<span data-ttu-id="8e7b1-306">按一下 **新增--資料服務** -- **SQL Database** -- **快速建立**，輸入資料庫名稱，選擇您的帳戶中已有的伺服器，或建立一個新的伺服器，然後按一下 **建立 SQL Database**。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-306">Click **New -- Data Services** -- **SQL Database** -- **Quick Create**, enter a database name, choose a server you already have in your account or create a new one, and click **Create SQL Database**.</span></span>

![New SQL Database](data-storage-options/_static/image9.png)

<span data-ttu-id="8e7b1-308">請等候數秒，而且您已在 Azure 中備妥可供您使用的資料庫。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-308">Wait several seconds, and you have a database in Azure ready for you to use.</span></span>

![已建立新 SQL Database](data-storage-options/_static/image10.png)

<span data-ttu-id="8e7b1-310">因此，Azure 會在幾秒內完成，在內部部署環境中可能需要一天或一周或更久的時間。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-310">So Azure does in a few seconds what it may take you a day or a week or longer to accomplish in the on-premises environment.</span></span> <span data-ttu-id="8e7b1-311">而且，由於您可以輕鬆地在腳本中自動建立資料庫，或藉由使用管理 API 來進行相應放大，因此只要您的應用程式已經過設計，就可以透過將資料分散到多個資料庫，以動態方式向外延展。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-311">And since you can just as easily create databases automatically in a script or by using a management API, you can dynamically scale out by spreading your data across multiple databases, so long as your application has been programmed for that.</span></span>

<span data-ttu-id="8e7b1-312">這是我們的平臺即服務模型的範例。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-312">This is an example of our Platform-as-a-Service model.</span></span> <span data-ttu-id="8e7b1-313">您不需要管理伺服器，而是這麼做。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-313">You don't have to manage the servers, we do it.</span></span> <span data-ttu-id="8e7b1-314">您不需要擔心備份，而是這麼做。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-314">You don't have to worry about backups, we do it.</span></span> <span data-ttu-id="8e7b1-315">它會在高可用性中執行–資料庫中的資料會自動複寫到三部伺服器上。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-315">It's running in high availability – the data in the database is replicated across three servers automatically.</span></span> <span data-ttu-id="8e7b1-316">如果電腦停止，我們會自動故障，而且您不會遺失任何資料。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-316">If a machine dies, we automatically fail over and you lose no data.</span></span> <span data-ttu-id="8e7b1-317">伺服器會定期修補，您不需要擔心。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-317">The server is patched regularly, you don't need to worry about that.</span></span>

<span data-ttu-id="8e7b1-318">按一下按鈕，您就會取得所需的確切連接字串，而且可以立即開始使用新的資料庫。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-318">Click a button and you get the exact connection string you need and can immediately start using the new database.</span></span>

![連接字串](data-storage-options/_static/image11.png)

<span data-ttu-id="8e7b1-320">儀表板會顯示您的連線歷程記錄和使用的儲存體數量。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-320">The Dashboard shows you connection history and amount of storage used.</span></span>

![SQL Database 儀表板](data-storage-options/_static/image12.png)

<span data-ttu-id="8e7b1-322">您可以在入口網站中或使用您已熟悉的 SQL Server 工具（包括 SQL Server Management Studio （SSMS）和 Visual Studio 工具 SQL Server 物件總管（SSOX）和伺服器總管）來管理資料庫。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-322">You can manage databases in the portal or by using SQL Server tools you're already familiar with, including SQL Server Management Studio (SSMS) and the Visual Studio tools SQL Server Object Explorer (SSOX) and Server Explorer.</span></span>

![SSOX](data-storage-options/_static/image13.png)

<span data-ttu-id="8e7b1-324">另一個不錯的事是計價模式。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-324">Another nice thing is the pricing model.</span></span> <span data-ttu-id="8e7b1-325">您可以使用免費的 20 MB 資料庫開始開發，而生產資料庫每月大約會啟動 $5。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-325">You can start development with a free 20 MB database, and a production database starts at about $5 per month.</span></span> <span data-ttu-id="8e7b1-326">您只需支付實際儲存在資料庫中的資料量，而不是您的最大容量。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-326">You pay only for the amount of data you actually store in the database, not the maximum capacity.</span></span> <span data-ttu-id="8e7b1-327">您不需要購買授權。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-327">You don't have to buy a license.</span></span>

<span data-ttu-id="8e7b1-328">SQL Database 很容易調整。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-328">SQL Database is easy to scale.</span></span> <span data-ttu-id="8e7b1-329">針對 Fix It 應用程式，我們在自動化腳本中建立的資料庫的上限為 1 gb。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-329">For the Fix It app, the database we create in our automation script is capped at 1 gig.</span></span> <span data-ttu-id="8e7b1-330">如果您想要將它相應增加至 150 gb，您可以直接移至入口網站並變更該設定，或執行 REST API 命令，並在幾秒內擁有可以部署資料的 150 gb 資料庫。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-330">If you want to scale it up to 150 gig, you can just go into the portal and change that setting, or execute a REST API command, and in seconds you have a 150 gig database that you can deploy data into.</span></span>

![SQL Database 版本和大小](data-storage-options/_static/image14.png)

<span data-ttu-id="8e7b1-332">這就是雲端的威力，可以快速輕鬆地建立基礎結構，並立即開始使用。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-332">That's the power of the cloud to stand up infrastructure quickly and easily and start using it immediately.</span></span>

<span data-ttu-id="8e7b1-333">Fix It 應用程式會使用兩個 SQL 資料庫，一個用於成員資格（驗證和授權），一個用於資料，而這就是您要進行布建和調整它所需的一切。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-333">The Fix It app uses two SQL databases, one for membership (authentication and authorization) and one for data, and this is all you have to do to provision it and scale it.</span></span> <span data-ttu-id="8e7b1-334">您先前已瞭解如何透過 Windows PowerShell 腳本布建資料庫，現在您也已瞭解在入口網站中有多麼簡單。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-334">You saw earlier how to provision the databases through Windows PowerShell scripts, and now you've also seen how easy it is to do in the portal.</span></span>

## <a name="entity-framework-versus-direct-database-access-using-adonet"></a><span data-ttu-id="8e7b1-335">Entity Framework 與使用 ADO.NET 直接存取資料庫</span><span class="sxs-lookup"><span data-stu-id="8e7b1-335">Entity Framework versus direct database access using ADO.NET</span></span>

<span data-ttu-id="8e7b1-336">Fix It 應用程式會使用 Entity Framework 來存取這些資料庫，這是 Microsoft 建議的 .NET 應用程式的 ORM （物件關聯式對應工具）。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-336">The Fix It app accesses these databases by using the Entity Framework, Microsoft's recommended ORM (object-relational mapper) for .NET applications.</span></span> <span data-ttu-id="8e7b1-337">ORM 是一個絕佳的工具，可提升開發人員的生產力，但在某些情況下，生產力的代價是降低效能。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-337">An ORM is a great tool that facilitates developer productivity, but productivity comes at the expense of degraded performance in some scenarios.</span></span> <span data-ttu-id="8e7b1-338">在真實世界的雲端應用程式中，您不會選擇使用 EF 或直接使用 ADO.NET，您將會同時使用這兩者。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-338">In a real-world cloud app you won't be making a choice between using EF or using ADO.NET directly -- you'll use both.</span></span> <span data-ttu-id="8e7b1-339">在大部分的情況下，當您撰寫與資料庫搭配使用的程式碼時，取得最大效能並不重要，而且您可以利用 Entity Framework 所取得的簡化編碼和測試。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-339">Most of the time when you're writing code that works with the database, getting maximum performance is not critical and you can take advantage of the simplified coding and testing that you get with the Entity Framework.</span></span> <span data-ttu-id="8e7b1-340">在 EF 負荷導致無法接受效能的情況下，您可以使用 ADO.NET 來撰寫及執行自己的查詢，最好是藉由呼叫預存程式。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-340">In situations where the EF overhead would cause unacceptable performance, you can write and execute your own queries using ADO.NET, ideally by calling stored procedures.</span></span>

<span data-ttu-id="8e7b1-341">無論您使用何種方法來存取資料庫，您都想要盡可能將「對話」最小化。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-341">Whatever method you use to access the database, you want to minimize "chattiness" as much as possible.</span></span> <span data-ttu-id="8e7b1-342">換句話說，如果您可以在一個較大的查詢結果集中取得所需的所有資料，而不是數十個或數百個較小的資料集，通常是比較理想的作法。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-342">In other words, if you can get all the data you need in one larger query result set rather than dozens or hundreds of smaller ones, that's usually preferable.</span></span> <span data-ttu-id="8e7b1-343">例如，如果您需要列出學生以及他們所註冊的課程，通常最好是在一個聯結查詢中取得所有資料，而不是讓學生參與一個查詢，並針對每個學生的課程執行個別的查詢。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-343">For example, if you need to list students and the courses they're enrolled in, it's usually better to get all of the data in one join query rather than getting the students in one query and executing separate queries for each student's courses.</span></span>

## <a name="sql-databases-and-the-entity-framework-in-the-fix-it-app"></a><span data-ttu-id="8e7b1-344">[修正 It] 應用程式中的 SQL 資料庫和 Entity Framework</span><span class="sxs-lookup"><span data-stu-id="8e7b1-344">SQL databases and the Entity Framework in the Fix It app</span></span>

<span data-ttu-id="8e7b1-345">在修正 It 應用程式中，`FixItContext` 類別（衍生自 Entity Framework `DbContext` 類別）會識別資料庫，並指定資料庫中的資料表。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-345">In the Fix It app the `FixItContext` class, which derives from the Entity Framework `DbContext` class, identifies the database and specifies the tables in the database.</span></span> <span data-ttu-id="8e7b1-346">內容會指定工作的實體集（資料表），而程式碼會將連接字串名稱傳入內容。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-346">The context specifies an entity set (table) for tasks, and the code passes in to the context the connection string name.</span></span> <span data-ttu-id="8e7b1-347">該名稱會參考在 web.config 檔案中定義的連接字串。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-347">That name refers to a connection string that is defined in the Web.config file.</span></span>

[!code-csharp[Main](data-storage-options/samples/sample1.cs?highlight=4,8)]

<span data-ttu-id="8e7b1-348">*Web.config 檔案*中的連接字串名為 appdb （這裡指向本機開發資料庫）：</span><span class="sxs-lookup"><span data-stu-id="8e7b1-348">The connection string in the *Web.config* file is named appdb (here pointing to the local development database):</span></span>

[!code-xml[Main](data-storage-options/samples/sample2.xml?highlight=3)]

<span data-ttu-id="8e7b1-349">Entity Framework 會根據 `FixItTask` 實體類別中包含的屬性來建立*FixItTasks*資料表。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-349">The Entity Framework creates a *FixItTasks* table based on the properties included in the `FixItTask` entity class.</span></span> <span data-ttu-id="8e7b1-350">這是簡單的 POCO （單純的 CLR 物件）類別，這表示它不會繼承或具有 Entity Framework 的任何相依性。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-350">This is a simple POCO (Plain Old CLR Object) class, which means it doesn't inherit from or have any dependencies on the Entity Framework.</span></span> <span data-ttu-id="8e7b1-351">但是 Entity Framework 知道如何根據它來建立資料表，並對它執行 CRUD （建立-讀取-更新-刪除）作業。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-351">But Entity Framework knows how to create a table based on it and execute CRUD (create-read-update-delete) operations with it.</span></span>

[!code-csharp[Main](data-storage-options/samples/sample3.cs)]

![FixItTasks 資料表](data-storage-options/_static/image15.png)

<span data-ttu-id="8e7b1-353">Fix It 應用程式包含一個儲存機制介面，用於與資料存放區一起使用的 CRUD 作業。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-353">The Fix It app includes a repository interface that it uses for CRUD operations working with the data store.</span></span>

[!code-csharp[Main](data-storage-options/samples/sample4.cs)]

<span data-ttu-id="8e7b1-354">請注意，存放庫方法全都是非同步，因此所有資料存取都可以用完全非同步方式來完成。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-354">Notice that the repository methods are all async, so all data access can be done in a completely asynchronous way.</span></span>

<span data-ttu-id="8e7b1-355">存放庫的執行會呼叫 Entity Framework 非同步方法來處理資料，包括 LINQ 查詢，以及插入、更新和刪除作業。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-355">The repository implementation calls Entity Framework async methods to work with the data, including LINQ queries as well as for insert, update, and delete operations.</span></span> <span data-ttu-id="8e7b1-356">以下是用來查閱 Fix It 工作的程式碼範例。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-356">Here's an example of the code for looking up a Fix It task.</span></span>

[!code-csharp[Main](data-storage-options/samples/sample5.cs)]

<span data-ttu-id="8e7b1-357">您會發現這裡還有一些時間和錯誤記錄程式碼，我們將在稍後的[監視和遙測一章](monitoring-and-telemetry.md)中探討。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-357">You'll notice there's also some timing and error logging code here, we'll look at that later in the [Monitoring and Telemetry chapter](monitoring-and-telemetry.md).</span></span>

<a id="sqliaas"></a>
## <a name="choosing-sql-database-paas-versus-sql-server-in-a-vm-iaas-in-azure"></a><span data-ttu-id="8e7b1-358">在 Azure 中選擇 VM （IaaS）中的 SQL Database （PaaS）與 SQL Server</span><span class="sxs-lookup"><span data-stu-id="8e7b1-358">Choosing SQL Database (PaaS) versus SQL Server in a VM (IaaS) in Azure</span></span>

<span data-ttu-id="8e7b1-359">SQL Server 和 Azure SQL Database 的一件事，就是兩者的核心程式設計模型都相同。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-359">A nice thing about SQL Server and Azure SQL Database is that the core programming model for both of them is identical.</span></span> <span data-ttu-id="8e7b1-360">您在這兩種環境中都可以使用相同的技能。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-360">You can use most of the same skills in both environments.</span></span> <span data-ttu-id="8e7b1-361">您甚至可以使用開發中的 SQL Server 資料庫，以及雲端中的 SQL Database 實例，也就是設定 Fix It 應用程式的方式。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-361">You can even use a SQL Server database in development and a SQL Database instance in the cloud, which is how the Fix It app is set up.</span></span>

<span data-ttu-id="8e7b1-362">或者，您可以在您于內部部署執行的雲端中執行相同的 SQL Server，方法是將它安裝在 IaaS Vm 上。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-362">As an alternative, you can run the same SQL Server in the cloud that you run on-premises by installing it on IaaS VMs.</span></span> <span data-ttu-id="8e7b1-363">針對某些繼承應用程式，在 VM 中執行 SQL Server 可能是較佳的解決方案。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-363">For some legacy applications, running SQL Server in a VM might be a better solution.</span></span> <span data-ttu-id="8e7b1-364">因為 SQL Server 的資料庫是在專用的 VM 上執行，所以它所擁有的資源比在共用伺服器上執行的 SQL Database 資料庫還多。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-364">Because a SQL Server database runs on a dedicated VM, it has more resources available to it than a SQL Database database that runs on a shared server.</span></span> <span data-ttu-id="8e7b1-365">這表示 SQL Server 資料庫可能會變得更大，而且仍然正常執行。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-365">That means a SQL Server database can be larger and still perform well.</span></span> <span data-ttu-id="8e7b1-366">一般來說，資料庫大小和資料表大小越小，使用案例就越適合 SQL Database （PaaS）。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-366">In general, the smaller the database size and table size, the better the use case works for SQL Database (PaaS).</span></span>

<span data-ttu-id="8e7b1-367">以下是如何在兩個模型之間進行選擇的一些指導方針。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-367">Here are some guidelines on how to choose between the two models.</span></span>

| <span data-ttu-id="8e7b1-368">Azure SQL Database (PaaS)</span><span class="sxs-lookup"><span data-stu-id="8e7b1-368">Azure SQL Database (PaaS)</span></span> | <span data-ttu-id="8e7b1-369">虛擬機器（IaaS）中的 SQL Server</span><span class="sxs-lookup"><span data-stu-id="8e7b1-369">SQL Server in a Virtual Machine (IaaS)</span></span> |
| --- | --- |
| <span data-ttu-id="8e7b1-370">**優點**：您不需要建立或管理 vm、更新或修補作業系統或 SQL;Azure 會為您執行此程式。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-370">**Pros** - You don't have to create or manage VMs, update or patch OS or SQL; Azure does that for you.</span></span> <span data-ttu-id="8e7b1-371">-內建高可用性，具有資料庫層級 SLA。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-371">- Built-in High Availability, with a database-level SLA.</span></span> <span data-ttu-id="8e7b1-372">-低擁有權總成本（TCO），因為您只需支付所使用的部分（不需要授權）。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-372">- Low total cost of ownership (TCO) because you pay only for what you use (no license required).</span></span> <span data-ttu-id="8e7b1-373">-適用于處理大量較小的資料庫（&lt;= 500 GB）。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-373">- Good for handling large numbers of smaller databases (&lt;=500 GB each).</span></span> <span data-ttu-id="8e7b1-374">-輕鬆地以動態方式建立新的資料庫以啟用相應放大。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-374">- Easy to dynamically create new databases to enable scale-out.</span></span> | <span data-ttu-id="8e7b1-375">***優點***-與內部部署 SQL Server 的功能相容。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-375">***Pros*** - Feature-compatible with on-premises SQL Server.</span></span> <span data-ttu-id="8e7b1-376">-可以透過 VM 層級 SLA，透過 2 + Vm 中的 AlwaysOn 來執行 SQL Server[高可用性](https://www.microsoft.com/sqlserver/solutions-technologies/mission-critical-operations/high-availability.aspx)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-376">- Can implement SQL Server [High Availability via AlwaysOn](https://www.microsoft.com/sqlserver/solutions-technologies/mission-critical-operations/high-availability.aspx) in 2+ VMs, with VM-level SLA.</span></span> <span data-ttu-id="8e7b1-377">-您可以完整控制 SQL 的管理方式。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-377">- You have complete control over how SQL is managed.</span></span> <span data-ttu-id="8e7b1-378">-可以重複使用您已經擁有的 SQL 授權，或按小時支付一次。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-378">- Can re-use SQL licenses you already own, or pay by the hour for one.</span></span> <span data-ttu-id="8e7b1-379">-適用于處理較少但較大（1 TB 以上）的資料庫。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-379">- Good for handling fewer but larger (1 TB+) databases.</span></span> |
| <span data-ttu-id="8e7b1-380">**缺點**-相較于內部部署 SQL Server （缺少[CLR 整合](https://technet.microsoft.com/library/ms131102.aspx)、 [TDE](https://technet.microsoft.com/library/bb934049.aspx)、[壓縮支援](https://technet.microsoft.com/library/cc280449.aspx)、 [SQL Server Reporting Services](https://technet.microsoft.com/library/ms159106.aspx)等），其部分功能差距-資料庫大小限制為500gb。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-380">**Cons** - Some feature gaps compared to on-premises SQL Server (lack of [CLR integration](https://technet.microsoft.com/library/ms131102.aspx), [TDE](https://technet.microsoft.com/library/bb934049.aspx), [compression support](https://technet.microsoft.com/library/cc280449.aspx), [SQL Server Reporting Services](https://technet.microsoft.com/library/ms159106.aspx), etc.) - Database size limit of 500GB.</span></span> | <span data-ttu-id="8e7b1-381">***缺點***-更新/修補程式（OS 和 SQL）是您負責建立和管理 db 的責任-磁片 IOPS （每秒輸入/輸出作業）限制為大約8000（經由16個數據磁片磁碟機）。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-381">***Cons*** - Updates/patches (OS and SQL) are your responsibility - Creation and management of DBs are your responsibility - Disk IOPS (input/output operations per second) limited to about 8000 (via 16 data drives).</span></span> |

<span data-ttu-id="8e7b1-382">如果您想要在 VM 中使用 SQL Server，您可以使用自己的 SQL Server 授權，或按小時支付一次。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-382">If you want to use SQL Server in a VM, you can use your own SQL Server license, or you can pay for one by the hour.</span></span> <span data-ttu-id="8e7b1-383">例如，在入口網站中或透過 REST API，您可以使用 SQL Server 映射來建立新的 VM。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-383">For example, in the portal or via the REST API you can create a new VM using a SQL Server image.</span></span>

![使用 SQL Server 建立 VM](data-storage-options/_static/image16.png)

![SQL Server 的 VM 映射清單](data-storage-options/_static/image17.png)

<span data-ttu-id="8e7b1-386">當您建立具有 SQL Server 映射的 VM 時，我們會根據您的 VM 使用量，以小時為單位來費率 SQL Server 授權成本。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-386">When you create a VM with a SQL Server image, we pro-rate the SQL Server license cost by the hour based on your usage of the VM.</span></span> <span data-ttu-id="8e7b1-387">如果您的專案只會執行幾個月，則以小時為單位付費會較便宜。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-387">If you have a project that's only going to run for a couple of months, it's cheaper to pay by the hour.</span></span> <span data-ttu-id="8e7b1-388">如果您認為您的專案將會持續幾年，則以平常的方式購買授權較便宜。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-388">If you think your project is going to last for years, it's cheaper to buy the license the way you normally do.</span></span>

## <a name="summary"></a><span data-ttu-id="8e7b1-389">總結</span><span class="sxs-lookup"><span data-stu-id="8e7b1-389">Summary</span></span>

<span data-ttu-id="8e7b1-390">雲端運算讓混搭資料儲存的方法更加實用，以符合您應用程式的需求。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-390">Cloud computing makes it practical to mix and match data storage approaches to best fit the needs of your application.</span></span> <span data-ttu-id="8e7b1-391">如果您要建立新的應用程式，請仔細思考這裡所列的問題，以選擇當您的應用程式成長時，會繼續正常運作的方法。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-391">If you're building a new application, think carefully about the questions listed here in order to pick approaches that will continue to work well when your application grows.</span></span> <span data-ttu-id="8e7b1-392">[下一章](data-partitioning-strategies.md)將說明一些您可以用來結合多個資料儲存方法的分割策略。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-392">The [next chapter](data-partitioning-strategies.md) will explain some partitioning strategies that you can use to combine multiple data storage approaches.</span></span>

## <a name="resources"></a><span data-ttu-id="8e7b1-393">資源</span><span class="sxs-lookup"><span data-stu-id="8e7b1-393">Resources</span></span>

<span data-ttu-id="8e7b1-394">如需詳細資訊，請參閱下列資源。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-394">For more information, see the following resources.</span></span>

<span data-ttu-id="8e7b1-395">選擇資料庫平臺：</span><span class="sxs-lookup"><span data-stu-id="8e7b1-395">Choosing a database platform:</span></span>

- <span data-ttu-id="8e7b1-396">[可高度擴充解決方案的資料存取：使用 SQL、NoSQL 和多語言持續](https://aka.ms/dag-doc)性。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-396">[Data Access for Highly-Scalable Solutions: Using SQL, NoSQL, and Polyglot Persistence](https://aka.ms/dag-doc).</span></span> <span data-ttu-id="8e7b1-397">透過 Microsoft 模式與實務的電子書，深入探討雲端應用程式可用的各種資料存放區。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-397">E-book by Microsoft Patterns and Practices that goes in depth into the different kinds of data stores available for cloud applications.</span></span>
- <span data-ttu-id="8e7b1-398">[Microsoft 模式和實務-Azure 指引](https://msdn.microsoft.com/library/ff898430.aspx)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-398">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/ff898430.aspx).</span></span> <span data-ttu-id="8e7b1-399">請參閱資料一致性入門、資料複寫和同步處理指引、索引資料表模式、具體化視圖模式。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-399">See Data Consistency Primer, Data Replication and Synchronization Guidance, Index Table pattern, Materialized View pattern.</span></span>
- <span data-ttu-id="8e7b1-400">[基底： Acid 替代方案](http://queue.acm.org/detail.cfm?id=1394128)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-400">[BASE: An Acid Alternative](http://queue.acm.org/detail.cfm?id=1394128).</span></span> <span data-ttu-id="8e7b1-401">有關資料一致性和擴充性之間取捨的文章。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-401">Article about tradeoffs between data consistency and scalability.</span></span>
- <span data-ttu-id="8e7b1-402">七[周內有七個資料庫：現代化資料庫和 NoSQL 移動的指南](https://www.amazon.com/Seven-Databases-Weeks-Modern-Movement/dp/1934356921)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-402">[Seven Databases in Seven Weeks: A Guide to Modern Databases and the NoSQL Movement](https://www.amazon.com/Seven-Databases-Weeks-Modern-Movement/dp/1934356921).</span></span> <span data-ttu-id="8e7b1-403">Eric Redmond 和 Jim 的著作。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-403">Book by Eric Redmond and Jim R. Wilson.</span></span> <span data-ttu-id="8e7b1-404">強烈建議您將自己帶入目前可用的資料儲存平臺範圍。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-404">Highly recommended for introducing yourself to the range of data storage platforms available today.</span></span>

<span data-ttu-id="8e7b1-405">在 SQL Server 和 SQL Database 之間選擇：</span><span class="sxs-lookup"><span data-stu-id="8e7b1-405">Choosing between SQL Server and SQL Database:</span></span>

- <span data-ttu-id="8e7b1-406">[適用于 SQL Database 指引的 Premium Preview](https://msdn.microsoft.com/library/windowsazure/dn369873.aspx)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-406">[Premium Preview for SQL Database Guidance](https://msdn.microsoft.com/library/windowsazure/dn369873.aspx).</span></span> <span data-ttu-id="8e7b1-407">簡介 SQL Database Premium，以及如何在 SQL Database Web 和 Business edition 上選擇它的指引。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-407">An introduction to SQL Database Premium, and guidance on when to choose it over the SQL Database Web and Business editions.</span></span>
- <span data-ttu-id="8e7b1-408">[方針和限制（Azure SQL Database）](https://msdn.microsoft.com/library/windowsazure/ff394102.aspx)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-408">[Guidelines and Limitations (Azure SQL Database)](https://msdn.microsoft.com/library/windowsazure/ff394102.aspx).</span></span> <span data-ttu-id="8e7b1-409">入口網站頁面，連結到 SQL Database 限制的相關檔，包括著重于 SQL Database 不支援之 SQL Server 功能的檔。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-409">Portal page that links to documentation about limitations of SQL Database, including one that focuses on SQL Server features that SQL Database doesn't support.</span></span>
- <span data-ttu-id="8e7b1-410">[Azure 虛擬機器中的 SQL Server](https://msdn.microsoft.com/library/windowsazure/jj823132.aspx)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-410">[SQL Server in Azure Virtual Machines](https://msdn.microsoft.com/library/windowsazure/jj823132.aspx).</span></span> <span data-ttu-id="8e7b1-411">此入口網站頁面會連結到在 Azure 中執行 SQL Server 的相關檔。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-411">Portal page that links to documentation about running SQL Server in Azure.</span></span>
- <span data-ttu-id="8e7b1-412">[Scott Guthrie 說明 Azure 中的 SQL 資料庫](https://azure.microsoft.com/documentation/videos/sql-in-azure-scottgu/)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-412">[Scott Guthrie explains SQL Databases in Azure](https://azure.microsoft.com/documentation/videos/sql-in-azure-scottgu/).</span></span> <span data-ttu-id="8e7b1-413">Scott Guthrie 的6分鐘影片簡介 SQL Database。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-413">6-minute video introduction to SQL Database by Scott Guthrie.</span></span>
- <span data-ttu-id="8e7b1-414">[Azure 虛擬機器中 SQL Server 的應用程式模式和開發策略](https://msdn.microsoft.com/library/windowsazure/dn574746.aspx)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-414">[Application Patterns and Development Strategies for SQL Server in Azure Virtual Machines](https://msdn.microsoft.com/library/windowsazure/dn574746.aspx).</span></span>

<span data-ttu-id="8e7b1-415">在 ASP.NET Web 應用程式中使用 Entity Framework 和 SQL Database</span><span class="sxs-lookup"><span data-stu-id="8e7b1-415">Using Entity Framework and SQL Database in an ASP.NET Web app</span></span>

- <span data-ttu-id="8e7b1-416">[使用 MVC 5 與 EF 6 消費者入門](../../../../mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-416">[Getting Started with EF 6 using MVC 5](../../../../mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span></span> <span data-ttu-id="8e7b1-417">九個部分的教學課程系列，會逐步引導您建立使用 EF 的 MVC 應用程式，並將資料庫部署至 Azure 和 SQL Database。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-417">Nine-part tutorial series that walks you through building an MVC app that uses EF and deploys the database to Azure and SQL Database.</span></span>
- <span data-ttu-id="8e7b1-418">[使用 Visual Studio 的 ASP.NET Web 部署](../../../../web-forms/overview/deployment/visual-studio-web-deployment/introduction.md)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-418">[ASP.NET Web Deployment using Visual Studio](../../../../web-forms/overview/deployment/visual-studio-web-deployment/introduction.md).</span></span> <span data-ttu-id="8e7b1-419">十二部分教學課程系列，深入瞭解如何使用 EF Code First 來部署資料庫。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-419">Twelve-part tutorial series that goes into more depth about how to deploy a database by using EF Code First.</span></span>
- <span data-ttu-id="8e7b1-420">將[具有成員資格、OAuth 和 SQL Database 的 Secure ASP.NET MVC 5 應用程式部署到 Azure 網站](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-mvc-app-membership-oauth-sql-database/)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-420">[Deploy a Secure ASP.NET MVC 5 app with Membership, OAuth, and SQL Database to an Azure Web Site](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-mvc-app-membership-oauth-sql-database/).</span></span> <span data-ttu-id="8e7b1-421">逐步教學課程會逐步引導您建立使用驗證的 web 應用程式、將應用程式資料表儲存在成員資格資料庫中、修改資料庫架構，以及將應用程式部署至 Azure。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-421">Step-by-step tutorial that walks you through creating a web app that uses authentication, stores application tables in the membership database, modifies the database schema, and deploys the app to Azure.</span></span>
- <span data-ttu-id="8e7b1-422">[ASP.NET 資料存取內容對應](https://go.microsoft.com/fwlink/p/?LinkId=282414)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-422">[ASP.NET Data Access Content Map](https://go.microsoft.com/fwlink/p/?LinkId=282414).</span></span> <span data-ttu-id="8e7b1-423">使用 EF 和 SQL Database 的資源連結。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-423">Links to resources for working with EF and SQL Database.</span></span>

<span data-ttu-id="8e7b1-424">在 Azure 上使用 MongoDB：</span><span class="sxs-lookup"><span data-stu-id="8e7b1-424">Using MongoDB on Azure:</span></span>

- <span data-ttu-id="8e7b1-425">[MongoLab-Azure 上的 MongoDB](http://msopentech.com/opentech-projects/mongolab-mongodb-on-windows-azure/)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-425">[MongoLab - MongoDB on Azure](http://msopentech.com/opentech-projects/mongolab-mongodb-on-windows-azure/).</span></span> <span data-ttu-id="8e7b1-426">關於在 Azure 上執行 MongoDB 之檔的入口網站頁面。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-426">Portal page for documentation about running MongoDB on Azure.</span></span>
- <span data-ttu-id="8e7b1-427">[建立 azure 網站，該網站會連線到在 azure 虛擬機器上執行的 MongoDB](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-store-data-mongodb-vm/)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-427">[Create an Azure web site that connects to MongoDB running on a virtual machine in Azure](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-store-data-mongodb-vm/).</span></span> <span data-ttu-id="8e7b1-428">說明如何在 ASP.NET web 應用程式中使用 MongoDB 資料庫的逐步教學課程。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-428">Step-by-step tutorial that shows how to use a MongoDB database in an ASP.NET web application.</span></span>

<span data-ttu-id="8e7b1-429">HDInsight （Azure 上的 Hadoop）：</span><span class="sxs-lookup"><span data-stu-id="8e7b1-429">HDInsight (Hadoop on Azure):</span></span>

- <span data-ttu-id="8e7b1-430">[HDInsight](https://azure.microsoft.com/documentation/services/hdinsight/)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-430">[HDInsight](https://azure.microsoft.com/documentation/services/hdinsight/).</span></span> <span data-ttu-id="8e7b1-431">[Azure](https://azure.microsoft.com/)網站上的 HDInsight 的入口網站檔。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-431">Portal to HDInsight documentation on the [Azure](https://azure.microsoft.com/) website.</span></span>
- <span data-ttu-id="8e7b1-432">[Hadoop 和 HDInsight： Azure 中的海量資料](https://msdn.microsoft.com/magazine/dn385705.aspx)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-432">[Hadoop and HDInsight: Big Data in Azure](https://msdn.microsoft.com/magazine/dn385705.aspx).</span></span> <span data-ttu-id="8e7b1-433">MSDN 雜誌文章 Bruno Terkaly 和 Ricardo Villalobos，介紹 Azure 上的 Hadoop。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-433">MSDN Magazine article by Bruno Terkaly and Ricardo Villalobos, introducing Hadoop on Azure.</span></span>
- <span data-ttu-id="8e7b1-434">[Microsoft 模式和實務-Azure 指引](https://msdn.microsoft.com/library/dn568099.aspx)。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-434">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/dn568099.aspx).</span></span> <span data-ttu-id="8e7b1-435">請參閱 MapReduce 模式。</span><span class="sxs-lookup"><span data-stu-id="8e7b1-435">See MapReduce pattern.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8e7b1-436">[上一頁](single-sign-on.md)
> [下一頁](data-partitioning-strategies.md)</span><span class="sxs-lookup"><span data-stu-id="8e7b1-436">[Previous](single-sign-on.md)
[Next](data-partitioning-strategies.md)</span></span>
