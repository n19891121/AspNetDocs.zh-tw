---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/transient-fault-handling
title: 暫時性錯誤處理（使用 Azure 建立真實世界的雲端應用程式） |Microsoft Docs
author: MikeWasson
description: 使用 Azure 電子書建立真實世界的雲端應用程式，是以 Scott Guthrie 所開發的簡報為基礎。 它會說明13個模式和實務，
ms.author: riande
ms.date: 11/03/2015
ms.assetid: 7ead83bc-c08c-4b26-8617-00e07292e35c
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/transient-fault-handling
msc.type: authoredcontent
ms.openlocfilehash: e798cb83cfb97db63fef6dc38c8f62804461d01b
ms.sourcegitcommit: 7709c0a091b8d55b7b33bad8849f7b66b23c3d72
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/19/2020
ms.locfileid: "77456851"
---
# <a name="transient-fault-handling-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="a1545-104">暫時性錯誤處理（使用 Azure 建立真實世界的雲端應用程式）</span><span class="sxs-lookup"><span data-stu-id="a1545-104">Transient Fault Handling (Building Real-World Cloud Apps with Azure)</span></span>

<span data-ttu-id="a1545-105">由[Mike Wasson](https://github.com/MikeWasson)， [Rick Anderson](https://twitter.com/RickAndMSFT)， [Tom 作者: dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="a1545-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://twitter.com/RickAndMSFT), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="a1545-106">[下載 Fix It 專案](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4)或[下載電子書](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="a1545-106">[Download Fix It Project](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="a1545-107">**使用 Azure 電子書建立真實世界的雲端應用程式**，是以 Scott Guthrie 所開發的簡報為基礎。</span><span class="sxs-lookup"><span data-stu-id="a1545-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="a1545-108">其中說明13種模式和作法，可協助您成功開發雲端 web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="a1545-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="a1545-109">如需電子書的相關資訊，請參閱[第一章](introduction.md)。</span><span class="sxs-lookup"><span data-stu-id="a1545-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>

<span data-ttu-id="a1545-110">當您設計真實世界的雲端應用程式時，您必須考慮的其中一件事就是如何處理暫時性的服務中斷。</span><span class="sxs-lookup"><span data-stu-id="a1545-110">When you're designing a real world cloud app, one of the things you have to think about is how to handle temporary service interruptions.</span></span> <span data-ttu-id="a1545-111">此問題在雲端應用程式中是唯一重要的，因為您會相依于網路連線和外部服務。</span><span class="sxs-lookup"><span data-stu-id="a1545-111">This issue is uniquely important in cloud apps because you're so dependent on network connections and external services.</span></span> <span data-ttu-id="a1545-112">您經常會遇到很難自我修復的問題，而且如果您未準備好以智慧方式處理它們，就會導致客戶不佳的體驗。</span><span class="sxs-lookup"><span data-stu-id="a1545-112">You can frequently get little glitches that are typically self-healing, and if you aren't prepared to handle them intelligently, they'll result in a bad experience for your customers.</span></span>

## <a name="causes-of-transient-failures"></a><span data-ttu-id="a1545-113">暫時性失敗的原因</span><span class="sxs-lookup"><span data-stu-id="a1545-113">Causes of transient failures</span></span>

<span data-ttu-id="a1545-114">在雲端環境中，您會發現失敗和卸載的資料庫連接會定期發生。</span><span class="sxs-lookup"><span data-stu-id="a1545-114">In the cloud environment you'll find that failed and dropped database connections happen periodically.</span></span> <span data-ttu-id="a1545-115">這是因為相較于您的 web 伺服器和資料庫伺服器具有直接實體連線的內部部署環境，您會經歷更多的負載平衡器。</span><span class="sxs-lookup"><span data-stu-id="a1545-115">That's partly because you're going through more load balancers compared to the on-premises environment where your web server and database server have a direct physical connection.</span></span> <span data-ttu-id="a1545-116">此外，有時候當您相依于多租使用者服務時，您會看到服務的呼叫速度變慢或更久，因為其他使用服務的人經常遇到這種情況。</span><span class="sxs-lookup"><span data-stu-id="a1545-116">Also, sometimes when you're dependent on a multi-tenant service you'll see calls to the service get slower or time out because someone else who uses the service is hitting it heavily.</span></span> <span data-ttu-id="a1545-117">在其他情況下，您可能是經常遇到服務的使用者，而服務故意對您進行節流–拒絕連線–以防止您對其他服務租使用者造成負面影響。</span><span class="sxs-lookup"><span data-stu-id="a1545-117">In other cases you might be the user who is hitting the service too frequently, and the service deliberately throttles you – denies connections – in order to prevent you from adversely affecting other tenants of the service.</span></span>

## <a name="use-smart-retryback-off-logic-to-mitigate-the-effect-of-transient-failures"></a><span data-ttu-id="a1545-118">使用智慧型重試/轉型邏輯來減輕暫時性失敗的影響</span><span class="sxs-lookup"><span data-stu-id="a1545-118">Use smart retry/back-off logic to mitigate the effect of transient failures</span></span>

<span data-ttu-id="a1545-119">您可以辨識通常是暫時性的錯誤，並自動重試導致錯誤的作業，而不會擲回例外狀況，並將無法使用的或錯誤頁面顯示給客戶。</span><span class="sxs-lookup"><span data-stu-id="a1545-119">Instead of throwing an exception and displaying a not available or error page to your customer, you can recognize errors that are typically transient, and automatically retry the operation that resulted in the error, in hopes that before long you'll be successful.</span></span> <span data-ttu-id="a1545-120">在大部分的情況下，作業會在第二次嘗試時成功，而且您會從錯誤中復原，而不需要客戶知道發生問題。</span><span class="sxs-lookup"><span data-stu-id="a1545-120">Most of the time the operation will succeed on the second try, and you'll recover from the error without the customer ever having been aware that there was a problem.</span></span>

<span data-ttu-id="a1545-121">有數種方式可以執行智慧型重試邏輯。</span><span class="sxs-lookup"><span data-stu-id="a1545-121">There are several ways you can implement smart retry logic.</span></span>

- <span data-ttu-id="a1545-122">Microsoft 模式 &amp; 實務群組具有[暫時性錯誤處理應用程式區塊](https://msdn.microsoft.com/library/dn440719(v=pandp.60).aspx)，如果您使用 ADO.NET 進行 SQL Database 存取（而不是透過 Entity Framework），就會為您執行所有工作。</span><span class="sxs-lookup"><span data-stu-id="a1545-122">The Microsoft Patterns &amp; Practices group has a [Transient Fault Handling Application Block](https://msdn.microsoft.com/library/dn440719(v=pandp.60).aspx) that does everything for you if you're using ADO.NET for SQL Database access (not through Entity Framework).</span></span> <span data-ttu-id="a1545-123">您只需要設定重試的原則–重試查詢或命令的次數，以及嘗試之間等待的時間長度，然後將您的 SQL 程式碼包裝在*using*區塊中。</span><span class="sxs-lookup"><span data-stu-id="a1545-123">You just set a policy for retries – how many times to retry a query or command and how long to wait between tries – and wrap your SQL code in a *using* block.</span></span>

    [!code-csharp[Main](transient-fault-handling/samples/sample1.cs)]

    <span data-ttu-id="a1545-124">TFH 也支援[Azure 角色中](https://msdn.microsoft.com/library/windowsazure/dn386103.aspx)快取和[服務匯流排](https://azure.microsoft.com/services/service-bus/)。</span><span class="sxs-lookup"><span data-stu-id="a1545-124">TFH also supports [Azure In-Role Cache](https://msdn.microsoft.com/library/windowsazure/dn386103.aspx) and [Service Bus](https://azure.microsoft.com/services/service-bus/).</span></span>
- <span data-ttu-id="a1545-125">當您使用 Entity Framework 通常不會直接使用 SQL 連線，因此您不能使用此模式和實務封裝，但 Entity Framework 6 會將這類的重試邏輯立即建立在架構中。</span><span class="sxs-lookup"><span data-stu-id="a1545-125">When you use the Entity Framework you typically aren't working directly with SQL connections, so you can't use this Patterns and Practices package, but Entity Framework 6 builds this kind of retry logic right into the framework.</span></span> <span data-ttu-id="a1545-126">以您指定重試策略的類似方式，然後 EF 會在存取資料庫時使用該策略。</span><span class="sxs-lookup"><span data-stu-id="a1545-126">In a similar way you specify the retry strategy, and then EF uses that strategy whenever it accesses the database.</span></span>

    <span data-ttu-id="a1545-127">若要在修正 It 應用程式中使用這項功能，我們只需要新增一個衍生自*DbConfiguration*的類別，然後開啟重試邏輯。</span><span class="sxs-lookup"><span data-stu-id="a1545-127">To use this feature in the Fix It app, all we have to do is add a class that derives from *DbConfiguration* and turn on the retry logic.</span></span>

    [!code-csharp[Main](transient-fault-handling/samples/sample2.cs)]

    <span data-ttu-id="a1545-128">針對架構識別為一般暫時性錯誤的 SQL Database 例外狀況，顯示的程式碼會指示 EF 將作業重試最多3次，並在重試之間加上指數輪詢延遲，並將延遲上限設為5秒。</span><span class="sxs-lookup"><span data-stu-id="a1545-128">For SQL Database exceptions that the framework identifies as typically transient errors, the code shown instructs EF to retry the operation up to 3 times, with an exponential back-off delay between retries, and a maximum delay of 5 seconds.</span></span> <span data-ttu-id="a1545-129">指數退避表示在每次失敗後重試之後，它會等候較長的時間，然後再試一次。</span><span class="sxs-lookup"><span data-stu-id="a1545-129">Exponential back-off means that after each failed retry it will wait for a longer period of time before trying again.</span></span> <span data-ttu-id="a1545-130">如果資料列中有三個嘗試失敗，則會擲回例外狀況。</span><span class="sxs-lookup"><span data-stu-id="a1545-130">If three tries in a row fail, it will throw an exception.</span></span> <span data-ttu-id="a1545-131">下一節有關斷路器的說明為何您需要指數輪詢和有限的重試次數。</span><span class="sxs-lookup"><span data-stu-id="a1545-131">The following section about circuit breakers explains why you want exponential back-off and a limited number of retries.</span></span>

    <span data-ttu-id="a1545-132">當您使用 Azure 儲存體服務時，可能會有類似的問題，因為 Fix It 應用程式適用于 Blob，而 .NET 儲存體用戶端 API 已經實作用相同類型的邏輯。</span><span class="sxs-lookup"><span data-stu-id="a1545-132">You can have similar issues when you're using the Azure Storage service, as the Fix It app does for Blobs, and the .NET storage client API already implements the same kind of logic.</span></span> <span data-ttu-id="a1545-133">您只需指定重試原則，如果您對預設設定感到滿意，就不需要這麼做。</span><span class="sxs-lookup"><span data-stu-id="a1545-133">You just specify the retry policy, or you don't even have to do that if you're happy with the default settings.</span></span>

<a id="circuitbreakers"></a>
## <a name="circuit-breakers"></a><span data-ttu-id="a1545-134">斷路器</span><span class="sxs-lookup"><span data-stu-id="a1545-134">Circuit breakers</span></span>

<span data-ttu-id="a1545-135">有幾個原因會導致您不想要在一段時間內重試太多次：</span><span class="sxs-lookup"><span data-stu-id="a1545-135">There are several reasons why you don't want to retry too many times over too long a period:</span></span>

- <span data-ttu-id="a1545-136">太多使用者持續重試失敗的要求，可能會降低其他使用者的體驗。</span><span class="sxs-lookup"><span data-stu-id="a1545-136">Too many users persistently retrying failed requests might degrade other users' experience.</span></span> <span data-ttu-id="a1545-137">如果有數百萬人進行重複的重試要求，您可能會佔用 IIS 分派佇列，並防止您的應用程式服務要求，否則可能會成功處理。</span><span class="sxs-lookup"><span data-stu-id="a1545-137">If millions of people are all making repeated retry requests you could be tying up IIS dispatch queues and preventing your app from servicing requests that it otherwise could handle successfully.</span></span>
- <span data-ttu-id="a1545-138">如果每個人都因服務失敗而重試，可能會有許多要求排入佇列中，而服務會在開始復原時收到溢位。</span><span class="sxs-lookup"><span data-stu-id="a1545-138">If everyone is retrying due to a service failure, there could be so many requests queued up that the service gets flooded when it starts to recover.</span></span>
- <span data-ttu-id="a1545-139">如果錯誤是因為節流而造成，而且有一段時間會讓服務用於節流，則繼續重試可能會將該視窗移出，並導致節流繼續進行。</span><span class="sxs-lookup"><span data-stu-id="a1545-139">If the error is due to throttling and there's a window of time the service uses for throttling, continued retries could move that window out and cause the throttling to continue.</span></span>
- <span data-ttu-id="a1545-140">您可能有等待網頁呈現的使用者。</span><span class="sxs-lookup"><span data-stu-id="a1545-140">You might have a user waiting for a web page to render.</span></span> <span data-ttu-id="a1545-141">讓人們的等候時間太長可能會更麻煩，因為這種情況很快就會通知他們稍後再試一次。</span><span class="sxs-lookup"><span data-stu-id="a1545-141">Making people wait too long might be more annoying that relatively quickly advising them to try again later.</span></span>

<span data-ttu-id="a1545-142">指數退避會藉由限制服務可從您的應用程式取得的重試頻率，來解決其中一些問題。</span><span class="sxs-lookup"><span data-stu-id="a1545-142">Exponential back-off addresses some of these issue by limiting the frequency of retries a service can get from your application.</span></span> <span data-ttu-id="a1545-143">但您也需要有*斷路*器：這表示在特定的重試臨界值中，您的應用程式會停止重試，並採取其他動作，例如下列其中一項：</span><span class="sxs-lookup"><span data-stu-id="a1545-143">But you also need to have *circuit breakers*: this means that at a certain retry threshold your app stops retrying and takes some other action, such as one of the following:</span></span>

- <span data-ttu-id="a1545-144">自訂回退。</span><span class="sxs-lookup"><span data-stu-id="a1545-144">Custom fallback.</span></span> <span data-ttu-id="a1545-145">如果您無法從路透社取得股票價格，或許可以從 Bloomberg 取得。或者，如果您無法從資料庫取得資料，或許您可以從快取取得資料。</span><span class="sxs-lookup"><span data-stu-id="a1545-145">If you can't get a stock price from Reuters, maybe you can get it from Bloomberg; or if you can't get data from the database, maybe you can get it from cache.</span></span>
- <span data-ttu-id="a1545-146">失敗無訊息。</span><span class="sxs-lookup"><span data-stu-id="a1545-146">Fail silent.</span></span> <span data-ttu-id="a1545-147">如果您的應用程式所需的服務不是全部，或不是任何內容，則當您無法取得資料時，只會傳回 null。</span><span class="sxs-lookup"><span data-stu-id="a1545-147">If what you need from a service isn't all-or-nothing for your app, just return null when you can't get the data.</span></span> <span data-ttu-id="a1545-148">如果您要顯示 [修正 It] 工作，而且 Blob 服務沒有回應，您可以顯示不含影像的工作詳細資料。</span><span class="sxs-lookup"><span data-stu-id="a1545-148">If you're displaying a Fix It task and the Blob service isn't responding, you could display the task details without the image.</span></span>
- <span data-ttu-id="a1545-149">快速失敗。</span><span class="sxs-lookup"><span data-stu-id="a1545-149">Fail fast.</span></span> <span data-ttu-id="a1545-150">錯誤使用者，以避免因為重試要求而導致服務中斷，這可能會造成其他使用者的服務中斷或擴充節流時段。</span><span class="sxs-lookup"><span data-stu-id="a1545-150">Error out the user to avoid flooding the service with retry requests which could cause service disruption for other users or extend a throttling window.</span></span> <span data-ttu-id="a1545-151">您可以顯示易記的「稍後再試一次」訊息。</span><span class="sxs-lookup"><span data-stu-id="a1545-151">You can display a friendly "try again later" message.</span></span>

<span data-ttu-id="a1545-152">沒有任何大小合適的重試原則。</span><span class="sxs-lookup"><span data-stu-id="a1545-152">There is no one-size-fits-all retry policy.</span></span> <span data-ttu-id="a1545-153">您可以重試多次，並在非同步背景工作進程中等候較長的時間，而不是在使用者等待回應的同步 web 應用程式中。</span><span class="sxs-lookup"><span data-stu-id="a1545-153">You can retry more times and wait longer in an asynchronous background worker process than you would in a synchronous web app where a user is waiting for a response.</span></span> <span data-ttu-id="a1545-154">您可以在關係資料庫服務的重試之間等候較長的時間，而不是快取服務。</span><span class="sxs-lookup"><span data-stu-id="a1545-154">You can wait longer between retries for a relational database service than you would for a cache service.</span></span> <span data-ttu-id="a1545-155">以下是一些建議的重試原則範例，讓您瞭解數位可能有所不同的方式。</span><span class="sxs-lookup"><span data-stu-id="a1545-155">Here are some sample recommended retry policies to give you an idea of how the numbers might vary.</span></span> <span data-ttu-id="a1545-156">（「第一次快速」表示第一次重試之前不會延遲。</span><span class="sxs-lookup"><span data-stu-id="a1545-156">("Fast First" means no delay before the first retry.</span></span>

![範例重試原則](transient-fault-handling/_static/image1.png)

<span data-ttu-id="a1545-158">如 SQL Database 重試原則指引，請參閱針對[暫時性錯誤和連接錯誤進行疑難排解，以 SQL Database](https://azure.microsoft.com/documentation/articles/sql-database-connectivity-issues/)。</span><span class="sxs-lookup"><span data-stu-id="a1545-158">For SQL Database retry policy guidance, see [Troubleshoot transient faults and connection errors to SQL Database](https://azure.microsoft.com/documentation/articles/sql-database-connectivity-issues/).</span></span>

## <a name="summary"></a><span data-ttu-id="a1545-159">摘要</span><span class="sxs-lookup"><span data-stu-id="a1545-159">Summary</span></span>

<span data-ttu-id="a1545-160">重試/退轉關閉策略可以協助客戶在最短時間內看不到暫時性錯誤，而 Microsoft 提供的架構可讓您在使用 ADO.NET、Entity Framework 或 Azure 儲存體服務時，將執行策略的工作降至最低。</span><span class="sxs-lookup"><span data-stu-id="a1545-160">A retry/back-off strategy can help make temporary errors invisible to the customer most of the time, and Microsoft provides frameworks that you can use to minimize your work implementing a strategy whether you're using ADO.NET, Entity Framework, or the Azure Storage service.</span></span>

<span data-ttu-id="a1545-161">在[下一章](distributed-caching.md)中，我們將探討如何使用分散式快取來改善效能和可靠性。</span><span class="sxs-lookup"><span data-stu-id="a1545-161">In the [next chapter](distributed-caching.md), we'll look at how to improve performance and reliability by using distributed caching.</span></span>

## <a name="resources"></a><span data-ttu-id="a1545-162">資源</span><span class="sxs-lookup"><span data-stu-id="a1545-162">Resources</span></span>

<span data-ttu-id="a1545-163">如需詳細資訊，請參閱下列資源：</span><span class="sxs-lookup"><span data-stu-id="a1545-163">For more information, see the following resources:</span></span>

<span data-ttu-id="a1545-164">文件</span><span class="sxs-lookup"><span data-stu-id="a1545-164">Documentation</span></span>

- <span data-ttu-id="a1545-165">[Azure 上大規模服務設計的最佳作法雲端服務](https://msdn.microsoft.com/library/windowsazure/jj717232.aspx)。</span><span class="sxs-lookup"><span data-stu-id="a1545-165">[Best Practices for the Design of Large-Scale Services on Azure Cloud Services](https://msdn.microsoft.com/library/windowsazure/jj717232.aspx).</span></span> <span data-ttu-id="a1545-166">以標記 Simm 和 Michael Thomassy 的技術白皮書。</span><span class="sxs-lookup"><span data-stu-id="a1545-166">White paper by Mark Simms and Michael Thomassy.</span></span> <span data-ttu-id="a1545-167">類似于防故障的系列，並深入探討如何詳細說明。</span><span class="sxs-lookup"><span data-stu-id="a1545-167">Similar to the Failsafe series but goes into more how-to details.</span></span> <span data-ttu-id="a1545-168">請參閱遙測和診斷一節。</span><span class="sxs-lookup"><span data-stu-id="a1545-168">See the Telemetry and Diagnostics section.</span></span>
- <span data-ttu-id="a1545-169">[損毀修復：具有恢復功能的雲端架構指引](https://msdn.microsoft.com/library/windowsazure/jj853352.aspx)。</span><span class="sxs-lookup"><span data-stu-id="a1545-169">[Failsafe: Guidance for Resilient Cloud Architectures](https://msdn.microsoft.com/library/windowsazure/jj853352.aspx).</span></span> <span data-ttu-id="a1545-170">白皮書： Marc Mercuri、Ulrich Homann 和 Andrew Townhill。</span><span class="sxs-lookup"><span data-stu-id="a1545-170">White paper by Marc Mercuri, Ulrich Homann, and Andrew Townhill.</span></span> <span data-ttu-id="a1545-171">網頁版的防安全影片系列。</span><span class="sxs-lookup"><span data-stu-id="a1545-171">Web page version of the FailSafe video series.</span></span>
- <span data-ttu-id="a1545-172">[Microsoft 模式和實務-Azure 指引](https://msdn.microsoft.com/library/dn568099.aspx)。</span><span class="sxs-lookup"><span data-stu-id="a1545-172">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/dn568099.aspx).</span></span> <span data-ttu-id="a1545-173">請參閱重試模式、排程器代理程式監督員模式。</span><span class="sxs-lookup"><span data-stu-id="a1545-173">See Retry pattern, Scheduler Agent Supervisor pattern.</span></span>
- <span data-ttu-id="a1545-174">[Azure SQL Database 中的容錯功能](https://blogs.msdn.com/b/windowsazure/archive/2012/07/30/fault-tolerance-in-windows-azure-sql-database.aspx)。</span><span class="sxs-lookup"><span data-stu-id="a1545-174">[Fault-tolerance in Azure SQL Database](https://blogs.msdn.com/b/windowsazure/archive/2012/07/30/fault-tolerance-in-windows-azure-sql-database.aspx).</span></span> <span data-ttu-id="a1545-175">Tony Petrossian 的 Blog 文章。</span><span class="sxs-lookup"><span data-stu-id="a1545-175">Blog post by Tony Petrossian.</span></span>
- <span data-ttu-id="a1545-176">[Entity Framework-連接恢復/重試邏輯](https://msdn.microsoft.com/data/dn456835)。</span><span class="sxs-lookup"><span data-stu-id="a1545-176">[Entity Framework - Connection Resiliency / Retry Logic](https://msdn.microsoft.com/data/dn456835).</span></span> <span data-ttu-id="a1545-177">如何使用和自訂 Entity Framework 6 的暫時性錯誤處理功能。</span><span class="sxs-lookup"><span data-stu-id="a1545-177">How to use and customize the transient fault handling feature of Entity Framework 6.</span></span>
- <span data-ttu-id="a1545-178">[在 ASP.NET MVC 應用程式中使用 Entity Framework 的連接恢復功能和命令攔截](../../../../mvc/overview/getting-started/getting-started-with-ef-using-mvc/connection-resiliency-and-command-interception-with-the-entity-framework-in-an-asp-net-mvc-application.md)。</span><span class="sxs-lookup"><span data-stu-id="a1545-178">[Connection Resiliency and Command Interception with the Entity Framework in an ASP.NET MVC Application](../../../../mvc/overview/getting-started/getting-started-with-ef-using-mvc/connection-resiliency-and-command-interception-with-the-entity-framework-in-an-asp-net-mvc-application.md).</span></span> <span data-ttu-id="a1545-179">第四個在9部分的教學課程系列中，示範如何設定 SQL Database 的 EF 6 連接恢復功能。</span><span class="sxs-lookup"><span data-stu-id="a1545-179">Fourth in a nine-part tutorial series, shows how to set up the EF 6 connection resilience feature for SQL Database.</span></span>

<span data-ttu-id="a1545-180">影片</span><span class="sxs-lookup"><span data-stu-id="a1545-180">Videos</span></span>

- <span data-ttu-id="a1545-181">[防安全功能：建立可擴充、可復原的雲端服務](https://channel9.msdn.com/Series/FailSafe)。</span><span class="sxs-lookup"><span data-stu-id="a1545-181">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="a1545-182">Ulrich Homann、Marc Mercuri 和 Mark Simm 的九部分系列。</span><span class="sxs-lookup"><span data-stu-id="a1545-182">Nine-part series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="a1545-183">以非常容易存取且有趣的方式呈現高階概念和架構原則，並提供 Microsoft 客戶諮詢小組（CAT）體驗與實際客戶的故事。</span><span class="sxs-lookup"><span data-stu-id="a1545-183">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="a1545-184">從40:55 開始，請參閱第3集的斷路器討論。</span><span class="sxs-lookup"><span data-stu-id="a1545-184">See the discussion of circuit breakers in episode 3 starting at 40:55.</span></span>
- <span data-ttu-id="a1545-185">[打造 Big：從 Azure 客戶學到的經驗-第二部](https://channel9.msdn.com/Events/Build/2012/3-030)。</span><span class="sxs-lookup"><span data-stu-id="a1545-185">[Building Big: Lessons learned from Azure customers - Part II](https://channel9.msdn.com/Events/Build/2012/3-030).</span></span> <span data-ttu-id="a1545-186">Mark Simm 討論如何設計失敗、暫時性錯誤處理和檢測所有專案。</span><span class="sxs-lookup"><span data-stu-id="a1545-186">Mark Simms talks about designing for failure, transient fault handling, and instrumenting everything.</span></span>

<span data-ttu-id="a1545-187">程式碼範例</span><span class="sxs-lookup"><span data-stu-id="a1545-187">Code sample</span></span>

- <span data-ttu-id="a1545-188">[Azure 中的雲端服務基本](https://code.msdn.microsoft.com/Cloud-Service-Fundamentals-4ca72649)概念。</span><span class="sxs-lookup"><span data-stu-id="a1545-188">[Cloud Service Fundamentals in Azure](https://code.msdn.microsoft.com/Cloud-Service-Fundamentals-4ca72649).</span></span> <span data-ttu-id="a1545-189">Microsoft Azure 客戶諮詢小組所建立的範例應用程式，示範如何使用[企業程式庫暫時性錯誤處理區塊](http://nuget.org/packages/EnterpriseLibrary.TransientFaultHandling/)（TFH）。</span><span class="sxs-lookup"><span data-stu-id="a1545-189">Sample application created by the Microsoft Azure Customer Advisory Team that demonstrates how to use the [Enterprise Library Transient Fault Handling Block](http://nuget.org/packages/EnterpriseLibrary.TransientFaultHandling/) (TFH).</span></span> <span data-ttu-id="a1545-190">如需詳細資訊，請參閱 [雲端服務基礎資料存取層 – 暫時性錯誤處理](https://social.technet.microsoft.com/wiki/contents/articles/18665.cloud-service-fundamentals-data-access-layer-transient-fault-handling.aspx)。</span><span class="sxs-lookup"><span data-stu-id="a1545-190">For more information, see [Cloud Service Fundamentals Data Access Layer – Transient Fault Handling](https://social.technet.microsoft.com/wiki/contents/articles/18665.cloud-service-fundamentals-data-access-layer-transient-fault-handling.aspx).</span></span> <span data-ttu-id="a1545-191">建議使用 TFH （不使用 Entity Framework）直接進行資料庫存取。</span><span class="sxs-lookup"><span data-stu-id="a1545-191">TFH is recommended for database access using ADO.NET directly (without using Entity Framework).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a1545-192">[上一頁](monitoring-and-telemetry.md)
> [下一頁](distributed-caching.md)</span><span class="sxs-lookup"><span data-stu-id="a1545-192">[Previous](monitoring-and-telemetry.md)
[Next](distributed-caching.md)</span></span>
