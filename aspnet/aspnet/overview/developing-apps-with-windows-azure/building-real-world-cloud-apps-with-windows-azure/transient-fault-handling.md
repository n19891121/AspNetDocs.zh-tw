---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/transient-fault-handling
title: 暫時性錯誤處理 （建置使用 Azure 的真實世界的雲端應用程式） |Microsoft Docs
author: MikeWasson
description: 建置真實世界雲端應用程式與 Azure 的電子書是以 Scott Guthrie 所開發的簡報為依據。 它說明 13 模式與做法，他可以...
ms.author: riande
ms.date: 11/03/2015
ms.assetid: 7ead83bc-c08c-4b26-8617-00e07292e35c
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/transient-fault-handling
msc.type: authoredcontent
ms.openlocfilehash: 5c9a408acb074a31aeb347ad8e33ba5319530563
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/01/2019
ms.locfileid: "57029385"
---
<a name="transient-fault-handling-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="ee4b7-104">暫時性錯誤處理 （建置使用 Azure 的真實世界的雲端應用程式）</span><span class="sxs-lookup"><span data-stu-id="ee4b7-104">Transient Fault Handling (Building Real-World Cloud Apps with Azure)</span></span>
====================
<span data-ttu-id="ee4b7-105">藉由[Mike Wasson](https://github.com/MikeWasson)， [Rick Anderson]((https://twitter.com/RickAndMSFT))， [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="ee4b7-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="ee4b7-106">[下載修正此問題的專案](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4)或[下載電子書](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="ee4b7-106">[Download Fix It Project](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="ee4b7-107">**建置真實世界雲端應用程式與 Azure**電子書以 Scott Guthrie 所開發的簡報為依據。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="ee4b7-108">它說明 13 的模式，並可協助您的作法是成功開發適用於雲端的 web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="ee4b7-109">電子書的相關資訊，請參閱[第 1 章](introduction.md)。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>


<span data-ttu-id="ee4b7-110">當您設計的真實世界的雲端應用程式時，您必須考慮的事情之一是如何處理暫時性服務中斷。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-110">When you're designing a real world cloud app, one of the things you have to think about is how to handle temporary service interruptions.</span></span> <span data-ttu-id="ee4b7-111">此問題是在雲端應用程式中唯一重要的因為您依賴網路連線和外部服務。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-111">This issue is uniquely important in cloud apps because you're so dependent on network connections and external services.</span></span> <span data-ttu-id="ee4b7-112">您可以經常取得通常自我修復的小問題，如果您尚未準備好以智慧方式處理它們，它們將會產生不愉快的體驗中為您的客戶。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-112">You can frequently get little glitches that are typically self-healing, and if you aren't prepared to handle them intelligently, they'll result in a bad experience for your customers.</span></span>

## <a name="causes-of-transient-failures"></a><span data-ttu-id="ee4b7-113">暫時性失敗的原因</span><span class="sxs-lookup"><span data-stu-id="ee4b7-113">Causes of transient failures</span></span>

<span data-ttu-id="ee4b7-114">在雲端環境中，您會發現，失敗，並卸除的資料庫的連線會定期發生。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-114">In the cloud environment you'll find that failed and dropped database connections happen periodically.</span></span> <span data-ttu-id="ee4b7-115">這是部分是因為您將會透過相較於內部部署環境的多個負載平衡器您的 web 伺服器和資料庫伺服器上具有的直接實體連線。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-115">That's partly because you're going through more load balancers compared to the on-premises environment where your web server and database server have a direct physical connection.</span></span> <span data-ttu-id="ee4b7-116">此外，有時當您準備相依於多租用戶服務時，才會看到呼叫的服務變慢或逾時時間因為其他人使用 「 服務 」 達到高度。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-116">Also, sometimes when you're dependent on a multi-tenant service you'll see calls to the service get slower or time out because someone else who uses the service is hitting it heavily.</span></span> <span data-ttu-id="ee4b7-117">在其他情況下您可能太過頻繁，達到服務的使用者，並服務刻意節流 – 拒絕連線 – 您為了防止造成負面影響其他租用戶的服務。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-117">In other cases you might be the user who is hitting the service too frequently, and the service deliberately throttles you – denies connections – in order to prevent you from adversely affecting other tenants of the service.</span></span>

## <a name="use-smart-retryback-off-logic-to-mitigate-the-effect-of-transient-failures"></a><span data-ttu-id="ee4b7-118">使用智慧型的重試/撤退邏輯來減少暫時性失敗的影響</span><span class="sxs-lookup"><span data-stu-id="ee4b7-118">Use smart retry/back-off logic to mitigate the effect of transient failures</span></span>

<span data-ttu-id="ee4b7-119">而不是擲回例外狀況，並顯示您的客戶無法使用 」 或 「 錯誤頁面，您可以辨識錯誤，通常屬於暫時性的並自動重試錯誤，導致此作業希望，之前長時間，您將會成功。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-119">Instead of throwing an exception and displaying a not available or error page to your customer, you can recognize errors that are typically transient, and automatically retry the operation that resulted in the error, in hopes that before long you'll be successful.</span></span> <span data-ttu-id="ee4b7-120">作業會成功在第二次嘗試中，大部分的情況，並將從錯誤復原而不需要客戶曾未曾注意時發生問題。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-120">Most of the time the operation will succeed on the second try, and you'll recover from the error without the customer ever having been aware that there was a problem.</span></span>

<span data-ttu-id="ee4b7-121">有數種方式，您可以實作智慧的重試邏輯。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-121">There are several ways you can implement smart retry logic.</span></span>

- <span data-ttu-id="ee4b7-122">Microsoft Patterns &amp; Practices 群組擁有[暫時性錯誤處理應用程式區塊](https://msdn.microsoft.com/library/dn440719(v=pandp.60).aspx)執行的所有項目，如果您使用 ADO.NET 的 SQL 資料庫 （不透過 Entity Framework) 的存取權。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-122">The Microsoft Patterns &amp; Practices group has a [Transient Fault Handling Application Block](https://msdn.microsoft.com/library/dn440719(v=pandp.60).aspx) that does everything for you if you're using ADO.NET for SQL Database access (not through Entity Framework).</span></span> <span data-ttu-id="ee4b7-123">您只設定原則的重試 – 多少次重試查詢或命令和等待的時間之間嘗試 – 和包裝您的 SQL 程式碼中*使用*區塊。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-123">You just set a policy for retries – how many times to retry a query or command and how long to wait between tries – and wrap your SQL code in a *using* block.</span></span>

    [!code-csharp[Main](transient-fault-handling/samples/sample1.cs)]

    <span data-ttu-id="ee4b7-124">也支援 TFH [Azure In-role Cache](https://msdn.microsoft.com/library/windowsazure/dn386103.aspx)並[Service Bus](https://azure.microsoft.com/services/service-bus/)。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-124">TFH also supports [Azure In-Role Cache](https://msdn.microsoft.com/library/windowsazure/dn386103.aspx) and [Service Bus](https://azure.microsoft.com/services/service-bus/).</span></span>
- <span data-ttu-id="ee4b7-125">當您使用 Entity Framework 時您通常不直接使用 SQL 連線，因此您無法使用此模式和實務的套件，但 Entity Framework 6 至 framework 建置這類的重試邏輯。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-125">When you use the Entity Framework you typically aren't working directly with SQL connections, so you can't use this Patterns and Practices package, but Entity Framework 6 builds this kind of retry logic right into the framework.</span></span> <span data-ttu-id="ee4b7-126">類似的方式，您指定的重試策略，，然後會 EF 使用該策略，每當它存取資料庫。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-126">In a similar way you specify the retry strategy, and then EF uses that strategy whenever it accesses the database.</span></span>

    <span data-ttu-id="ee4b7-127">若要修正其應用程式中使用這項功能，我們只需要是新增類別衍生自*DbConfiguration*並開啟 重試邏輯。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-127">To use this feature in the Fix It app, all we have to do is add a class that derives from *DbConfiguration* and turn on the retry logic.</span></span>

    [!code-csharp[Main](transient-fault-handling/samples/sample2.cs)]

    <span data-ttu-id="ee4b7-128">對於 SQL Database 的 framework 識別為通常是暫時性錯誤的例外狀況，顯示的程式碼會指示 EF 來重試此作業最多 3 次，指數退避法延遲重試延遲時間上限為 5 秒之間。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-128">For SQL Database exceptions that the framework identifies as typically transient errors, the code shown instructs EF to retry the operation up to 3 times, with an exponential back-off delay between retries, and a maximum delay of 5 seconds.</span></span> <span data-ttu-id="ee4b7-129">指數退避法表示每個失敗的重試後就會等候較長的一段時間後再試。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-129">Exponential back-off means that after each failed retry it will wait for a longer period of time before trying again.</span></span> <span data-ttu-id="ee4b7-130">如果資料列中的三次嘗試失敗，則會擲回例外狀況。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-130">If three tries in a row fail, it will throw an exception.</span></span> <span data-ttu-id="ee4b7-131">斷路器的下列小節說明您為何想指數退避法及有限的數目的重試次數。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-131">The following section about circuit breakers explains why you want exponential back-off and a limited number of retries.</span></span>

    <span data-ttu-id="ee4b7-132">當您使用 Azure 儲存體服務，它修正應用程式會為 Blob，以及.NET 儲存體用戶端 API 已經實作相同類型的邏輯，您可以有類似的問題。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-132">You can have similar issues when you're using the Azure Storage service, as the Fix It app does for Blobs, and the .NET storage client API already implements the same kind of logic.</span></span> <span data-ttu-id="ee4b7-133">您只需要指定重試原則，或甚至不需要這麼做，如果您滿意預設值。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-133">You just specify the retry policy, or you don't even have to do that if you're happy with the default settings.</span></span>

<a id="circuitbreakers"></a>
## <a name="circuit-breakers"></a><span data-ttu-id="ee4b7-134">斷路器</span><span class="sxs-lookup"><span data-stu-id="ee4b7-134">Circuit breakers</span></span>

<span data-ttu-id="ee4b7-135">有幾個原因，您不想要重試次數太多太長一段：</span><span class="sxs-lookup"><span data-stu-id="ee4b7-135">There are several reasons why you don't want to retry too many times over too long a period:</span></span>

- <span data-ttu-id="ee4b7-136">太多的使用者持續重試失敗的要求可能會降低其他使用者的體驗。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-136">Too many users persistently retrying failed requests might degrade other users' experience.</span></span> <span data-ttu-id="ee4b7-137">如果數以百萬計的人員會進行重複所有重試要求，可以會佔用 IIS 分派佇列，否則可處理成功的要求提供服務時，防止您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-137">If millions of people are all making repeated retry requests you could be tying up IIS dispatch queues and preventing your app from servicing requests that it otherwise could handle successfully.</span></span>
- <span data-ttu-id="ee4b7-138">如果每個人都正在重試由於服務失敗，那里可能會這麼多的要求排入佇列服務取得大量湧入，啟動復原時。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-138">If everyone is retrying due to a service failure, there could be so many requests queued up that the service gets flooded when it starts to recover.</span></span>
- <span data-ttu-id="ee4b7-139">如果錯誤是因為節流，而且有的服務會使用節流的時間範圍，一直持續不斷地重試，可以將該視窗移出，促使節流繼續。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-139">If the error is due to throttling and there's a window of time the service uses for throttling, continued retries could move that window out and cause the throttling to continue.</span></span>
- <span data-ttu-id="ee4b7-140">您可能必須等待 web 網頁的使用者，來呈現。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-140">You might have a user waiting for a web page to render.</span></span> <span data-ttu-id="ee4b7-141">製作人等候太長可能會更惱人的該相當快速地為客戶提供建議他們稍後再試。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-141">Making people wait too long might be more annoying that relatively quickly advising them to try again later.</span></span>

<span data-ttu-id="ee4b7-142">指數退避解決這些問題的一些限制服務可以從您的應用程式取得的重試的頻率。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-142">Exponential back-off addresses some of these issue by limiting the frequency of retries a service can get from your application.</span></span> <span data-ttu-id="ee4b7-143">但您也必須能夠*斷路器*： 這表示，在特定重試您的應用程式會停止重試，並接受某些其他動作，例如下列其中之一的臨界值：</span><span class="sxs-lookup"><span data-stu-id="ee4b7-143">But you also need to have *circuit breakers*: this means that at a certain retry threshold your app stops retrying and takes some other action, such as one of the following:</span></span>

- <span data-ttu-id="ee4b7-144">自訂後援。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-144">Custom fallback.</span></span> <span data-ttu-id="ee4b7-145">如果您無法從路透社取得股票的價格，也許您可以從取得 Bloomberg;或者，如果您無法從資料庫取得資料，或許您可以取得它從快取。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-145">If you can't get a stock price from Reuters, maybe you can get it from Bloomberg; or if you can't get data from the database, maybe you can get it from cache.</span></span>
- <span data-ttu-id="ee4b7-146">無訊息會失敗。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-146">Fail silent.</span></span> <span data-ttu-id="ee4b7-147">如果您需要從服務不是孤注一擲應用程式，只傳回 null 時，您無法取得資料。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-147">If what you need from a service isn't all-or-nothing for your app, just return null when you can't get the data.</span></span> <span data-ttu-id="ee4b7-148">如果您顯示 It 工作，而且 Blob 服務沒有回應，您可以顯示工作詳細資料，而不需要將映像。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-148">If you're displaying a Fix It task and the Blob service isn't responding, you could display the task details without the image.</span></span>
- <span data-ttu-id="ee4b7-149">快速失敗。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-149">Fail fast.</span></span> <span data-ttu-id="ee4b7-150">若要避免資料大量湧入的服務，將使用者的錯誤重試要求可能會導致服務中斷，其他使用者，或擴充節流時段。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-150">Error out the user to avoid flooding the service with retry requests which could cause service disruption for other users or extend a throttling window.</span></span> <span data-ttu-id="ee4b7-151">您可以顯示的易記 「 稍後再試 」 訊息。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-151">You can display a friendly "try again later" message.</span></span>

<span data-ttu-id="ee4b7-152">沒有一體適用的重試原則。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-152">There is no one-size-fits-all retry policy.</span></span> <span data-ttu-id="ee4b7-153">您可以重試一次和非同步的背景工作處理序中再等待，比您在同步的 web 應用程式中使用者等待回應的位置。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-153">You can retry more times and wait longer in an asynchronous background worker process than you would in a synchronous web app where a user is waiting for a response.</span></span> <span data-ttu-id="ee4b7-154">您可以再重試之間等待的關聯式資料庫服務比您的快取服務。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-154">You can wait longer between retries for a relational database service than you would for a cache service.</span></span> <span data-ttu-id="ee4b7-155">以下是一些範例，建議使用重試原則以讓您了解的數字的有所不同。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-155">Here are some sample recommended retry policies to give you an idea of how the numbers might vary.</span></span> <span data-ttu-id="ee4b7-156">（「 快速第一個"表示第一次重試之前的任何延遲。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-156">("Fast First" means no delay before the first retry.</span></span>

![範例重試原則](transient-fault-handling/_static/image1.png)

<span data-ttu-id="ee4b7-158">SQL Database 重試原則的指引，請參閱[針對暫時性錯誤和 SQL database 的連線錯誤進行疑難排解](https://azure.microsoft.com/documentation/articles/sql-database-connectivity-issues/)。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-158">For SQL Database retry policy guidance, see [Troubleshoot transient faults and connection errors to SQL Database](https://azure.microsoft.com/documentation/articles/sql-database-connectivity-issues/).</span></span>

## <a name="summary"></a><span data-ttu-id="ee4b7-159">總結</span><span class="sxs-lookup"><span data-stu-id="ee4b7-159">Summary</span></span>

<span data-ttu-id="ee4b7-160">重試/退避策略可協助讓暫存錯誤看不到的客戶大多時候，而且 Microsoft 提供您用來減少您的工作實作的策略，無論您使用 ADO.NET、 Entity Framework 或 Azure 的架構儲存體服務。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-160">A retry/back-off strategy can help make temporary errors invisible to the customer most of the time, and Microsoft provides frameworks that you can use to minimize your work implementing a strategy whether you're using ADO.NET, Entity Framework, or the Azure Storage service.</span></span>

<span data-ttu-id="ee4b7-161">在 [[下一步] 一章](distributed-caching.md)，我們將探討如何改善效能和可靠性，使用分散式快取。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-161">In the [next chapter](distributed-caching.md), we'll look at how to improve performance and reliability by using distributed caching.</span></span>

## <a name="resources"></a><span data-ttu-id="ee4b7-162">資源</span><span class="sxs-lookup"><span data-stu-id="ee4b7-162">Resources</span></span>

<span data-ttu-id="ee4b7-163">如需詳細資訊，請參閱下列資源：</span><span class="sxs-lookup"><span data-stu-id="ee4b7-163">For more information, see the following resources:</span></span>

<span data-ttu-id="ee4b7-164">文件</span><span class="sxs-lookup"><span data-stu-id="ee4b7-164">Documentation</span></span>

- <span data-ttu-id="ee4b7-165">[Azure 雲端服務上大規模服務設計的最佳作法](https://msdn.microsoft.com/library/windowsazure/jj717232.aspx)。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-165">[Best Practices for the Design of Large-Scale Services on Azure Cloud Services](https://msdn.microsoft.com/library/windowsazure/jj717232.aspx).</span></span> <span data-ttu-id="ee4b7-166">Mark Simms 和 Michael Thomassy 詘躩裛。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-166">White paper by Mark Simms and Michael Thomassy.</span></span> <span data-ttu-id="ee4b7-167">類似於保全數列但作法的詳細說明。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-167">Similar to the Failsafe series but goes into more how-to details.</span></span> <span data-ttu-id="ee4b7-168">請參閱 [遙測和診斷] 區段。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-168">See the Telemetry and Diagnostics section.</span></span>
- <span data-ttu-id="ee4b7-169">[Failsafe:具有恢復功能雲端架構指引](https://msdn.microsoft.com/library/windowsazure/jj853352.aspx)。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-169">[Failsafe: Guidance for Resilient Cloud Architectures](https://msdn.microsoft.com/library/windowsazure/jj853352.aspx).</span></span> <span data-ttu-id="ee4b7-170">Marc Mercuri、 Ulrich Homann 和 Andrew Townhill 詘躩裛。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-170">White paper by Marc Mercuri, Ulrich Homann, and Andrew Townhill.</span></span> <span data-ttu-id="ee4b7-171">FailSafe 影片系列的網頁版本。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-171">Web page version of the FailSafe video series.</span></span>
- <span data-ttu-id="ee4b7-172">[Microsoft Patterns and Practices-Azure 指引](https://msdn.microsoft.com/library/dn568099.aspx)。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-172">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/dn568099.aspx).</span></span> <span data-ttu-id="ee4b7-173">請參閱 < 重試模式、 排程器代理程式監督員模式。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-173">See Retry pattern, Scheduler Agent Supervisor pattern.</span></span>
- <span data-ttu-id="ee4b7-174">[Azure SQL Database 中的容錯](https://blogs.msdn.com/b/windowsazure/archive/2012/07/30/fault-tolerance-in-windows-azure-sql-database.aspx)。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-174">[Fault-tolerance in Azure SQL Database](https://blogs.msdn.com/b/windowsazure/archive/2012/07/30/fault-tolerance-in-windows-azure-sql-database.aspx).</span></span> <span data-ttu-id="ee4b7-175">Tony Petrossian 部落格文章。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-175">Blog post by Tony Petrossian.</span></span>
- <span data-ttu-id="ee4b7-176">[Entity Framework-連接恢復 / 重試邏輯](https://msdn.microsoft.com/data/dn456835)。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-176">[Entity Framework - Connection Resiliency / Retry Logic](https://msdn.microsoft.com/data/dn456835).</span></span> <span data-ttu-id="ee4b7-177">如何使用和自訂暫時性錯誤處理功能的 Entity Framework 6。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-177">How to use and customize the transient fault handling feature of Entity Framework 6.</span></span>
- <span data-ttu-id="ee4b7-178">[連線恢復功能和命令攔截與 ASP.NET MVC 應用程式中的 Entity Framework](../../../../mvc/overview/getting-started/getting-started-with-ef-using-mvc/connection-resiliency-and-command-interception-with-the-entity-framework-in-an-asp-net-mvc-application.md)。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-178">[Connection Resiliency and Command Interception with the Entity Framework in an ASP.NET MVC Application](../../../../mvc/overview/getting-started/getting-started-with-ef-using-mvc/connection-resiliency-and-command-interception-with-the-entity-framework-in-an-asp-net-mvc-application.md).</span></span> <span data-ttu-id="ee4b7-179">第四個九段式教學課程系列中，示範如何設定 SQL database 的 EF 6 連接恢復功能。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-179">Fourth in a nine-part tutorial series, shows how to set up the EF 6 connection resilience feature for SQL Database.</span></span>

<span data-ttu-id="ee4b7-180">視訊</span><span class="sxs-lookup"><span data-stu-id="ee4b7-180">Videos</span></span>

- <span data-ttu-id="ee4b7-181">[FailSafe:建置可擴充、 彈性的雲端服務](https://channel9.msdn.com/Series/FailSafe)。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-181">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="ee4b7-182">Ulrich Homann、 Marc Mercuri 和 Mark Simms、 包含九部組件系列。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-182">Nine-part series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="ee4b7-183">提供高階的概念和架構原則非常可存取且有趣的方式，取自 Microsoft 客戶諮詢團隊 (CAT) 體驗，與實際客戶的劇本。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-183">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="ee4b7-184">在第 3 集開始 40:55 斷路器的討論，請參閱。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-184">See the discussion of circuit breakers in episode 3 starting at 40:55.</span></span>
- <span data-ttu-id="ee4b7-185">[巨量的建置：從 Azure 的客戶-第 ii 部分學習課程](https://channel9.msdn.com/Events/Build/2012/3-030)。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-185">[Building Big: Lessons learned from Azure customers - Part II](https://channel9.msdn.com/Events/Build/2012/3-030).</span></span> <span data-ttu-id="ee4b7-186">Mark Simms 討論有關設計的失敗，暫時性錯誤處理與檢測所有項目。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-186">Mark Simms talks about designing for failure, transient fault handling, and instrumenting everything.</span></span>

<span data-ttu-id="ee4b7-187">程式碼範例</span><span class="sxs-lookup"><span data-stu-id="ee4b7-187">Code sample</span></span>

- <span data-ttu-id="ee4b7-188">[雲端服務基本概念，在 Azure 中的](https://code.msdn.microsoft.com/Cloud-Service-Fundamentals-4ca72649)。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-188">[Cloud Service Fundamentals in Azure](https://code.msdn.microsoft.com/Cloud-Service-Fundamentals-4ca72649).</span></span> <span data-ttu-id="ee4b7-189">Microsoft Azure 客戶諮詢小組會示範如何使用所建立的應用程式範例[Enterprise Library 暫時性錯誤處理區塊](http://nuget.org/packages/EnterpriseLibrary.TransientFaultHandling/)(TFH)。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-189">Sample application created by the Microsoft Azure Customer Advisory Team that demonstrates how to use the [Enterprise Library Transient Fault Handling Block](http://nuget.org/packages/EnterpriseLibrary.TransientFaultHandling/) (TFH).</span></span> <span data-ttu-id="ee4b7-190">如需詳細資訊，請參閱 <<c0> [ 雲端服務基礎資料存取層 – 暫時性錯誤處理](https://social.technet.microsoft.com/wiki/contents/articles/18665.cloud-service-fundamentals-data-access-layer-transient-fault-handling.aspx)。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-190">For more information, see [Cloud Service Fundamentals Data Access Layer – Transient Fault Handling](https://social.technet.microsoft.com/wiki/contents/articles/18665.cloud-service-fundamentals-data-access-layer-transient-fault-handling.aspx).</span></span> <span data-ttu-id="ee4b7-191">TFH 建議用於直接 （不使用 Entity Framework） 中使用 ADO.NET 進行資料庫存取。</span><span class="sxs-lookup"><span data-stu-id="ee4b7-191">TFH is recommended for database access using ADO.NET directly (without using Entity Framework).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="ee4b7-192">[上一頁](monitoring-and-telemetry.md)
> [下一頁](distributed-caching.md)</span><span class="sxs-lookup"><span data-stu-id="ee4b7-192">[Previous](monitoring-and-telemetry.md)
[Next](distributed-caching.md)</span></span>
