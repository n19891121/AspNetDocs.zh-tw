---
title: ASP.NET Core 2.2 的新功能
author: tdykstra
description: 了解 ASP.NET Core 2.2 的新功能。
ms.author: tdykstra
ms.custom: mvc
ms.date: 12/18/2018
uid: aspnetcore-2.2
ms.openlocfilehash: 6dcdf71ec5271690718dd1fe750a9a74d498a0f8
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/01/2019
ms.locfileid: "57045105"
---
# <a name="whats-new-in-aspnet-core-22"></a><span data-ttu-id="f5f8a-103">ASP.NET Core 2.2 的新功能</span><span class="sxs-lookup"><span data-stu-id="f5f8a-103">What's new in ASP.NET Core 2.2</span></span>

<span data-ttu-id="f5f8a-104">本文會重點說明 ASP.NET Core 2.2 最重要的變更，附有相關文件的連結。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-104">This article highlights the most significant changes in ASP.NET Core 2.2, with links to relevant documentation.</span></span>

## <a name="open-api-analyzers--conventions"></a><span data-ttu-id="f5f8a-105">Open API 分析器與慣例</span><span class="sxs-lookup"><span data-stu-id="f5f8a-105">Open API Analyzers & Conventions</span></span>

<span data-ttu-id="f5f8a-106">Open API (也稱為 Swagger) 是用來描述 REST API 的語言無關規格。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-106">Open API (also known as Swagger) is a language-agnostic specification for describing REST APIs.</span></span> <span data-ttu-id="f5f8a-107">Open API 生態系統中已有工具，可讓您使用此規格來探索、測試和產生用戶端程式碼。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-107">The Open API ecosystem has tools that allow for discovering, testing, and producing client code using the specification.</span></span> <span data-ttu-id="f5f8a-108">您可以透過社群導向專案 (例如 [NSwag](https://github.com/RSuter/NSwag) 和 [Swashbuckle.AspNetCore](https://github.com/domaindrivendev/Swashbuckle.AspNetCore))，在 ASP.NET Core MVC 中產生和視覺化 Open API 文件。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-108">Support for generating and visualizing Open API documents in ASP.NET Core MVC is provided via community driven projects such as [NSwag](https://github.com/RSuter/NSwag), and [Swashbuckle.AspNetCore](https://github.com/domaindrivendev/Swashbuckle.AspNetCore).</span></span> <span data-ttu-id="f5f8a-109">ASP.NET Core 2.2 提供改良的工具和執行階段體驗來建立 Open API 文件。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-109">ASP.NET Core 2.2 provides improved tooling and runtime experiences for creating Open API documents.</span></span>

<span data-ttu-id="f5f8a-110">如需詳細資訊，請參閱下列資源：</span><span class="sxs-lookup"><span data-stu-id="f5f8a-110">For more information, see the following resources:</span></span>

* <xref:web-api/advanced/analyzers>
* <xref:web-api/advanced/conventions>
* <span data-ttu-id="f5f8a-111">[ASP.NET Core 2.2.0-preview1:Open API Analyzers & Conventions](https://blogs.msdn.microsoft.com/webdev/2018/08/23/asp-net-core-2-20-preview1-open-api-analyzers-conventions/) (ASP.NET Core 2.2.0-preview1：Open API 分析器與慣例)</span><span class="sxs-lookup"><span data-stu-id="f5f8a-111">[ASP.NET Core 2.2.0-preview1: Open API Analyzers & Conventions](https://blogs.msdn.microsoft.com/webdev/2018/08/23/asp-net-core-2-20-preview1-open-api-analyzers-conventions/)</span></span>

## <a name="problem-details-support"></a><span data-ttu-id="f5f8a-112">問題詳細資料支援</span><span class="sxs-lookup"><span data-stu-id="f5f8a-112">Problem details support</span></span>

<span data-ttu-id="f5f8a-113">ASP.NET Core 2.1 引進了 `ProblemDetails`，它採用 [RFC 7807](https://tools.ietf.org/html/rfc7807) 規格在 HTTP 回應中包含錯誤的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-113">ASP.NET Core 2.1 introduced `ProblemDetails`, based on the [RFC 7807](https://tools.ietf.org/html/rfc7807) specification for carrying details of an error with an HTTP Response.</span></span> <span data-ttu-id="f5f8a-114">在 2.2 中，`ProblemDetails` 是對具有 `ApiControllerAttribute` 屬性之控制器中用戶端錯誤碼的標準回應。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-114">In 2.2, `ProblemDetails` is the standard response for client error codes in controllers attributed with `ApiControllerAttribute`.</span></span> <span data-ttu-id="f5f8a-115">傳回用戶端錯誤狀態碼 (4xx) 的 `IActionResult` 現在會傳回 `ProblemDetails` 主體。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-115">An `IActionResult` returning a client error status code (4xx) now returns a `ProblemDetails` body.</span></span> <span data-ttu-id="f5f8a-116">結果中也會包含相互關聯識別碼，可用來透過要求記錄檔與錯誤相互關聯。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-116">The result also includes a correlation ID that can be used to correlate the error using request logs.</span></span> <span data-ttu-id="f5f8a-117">對於用戶端錯誤，`ProducesResponseType` 預設會使用 `ProblemDetails` 作為回應類型。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-117">For client errors, `ProducesResponseType` defaults to using `ProblemDetails` as the response type.</span></span> <span data-ttu-id="f5f8a-118">這會記載於使用 NSwag 或 Swashbuckle.AspNetCore 產生的 Open API/Swagger 輸出中。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-118">This is documented in Open API / Swagger output generated using NSwag or Swashbuckle.AspNetCore.</span></span>

## <a name="endpoint-routing"></a><span data-ttu-id="f5f8a-119">端點路由</span><span class="sxs-lookup"><span data-stu-id="f5f8a-119">Endpoint Routing</span></span>

<span data-ttu-id="f5f8a-120">ASP.NET Core 2.2 使用新的「端點路由」系統來改善要求的分派。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-120">ASP.NET Core 2.2 uses a new *endpoint routing* system for improved dispatching of requests.</span></span> <span data-ttu-id="f5f8a-121">其變更包括新的連結產生 API 成員和路由參數轉換器。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-121">The changes include new link generation API members and route parameter transformers.</span></span>

<span data-ttu-id="f5f8a-122">如需詳細資訊，請參閱下列資源：</span><span class="sxs-lookup"><span data-stu-id="f5f8a-122">For more information, see the following resources:</span></span>

* <span data-ttu-id="f5f8a-123">[Endpoint routing in 2.2](https://blogs.msdn.microsoft.com/webdev/2018/08/27/asp-net-core-2-2-0-preview1-endpoint-routing/) (2.2 中的端點路由)</span><span class="sxs-lookup"><span data-stu-id="f5f8a-123">[Endpoint routing in 2.2](https://blogs.msdn.microsoft.com/webdev/2018/08/27/asp-net-core-2-2-0-preview1-endpoint-routing/)</span></span>
* <span data-ttu-id="f5f8a-124">[路由參數轉換器](https://www.hanselman.com/blog/ASPNETCore22ParameterTransformersForCleanURLGenerationAndSlugsInRazorPagesOrMVC.aspx) (請參閱＜Routing＞(路由) 一節)</span><span class="sxs-lookup"><span data-stu-id="f5f8a-124">[Route parameter transformers](https://www.hanselman.com/blog/ASPNETCore22ParameterTransformersForCleanURLGenerationAndSlugsInRazorPagesOrMVC.aspx) (see **Routing** section)</span></span>
* [<span data-ttu-id="f5f8a-125">IRouter 路由與端點路由之間的差異</span><span class="sxs-lookup"><span data-stu-id="f5f8a-125">Differences between IRouter- and endpoint-based routing</span></span>](xref:fundamentals/routing?view=aspnetcore-2.2#differences-from-earlier-versions-of-routing)

## <a name="health-checks"></a><span data-ttu-id="f5f8a-126">健康狀態檢查</span><span class="sxs-lookup"><span data-stu-id="f5f8a-126">Health checks</span></span>

<span data-ttu-id="f5f8a-127">新的健康狀態檢查服務可讓您更輕鬆地在需要健康狀態檢查的環境中 (例如 Kubernetes) 使用 ASP.NET Core。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-127">A new health checks service makes it easier to use ASP.NET Core in environments that require health checks, such as Kubernetes.</span></span> <span data-ttu-id="f5f8a-128">健康狀態檢查包括中介軟體，以及定義 `IHealthCheck` 抽象概念和服務的一組程式庫。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-128">Health checks includes middleware and a set of libraries that define an `IHealthCheck` abstraction and service.</span></span>

<span data-ttu-id="f5f8a-129">容器協調器或負載平衡器使用健康狀態檢查，來快速判斷系統是否正常回應要求。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-129">Health checks are used by a container orchestrator or load balancer to quickly determine if a system is responding to requests normally.</span></span> <span data-ttu-id="f5f8a-130">容器協調器可能會暫停輪流部署或重新啟動容器，來回應失敗的健康狀態檢查。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-130">A container orchestrator might respond to a failing health check by halting a rolling deployment or restarting a container.</span></span> <span data-ttu-id="f5f8a-131">負載平衡器可能會從服務的失敗執行個體路由出流量，來回應健康狀態檢查。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-131">A load balancer might respond to a health check by routing traffic away from the failing instance of the service.</span></span>

<span data-ttu-id="f5f8a-132">應用程式會將健康狀態檢查公開為監控系統所使用的 HTTP 端點。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-132">Health checks are exposed by an application as an HTTP endpoint used by monitoring systems.</span></span> <span data-ttu-id="f5f8a-133">您可以針對各種即時監控案例和監控系統來設定健康狀態檢查。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-133">Health checks can be configured for a variety of real-time monitoring scenarios and monitoring systems.</span></span> <span data-ttu-id="f5f8a-134">健康狀態檢查服務與 [BeatPulse 專案](https://github.com/Xabaril/BeatPulse)整合。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-134">The health checks service integrates with the [BeatPulse project](https://github.com/Xabaril/BeatPulse).</span></span> <span data-ttu-id="f5f8a-135">這可讓您更輕鬆地新增數十個熱門系統和相依性的檢查。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-135">which makes it easier to add checks for dozens of popular systems and dependencies.</span></span>

<span data-ttu-id="f5f8a-136">如需詳細資訊，請參閱 [ASP.NET Core 中的健康狀態檢查](xref:host-and-deploy/health-checks)。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-136">For more information, see [Health checks in ASP.NET Core](xref:host-and-deploy/health-checks).</span></span>

## <a name="http2-in-kestrel"></a><span data-ttu-id="f5f8a-137">Kestrel 中的 HTTP/2</span><span class="sxs-lookup"><span data-stu-id="f5f8a-137">HTTP/2 in Kestrel</span></span>

<span data-ttu-id="f5f8a-138">ASP.NET Core 2.2 新增 HTTP/2 支援。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-138">ASP.NET Core 2.2 adds support for HTTP/2.</span></span> 

<span data-ttu-id="f5f8a-139">HTTP/2 是 HTTP 通訊協定的主要版本。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-139">HTTP/2 is a major revision of the HTTP protocol.</span></span> <span data-ttu-id="f5f8a-140">一些值得注意的 HTTP/2 功能包括支援標頭壓縮，以及透過單一連線進行完全多工的資料流。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-140">Some of the notable features of HTTP/2 are support for header compression and fully multiplexed streams over a single connection.</span></span> <span data-ttu-id="f5f8a-141">雖然 HTTP/2 會保留 HTTP 的語意 (HTTP 標頭、方法等)，但它是自 HTTP/1.x 以來的重大變更，對於此資料如何進行框架處理及透過網路傳送皆有所著墨。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-141">While HTTP/2 preserves HTTP’s semantics (HTTP headers, methods, etc) it's a breaking change from HTTP/1.x on how this data is framed and sent over the wire.</span></span>

<span data-ttu-id="f5f8a-142">這項框架處理變更導致伺服器和用戶端必須交涉所使用的通訊協定版本。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-142">As a consequence of this change in framing, servers and clients need to negotiate the protocol version used.</span></span> <span data-ttu-id="f5f8a-143">Application-Layer Protocol Negotiation (ALPN) 是 TLS 延伸模組，可讓伺服器和用戶端交涉在其 TLS 信號交換過程中所使用的通訊協定版本。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-143">Application-Layer Protocol Negotiation (ALPN) is a TLS extension that allows the server and client to negotiate the protocol version used as part of their TLS handshake.</span></span> <span data-ttu-id="f5f8a-144">雖然您可能事先知道伺服器與用戶端之間的通訊協定，但所有主要瀏覽器都支援 ALPN 作為建立 HTTP/2 連線的唯一方式。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-144">While it is possible to have prior knowledge between the server and the client on the protocol, all major browsers support ALPN as the only way to establish an HTTP/2 connection.</span></span>

<span data-ttu-id="f5f8a-145">如需詳細資訊，請參閱 [HTTP/2 支援](xref:fundamentals/servers/index?view=aspnetcore-2.2#http2-support)。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-145">For more information, see [HTTP/2 support](xref:fundamentals/servers/index?view=aspnetcore-2.2#http2-support).</span></span>

## <a name="kestrel-configuration"></a><span data-ttu-id="f5f8a-146">Kestrel 組態</span><span class="sxs-lookup"><span data-stu-id="f5f8a-146">Kestrel configuration</span></span>

<span data-ttu-id="f5f8a-147">在舊版的 ASP.NET Core 中，Kestrel 選項是透過呼叫 `UseKestrel` 設定。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-147">In earlier versions of ASP.NET Core, Kestrel options are configured by calling `UseKestrel`.</span></span> <span data-ttu-id="f5f8a-148">在 2.2 中，Kestrel 選項是透過在主機產生器上呼叫 `ConfigureKestrel` 設定。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-148">In 2.2, Kestrel options are configured by calling `ConfigureKestrel` on the host builder.</span></span> <span data-ttu-id="f5f8a-149">這項變更解決了同處理序裝載的 `IServer` 註冊順序問題。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-149">This change resolves an issue with the order of `IServer` registrations for in-process hosting.</span></span> <span data-ttu-id="f5f8a-150">如需詳細資訊，請參閱下列資源：</span><span class="sxs-lookup"><span data-stu-id="f5f8a-150">For more information, see the following resources:</span></span>

* <span data-ttu-id="f5f8a-151">[Mitigate UseIIS conflict](https://github.com/aspnet/KestrelHttpServer/issues/2760) (降低 UseIIS 衝突)</span><span class="sxs-lookup"><span data-stu-id="f5f8a-151">[Mitigate UseIIS conflict](https://github.com/aspnet/KestrelHttpServer/issues/2760)</span></span>
* [<span data-ttu-id="f5f8a-152">使用 ConfigureKestrel 設定 Kestrel 伺服器選項</span><span class="sxs-lookup"><span data-stu-id="f5f8a-152">Configure Kestrel server options with ConfigureKestrel</span></span>](xref:fundamentals/servers/kestrel?view=aspnetcore-2.2#how-to-use-kestrel-in-aspnet-core-apps)

## <a name="iis-in-process-hosting"></a><span data-ttu-id="f5f8a-153">IIS 同處理序裝載</span><span class="sxs-lookup"><span data-stu-id="f5f8a-153">IIS in-process hosting</span></span>

<span data-ttu-id="f5f8a-154">在舊版的 ASP.NET Core 中，IIS 是作為反向 Proxy。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-154">In earlier versions of ASP.NET Core, IIS serves as a reverse proxy.</span></span> <span data-ttu-id="f5f8a-155">在 2.2 中，ASP.NET Core 模組可啟動 CoreCLR，並在 IIS 背景工作處理序 (*w3wp.exe*) 內裝載應用程式。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-155">In 2.2, the ASP.NET Core Module can boot the CoreCLR and host an app inside the IIS worker process (*w3wp.exe*).</span></span> <span data-ttu-id="f5f8a-156">同處理序裝載以 IIS 執行時可改善效能和診斷。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-156">In-process hosting provides performance and diagnostic gains when running with IIS.</span></span>

<span data-ttu-id="f5f8a-157">如需詳細資訊，請參閱 [IIS 的同處理序裝載](xref:host-and-deploy/aspnet-core-module?view=aspnetcore-2.2#in-process-hosting-model)。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-157">For more information, see [in-process hosting for IIS](xref:host-and-deploy/aspnet-core-module?view=aspnetcore-2.2#in-process-hosting-model).</span></span>

## <a name="signalr-java-client"></a><span data-ttu-id="f5f8a-158">SignalR Java 用戶端</span><span class="sxs-lookup"><span data-stu-id="f5f8a-158">SignalR Java client</span></span>

<span data-ttu-id="f5f8a-159">ASP.NET Core 2.2 引進適用於 SignalR 的 Java 用戶端。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-159">ASP.NET Core 2.2 introduces a Java Client for SignalR.</span></span> <span data-ttu-id="f5f8a-160">此用戶端支援從 Java 程式碼連線到 ASP.NET Core SignalR 伺服器，包括 Android 應用程式。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-160">This client supports connecting to an ASP.NET Core SignalR Server from Java code, including Android apps.</span></span>

<span data-ttu-id="f5f8a-161">如需詳細資訊，請參閱 [ASP.NET Core SignalR Java 用戶端](https://docs.microsoft.com/aspnet/core/signalr/java-client?view=aspnetcore-2.2)。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-161">For more information, see [ASP.NET Core SignalR Java client](https://docs.microsoft.com/aspnet/core/signalr/java-client?view=aspnetcore-2.2).</span></span>

## <a name="cors-improvements"></a><span data-ttu-id="f5f8a-162">CORS 改善</span><span class="sxs-lookup"><span data-stu-id="f5f8a-162">CORS improvements</span></span>

<span data-ttu-id="f5f8a-163">在舊版的 ASP.NET Core 中，CORS 中介軟體允許傳送 `Accept`、`Accept-Language`、`Content-Language` 和 `Origin` 標頭，無論 `CorsPolicy.Headers` 中設定的值為何。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-163">In earlier versions of ASP.NET Core, CORS Middleware allows `Accept`, `Accept-Language`, `Content-Language`, and `Origin` headers to be sent regardless of the values configured in `CorsPolicy.Headers`.</span></span> <span data-ttu-id="f5f8a-164">在 2.2 中，只有 `Access-Control-Request-Headers` 中傳送的標頭與 `WithHeaders` 中指定的標頭完全相符時，才可能符合 CORS 中介軟體原則。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-164">In 2.2, a CORS Middleware policy match is only possible when the headers sent in `Access-Control-Request-Headers` exactly match the headers stated in `WithHeaders`.</span></span>

<span data-ttu-id="f5f8a-165">如需詳細資訊，請參閱 [CORS 中介軟體](xref:security/cors?view=aspnetcore-2.2#set-the-allowed-request-headers)。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-165">For more information, see [CORS Middleware](xref:security/cors?view=aspnetcore-2.2#set-the-allowed-request-headers).</span></span>

## <a name="response-compression"></a><span data-ttu-id="f5f8a-166">回應壓縮</span><span class="sxs-lookup"><span data-stu-id="f5f8a-166">Response compression</span></span>

<span data-ttu-id="f5f8a-167">ASP.NET Core 2.2 可以使用 [Brotli 壓縮格式](https://tools.ietf.org/html/rfc7932)來壓縮回應。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-167">ASP.NET Core 2.2 can compress responses with the [Brotli compression format](https://tools.ietf.org/html/rfc7932).</span></span>

<span data-ttu-id="f5f8a-168">如需詳細資訊，請參閱[回應壓縮中介軟體支援 Brotli 壓縮](xref:performance/response-compression?view=aspnetcore-2.2#brotli-compression-provider)。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-168">For more information, see [Response Compression Middleware supports Brotli compression](xref:performance/response-compression?view=aspnetcore-2.2#brotli-compression-provider).</span></span>

## <a name="project-templates"></a><span data-ttu-id="f5f8a-169">專案範本</span><span class="sxs-lookup"><span data-stu-id="f5f8a-169">Project templates</span></span>

<span data-ttu-id="f5f8a-170">ASP.NET Core Web 專案範本已更新為 [Bootstrap 4](https://getbootstrap.com/docs/4.1/migration/) 和 [Angular 6](https://blog.angular.io/version-6-of-angular-now-available-cc56b0efa7a4)。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-170">ASP.NET Core web project templates were updated to [Bootstrap 4](https://getbootstrap.com/docs/4.1/migration/) and [Angular 6](https://blog.angular.io/version-6-of-angular-now-available-cc56b0efa7a4).</span></span> <span data-ttu-id="f5f8a-171">新的外觀看起來比較簡單，因此更容易看出應用程式的重要結構。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-171">The new look is visually simpler and makes it easier to see the important structures of the app.</span></span>

![Home 或 Index 頁面](~/tutorials/razor-pages/razor-pages-start/_static/home2.2.png)

## <a name="validation-performance"></a><span data-ttu-id="f5f8a-173">驗證效能</span><span class="sxs-lookup"><span data-stu-id="f5f8a-173">Validation performance</span></span>

<span data-ttu-id="f5f8a-174">MVC 的驗證系統設計成可延伸且具有彈性，因此您可以根據每個要求判斷要套用至指定模型的驗證程式。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-174">MVC’s validation system is designed to be extensible and flexible, allowing you to determine on a per request basis which validators apply to a given model.</span></span> <span data-ttu-id="f5f8a-175">這有助於撰寫複雜的驗證提供者。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-175">This is great for authoring complex validation providers.</span></span> <span data-ttu-id="f5f8a-176">不過，在最常見的情況下，應用程式只會使用內建驗證程式，而不需要此額外的彈性。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-176">However, in the most common case an application only uses the built-in validators and don’t require this extra flexibility.</span></span> <span data-ttu-id="f5f8a-177">內建驗證程式包括 DataAnnotations (例如 [Required] 和 [StringLength]) 以及 `IValidatableObject`。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-177">Built-in validators include DataAnnotations such as [Required] and [StringLength], and `IValidatableObject`.</span></span>

<span data-ttu-id="f5f8a-178">在 ASP.NET Core 2.2 中，若 MVC 判斷指定的模型圖形不需要驗證，則會跳過驗證。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-178">In ASP.NET Core 2.2, MVC can short-circuit validation if it determines that a given model graph doesn't require validation.</span></span> <span data-ttu-id="f5f8a-179">當驗證無法驗證或沒有任何驗證程式的模型時，跳過驗證可大幅改善效能。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-179">Skipping validation results in significant improvements when validating models that can't or don't have any validators.</span></span> <span data-ttu-id="f5f8a-180">這包括諸如基本類型集合 (例如 `byte[]`、`string[]`、`Dictionary<string, string>`) 的物件，或沒有許多驗證程式的複雜物件圖形。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-180">This includes objects such as collections of primitives (such as `byte[]`, `string[]`, `Dictionary<string, string>`), or complex object graphs without many validators.</span></span>

## <a name="http-client-performance"></a><span data-ttu-id="f5f8a-181">HTTP 用戶端效能</span><span class="sxs-lookup"><span data-stu-id="f5f8a-181">HTTP Client performance</span></span>

<span data-ttu-id="f5f8a-182">在 ASP.NET Core 2.2 中，由於降低連接集區鎖定競爭情況，因此改善了 `SocketsHttpHandler` 的效能。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-182">In ASP.NET Core 2.2, the performance of `SocketsHttpHandler` was improved by reducing connection pool locking contention.</span></span> <span data-ttu-id="f5f8a-183">針對進行許多傳出 HTTP 要求的應用程式 (例如某些微服務架構)，輸送量已獲得改善。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-183">For apps that make many outgoing HTTP requests, such as some microservices architectures, throughput is improved.</span></span> <span data-ttu-id="f5f8a-184">在負載情況下，`HttpClient` 輸送量在 Linux 上可提升高達 60%，在 Windows 上可提升高達 20%。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-184">Under load, `HttpClient` throughput can be improved by up to 60% on Linux and 20% on Windows.</span></span>

<span data-ttu-id="f5f8a-185">如需詳細資訊，請參閱[已做出這項改善的提取要求](https://github.com/dotnet/corefx/pull/32568)。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-185">For more information, see [the pull request that made this improvement](https://github.com/dotnet/corefx/pull/32568).</span></span>

## <a name="additional-information"></a><span data-ttu-id="f5f8a-186">其他資訊</span><span class="sxs-lookup"><span data-stu-id="f5f8a-186">Additional information</span></span>

<span data-ttu-id="f5f8a-187">如需完整的變更清單，請參閱 [ASP.NET Core 2.2 版本資訊](https://github.com/aspnet/Home/releases/tag/2.2.0)。</span><span class="sxs-lookup"><span data-stu-id="f5f8a-187">For the complete list of changes, see the [ASP.NET Core 2.2 Release Notes](https://github.com/aspnet/Home/releases/tag/2.2.0).</span></span>
